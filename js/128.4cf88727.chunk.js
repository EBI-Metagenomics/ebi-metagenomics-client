"use strict";(self.webpackChunkmgportalv2=self.webpackChunkmgportalv2||[]).push([[128],{1274:(e,t,a)=>{a.d(t,{Z:()=>r});var l=a(7294),n=a(6974);const r=({hash:e,isDefault:t=!1,children:a})=>{const r=(0,n.TH)(),s=(0,n.s0)();return(0,l.useEffect)((()=>{""===r.hash&&""!==e&&t&&s(e,{replace:!0})})),r.hash===e?l.createElement(l.Fragment,null,a):null}},1699:(e,t,a)=>{a.d(t,{Z:()=>s});var l=a(7294),n=a(7838);const r=()=>{window.location.reload()},s=({error:e})=>e&&e.type!==n.ZB.NullURL?l.createElement("div",{className:"vf-box vf-box-theme--primary vf-box--easy",style:{backgroundColor:"lemonchiffon"}},l.createElement("h3",{className:"vf-box__heading"},l.createElement("span",{className:"icon icon-common icon-exclamation-triangle"})," Error Fetching Data"),l.createElement("p",{className:"vf-box__text"},(null==e?void 0:e.type)===n.ZB.FetchError&&`There were problems with the request. [${e.error}]`,(null==e?void 0:e.type)===n.ZB.NotOK&&`The response from the server was not OK [Status: ${e.status}].`,(null==e?void 0:e.type)===n.ZB.JSONError&&`The recovered resource didn't follow the expected format [${e.error}].`),l.createElement("div",{className:"mg-right"},l.createElement("button",{type:"button",className:"vf-button vf-button--tertiary vf-button--sm ",onClick:r},"Refresh"))):null},3415:(e,t,a)=>{a.d(t,{Z:()=>n});var l=a(7294);const n=({list:e})=>l.createElement("div",{className:"vf-grid vf-grid__col-2",style:{gridTemplateColumns:"1fr 2fr",rowGap:"0.5rem"}},e.map((({key:e,value:t})=>l.createElement(l.Fragment,{key:e},l.createElement("div",{style:{textAlign:"right"}},e,":"),l.createElement("div",null,"string"==typeof t?t:l.createElement(t,null))))))},4821:(e,t,a)=>{a.d(t,{Z:()=>s});var l=a(7294),n=a(6974),r=a(9711);const s=({tabs:e})=>{const t=(0,n.TH)();return l.createElement("div",{className:"vf-tabs mg-search-tabs"},l.createElement("ul",{className:"vf-tabs__list"},e.map((({label:e,to:a})=>l.createElement("li",{className:"vf-tabs__item",key:a},l.createElement(r.rU,{className:"vf-tabs__link "+(a===t.pathname||a.startsWith("#")&&a===t.hash||"#"===a&&""===t.hash?"is-active":""),to:a},"string"==typeof e?e:l.createElement(e,null)))))))}},964:(e,t,a)=>{a.d(t,{Z:()=>n});var l=a(6974);const n=()=>{const e=(0,l.TH)();let{pathname:t}=e;t.trim().endsWith("/")&&(t=t.trim().slice(0,-1));const a=t.split("/");return null==a?void 0:a[a.length-1]}},2128:(e,t,a)=>{a.r(t),a.d(t,{default:()=>k});var l=a(7294),n=a(8110),r=a(964),s=a(402),i=a(1699),o=a(4821),m=a(3415),c=a(9711);const u=({data:e})=>{var t,a,n,r,s,i,o,u,d,v,p,b,h,f;return l.createElement("section",null,l.createElement("div",{className:"vf-stack"},l.createElement("details",{open:!0},l.createElement("summary",null,l.createElement("b",null,"Description")),l.createElement(m.Z,{list:[{key:"Study",value:(null===(n=null===(a=null===(t=e.relationships)||void 0===t?void 0:t.study)||void 0===a?void 0:a.data)||void 0===n?void 0:n.id)&&(()=>l.createElement(c.rU,{to:`/studies/${e.relationships.study.data.id}`},e.relationships.study.data.id))},{key:"Sample",value:(null===(i=null===(s=null===(r=e.relationships)||void 0===r?void 0:r.sample)||void 0===s?void 0:s.data)||void 0===i?void 0:i.id)&&(()=>l.createElement(c.rU,{to:`/samples/${e.relationships.sample.data.id}`},e.relationships.sample.data.id))},{key:"Assembly",value:(null===(d=null===(u=null===(o=e.relationships)||void 0===o?void 0:o.assembly)||void 0===u?void 0:u.data)||void 0===d?void 0:d.id)&&(f=e.attributes["experiment-type"],["assembly","hybrid_assembly","long_reads_assembly"].includes(f))&&(()=>l.createElement(c.rU,{to:`/assemblies/${e.relationships.assembly.data.id}`},e.relationships.assembly.data.id))},{key:"Run",value:(null===(b=null===(p=null===(v=e.relationships)||void 0===v?void 0:v.run)||void 0===p?void 0:p.data)||void 0===b?void 0:b.id)&&(()=>l.createElement(c.rU,{to:`/runs/${e.relationships.run.data.id}`},e.relationships.run.data.id))},{key:"Pipeline version",value:(null===(h=e.attributes)||void 0===h?void 0:h["pipeline-version"])&&(()=>l.createElement(c.rU,{to:`/pipelines/${e.attributes["pipeline-version"]}`},e.attributes["pipeline-version"]))}].filter((({value:e})=>!!e))})),l.createElement("details",{open:!0},l.createElement("summary",null,l.createElement("b",null,"Experiment details")),l.createElement(m.Z,{list:[{key:"Experiment type",value:e.attributes["experiment-type"]},{key:"Instrument model",value:e.attributes["instrument-model"]},{key:"Instrument platform",value:e.attributes["instrument-platform"]}].filter((({value:e})=>!!e))}))))};var d=a(8840),v=a(5708),p=a.n(v),b=a(7838);const h=({analysisData:e})=>{var t;const a=(0,l.useRef)(null),o=(0,r.Z)(),{data:m,loading:c,error:u}=(0,n.Z)(`analyses/${o}/summary`,{},{},b.B5.TSV),v="assembly"===e.attributes["experiment-type"];if(c)return l.createElement(s.Z,{size:"large"});if(u)return l.createElement(i.Z,{error:u});if(!m)return l.createElement(s.Z,null);const h=v?"contigs":"reads",f=v?"Contigs":"Reads",y=Object.fromEntries(m),E=[0,0,0,0,0],g=[0,0,0,0,0],N=[0,0,0,0,0],k={};((null===(t=e.attributes)||void 0===t?void 0:t["analysis-summary"])||[]).forEach((({key:e,value:t})=>{k[e]=t})),N[4]=Number(y.sequence_count),E[0]=Number(k["Submitted nucleotide sequences"]),E[1]=Number(k["Nucleotide sequences after format-specific filtering"]),E[2]=Number(k["Nucleotide sequences after length filtering"]),E[3]=Number(k["Nucleotide sequences after undetermined bases filtering"]),g[2]=E[1]-E[2],g[1]=E[0]-E[1],g[4]=E[3]-E[4]-N[4];const x={chart:{type:"bar",height:240},title:{text:`Number of sequence ${h} per QC step`},yAxis:{min:0,title:{text:"Count"}},xAxis:{categories:[`Initial ${h}`,"Trimming","Length filtering","Ambiguous base filtering",`${f} subsampled for QC analysis`]},plotOptions:{series:{stacking:"normal"}},credits:{enabled:!1},series:[{name:`${f} filtered out`,data:g,color:"#CCCCD3"},{name:`${f} remaining`,data:E,color:"#058DC7"},{name:`${f} after sampling`,data:N,color:"#8dc7c7"}]};return l.createElement(p(),{highcharts:d,options:x,ref:a})},f=({data:e})=>{const t="assembly"===e.attributes["experiment-type"];return l.createElement("div",{className:"vf-stack vf-stack--200"},l.createElement("p",null,"The chart below shows the number of ",t?"contigs":"reads"," ","which pass the quality control steps in the pipeline. Paired-end sequences may have been merged, in which case the initial number of"," ",t?"contigs":"reads"," may differ from the number given by ENA."),l.createElement(h,{analysisData:e}))};var y=a(1274);const E=e=>"assembly"===e.attributes["experiment-type"],g=e=>Number(e.attributes["pipeline-version"])>=5,N=e=>"amplicon"!==e.attributes["experiment-type"],k=()=>{const e=(0,r.Z)(),{data:t,loading:a,error:m}=(0,n.Z)(`analyses/${e}`,{include:"downloads"});if(a)return l.createElement(s.Z,{size:"large"});if(m)return l.createElement(i.Z,{error:m});if(!t)return l.createElement(s.Z,null);const{data:d,included:v}=t,p=[{label:"Overview",to:"#overview"},{label:"Quality control",to:"#qc"},{label:"Taxonomic analysis",to:"#taxonomic"},N(d)?{label:"Functional analysis",to:"#functional"}:null,(b=v,b.some((e=>{var t;return"Statistics"===(null===(t=null==e?void 0:e.attributes)||void 0===t?void 0:t["group-type"])}))?{label:"Abundance and comparison",to:"#abundance"}:null),E(d)&&g(d)?{label:"Pathways/Systems",to:"#path-systems"}:null,E(d)&&g(d)?{label:"Contig Viewer",to:"#contigs-viewer"}:null,{label:"Download",to:"#download"}].filter(Boolean);var b;return l.createElement("section",{className:"vf-content"},l.createElement("h2",null,"Analysis ",e),l.createElement("h4",null,l.createElement(c.rU,{to:E(d)?`/assemblies/${d.relationships.assembly.data.id}`:`/runs/${d.relationships.run.data.id}`},"Other Analyses")),l.createElement(o.Z,{tabs:p}),l.createElement("section",{className:"vf-grid"},l.createElement("div",{className:"vf-stack vf-stack--200"},l.createElement(y.Z,{hash:"#overview",isDefault:!0},l.createElement(u,{data:d})),l.createElement(y.Z,{hash:"#qc"},l.createElement(f,{data:d})))))}}}]);
//# sourceMappingURL=128.4cf88727.chunk.js.map