"use strict";(self.webpackChunkmgportalv2=self.webpackChunkmgportalv2||[]).push([[180],{3518:(e,t,a)=>{a.d(t,{Z:()=>g});var r=a(7294),n=a(9711),s=a(402),o=a(1699),l=a(6313),i=a(1055),c=a(8110),m=a(964),u=a(2119),d=a(5058);const g=({rootEndpoint:e})=>{const t=(0,m.Z)(),[a]=(0,u.B)({"studies-page":1,"studies-page_size":10,"studies-order":""},{"studies-page":Number,"studies-page_size":Number}),{data:g,loading:p,error:v,isStale:b}=(0,c.Z)(`${e}/${t}/studies`,{page:a["studies-page"],ordering:a["studies-order"],page_size:a["studies-page_size"]});if(p&&!b)return r.createElement(s.Z,{size:"small"});if(v||!g)return r.createElement(o.Z,{error:v});const f=[{id:"biome_id",Header:"Biome",accessor:e=>{var t,a;return null===(a=null===(t=e.relationships.biomes.data)||void 0===t?void 0:t[0])||void 0===a?void 0:a.id},Cell:({cell:e})=>r.createElement("span",{className:`biome_icon icon_xs ${(0,d.G)(e.value)}`,style:{float:"initial"}})},{id:"study",Header:"Study accession",accessor:"id",Cell:({cell:e})=>r.createElement(n.rU,{to:`/studies/${e.value}`},e.value)},{Header:"Name",accessor:"attributes.study-name"},{Header:"Abstract",accessor:"attributes.study-abstract",Cell:({cell:e})=>r.createElement(i.Z,{text:e.value||""})},{Header:"Samples Count",accessor:"attributes.samples-count"},{id:"last_update",Header:"Last Updated",accessor:"attributes.last-update",Cell:({cell:e})=>new Date(e.value).toLocaleDateString()}];return r.createElement(l.Z,{cols:f,data:g,initialPage:a["studies-page"]-1,initialPageSize:10,className:"mg-studies-table",loading:p,isStale:b,namespace:"studies-"})}},5478:(e,t,a)=>{a.d(t,{Z:()=>n});var r=a(7294);const n=({label:e,theme:t="primary",children:a})=>r.createElement("div",{className:"vf-grid"},r.createElement("div",{className:`vf-box vf-box--easy vf-box-theme--${t}`},r.createElement("h5",{className:"vf-box__heading"},e),r.createElement("div",{className:"vf-box__text"},a)))},6313:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(7294),n=a(9521),s=a(402),o=a(2119);const l=({currentPageIndex:e,pageIndex:t,gotoPage:a})=>e===t?r.createElement("li",{className:"vf-pagination__item vf-pagination__item--is-active"},r.createElement("span",{className:"vf-pagination__label","aria-current":"page"},r.createElement("span",{className:"vf-u-sr-only"},"Page "),e+1)):r.createElement("li",{className:"vf-pagination__item"},r.createElement("button",{type:"button",onClick:()=>a(t),className:"vf-button vf-button--link vf-pagination__link"},r.createElement("span",{className:"vf-u-sr-only"}," page"),t+1)),i=({cols:e,data:t,title:a,initialPage:i=0,initialPageSize:c=25,className:m="",namespace:u="",showPagination:d=!0,sortable:g=!1,loading:p=!1,isStale:v=!1})=>{const[b,f]=(0,o.B)({[`${u}page`]:1,[`${u}order`]:"",[`${u}page_size`]:c},{[`${u}page`]:Number,[`${u}page_size`]:Number}),{getTableProps:h,getTableBodyProps:_,headerGroups:E,rows:N,prepareRow:y,canPreviousPage:w,canNextPage:P,pageCount:k,gotoPage:S,setPageSize:x,nextPage:Z,previousPage:$,state:{pageIndex:j,pageSize:O,sortBy:z}}=(0,n.useTable)({columns:e,data:t.data,initialState:{pageIndex:i,pageSize:b[`${u}page_size`]},pageCount:t.meta.pagination.pages,manualPagination:!0,manualSortBy:!0},n.useSortBy,n.usePagination),C=(0,r.useRef)(null),[I,B]=(0,r.useState)(!1);(0,r.useEffect)((()=>{d&&b[`${u}page`]!==j+1&&(f(Object.assign(Object.assign({},b),{[`${u}page`]:j+1})),C.current&&I&&(C.current.scrollIntoView(),B(!1)))}),[d,f,j]),(0,r.useEffect)((()=>{d&&b[`${u}page_size`]!==O&&(f(Object.assign(Object.assign({},b),{[`${u}page_size`]:O})),C.current&&I&&(C.current.scrollIntoView(),B(!1)))}),[d,f,O]),(0,r.useEffect)((()=>{if(g){const e=function(e){if(!e.length)return"";const t=e[0];return`${t.desc?"-":""}${t.id.replace(/attributes./g,"").replace(/-/g,"_")}`}(z);if(e===b[`${u}order`])return;f(Object.assign(Object.assign({},b),{[`${u}order`]:e,[`${u}page`]:1})),C.current&&I&&(C.current.scrollIntoView(),B(!1))}}),[d,f,z,g]);const q=(0,r.useMemo)((()=>function(e,t){const a=t>1?[0,1]:[0],r=t>2?[Math.max(2,e-2)]:[];for(let e=r[0]+1;e<t-2&&r.length<5;e+=1)r.push(e);let n=[];return t>7?n=[t-2,t-1]:t>6&&(n=[t-1]),{startingPages:a,endingPages:n,adjacentPages:r,hasJumpFromStart:!!r.length&&r[0]>a[a.length-1]+1,hasJumpToEnd:!!n.length&&!!r.length&&n[0]>r[r.length-1]+1}}(j,k)),[j,k]),T=e=>(B(!0),S(e)),H=e=>(B(!0),x(+e.target.value));return p&&!v?r.createElement(s.Z,{size:"small"}):r.createElement("section",null,r.createElement("div",{className:"mg-table-overlay-container"},r.createElement("div",{className:p&&v?"mg-table-overlay":void 0}),r.createElement("table",Object.assign({},h,{className:`vf-table--striped ${m}`,ref:C}),a&&r.createElement("caption",{className:"vf-table__caption"},"string"==typeof a?a:r.createElement(a,null)),r.createElement("thead",{className:"vf-table__header"},E.map((e=>r.createElement("tr",Object.assign({},e.getHeaderGroupProps(),{className:"vf-table__row"}),e.headers.map((e=>r.createElement("th",Object.assign({},g&&e.canSort?e.getHeaderProps(e.getSortByToggleProps()):{key:e.id},{className:"vf-table__heading"}),e.render("Header"),g&&e.canSort&&r.createElement(r.Fragment,null,"Â ",r.createElement("span",null,e.isSorted?e.isSortedDesc?r.createElement("i",{className:"icon icon-common icon-sort-down"}):r.createElement("i",{className:"icon icon-common icon-sort-up"}):r.createElement("i",{className:"icon icon-common icon-sort"})))))))))),r.createElement("tbody",Object.assign({},_(),{className:"vf-table__body"}),N.map((e=>(y(e),r.createElement("tr",Object.assign({},e.getRowProps(),{className:"vf-table__row"}),e.cells.map((e=>r.createElement("td",Object.assign({},e.getCellProps(),{className:"vf-table__cell"}),e.render("Cell"))))))))))),d&&r.createElement("section",{className:"mg-table-footer"},r.createElement("label",{className:"vf-form__label"},"Page Size:",r.createElement("select",{className:"vf-form__select",value:b[`${u}page_size`],onBlur:H,onChange:H},[10,25,50].map((e=>r.createElement("option",{key:e,value:e},"Show ",e))))),r.createElement("nav",{className:"vf-pagination","aria-label":"Pagination"},r.createElement("ul",{className:"vf-pagination__list"},r.createElement("li",{className:"vf-pagination__item vf-pagination__item--previous-page"},r.createElement("button",{disabled:!w,type:"button",onClick:$,className:"vf-button vf-button--link vf-pagination__link"},"Previous",r.createElement("span",{className:"vf-u-sr-only"}," page"))),q.startingPages.map((e=>r.createElement(l,{key:e,currentPageIndex:j,pageIndex:e,gotoPage:T}))),q.hasJumpFromStart&&r.createElement("li",{className:"vf-pagination__item"},r.createElement("span",{className:"vf-pagination__label"},"...")),q.adjacentPages.map((e=>r.createElement(l,{key:e,currentPageIndex:j,pageIndex:e,gotoPage:T}))),q.hasJumpToEnd&&r.createElement("li",{className:"vf-pagination__item"},r.createElement("span",{className:"vf-pagination__label"},"...")),q.endingPages.map((e=>r.createElement(l,{key:e,currentPageIndex:j,pageIndex:e,gotoPage:T}))),r.createElement("li",{className:"vf-pagination__item vf-pagination__item--next-page"},r.createElement("button",{disabled:!P,type:"button",onClick:Z,className:"vf-button vf-button--link vf-pagination__link"},"Next",r.createElement("span",{className:"vf-u-sr-only"}," page")))))))}},2531:(e,t,a)=>{a.d(t,{Z:()=>n});var r=a(7294);const n=({href:e,id:t,title:a,children:n})=>r.createElement("a",{href:e,title:a,id:t,target:"_blank",rel:"noreferrer noopener",className:"mg-ext"},r.createElement("span",{className:"icon icon-common icon-external-link-alt"})," ",n)},1699:(e,t,a)=>{a.d(t,{Z:()=>o});var r=a(7294),n=a(7838);const s=()=>{window.location.reload()},o=({error:e})=>e&&e.type!==n.ZB.NullURL?r.createElement("div",{className:"vf-box vf-box-theme--primary vf-box--easy",style:{backgroundColor:"lemonchiffon"}},r.createElement("h3",{className:"vf-box__heading"},r.createElement("span",{className:"icon icon-common icon-exclamation-triangle"})," Error Fetching Data"),r.createElement("p",{className:"vf-box__text"},(null==e?void 0:e.type)===n.ZB.FetchError&&`There were problems with the request. [${e.error}]`,(null==e?void 0:e.type)===n.ZB.NotOK&&`The response from the server was not OK [Status: ${e.status}].`,(null==e?void 0:e.type)===n.ZB.JSONError&&`The recovered resource didn't follow the expected format [${e.error}].`),r.createElement("div",{className:"mg-right"},r.createElement("button",{type:"button",className:"vf-button vf-button--tertiary vf-button--sm ",onClick:s},"Refresh"))):null},3415:(e,t,a)=>{a.d(t,{Z:()=>n});var r=a(7294);const n=({list:e})=>r.createElement("div",{className:"vf-grid vf-grid__col-2",style:{gridTemplateColumns:"1fr 2fr",rowGap:"0.5rem"}},e.map((({key:e,value:t})=>r.createElement(r.Fragment,{key:e},r.createElement("div",{style:{textAlign:"right"}},e,":"),r.createElement("div",null,"string"==typeof t?t:r.createElement(t,null))))))},1055:(e,t,a)=>{a.d(t,{Z:()=>n});var r=a(7294);const n=({text:e,maxLength:t=250})=>r.createElement(r.Fragment,null,e.substring(0,t),e.length>=t&&"...")},2119:(e,t,a)=>{a.d(t,{B:()=>o});var r=a(7294),n=a(6974);const s=(e,t,a)=>{const r={},n=new URLSearchParams(t);return Object.entries(e).forEach((([e,t])=>{const s=a[e]||String;r[e]=s(n.get(e)||t)})),r},o=(e,t={})=>{const a=(0,n.TH)(),o=(0,n.s0)(),l=(0,r.useMemo)((()=>s(e,a.search,t)),[e,a.search,t]),[i,c]=(0,r.useState)(l);return(0,r.useEffect)((()=>{const r=s(e,a.search,t);JSON.stringify(r)!==JSON.stringify(i)&&c(r)}),[a.search,i,e,t]),[i,t=>{if(JSON.stringify(t)===JSON.stringify(i))return;const r=new URLSearchParams(a.search);let n=!1;Object.entries(e).forEach((([e,a])=>{const s=e in t?t[e]:a;t[e]!==i[e]&&(r.set(e,String(s)),s===a&&r.delete(e),n=!0)})),n&&(a.search=r.toString(),o(a))}]}},964:(e,t,a)=>{a.d(t,{Z:()=>n});var r=a(6974);const n=()=>{const e=(0,r.TH)().pathname.split("/");return null==e?void 0:e[e.length-1]}},5180:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var r=a(7294),n=a(8110),s=a(964),o=a(402),l=a(1699),i=a(5478),c=a(3415),m=a(2531),u=a(3518);const d=()=>{var e,t,a;const d=(0,s.Z)(),{data:g,loading:p,error:v}=(0,n.Z)(`publications/${d}`);if(p)return r.createElement(o.Z,{size:"large"});if(v)return r.createElement(l.Z,{error:v});if(!g)return r.createElement(o.Z,null);const{data:b}=g,f=[{key:"Journal name",value:b.attributes["iso-journal"]},{key:"DOI",value:()=>r.createElement(m.Z,{href:`https://www.doi.org/${b.attributes.doi}`},b.attributes.doi)},{key:"PMID",value:()=>r.createElement(m.Z,{href:`https://europepmc.org/abstract/MED/${b.id}`},b.id)},{key:"Published year",value:String(b.attributes["published-year"])}];return b.attributes["medline-journal"]&&f.push({key:"Medical journal",value:()=>r.createElement(m.Z,{href:b.attributes["medline-journal"]},b.attributes["medline-journal"])}),r.createElement("section",{className:"vf-content"},r.createElement("h2",null,"Publication: ",(null===(e=null==b?void 0:b.attributes)||void 0===e?void 0:e["pub-title"])||""),r.createElement("h4",null,(null===(t=null==b?void 0:b.attributes)||void 0===t?void 0:t.authors)||""),r.createElement("section",{className:"vf-grid"},r.createElement("div",{className:"vf-stack vf-stack--200"},(null===(a=null==b?void 0:b.attributes)||void 0===a?void 0:a.abstract)&&r.createElement("div",null,b.attributes.abstract),r.createElement(i.Z,{label:"Publication details"},r.createElement(c.Z,{list:f})),r.createElement(i.Z,{label:"Associated studies"},r.createElement(u.Z,{rootEndpoint:"publications"})))))}},5058:(e,t,a)=>{a.d(t,{G:()=>i});const r={"root:engineered":"engineered_b"},n={"root:engineered:wastewater":"wastewater_b","root:environmental:air":"air_b","root:host-associated:amphibia":"amphibian_b","root:host-associated:arthropoda":"arthropoda_b","root:host-associated:fish":"fish_b","root:host-associated:human":"human_host_b","root:host-associated:insecta":"insect_b","root:host-associated:mammals":"mammals_b","root:host-associated:mollusca":"mollusca_b","root:host-associated:plants":"plant_host_b","root:host-associated:porifera":"porifera_b"},s={"root:environmental:aquatic:freshwater":"freshwater_b","root:environmental:aquatic:marine":"marine_b","root:environmental:aquatic:thermal springs":"hotspring_b","root:environmental:terrestrial:soil":"soil_b","root:environmental:terrestrial:volcanic":"vulcano_b","root:host-associated:human:digestive system":"human_gut_b","root:host-associated:human:skin":"skin_b"},o={"root:environmental:aquatic:freshwater:drinking water":"drinking_water_b","root:environmental:aquatic:freshwater:groundwater":"groundwater_b","root:environmental:aquatic:freshwater:ice":"ice_b","root:environmental:aquatic:freshwater:lake":"lake_b","root:environmental:aquatic:freshwater:lotic":"river_b","root:environmental:aquatic:marine:hydrothermal vents":"hydrothermal_vents_b","root:environmental:terrestrial:soil:wetlands":"wetlands_b","root:host-associated:human:digestive system:oral":"mouth_b","root:host-associated:human:respiratory system:pulmonary system":"lung_b","root:host-associated:mammals:nervous system:brain":"brain_b"},l={"root:environmental:aquatic:freshwater:groundwater:cave water":"cave_b","root:environmental:aquatic:freshwater:ice:glacier":"glacier_b","root:environmental:terrestrial:soil:grasslands":"grassland_b","root:environmental:terrestrial:soil:loam:forest soil":"forest_b","root:environmental:terrestrial:soil:sand:desert":"desert_b"};function i(e){const t=(e||"").split(":").map((e=>e.toLowerCase())),a=t.slice(0,2).join(":"),i=t.slice(0,3).join(":"),c=t.slice(0,4).join(":"),m=t.slice(0,5).join(":"),u=t.slice(0,6).join(":");return l[u]||o[m]||s[c]||n[i]||r[a]||"default_b"}}}]);
//# sourceMappingURL=180.cf3af93b.chunk.js.map