"use strict";(self.webpackChunkmgportalv2=self.webpackChunkmgportalv2||[]).push([[193],{5478:(e,t,a)=>{a.d(t,{Z:()=>s});var r=a(7294);const s=({label:e,theme:t="primary",children:a})=>r.createElement("div",{className:"vf-grid"},r.createElement("div",{className:`vf-box vf-box--easy vf-box-theme--${t}`},r.createElement("h5",{className:"vf-box__heading"},e),r.createElement("div",{className:"vf-box__text"},a)))},1699:(e,t,a)=>{a.d(t,{Z:()=>o});var r=a(7294),s=a(7838);const n=()=>{window.location.reload()},o=({error:e})=>e&&e.type!==s.ZB.NullURL?r.createElement("div",{className:"vf-box vf-box-theme--primary vf-box--easy",style:{backgroundColor:"lemonchiffon"}},r.createElement("h3",{className:"vf-box__heading"},r.createElement("span",{className:"icon icon-common icon-exclamation-triangle"})," Error Fetching Data"),r.createElement("p",{className:"vf-box__text"},(null==e?void 0:e.type)===s.ZB.FetchError&&`There were problems with the request. [${e.error}]`,(null==e?void 0:e.type)===s.ZB.NotOK&&`The response from the server was not OK [Status: ${e.status}].`,(null==e?void 0:e.type)===s.ZB.JSONError&&`The recovered resource didn't follow the expected format [${e.error}].`),r.createElement("div",{className:"mg-right"},r.createElement("button",{type:"button",className:"vf-button vf-button--tertiary vf-button--sm ",onClick:n},"Refresh"))):null},4933:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(7294),s=a(7762),n=a(6529);const o=({sample:e})=>r.createElement("div",{className:"vf-box vf-box--easy"},r.createElement("h3",{className:"vf-box__heading"},r.createElement("a",{href:`../samples/${e.id}`},e.id)),r.createElement("p",{className:"vf-box__text"},e.attributes["sample-desc"])),l=({accessions:e})=>r.createElement("div",{className:"vf-box vf-box--easy"},r.createElement("h3",{className:"vf-box__heading"},"Samples on this geographical location"),r.createElement("ul",{className:"vf-list"},e.map((e=>r.createElement("li",{ref:e},r.createElement("a",{href:`../samples/${e}`},e)))))),i=({samples:e})=>{const t=(0,r.useRef)(),[a,i]=(0,r.useState)(null),c=(0,r.useRef)(null),m=(0,r.useRef)(new google.maps.InfoWindow),u=(0,r.useRef)(new google.maps.InfoWindow),d=(0,r.useRef)(new google.maps.LatLngBounds),b=(0,r.useRef)({});return(0,r.useEffect)((()=>{if(null===a){const e=new google.maps.Map(t.current,{maxZoom:10,minZoom:2});i(e)}}),[a]),(0,r.useEffect)((()=>{a&&e&&(c.current&&c.current.clearMarkers(),e.filter((({id:e})=>!(e in b.current))).forEach((e=>{const t={lat:e.attributes.latitude,lng:e.attributes.longitude},n=new google.maps.Marker({position:t,title:e.id});d.current.extend(t),n.addListener("click",(()=>{m.current.setContent(s.renderToString(r.createElement(o,{sample:e}))),m.current.open(a,n)})),b.current[e.id]=n})),c.current=new n.Z(a,Object.values(b.current),{imagePath:"https://raw.githubusercontent.com/googlemaps/js-markerclustererplus/master/images/m",maxZoom:10}),google.maps.event.addListener(c.current,"click",(function(e){this.prevZoom_+1<=this.getMaxZoom()||e.getSize()>=10||(u.current.setPosition(e.getCenter()),u.current.setContent(s.renderToString(r.createElement(l,{accessions:e.getMarkers().map((e=>e.getTitle()))}))),u.current.open(a))})),a.fitBounds(d.current))}),[a,e]),r.createElement("div",{ref:t,id:"map",style:{height:"100%"}})}},2069:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(7294),s=a(2245),n=a(7838),o=a(402),l=a(1699);const i=e=>e===s.Status.LOADING?r.createElement(o.Z,null):e===s.Status.FAILURE?r.createElement(l.Z,{error:{status:200,type:n.ZB.OtherError,error:e}}):null},4821:(e,t,a)=>{a.d(t,{Z:()=>o});var r=a(7294),s=a(6974),n=a(9711);const o=({tabs:e})=>{const t=(0,s.TH)();return r.createElement("div",{className:"vf-tabs mg-search-tabs"},r.createElement("ul",{className:"vf-tabs__list"},e.map((({label:e,to:a})=>r.createElement("li",{className:"vf-tabs__item",key:a},r.createElement(n.rU,{className:"vf-tabs__link "+(a===t.pathname||a.startsWith("#")&&a===t.hash?"is-active":""),to:a},"string"==typeof e?e:r.createElement(e,null)))))))}},964:(e,t,a)=>{a.d(t,{Z:()=>s});var r=a(6974);const s=()=>{const e=(0,r.TH)().pathname.split("/");return null==e?void 0:e[e.length-1]}},1193:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var r=a(7294),s=a(8110),n=a(964),o=a(402),l=a(1699),i=a(4821),c=a(2245),m=a(6050),u=a(4933),d=a(2069);const b=({samples:e})=>{const{config:t}=(0,r.useContext)(m.Z),a=e.filter((e=>{try{return 0!==Number(e.attributes.longitude)&&0!==Number(e.attributes.latitude)}catch(e){return!1}}));return r.createElement("div",{className:"mg-map-container"},r.createElement("div",{className:"mg-map-wrapper"},r.createElement(c.Wrapper,{apiKey:t.googleMapsKey,render:d.Z},r.createElement(u.Z,{samples:a}))),r.createElement("div",{className:"mg-map-progress"},0===a.length&&r.createElement("div",null,"⚠️ None of the samples have geolocation co-ordinates.")))};var h=a(5478),v=a(5058);const p=({data:e})=>{var t;const a=e.relationships.biome.data.id;return r.createElement("section",null,r.createElement("div",{className:"vf-grid"},r.createElement("div",null,r.createElement("h4",null,"Last updated:"," ",new Date(null===(t=null==e?void 0:e.attributes)||void 0===t?void 0:t["last-update"]).toDateString()),r.createElement(h.Z,{label:"Description"},e.attributes["sample-desc"]),r.createElement(h.Z,{label:"External links"},r.createElement("ul",null,r.createElement("li",null,r.createElement("a",{className:"ext",href:`https://www.ebi.ac.uk/ena/browser/view/${e.attributes.accession}`},"ENA website (",e.attributes.accession,")")),r.createElement("li",null,r.createElement("a",{className:"ext",href:`https://www.ebi.ac.uk/biosamples/samples/${e.attributes.biosample}`},"EBI biosample (",e.attributes.biosample,")")))),r.createElement(h.Z,{label:"Classification"},r.createElement("span",{className:`biome_icon icon_sm ${(0,v.G)(a)}`,style:{float:"initial"}}),a)),r.createElement(b,{samples:[e]})))},f=[{label:"Sample metadata",to:"#metadata"},{label:"Associated studies",to:"#studies"},{label:"Analysed associated runs",to:"#runs"},{label:"Analysed associated assemblies",to:"#assemblies"}],g=()=>{const e=(0,n.Z)(),{data:t,loading:a,error:c}=(0,s.Z)(`samples/${e}`);if(a)return r.createElement(o.Z,{size:"large"});if(c)return r.createElement(l.Z,{error:c});if(!t)return r.createElement(o.Z,null);const{data:m}=t;return r.createElement("section",{className:"vf-content"},r.createElement("h2",null,"Study ",e),r.createElement("h3",null,m.attributes["study-name"]),r.createElement("section",{className:"vf-grid"},r.createElement("div",{className:"vf-stack vf-stack--200"},r.createElement(p,{data:m}),r.createElement(i.Z,{tabs:f}))))}},5058:(e,t,a)=>{a.d(t,{G:()=>i});const r={"root:engineered":"engineered_b"},s={"root:engineered:wastewater":"wastewater_b","root:environmental:air":"air_b","root:host-associated:amphibia":"amphibian_b","root:host-associated:arthropoda":"arthropoda_b","root:host-associated:fish":"fish_b","root:host-associated:human":"human_host_b","root:host-associated:insecta":"insect_b","root:host-associated:mammals":"mammals_b","root:host-associated:mollusca":"mollusca_b","root:host-associated:plants":"plant_host_b","root:host-associated:porifera":"porifera_b"},n={"root:environmental:aquatic:freshwater":"freshwater_b","root:environmental:aquatic:marine":"marine_b","root:environmental:aquatic:thermal springs":"hotspring_b","root:environmental:terrestrial:soil":"soil_b","root:environmental:terrestrial:volcanic":"vulcano_b","root:host-associated:human:digestive system":"human_gut_b","root:host-associated:human:skin":"skin_b"},o={"root:environmental:aquatic:freshwater:drinking water":"drinking_water_b","root:environmental:aquatic:freshwater:groundwater":"groundwater_b","root:environmental:aquatic:freshwater:ice":"ice_b","root:environmental:aquatic:freshwater:lake":"lake_b","root:environmental:aquatic:freshwater:lotic":"river_b","root:environmental:aquatic:marine:hydrothermal vents":"hydrothermal_vents_b","root:environmental:terrestrial:soil:wetlands":"wetlands_b","root:host-associated:human:digestive system:oral":"mouth_b","root:host-associated:human:respiratory system:pulmonary system":"lung_b","root:host-associated:mammals:nervous system:brain":"brain_b"},l={"root:environmental:aquatic:freshwater:groundwater:cave water":"cave_b","root:environmental:aquatic:freshwater:ice:glacier":"glacier_b","root:environmental:terrestrial:soil:grasslands":"grassland_b","root:environmental:terrestrial:soil:loam:forest soil":"forest_b","root:environmental:terrestrial:soil:sand:desert":"desert_b"};function i(e){const t=(e||"").split(":").map((e=>e.toLowerCase())),a=t.slice(0,2).join(":"),i=t.slice(0,3).join(":"),c=t.slice(0,4).join(":"),m=t.slice(0,5).join(":"),u=t.slice(0,6).join(":");return l[u]||o[m]||n[c]||s[i]||r[a]||"default_b"}}}]);
//# sourceMappingURL=193.7a28d6a9.chunk.js.map