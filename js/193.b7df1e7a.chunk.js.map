{"version":3,"file":"js/193.b7df1e7a.chunk.js","mappings":"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","sources":["webpack://mgportalv2/./src/components/Downloads/index.tsx","webpack://mgportalv2/./src/components/Genomes/Browser/Popup/index.tsx","webpack://mgportalv2/./src/components/Analysis/ContigViewer/mgnifyColours.tsx","webpack://mgportalv2/./src/components/IGV/TrackColourPicker/index.tsx","webpack://mgportalv2/./src/components/Nav/RouteForHash/index.tsx","webpack://mgportalv2/./src/components/UI/ArrowForLink/index.tsx","webpack://mgportalv2/./src/components/UI/FileUploaderButton/index.tsx","webpack://mgportalv2/./src/components/UI/Hierarchy/index.tsx","webpack://mgportalv2/./src/components/UI/KeyValueList/index.tsx","webpack://mgportalv2/./src/components/UI/Slider/index.tsx","webpack://mgportalv2/./src/components/UI/Switch/index.tsx","webpack://mgportalv2/./src/components/UI/Tabs/index.tsx","webpack://mgportalv2/./src/components/UI/TabsForQueryParameter/index.tsx","webpack://mgportalv2/./src/components/UI/TextTruncated/index.tsx","webpack://mgportalv2/./src/components/UI/Tooltip/index.tsx","webpack://mgportalv2/./src/hooks/useURLAccession/index.tsx","webpack://mgportalv2/./src/pages/Analysis/AnalysisContext.tsx","webpack://mgportalv2/./src/components/Analysis/Overview/index.tsx","webpack://mgportalv2/./src/components/Analysis/QualityControl/QCChart.tsx","webpack://mgportalv2/./src/components/Analysis/QualityControl/ContigsHistogram.tsx","webpack://mgportalv2/./src/components/Analysis/QualityControl/NucleotidesHistogram.tsx","webpack://mgportalv2/./src/components/Analysis/QualityControl/ContigsDistribution.tsx","webpack://mgportalv2/./src/components/Analysis/QualityControl/SeqLengthChart.tsx","webpack://mgportalv2/./src/components/Analysis/QualityControl/GCContentChart.tsx","webpack://mgportalv2/./src/components/Analysis/QualityControl/index.tsx","webpack://mgportalv2/./src/components/Analysis/ContigViewer/ContigsQueryContext.tsx","webpack://mgportalv2/./src/components/UI/EMGTable/CursorPagination/index.tsx","webpack://mgportalv2/./src/components/Analysis/ContigViewer/Table/index.tsx","webpack://mgportalv2/./src/components/Analysis/ContigViewer/GFFCompare/gff_db.ts","webpack://mgportalv2/./src/components/UI/PlainTable/index.tsx","webpack://mgportalv2/./src/components/Analysis/ContigViewer/GFFCompare/index.tsx","webpack://mgportalv2/./src/components/Analysis/ContigViewer/Filter/ContigLength/index.tsx","webpack://mgportalv2/./src/components/Analysis/ContigViewer/Filter/ContigText/index.tsx","webpack://mgportalv2/./src/components/Analysis/ContigViewer/Filter/ContigAnnotationType/index.tsx","webpack://mgportalv2/./src/components/Analysis/ContigViewer/index.tsx","webpack://mgportalv2/./src/components/Analysis/Taxonomy/PhylumTable/index.tsx","webpack://mgportalv2/./src/components/Analysis/Taxonomy/PhylumCharts/Pie/index.tsx","webpack://mgportalv2/./src/components/Analysis/Taxonomy/PhylumCharts/Column/index.tsx","webpack://mgportalv2/./src/components/Analysis/Taxonomy/PhylumCharts/StackedColumn/index.tsx","webpack://mgportalv2/./src/components/Analysis/Taxonomy/PhylumCharts/index.tsx","webpack://mgportalv2/./src/components/Analysis/Taxonomy/index.tsx","webpack://mgportalv2/./src/components/Analysis/Functional/InterPro/InterProMatchesChart.tsx","webpack://mgportalv2/./src/hooks/data/useInterProMatchesProvider/index.tsx","webpack://mgportalv2/./src/components/Analysis/Functional/InterPro/QCChart.tsx","webpack://mgportalv2/./src/components/Analysis/Functional/InterPro/index.tsx","webpack://mgportalv2/./src/components/Analysis/Functional/GO/BarChart.tsx","webpack://mgportalv2/./src/components/Analysis/Functional/GO/PieChart.tsx","webpack://mgportalv2/./src/components/Analysis/Functional/GO/index.tsx","webpack://mgportalv2/./src/components/Analysis/Functional/Pfam/Table.tsx","webpack://mgportalv2/./src/components/Analysis/Functional/Pfam/BarChart.tsx","webpack://mgportalv2/./src/components/Analysis/Functional/Pfam/index.tsx","webpack://mgportalv2/./src/components/Analysis/Functional/KO/Table.tsx","webpack://mgportalv2/./src/components/Analysis/Functional/KO/BarChart.tsx","webpack://mgportalv2/./src/components/Analysis/Functional/KO/index.tsx","webpack://mgportalv2/./src/components/Analysis/Functional/index.tsx","webpack://mgportalv2/./src/components/Analysis/Pathways/KeggModule/Table.tsx","webpack://mgportalv2/./src/components/Analysis/Pathways/KeggModule/BarChart.tsx","webpack://mgportalv2/./src/components/Analysis/Pathways/KeggModule/index.tsx","webpack://mgportalv2/./src/components/Analysis/Pathways/AntiSMASH/Table.tsx","webpack://mgportalv2/./src/components/Analysis/Pathways/AntiSMASH/BarChart.tsx","webpack://mgportalv2/./src/components/Analysis/Pathways/AntiSMASH/index.tsx","webpack://mgportalv2/./src/components/Analysis/Pathways/GenomeProperties/index.tsx","webpack://mgportalv2/./src/components/Analysis/Pathways/index.tsx","webpack://mgportalv2/./src/components/Analysis/Abundance/index.tsx","webpack://mgportalv2/./src/pages/Analysis/index.tsx","webpack://mgportalv2/./src/utils/taxon.ts"],"sourcesContent":["import React, { useMemo } from 'react';\n\nimport Loading from 'components/UI/Loading';\nimport FetchError from 'components/UI/FetchError';\nimport EMGTable from 'components/UI/EMGTable';\nimport useMGnifyData from 'hooks/data/useMGnifyData';\nimport { MGnifyDatum, MGnifyResponseList } from 'hooks/data/useData';\n\ntype DownloadsProps = {\n  endpoint: string;\n  accession: string;\n};\nconst Downloads: React.FC<DownloadsProps> = ({ endpoint, accession }) => {\n  const { data, loading, error } = useMGnifyData(\n    `${endpoint}/${accession}/downloads`,\n    {\n      page_size: 100,\n    }\n  );\n  const columns = useMemo(\n    () => [\n      {\n        Header: 'Name',\n        accessor: 'attributes.description.description',\n      },\n      {\n        Header: 'Compression',\n        accessor: 'attributes.file-format.compression',\n        Cell: ({ cell }) => (cell.value ? 'Yes' : '-'),\n      },\n      {\n        Header: 'Format',\n        accessor: 'attributes.file-format.name',\n      },\n      {\n        Header: 'Action',\n        accessor: 'links.self',\n        Cell: ({ cell }) => (\n          <a\n            href={cell.value}\n            className=\"vf-button vf-button--link\"\n            style={{ whiteSpace: 'nowrap' }}\n            download\n          >\n            <span className=\"icon icon-common icon-download\" /> Download\n          </a>\n        ),\n      },\n    ],\n    []\n  );\n  if (loading) return <Loading size=\"large\" />;\n  if (error) return <FetchError error={error} />;\n  if (!data) return <Loading />;\n\n  const categories = {};\n\n  (data as MGnifyResponseList).data.forEach((download) => {\n    if (!categories[download.attributes['group-type'] as string]) {\n      categories[download.attributes['group-type'] as string] = [];\n    }\n    categories[download.attributes['group-type'] as string].push(download);\n  });\n  return (\n    <div className=\"vf-stock\">\n      {Object.entries(categories).map(([category, downloads]) => (\n        <section key={category}>\n          <EMGTable\n            cols={columns}\n            data={downloads as Array<MGnifyDatum>}\n            Title={category}\n            loading={loading}\n            showPagination={false}\n          />\n          <hr />\n        </section>\n      ))}\n    </div>\n  );\n};\n\nexport default Downloads;\n","import React from 'react';\nimport ExtLink from 'components/UI/ExtLink';\nimport './style.css';\n\ntype PropertyDataType = { name: string; value: string | number };\ntype GenomeBrowserPopupProps = {\n  data: PropertyDataType[];\n  hasMetaProteomics: boolean;\n};\ntype FormattedData = {\n  name?: string;\n  gene?: string;\n  product?: string;\n  properties: {\n    title: string;\n    data: {\n      name?: string;\n      Value?: string | React.ElementType;\n    }[];\n  }[];\n};\n\nconst antiSMASHLabels = {\n  biosynthetic: 'Core biosynthetic gene',\n  'biosynthetic-additional': 'Additional biosynthetic gene',\n  regulatory: 'Regulatory genes',\n  transport: 'Transport-related gene',\n  resistance: 'Resistance genes',\n};\n\nconst MultipleField: React.FC<{\n  value: string;\n  url?: string;\n  decodeValue?: boolean;\n}> = ({ value, url, decodeValue }) => {\n  if (!value) return null;\n  const parts = value.split(',');\n  return (\n    <ul className=\"vf-list\">\n      {parts.map((part) => {\n        const text = decodeValue ? decodeURIComponent(part) : part;\n        return (\n          <li key={part} className=\"igv-popup-multiple-field-item\">\n            {url ? <ExtLink href={`${url}${part}`}>{text}</ExtLink> : text}\n          </li>\n        );\n      })}\n    </ul>\n  );\n};\n\nconst getAnnotationLoc = (attributes: {\n  location?: string;\n}): { start: number; end: number } => {\n  if (attributes.location) {\n    const startEnd = attributes.location.split(':')[1];\n    return {\n      start: parseInt(startEnd.split('-')[0].replaceAll(',', ''), 10),\n      end: parseInt(startEnd.split('-')[1].replaceAll(',', ''), 10),\n    };\n  }\n  return undefined;\n};\n\n/**\n * Calculate the property length.\n * @return {int} the length or undefined\n */\nconst getProteinOrSequenceLength = (attributes: {\n  location?: string;\n  type?: string;\n}): number => {\n  if (!attributes.location || !attributes.type) return undefined;\n  const { start, end } = getAnnotationLoc(attributes);\n  if (\n    Number.isNaN(start) ||\n    Number.isNaN(end) ||\n    start === null ||\n    end === null\n  ) {\n    return undefined;\n  }\n  if (attributes.type === 'CDS') {\n    return Math.ceil((end - start) / 3);\n  }\n  return end - start;\n};\n\nconst formatData = (\n  rawData: PropertyDataType[],\n  withMetaProteomics: boolean\n): FormattedData => {\n  const attributes: {\n    [name: string]: string | null;\n  } = rawData.reduce((memo, el) => {\n    if (el.name)\n      // eslint-disable-next-line no-param-reassign\n      memo[el.name.toLowerCase().replaceAll(':', '')] =\n        el.value === null ? null : String(el.value);\n    return memo;\n  }, {});\n\n  const functionalData = {\n    title: 'Functional annotation',\n    data: [\n      {\n        name: 'E.C Number',\n        Value:\n          attributes.ecnumber &&\n          (() => (\n            <MultipleField\n              value={attributes.ecnumber}\n              url=\"https://enzyme.expasy.org/EC/\"\n            />\n          )),\n      },\n      {\n        name: 'Pfam',\n        Value:\n          attributes.pfam &&\n          (() => (\n            <MultipleField\n              value={attributes.pfam}\n              url=\"https://www.ebi.ac.uk/interpro/entry/pfam/\"\n            />\n          )),\n      },\n      {\n        name: 'KEGG',\n        Value:\n          attributes.kegg &&\n          (() => (\n            <MultipleField\n              value={attributes.kegg}\n              url=\"https://www.genome.jp/dbget-bin/www_bget?\"\n            />\n          )),\n      },\n      {\n        name: 'eggNOG',\n        Value: attributes.eggnog && decodeURIComponent(attributes.eggnog),\n      },\n      {\n        name: 'COG',\n        Value:\n          attributes.cog && (() => <MultipleField value={attributes.cog} />),\n      },\n      {\n        name: 'GO',\n        Value:\n          attributes.go &&\n          (() => (\n            <MultipleField\n              value={attributes.go}\n              url=\"https://www.ebi.ac.uk/ols/search?q=\"\n            />\n          )),\n      },\n      {\n        name: 'InterPro',\n        Value:\n          attributes.interpro &&\n          (() => (\n            <MultipleField\n              value={attributes.interpro}\n              url=\"https://www.ebi.ac.uk/interpro/entry/InterPro/'\"\n            />\n          )),\n      },\n      {\n        // antiSMASH\n        name: 'Gene type',\n        Value:\n          attributes.as_type &&\n          (antiSMASHLabels[attributes.as_type] || attributes.as_type),\n      },\n      {\n        name: 'ViPhOG',\n        Value:\n          attributes.viphog &&\n          (() => (\n            <ExtLink href=\"https://osf.io/2zd9r/\">\n              {attributes.viphog} ({attributes.viphog_taxonomy})\n            </ExtLink>\n          )),\n      },\n      {\n        // Notes are URL encoded during the GFF generation\n        name: 'Notes',\n        Value:\n          attributes.as_notes &&\n          (() => (\n            <MultipleField value={decodeURIComponent(attributes.as_notes)} />\n          )),\n      },\n      {\n        name: 'Cluster',\n        Value:\n          attributes.as_gene_clusters &&\n          (() => <MultipleField value={attributes.as_gene_clusters} />),\n      },\n    ],\n  };\n  const { start, end } = getAnnotationLoc(attributes);\n  const isProtein = attributes.type === 'CDS';\n  const otherData = {\n    title: 'Feature details',\n    data: [\n      {\n        name: 'Type',\n        Value: attributes.type,\n      },\n      {\n        name: 'Inference',\n        Value: attributes.inference,\n      },\n      {\n        name: 'Start / End',\n        Value: `${start} / ${end}`,\n      },\n      {\n        name: isProtein ? 'Protein length' : 'Sequence length',\n        Value: String(getProteinOrSequenceLength(attributes)),\n      },\n    ],\n  };\n\n  const metaproteomicData = {\n    title: 'Metaproteomics',\n    data: [\n      {\n        name: 'PRIDE Dataset',\n        Value:\n          attributes.pride_id &&\n          (() => (\n            <ExtLink\n              href={`https://www.ebi.ac.uk/pride/archive/projects/${attributes.pride_id}`}\n            >\n              {attributes.pride_id}\n            </ExtLink>\n          )),\n      },\n      {\n        name: 'Unique peptide-to-protein mapping',\n        Value:\n          attributes.unique_peptide_to_protein_mapping === 'True'\n            ? () => <div />\n            : 'None',\n      },\n      {\n        name:\n          attributes.unique_peptide_to_protein_mapping === 'True'\n            ? 'List of peptides'\n            : '',\n        Value:\n          attributes.unique_peptide_to_protein_mapping === 'True'\n            ? () => <MultipleField value={attributes.unambiguous_sequences} />\n            : () => <div />,\n      },\n      {\n        name: 'Ambiguous peptide-to-protein mapping',\n        Value:\n          attributes.ambiguous_peptide_to_protein_mapping === 'True'\n            ? () => <div />\n            : 'None',\n      },\n      {\n        name:\n          attributes.ambiguous_peptide_to_protein_mapping === 'True'\n            ? 'List of peptides'\n            : '',\n        Value:\n          attributes.ambiguous_peptide_to_protein_mapping === 'True'\n            ? () => <MultipleField value={attributes.ambiguous_sequences} />\n            : () => <div />,\n      },\n      {\n        name: 'Semi-quantitative expression spectrum count',\n        Value: attributes.semiquantitative_expression_spectrum_count,\n      },\n    ],\n  };\n\n  const properties = [functionalData, otherData];\n  if (withMetaProteomics) {\n    properties.push(metaproteomicData);\n  }\n\n  return {\n    name: attributes.id,\n    gene: attributes.gene,\n    product: attributes.product,\n    properties,\n  };\n};\n\nconst GenomeBrowserPopup: React.FC<GenomeBrowserPopupProps> = ({\n  data,\n  hasMetaProteomics,\n}) => {\n  const { name, gene, product, properties } = formatData(\n    data,\n    hasMetaProteomics\n  );\n  return (\n    <>\n      <table className=\"stack hover igv-popover-table\">\n        <caption className=\"igv-popover-section-header\">Feature</caption>\n        <tbody>\n          {name && (\n            <tr>\n              <td className=\"igv-popover-table-td-name\">ID</td>\n              <td>{name}</td>\n            </tr>\n          )}\n          {gene && (\n            <tr>\n              <td className=\"igv-popover-table-td-name\">Gene</td>\n              <td>\n                <em>{gene}</em>\n              </td>\n            </tr>\n          )}\n          {product && (\n            <tr>\n              <td className=\"igv-popover-table-td-name\">Product</td>\n              <td>{product}</td>\n            </tr>\n          )}\n        </tbody>\n      </table>\n      {properties.map((property) => (\n        <table className=\"stack hover igv-popover-table\" key={property.title}>\n          {property.data.filter((d) => !!d.Value).length > 0 && (\n            <caption className=\"igv-popover-section-header\">\n              {property.title}\n            </caption>\n          )}\n          <tbody>\n            {property.data\n              .map(\n                ({ name: pName, Value }) =>\n                  Value && (\n                    <tr key={pName}>\n                      <td className=\"igv-popover-table-td-name\">{pName}</td>\n                      <td>{typeof Value === 'string' ? Value : <Value />}</td>\n                    </tr>\n                  )\n              )\n              .filter(Boolean)}\n          </tbody>\n        </table>\n      ))}\n    </>\n  );\n};\n\nexport default GenomeBrowserPopup;\n","export const COG_MAP = {\n  // https://gka.github.io/palettes/#/23|s|1d4097,a8a8a8,87352f|ffaff9,908300,17439b|0|0\n  A: '#1d4097', // RNA processing and modification\n  B: '#36539a', // Chromatin Structure and dynamics\n  C: '#50669d', // Energy production and conversion\n  D: '#6979a0', // Cell cycle control and mitosis\n  E: '#828ca3', // Amino Acid metabolis and transport\n  F: '#9b9fa6', // Nucleotide metabolism and transport\n  G: '#a59e9d', // Carbohydrate metabolism and transport\n  H: '#9f8987', // Coenzyme metabolis\n  I: '#997471', // Lipid metabolism\n  J: '#935f5b', // Tranlsation\n  K: '#8d4a45', // Transcription\n  L: '#87352f', // Replication and repair\n  M: '#eba7cc', // Cell wall/membrane/envelop biogenesis\n  N: '#d79f9e', // Cell motility\n  O: '#c29771', // Post-translational modification, protein turnover, chaperone functions\n  P: '#ae8f44', // Inorganic ion transport and metabolism\n  Q: '#9a8717', // Secondary Structure\n  T: '#937a03', // Signal Transduction\n  U: '#9a690a', // Intracellular trafficing and secretion\n  Y: '#a15711', // Nuclear structure\n  Z: '#a84617', // Cytoskeleton\n  S: '#af341e', // Function Unknown\n  R: '#b62325', // General Functional Prediction only\n};\n\nconst ANTISMASH_MAP_GK = {\n  biosynthetic: '#810e15',\n  'biosynthetic-additional': '#f16d75',\n  transport: '#6495ED',\n  regulatory: '#2E8B57',\n  resis: '#ed90ed',\n  other: '#BEBEBE',\n};\n\n/**\n * Get the colour for the COG cateogry.\n * If the category is not mapped then use the R, this also\n * applies if the suplied category is not found (for example: multiles COG categories)\n */\nexport function getCOGColour(cog) {\n  return COG_MAP[cog] || COG_MAP.R;\n}\n\n/**\n * Get the colour for the antiSMASH gene_kind.\n */\nexport function getAntiSMASHColour(kind) {\n  return ANTISMASH_MAP_GK[kind] || ANTISMASH_MAP_GK.other;\n}\n\nexport const COLOUR_PRESENCE = '#d32f2f';\nexport const COLOUR_ABSENCE = '#a9abaa';\n","import React from 'react';\nimport Select from 'react-select';\nimport {\n  COLOUR_ABSENCE,\n  COLOUR_PRESENCE,\n  getAntiSMASHColour,\n  getCOGColour,\n} from 'components/Analysis/ContigViewer/mgnifyColours';\n\nfunction maybeGetAttributeValue(feature, attrPossibleNames: string[]) {\n  if (!feature || !feature.getAttributeValue) return null;\n  // eslint-disable-next-line no-restricted-syntax\n  for (const [, attr] of attrPossibleNames.entries()) {\n    const featureAttrVal = feature.getAttributeValue(attr);\n    if (featureAttrVal) {\n      return featureAttrVal;\n    }\n  }\n  return null;\n}\n\nexport const annotationTrackCustomisations = (trackColorBy) => {\n  switch (trackColorBy) {\n    case 'cog':\n      return {\n        nameField: 'COG',\n        color: (feature) => {\n          const cog = maybeGetAttributeValue(feature, ['cog', 'COG']);\n          return cog ? getCOGColour(cog) : '#ddd';\n        },\n      };\n    case 'kegg':\n      return {\n        nameField: 'kegg',\n        color: (feature) =>\n          !maybeGetAttributeValue(feature, ['kegg', 'KEGG'])\n            ? COLOUR_ABSENCE\n            : COLOUR_PRESENCE,\n      };\n    case 'pfam':\n      return {\n        nameField: 'pfam',\n        color: (feature) =>\n          !maybeGetAttributeValue(feature, ['pfam', 'Pfam'])\n            ? COLOUR_ABSENCE\n            : COLOUR_PRESENCE,\n      };\n    case 'interpro':\n      return {\n        nameField: 'interpro',\n        color: (feature) =>\n          !maybeGetAttributeValue(feature, ['interpro', 'InterPro'])\n            ? COLOUR_ABSENCE\n            : COLOUR_PRESENCE,\n      };\n    case 'go':\n      return {\n        nameField: 'go',\n        color: (feature) =>\n          !maybeGetAttributeValue(feature, ['go', 'GO'])\n            ? COLOUR_ABSENCE\n            : COLOUR_PRESENCE,\n      };\n    case 'antismash':\n      return {\n        nameField: 'as_type',\n        color: (feature) => {\n          const as = maybeGetAttributeValue(feature, ['as_type']);\n          return as ? getAntiSMASHColour(as) : '#ddd';\n        },\n      };\n    case 'viphog':\n      return {\n        nameField: 'viphog',\n        color: (feature) =>\n          !maybeGetAttributeValue(feature, ['viphog', 'ViPhOG'])\n            ? COLOUR_ABSENCE\n            : COLOUR_PRESENCE,\n      };\n    default:\n      return null;\n  }\n};\ntype AnnotationTrackColorPickerProps = {\n  trackView: any;\n  trackColorBys: Record<string, { label: string; value: string }>;\n  onChange: (event, action) => void;\n};\nexport const AnnotationTrackColorPicker: React.FC<\n  AnnotationTrackColorPickerProps\n> = ({ trackView, trackColorBys, onChange }) => {\n  return (\n    <div className=\"vf-stack vf-stack--200\">\n      <label className=\"vf-form__label\" htmlFor=\"biome-select\">\n        {trackView.track.config.label} track colour\n      </label>\n      <Select\n        theme={(theme) => ({\n          ...theme,\n          borderRadius: 0,\n          border: '2px solid grey',\n        })}\n        placeholder={`Colour ${trackView.track.id} by...`}\n        value={trackColorBys[trackView.track.id]}\n        onChange={onChange}\n        name={`track-colour-${trackView.track.id}`}\n        inputId={`track-colour-${trackView.track.id}`}\n        options={[\n          { label: 'COG category', value: 'cog' },\n          { label: 'KEGG ortholog', value: 'kegg' },\n          { label: 'Pfam family existence', value: 'pfam' },\n          { label: 'InterPro existence', value: 'interpro' },\n          { label: 'GO (gene ontology) existence', value: 'go' },\n          { label: 'AntiSMASH cluster type', value: 'antismash' },\n          { label: 'ViPhOG existence', value: 'viphog' },\n        ]}\n      />\n    </div>\n  );\n};\n","import React, { useEffect } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\n\ntype PropsType = {\n  hash: string;\n  isDefault?: boolean;\n};\nconst RouteForHash: React.FC<PropsType> = ({\n  hash,\n  isDefault = false,\n  children,\n}) => {\n  const location = useLocation();\n  const navigate = useNavigate();\n  useEffect(() => {\n    if (location.hash === '' && hash !== '' && isDefault) {\n      navigate(hash, { replace: true });\n    }\n  });\n\n  if (location.hash === hash) {\n    // eslint-disable-next-line react/jsx-no-useless-fragment\n    return <div id={`tab-${hash.slice(1) || 'default'}`}>{children}</div>;\n  }\n  return null;\n};\n\nexport default RouteForHash;\n","/* eslint-disable max-len */\nimport React from 'react';\n\nconst ArrowForLink: React.FC = () => (\n  <svg\n    aria-hidden=\"true\"\n    className=\"vf-card__heading__icon | vf-icon vf-icon-arrow--inline-end\"\n    width=\"1em\"\n    height=\"1em\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 24 24\"\n    preserveAspectRatio=\"none\"\n  >\n    <path\n      d=\"M0 12c0 6.627 5.373 12 12 12s12-5.373 12-12S18.627 0 12 0C5.376.008.008 5.376 0 12zm13.707-5.209l4.5 4.5a1 1 0 010 1.414l-4.5 4.5a1 1 0 01-1.414-1.414l2.366-2.367a.25.25 0 00-.177-.424H6a1 1 0 010-2h8.482a.25.25 0 00.177-.427l-2.366-2.368a1 1 0 011.414-1.414z\"\n      fill=\"currentColor\"\n      fillRule=\"nonzero\"\n    />\n  </svg>\n);\n\nexport default ArrowForLink;\n","import React, { useRef, FormEvent } from 'react';\n\ntype FileUploaderButtonProps = {\n  onChange: (event: FormEvent) => void;\n  accept?: string;\n  buttonClassName?: string;\n};\nconst FileUploaderButton: React.FC<FileUploaderButtonProps> = ({\n  onChange,\n  accept,\n  buttonClassName = 'vf-button--primary vf-button--sm',\n}) => {\n  const fileInput = useRef(null);\n  return (\n    <>\n      <input\n        type=\"file\"\n        hidden\n        ref={fileInput}\n        onChange={onChange}\n        accept={accept}\n      />\n      <button\n        className={`vf-button ${buttonClassName}`}\n        onClick={() => fileInput.current?.click()}\n        type=\"button\"\n      >\n        Browse for file...\n      </button>\n    </>\n  );\n};\n\nexport default FileUploaderButton;\n","import React, { useState, useEffect } from 'react';\nimport './style.css';\n\nconst ANIMATION_TIME = 400;\n\nexport type Node = {\n  name: string;\n  countgen?: number;\n  type?: string;\n  children?: Node[];\n  [key: string]: unknown;\n};\n\ninterface HierarchyNodeProps {\n  tree: Node;\n  depth?: number;\n  shouldExpand?: boolean;\n  collapsing?: boolean;\n  getLabel?: (node: Node) => string | React.ReactElement;\n  triggerExpandAll?: boolean;\n  triggerCollapseAll?: boolean;\n}\nconst HierarchyNode: React.FC<HierarchyNodeProps> = ({\n  tree,\n  depth = 0,\n  shouldExpand = true,\n  collapsing = false,\n  getLabel = (node) => node.name,\n  triggerExpandAll = false,\n  triggerCollapseAll = false,\n}) => {\n  const [displayChildren, setDisplayChildren] = useState(shouldExpand);\n  const [triggerExpandAllChildren, setTriggerExpandAllChildren] =\n    useState(triggerExpandAll);\n  const [show, setShow] = useState(false);\n  const [hideChildren, setHideChildren] = useState(false);\n  useEffect(() => setShow(true), []);\n  useEffect(() => {\n    if (hideChildren) {\n      setTimeout(() => setDisplayChildren(false), ANIMATION_TIME);\n    }\n  }, [hideChildren]);\n  useEffect(() => {\n    if (triggerExpandAll) {\n      setDisplayChildren(true);\n      setTriggerExpandAllChildren(true);\n      setTimeout(() => setTriggerExpandAllChildren(false), ANIMATION_TIME);\n    }\n  }, [triggerExpandAll]);\n  useEffect(() => {\n    if (triggerCollapseAll) {\n      setDisplayChildren(false);\n    }\n  }, [triggerCollapseAll]);\n  const handleExpanderClick = (): void => {\n    setHideChildren(displayChildren);\n    if (!displayChildren) setDisplayChildren(true);\n  };\n  return (\n    <div\n      style={{\n        marginLeft: `${depth * 0.5}rem`,\n      }}\n    >\n      <div\n        className={`mg-hierarchy-selector ${show && !collapsing ? 'show' : ''}`}\n      >\n        {tree.children?.length ? (\n          <button\n            type=\"button\"\n            className=\"mg-expander\"\n            onClick={handleExpanderClick}\n          >\n            {displayChildren ? '▾' : '▸'}\n          </button>\n        ) : (\n          <span className=\"mg-hierarchy-spacer\" />\n        )}\n        <div>\n          <span className=\"mg-hierarchy-label\">\n            {getLabel(tree)}{' '}\n            {tree.countgen && (\n              <span className=\"mg-number\">{tree.countgen}</span>\n            )}\n          </span>\n        </div>\n      </div>\n      {tree.children &&\n        tree.children.length > 0 &&\n        displayChildren &&\n        tree.children.map((child) => (\n          <HierarchyNode\n            key={child.name}\n            tree={child}\n            depth={depth + 1}\n            shouldExpand={tree.countgen === 1 && child.countgen === 1}\n            getLabel={getLabel}\n            collapsing={hideChildren}\n            triggerExpandAll={triggerExpandAllChildren}\n          />\n        ))}\n    </div>\n  );\n};\n\nexport default HierarchyNode;\n","import React from 'react';\n\ntype KeyValueProps = {\n  list: { key: string; value: string | React.ElementType }[];\n  dataCy?: string;\n};\n\nconst KeyValueList: React.FC<KeyValueProps> = ({ list, dataCy }) => (\n  <div\n    className=\"vf-grid vf-grid__col-2\"\n    style={{\n      gridTemplateColumns: '1fr 2fr',\n      rowGap: '0.5rem',\n    }}\n    data-cy={dataCy}\n  >\n    {list.map(({ key, value: Value }) => (\n      <React.Fragment key={key}>\n        <div style={{ textAlign: 'right' }} data-cy=\"kvl-key\">\n          {key}:\n        </div>\n        <div data-cy=\"kvl-value\">\n          {typeof Value === 'string' ? Value : <Value />}\n        </div>\n      </React.Fragment>\n    ))}\n  </div>\n);\n\nexport default KeyValueList;\n","import React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { debounce, round } from 'lodash-es';\nimport './style.css';\n\nimport 'styles/filters.css';\n\ntype SelectionType = {\n  min: number;\n  max: number;\n};\n\ntype SliderProps = {\n  min: number;\n  max: number;\n  steps?: number;\n  precision?: number;\n  logarithmic?: boolean;\n  selection?: SelectionType;\n  isEnabled?: boolean;\n  onChange?: (selection: SelectionType) => void;\n};\n\nconst areEqual = (s1: SelectionType, s2: SelectionType): boolean =>\n  s1.max === s2.max && s1.min === s2.min;\n\nconst Slider: React.FC<SliderProps> = ({\n  min,\n  max,\n  steps = 100,\n  precision = 0,\n  logarithmic = false,\n  isEnabled = true,\n  selection = null,\n  onChange = (s) => s,\n}) => {\n  const [currentSelection, setCurrentSelection] = useState({\n    min: selection && 'min' in selection ? selection.min : min,\n    max: selection && 'max' in selection ? selection.max : max,\n  });\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const debounced = useCallback(debounce(onChange, 300), []);\n  useEffect(() => {\n    if (!areEqual(currentSelection, selection)) {\n      debounced(currentSelection);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentSelection]);\n  useEffect(() => {\n    if (!areEqual(currentSelection, selection)) {\n      setCurrentSelection(selection);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selection]);\n\n  const step = useMemo(() => {\n    if (logarithmic) {\n      return (Math.log10(max) - Math.log10(min)) / steps;\n    }\n    return (max - min) / steps;\n  }, [steps, min, max, logarithmic]);\n\n  const scaleMin = useMemo(() => {\n    return logarithmic ? Math.log10(min) : min;\n  }, [logarithmic, min]);\n\n  const scaleMax = useMemo(() => {\n    return logarithmic ? Math.log10(max) : max;\n  }, [logarithmic, max]);\n\n  return (\n    <div className=\"mg-multirange-wrapper\">\n      <input\n        type=\"range\"\n        min={scaleMin}\n        max={scaleMax}\n        step={step}\n        name=\"min\"\n        value={\n          logarithmic ? Math.log10(currentSelection.min) : currentSelection.min\n        }\n        className=\"original\"\n        disabled={!isEnabled}\n        onChange={(evt) => {\n          const scaleLoc = Number(evt.target.value);\n          const newVal = logarithmic ? 10 ** scaleLoc : scaleLoc;\n          setCurrentSelection({\n            ...currentSelection,\n            min: round(newVal, precision),\n          });\n        }}\n      />\n      <input\n        type=\"range\"\n        min={scaleMin}\n        max={scaleMax}\n        step={step}\n        name=\"max\"\n        value={\n          logarithmic ? Math.log10(currentSelection.max) : currentSelection.max\n        }\n        className=\"ghost\"\n        disabled={!isEnabled}\n        onChange={(evt) => {\n          const scaleLoc = Number(evt.target.value);\n          const newVal = logarithmic ? 10 ** scaleLoc : scaleLoc;\n          setCurrentSelection({\n            ...currentSelection,\n            max: round(newVal, precision),\n          });\n        }}\n      />\n      <div className=\"labels\">\n        <div className=\"label-min\">\n          <span>{currentSelection.min}</span>\n        </div>\n        <div className=\"label-max\">\n          <span>{currentSelection.max}</span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Slider;\n","import React, { useState, useEffect } from 'react';\nimport './style.css';\n\ntype SwitchProps = {\n  id: string;\n  isOn?: boolean;\n  onChange?: (v: boolean) => void;\n};\nconst Switch: React.FC<SwitchProps> = ({\n  id,\n  onChange = (v) => v,\n  isOn = false,\n}) => {\n  const [value, setValue] = useState(isOn);\n  useEffect(() => {\n    setValue(isOn);\n    onChange(isOn);\n  }, [isOn, onChange]);\n\n  return (\n    <div>\n      <input\n        className=\"mg-switch\"\n        type=\"checkbox\"\n        id={id}\n        checked={value}\n        onChange={() => {\n          onChange(!value);\n          setValue(!value);\n        }}\n      />\n    </div>\n  );\n};\n\nexport default Switch;\n","import React, { useMemo } from 'react';\nimport { Link, useLocation } from 'react-router-dom';\n\nexport const Tab: React.FC = () => null;\n\ntype TabsProps = {\n  tabs: Array<{\n    label: string | React.ElementType;\n    to: string;\n  }>;\n  preservedQueryParameters?: string[];\n};\nconst Tabs: React.FC<TabsProps> = ({ tabs, preservedQueryParameters }) => {\n  const location = useLocation();\n  const queryParamString = useMemo(() => {\n    if (!preservedQueryParameters) return '';\n    const preserved = new URLSearchParams();\n    const existing = new URLSearchParams(location.search);\n    let anyPreserved = false;\n    preservedQueryParameters.forEach((queryParam) => {\n      if (existing.has(queryParam))\n        preserved.append(queryParam, existing.get(queryParam));\n      anyPreserved = true;\n    });\n    return anyPreserved ? `?${preserved.toString()}` : '';\n  }, [preservedQueryParameters, location.search]);\n  return (\n    <div className=\"vf-tabs mg-search-tabs\">\n      <ul className=\"vf-tabs__list\">\n        {tabs.map(({ label: Label, to }) => (\n          <li className=\"vf-tabs__item\" key={to}>\n            <Link\n              className={`vf-tabs__link ${\n                to === location.pathname ||\n                (to.startsWith('#') && to === location.hash) ||\n                (to === '#' && location.hash === '')\n                  ? 'is-active'\n                  : ''\n              }`}\n              to={to + queryParamString}\n            >\n              {typeof Label === 'string' ? Label : <Label />}\n            </Link>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default Tabs;\n","import React, { useEffect } from 'react';\nimport useQueryParamState from 'hooks/queryParamState/useQueryParamState';\n\ntype TabsProps = {\n  tabs: Array<{\n    label: string | React.ElementType;\n    to: string;\n  }>;\n  queryParameter: string;\n  defaultValue: string;\n};\nconst TabsForQueryParameter: React.FC<TabsProps> = ({\n  tabs,\n  queryParameter,\n  defaultValue,\n}) => {\n  const [tabQp, setTabQp] = useQueryParamState(queryParameter, defaultValue);\n  const [, setPage] = useQueryParamState('page', 1, Number);\n\n  useEffect(() => {\n    if (tabQp === '') {\n      setTabQp(defaultValue);\n      setPage(1);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [tabQp, queryParameter]);\n\n  return (\n    <div className=\"vf-tabs mg-search-tabs\">\n      <ul className=\"vf-tabs__list\">\n        {tabs.map(({ label: Label, to }) => (\n          <li className=\"vf-tabs__item\" key={to}>\n            <button\n              type=\"button\"\n              className={`vf-tabs__link mg-button-as-tab ${\n                to === tabQp ? 'is-active' : ''\n              }`}\n              onClick={() => {\n                setTabQp(to);\n                setPage(1);\n              }}\n            >\n              {typeof Label === 'string' ? Label : <Label />}\n            </button>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default TabsForQueryParameter;\n","import React from 'react';\nimport Tooltip from 'components/UI/Tooltip';\n\nconst TruncatedText: React.FC<{\n  maxLength?: number;\n  text: string;\n  withTooltip?: boolean;\n}> = ({ text, maxLength = 250, withTooltip = false }) => {\n  const isTruncated = text.length >= maxLength;\n  const truncated = (\n    <>\n      {text.substring(0, maxLength)}\n      {isTruncated && '...'}\n    </>\n  );\n  if (withTooltip && isTruncated)\n    return (\n      <Tooltip content={text}>\n        <span>{truncated}</span>\n      </Tooltip>\n    );\n  return truncated;\n};\n\nexport default TruncatedText;\n","import React from 'react';\nimport Tippy from '@tippyjs/react';\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport 'tippy.js/dist/tippy.css';\nimport './style.css';\n\ntype TooltipProps = {\n  content: React.ReactNode;\n  children?: React.ReactNode;\n  interactive?: boolean;\n};\n\nconst Tooltip: React.FC<TooltipProps> = ({\n  content,\n  children,\n  interactive = false,\n}) => (\n  <Tippy content={content} interactive={interactive}>\n    {children as React.ReactElement}\n  </Tippy>\n);\nexport default Tooltip;\n","import { useLocation } from 'react-router-dom';\n\nconst useURLAccession = (): string | undefined => {\n  const location = useLocation();\n  let { pathname } = location;\n  if (pathname.trim().endsWith('/')) pathname = pathname.trim().slice(0, -1);\n  const parts = pathname.split('/');\n  return parts?.[parts.length - 1];\n};\n\nexport default useURLAccession;\n","import React from 'react';\n\nconst AnalysisContext = React.createContext({\n  overviewData: null,\n  included: null,\n});\n\nexport default AnalysisContext;\n","import React, { useContext, useMemo } from 'react';\nimport KeyValueList from 'components/UI/KeyValueList';\nimport { Link } from 'react-router-dom';\nimport AnalysisContext from 'pages/Analysis/AnalysisContext';\nimport useMGnifyData from 'hooks/data/useMGnifyData';\n\nfunction isAssembly(experimentType: string): boolean {\n  return ['assembly', 'hybrid_assembly', 'long_reads_assembly'].includes(\n    experimentType\n  );\n}\n\ntype Run = {\n  attributes: {\n    'instrument-platform': string;\n    'instrument-model': string;\n  };\n};\n\ntype HybridAnalysisDetailsProps = {\n  assemblyId: string;\n};\n\nconst HybridAnalysisDetails: React.FC<HybridAnalysisDetailsProps> = ({\n  assemblyId,\n}) => {\n  const { loading: loadingRuns, data: runs } = useMGnifyData(\n    `assemblies/${assemblyId}/runs`\n  );\n  const instruments = useMemo(() => {\n    if (loadingRuns) return '';\n    const runsData = runs.data as Run[];\n    return runsData\n      .map(\n        (run) =>\n          `${run.attributes['instrument-platform']} – ${run.attributes['instrument-model']}`\n      )\n      .join('\\n');\n  }, [loadingRuns, runs]);\n  return (\n    <KeyValueList\n      list={[\n        {\n          key: 'Experiment type',\n          value: 'Hybrid assembly',\n        },\n        {\n          key: 'Instruments',\n          value: instruments,\n        },\n      ].filter(({ value }) => !!value)}\n    />\n  );\n};\n\nconst AnalysisOverview: React.FC = () => {\n  const { overviewData: data } = useContext(AnalysisContext);\n\n  const isHybrid =\n    data.attributes['experiment-type'] === 'hybrid_assembly' &&\n    !!data.relationships.assembly.data;\n  return (\n    <section>\n      <div className=\"vf-stack\">\n        <details open>\n          <summary>\n            <b>Description</b>\n          </summary>\n\n          <KeyValueList\n            list={[\n              {\n                key: 'Study',\n                value:\n                  data.relationships?.study?.data?.id &&\n                  (() => (\n                    <Link to={`/studies/${data.relationships.study.data.id}`}>\n                      {data.relationships.study.data.id}\n                    </Link>\n                  )),\n              },\n              {\n                key: 'Sample',\n                value:\n                  data.relationships?.sample?.data?.id &&\n                  (() => (\n                    <Link to={`/samples/${data.relationships.sample.data.id}`}>\n                      {data.relationships.sample.data.id}\n                    </Link>\n                  )),\n              },\n              {\n                key: 'Assembly',\n                value:\n                  data.relationships?.assembly?.data?.id &&\n                  isAssembly(data.attributes['experiment-type'] as string) &&\n                  (() => (\n                    <Link\n                      to={`/assemblies/${data.relationships.assembly.data.id}`}\n                    >\n                      {data.relationships.assembly.data.id}\n                    </Link>\n                  )),\n              },\n              {\n                key: 'Run',\n                value:\n                  data.relationships?.run?.data?.id &&\n                  (() => (\n                    <Link to={`/runs/${data.relationships.run.data.id}`}>\n                      {data.relationships.run.data.id}\n                    </Link>\n                  )),\n              },\n              {\n                key: 'Pipeline version',\n                value:\n                  data.attributes?.['pipeline-version'] &&\n                  (() => (\n                    <Link\n                      to={`/pipelines/${data.attributes['pipeline-version']}`}\n                    >\n                      {data.attributes['pipeline-version']}\n                    </Link>\n                  )),\n              },\n            ].filter(({ value }) => !!value)}\n          />\n        </details>\n        <details open>\n          <summary>\n            <b>Experiment details</b>\n          </summary>\n          {!isHybrid && (\n            <KeyValueList\n              list={[\n                {\n                  key: 'Experiment type',\n                  value: data.attributes['experiment-type'] as string,\n                },\n                {\n                  key: 'Instrument model',\n                  value: data.attributes['instrument-model'] as string,\n                },\n                {\n                  key: 'Instrument platform',\n                  value: data.attributes['instrument-platform'] as string,\n                },\n              ].filter(({ value }) => !!value)}\n            />\n          )}\n          {isHybrid && (\n            <HybridAnalysisDetails\n              assemblyId={data.relationships.assembly.data.id}\n            />\n          )}\n        </details>\n      </div>\n    </section>\n  );\n};\nexport default AnalysisOverview;\n","import React, { useRef, useContext } from 'react';\nimport * as Highcharts from 'highcharts';\nimport addExportMenu from 'highcharts/modules/exporting';\nimport HighchartsReact from 'highcharts-react-official';\n\nimport AnalysisContext from 'pages/Analysis/AnalysisContext';\n\naddExportMenu(Highcharts);\n\ntype QualityControlProps = {\n  summaryData: {\n    [key: string]: string;\n  } | null;\n};\nconst QualityControlChart: React.FC<QualityControlProps> = ({\n  summaryData,\n}) => {\n  const { overviewData: analysisData } = useContext(AnalysisContext);\n  const chartComponentRef = useRef<HighchartsReact.RefObject>(null);\n  const isAssembly = analysisData.attributes['experiment-type'] === 'assembly';\n\n  const unit = isAssembly ? 'contigs' : 'reads';\n  const capUnit = isAssembly ? 'Contigs' : 'Reads';\n\n  const remaining = [0, 0, 0, 0, 0];\n  const filtered = [0, 0, 0, 0, 0];\n  const subsampled = [0, 0, 0, 0, 0];\n\n  const analysisSummary = {};\n  (\n    (analysisData.attributes?.['analysis-summary'] as {\n      key: string;\n      value: string;\n    }[]) || []\n  ).forEach(({ key, value }) => {\n    analysisSummary[key] = value;\n  });\n\n  if (summaryData) subsampled[4] = Number(summaryData.sequence_count);\n  remaining[0] = Number(analysisSummary['Submitted nucleotide sequences']);\n  remaining[1] = Number(\n    analysisSummary['Nucleotide sequences after format-specific filtering']\n  );\n  remaining[2] = Number(\n    analysisSummary['Nucleotide sequences after length filtering']\n  );\n  remaining[3] = Number(\n    analysisSummary['Nucleotide sequences after undetermined bases filtering']\n  );\n  filtered[2] = remaining[1] - remaining[2];\n  filtered[1] = remaining[0] - remaining[1];\n  if (summaryData) filtered[4] = remaining[3] - remaining[4] - subsampled[4];\n\n  const options = {\n    chart: {\n      type: 'bar',\n      height: 240,\n    },\n    title: {\n      text: `Number of sequence ${unit} per QC step`,\n    },\n    yAxis: {\n      min: 0,\n      title: {\n        text: 'Count',\n      },\n    },\n    xAxis: {\n      categories: [\n        `Initial ${unit}`,\n        'Trimming',\n        'Length filtering',\n        'Ambiguous base filtering',\n        `${capUnit} subsampled for QC analysis`,\n      ],\n    },\n    plotOptions: {\n      series: {\n        stacking: 'normal',\n      },\n    },\n    credits: {\n      enabled: false,\n    },\n    series: [\n      {\n        name: `${capUnit} filtered out`,\n        data: filtered,\n        color: '#CCCCD3',\n      },\n      {\n        name: `${capUnit} remaining`,\n        data: remaining,\n        color: '#058DC7',\n      },\n      {\n        name: `${capUnit} after sampling`,\n        data: subsampled,\n        color: '#8dc7c7',\n      },\n    ],\n  };\n  return (\n    <HighchartsReact\n      highcharts={Highcharts}\n      options={options}\n      ref={chartComponentRef}\n      containerProps={{ id: 'qc-step-chart' }}\n    />\n  );\n};\n\nexport default QualityControlChart;\n","import React, { useContext, useRef } from 'react';\nimport * as Highcharts from 'highcharts';\nimport addExportMenu from 'highcharts/modules/exporting';\nimport HighchartsReact from 'highcharts-react-official';\n\nimport Loading from 'components/UI/Loading';\nimport FetchError from 'components/UI/FetchError';\nimport useMGnifyData from 'hooks/data/useMGnifyData';\nimport { ResponseFormat, TSVResponse } from 'hooks/data/useData';\nimport useURLAccession from 'hooks/useURLAccession';\nimport AnalysisContext from 'pages/Analysis/AnalysisContext';\n\naddExportMenu(Highcharts);\n\ntype ContigsHistogramProps = {\n  summaryData: {\n    [key: string]: string;\n  };\n};\nconst ContigsHistogram: React.FC<ContigsHistogramProps> = ({ summaryData }) => {\n  const { overviewData } = useContext(AnalysisContext);\n  const chartComponentRef = useRef<HighchartsReact.RefObject>(null);\n  const accession = useURLAccession();\n  const { data, loading, error } = useMGnifyData(\n    `analyses/${accession}/seq-length`,\n    {},\n    {},\n    ResponseFormat.TSV\n  );\n\n  if (loading) return <Loading size=\"large\" />;\n  if (error) return <FetchError error={error} />;\n  if (!data) return <Loading />;\n  const histData = (data as unknown as TSVResponse).map(([x, y]) => [\n    Number(x),\n    Number(y),\n  ]);\n  const lengthMax = Math.max(...histData.map(([x]) => x));\n\n  const isAssembly = overviewData.attributes['experiment-type'] === 'assembly';\n  const unit = isAssembly ? 'contigs' : 'reads';\n  const capUnit = isAssembly ? 'Contigs' : 'Reads';\n\n  const options = {\n    chart: {\n      marginLeft: 78,\n      style: {\n        fontFamily: 'Helvetica',\n      },\n      zoomType: 'x',\n    },\n    title: {\n      text: `${capUnit} length histogram`,\n      style: {\n        fontSize: 16,\n        fontWeight: 'bold',\n      },\n    },\n    // TODO: Form wha I can see isFromSubset is not in use anymore.\n    // Remove this code if after confirming\n    // subtitle: {\n    //     text: ((chartOptions['isFromSubset'])\n    //         ? 'A subset of the sequences was used to generate this chart -'\n    //         : '') + 'Click and drag in the plot area to zoom in'\n    // },\n    yAxis: {\n      title: { text: `Number of ${unit}` },\n    },\n    xAxis: {\n      min: 0,\n      max: 100 * (Math.floor(lengthMax / 100) + 1),\n      plotBands:\n        summaryData === null\n          ? []\n          : [\n              {\n                // visualize the standard deviation\n                from:\n                  Number(summaryData.average_length) -\n                  Number(summaryData.standard_deviation_length),\n                to:\n                  Number(summaryData.average_length) +\n                  Number(summaryData.standard_deviation_length),\n                color: 'rgba(128, 128, 128, .2)',\n                label: {\n                  text: `Standard Deviation<br/>\\u00B1${Number(\n                    summaryData.standard_deviation_length\n                  ).toFixed(2)}`,\n                  style: {\n                    color: '#666666',\n                    fontSize: '0.8em',\n                  },\n                },\n              },\n            ],\n    },\n    series: [\n      {\n        name: capUnit,\n        data: histData,\n        color: '#058dc7', // (chartOptions['isFromSubset']) ? '#8dc7c7' : '#058dc7'\n      },\n    ],\n    legend: { enabled: false },\n    credits: false,\n    navigation: {\n      buttonOptions: {\n        height: 32,\n        width: 32,\n        symbolX: 16,\n        symbolY: 16,\n        y: -10,\n      },\n    },\n    // exporting: util.getExportingStructure(urlToFile)\n  };\n  return (\n    <HighchartsReact\n      highcharts={Highcharts}\n      options={options}\n      ref={chartComponentRef}\n      containerProps={{ id: 'reads-length-hist' }}\n    />\n  );\n};\n\nexport default ContigsHistogram;\n","import React, { useRef } from 'react';\nimport * as Highcharts from 'highcharts';\nimport addExportMenu from 'highcharts/modules/exporting';\nimport HighchartsReact from 'highcharts-react-official';\n\nimport Loading from 'components/UI/Loading';\nimport FetchError from 'components/UI/FetchError';\nimport useMGnifyData from 'hooks/data/useMGnifyData';\nimport { ResponseFormat, TSVResponse } from 'hooks/data/useData';\nimport useURLAccession from 'hooks/useURLAccession';\n\naddExportMenu(Highcharts);\n\nconst NucleotidesHistogram: React.FC = () => {\n  const chartComponentRef = useRef<HighchartsReact.RefObject>(null);\n  const accession = useURLAccession();\n  const { data, loading, error } = useMGnifyData(\n    `analyses/${accession}/nucleotide-distribution`,\n    {},\n    {},\n    ResponseFormat.TSV\n  );\n\n  if (loading) return <Loading size=\"large\" />;\n  if (error) return <FetchError error={error} />;\n  if (!data) return <Loading />;\n  const dataHist = { pos: [], A: [], G: [], T: [], C: [], N: [] };\n  const colors = {\n    A: 'rgb(16, 150, 24)',\n    G: 'rgb(255, 153, 0)',\n    C: 'rgb(51, 102, 204)',\n    T: 'rgb(220, 57, 18)',\n    N: 'rgb(138, 65, 23)',\n  };\n  const headers = (data as unknown as TSVResponse)[0];\n  (data as unknown as TSVResponse).slice(1).forEach((line) => {\n    line.forEach((v, i) => {\n      dataHist[headers[i]].push(Number(v));\n    });\n  });\n\n  const options = {\n    chart: {\n      type: 'area',\n      style: {\n        fontFamily: 'Helvetica',\n      },\n    },\n    title: {\n      text: 'Nucleotide position histogram',\n      style: {\n        fontSize: 16,\n        fontWeight: 'bold',\n      },\n    },\n    xAxis: {\n      categories: dataHist.pos,\n      tickmarkPlacement: 'on',\n      title: { enabled: false },\n    },\n    yAxis: {\n      min: 0,\n      max: 100,\n      title: { enabled: false },\n    },\n    plotOptions: {\n      area: {\n        stacking: 'normal',\n        lineColor: '#666666',\n        lineWidth: 1,\n        marker: {\n          lineWidth: 1,\n          lineColor: '#666666',\n        },\n      },\n    },\n    tooltip: { shared: true },\n    series: ['A', 'T', 'C', 'G', 'N'].map((d) => ({\n      name: d,\n      data: dataHist[d],\n      color: colors[d],\n    })),\n    credits: false,\n    navigation: {\n      buttonOptions: {\n        height: 32,\n        width: 32,\n        symbolX: 16,\n        symbolY: 16,\n        y: -10,\n      },\n    },\n    // exporting: util.getExportingStructure(urlToFile),\n    // TODO: Add download options\n  };\n  return (\n    <HighchartsReact\n      highcharts={Highcharts}\n      options={options}\n      ref={chartComponentRef}\n      containerProps={{ id: 'nucleotide-chart' }}\n    />\n  );\n};\n\nexport default NucleotidesHistogram;\n","import React, { useContext, useRef } from 'react';\nimport * as Highcharts from 'highcharts';\nimport addExportMenu from 'highcharts/modules/exporting';\nimport HighchartsReact from 'highcharts-react-official';\n\nimport Loading from 'components/UI/Loading';\nimport FetchError from 'components/UI/FetchError';\nimport useMGnifyData from 'hooks/data/useMGnifyData';\nimport { ResponseFormat, TSVResponse } from 'hooks/data/useData';\nimport useURLAccession from 'hooks/useURLAccession';\nimport AnalysisContext from 'pages/Analysis/AnalysisContext';\n\naddExportMenu(Highcharts);\n\ntype ContigsHistogramProps = {\n  summaryData: {\n    [key: string]: string;\n  };\n};\nconst ContigsDistribution: React.FC<ContigsHistogramProps> = ({\n  summaryData,\n}) => {\n  const { overviewData } = useContext(AnalysisContext);\n  const chartComponentRef = useRef<HighchartsReact.RefObject>(null);\n  const accession = useURLAccession();\n  const { data, loading, error } = useMGnifyData(\n    `analyses/${accession}/gc-distribution`,\n    {},\n    {},\n    ResponseFormat.TSV\n  );\n\n  if (loading) return <Loading size=\"large\" />;\n  if (error) return <FetchError error={error} />;\n  if (!data) return <Loading />;\n  const distData = (data as unknown as TSVResponse).map(([x, y]) => [\n    Number(x),\n    Number(y),\n  ]);\n\n  const isAssembly = overviewData.attributes['experiment-type'] === 'assembly';\n  const unit = isAssembly ? 'contigs' : 'reads';\n  const capUnit = isAssembly ? 'Contigs' : 'Reads';\n\n  const options = {\n    chart: {\n      style: {\n        fontFamily: 'Helvetica',\n      },\n      zoomType: 'x',\n    },\n    title: {\n      text: `${capUnit} GC distribution`,\n      style: {\n        fontSize: 16,\n        fontWeight: 'bold',\n      },\n    },\n    yAxis: {\n      title: { text: `Number of ${unit}` },\n    },\n    xAxis: {\n      min: 0,\n      max: 100,\n\n      plotBands:\n        summaryData === null\n          ? []\n          : [\n              {\n                // visualize the standard deviation\n                from:\n                  Number(summaryData.average_gc_content) -\n                  Number(summaryData.standard_deviation_gc_content),\n                to:\n                  Number(summaryData.average_gc_content) +\n                  Number(summaryData.standard_deviation_gc_content),\n                color: 'rgba(128, 128, 128, .2)',\n                borderColor: '#000000',\n                label: {\n                  text: `Standard Deviation<br/>\\u00B1${Number(\n                    summaryData.standard_deviation_gc_content\n                  ).toFixed(2)}`,\n                  style: {\n                    color: '#666666',\n                    fontSize: '0.8em',\n                  },\n                },\n              },\n            ],\n    },\n    series: [\n      {\n        name: capUnit,\n        data: distData,\n        color: '#058dc7', // (chartOptions['isFromSubset']) ? '#8dc7c7' : '#058dc7'\n      },\n    ],\n    legend: { enabled: false },\n    credits: false,\n    navigation: {\n      buttonOptions: {\n        height: 32,\n        width: 32,\n        symbolX: 16,\n        symbolY: 16,\n        y: -10,\n      },\n    },\n    // exporting: util.getExportingStructure(urlToFile)\n  };\n  return (\n    <HighchartsReact\n      highcharts={Highcharts}\n      options={options}\n      ref={chartComponentRef}\n      containerProps={{ id: 'reads-gc-hist' }}\n    />\n  );\n};\n\nexport default ContigsDistribution;\n","import React, { useRef } from 'react';\nimport * as Highcharts from 'highcharts';\nimport HighchartsReact from 'highcharts-react-official';\n\ntype SeqLengthChartProps = {\n  summaryData: {\n    [key: string]: string;\n  };\n};\nconst SeqLengthChart: React.FC<SeqLengthChartProps> = ({ summaryData }) => {\n  const chartComponentRef = useRef<HighchartsReact.RefObject>(null);\n\n  const options = {\n    chart: {\n      type: 'bar',\n      marginTop: 0, // Keep all charts left aligned\n      height: 120,\n    },\n    title: false,\n    xAxis: {\n      categories: ['Minimum', 'Average', 'Maximum'],\n      title: { enabled: false },\n      lineColor: '#595959',\n      tickColor: '',\n    },\n    yAxis: {\n      min: 0,\n      max: 100 * (Math.floor(Number(summaryData.length_max) / 100) + 1),\n      title: { text: 'Sequence length (bp)' },\n      plotBands: [\n        {\n          // visualize the standard deviation\n          from:\n            Number(summaryData.average_length) -\n            Number(summaryData.standard_deviation_length),\n          to:\n            summaryData.average_length +\n            Number(summaryData.standard_deviation_length),\n          color: 'rgba(128, 128, 128, .2)',\n        },\n      ],\n    },\n    plotOptions: {\n      series: {\n        grouping: false,\n        shadow: false,\n        borderWidth: 0,\n      },\n    },\n    series: [\n      {\n        name: 'Length',\n        data: [\n          {\n            y: Number(summaryData.length_min),\n            x: 0,\n            color: 'rgb(114, 191, 63)',\n          },\n          {\n            y: Number(summaryData.average_length),\n            x: 1,\n            color: 'rgb(63, 114, 191)',\n          },\n          {\n            y: Number(summaryData.length_max),\n            x: 2,\n            color: 'rgb(114, 63, 191)',\n          },\n        ],\n        pointPadding: -0.2,\n        tooltip: {\n          /* eslint-disable react/no-this-in-sfc */\n          pointFormatter() {\n            return `<span style=\"color:${this.color}\">\\u25CF</span> ${\n              this.category\n            }: <b>${this.y.toFixed(2)}</b><br/>`;\n          },\n          /* eslint-enable react/no-this-in-sfc */\n        },\n      },\n    ],\n    legend: { enabled: false },\n    credits: false,\n    navigation: {\n      buttonOptions: {\n        height: 32,\n        width: 32,\n        symbolX: 16,\n        symbolY: 16,\n        y: -10,\n      },\n    },\n    exporting: { enabled: false },\n  };\n  return (\n    <HighchartsReact\n      highcharts={Highcharts}\n      options={options}\n      ref={chartComponentRef}\n      containerProps={{ id: 'reads-length-barchart' }}\n    />\n  );\n};\n\nexport default SeqLengthChart;\n","import React, { useRef } from 'react';\nimport * as Highcharts from 'highcharts';\nimport HighchartsReact from 'highcharts-react-official';\n\ntype GCContentChartProps = {\n  summaryData: {\n    [key: string]: string;\n  };\n};\nconst GCContentChart: React.FC<GCContentChartProps> = ({ summaryData }) => {\n  const chartComponentRef = useRef<HighchartsReact.RefObject>(null);\n\n  const options = {\n    chart: {\n      type: 'bar',\n      marginTop: 0, // Keep all charts left aligned\n      height: 150,\n    },\n    title: false,\n    xAxis: {\n      categories: ['Content'],\n      title: { enabled: false },\n      lineColor: '#595959',\n      tickColor: '',\n    },\n    yAxis: {\n      min: 0,\n      max: 100,\n      title: { enabled: false },\n      plotBands: [\n        {\n          // visualize the standard deviation\n          from:\n            Number(summaryData.average_gc_content) -\n            Number(summaryData.standard_deviation_gc_content),\n          to:\n            Number(summaryData.average_gc_content) +\n            Number(summaryData.standard_deviation_gc_content),\n          color: 'rgba(128, 128, 128, .2)',\n        },\n      ],\n    },\n    plotOptions: {\n      series: {\n        grouping: false,\n        shadow: false,\n        borderWidth: 0,\n      },\n    },\n    series: [\n      {\n        name: 'GC content',\n        pointPadding: 0.25,\n        color: 'rgb(63, 114, 191)',\n        tooltip: {\n          /* eslint-disable react/no-this-in-sfc */\n          pointFormatter() {\n            return `<span style=\"color:${this.color}\">\\u25CF</span> ${\n              this.series.name\n            }: <b>${this.y.toFixed(2)}%</b><br/>`;\n          },\n          /* eslint-enable react/no-this-in-sfc */\n        },\n        data: [Number(summaryData.average_gc_content)],\n      },\n      {\n        name: 'AT content',\n        color: 'rgb(114, 63, 191)',\n        pointPadding: 0.25,\n        threshold: Number(summaryData.average_gc_content),\n        tooltip: {\n          /* eslint-disable react/no-this-in-sfc */\n          pointFormatter() {\n            const val = (100 - Number(summaryData.average_gc_content)).toFixed(\n              2\n            );\n            // prettier-ignore\n            return `\n              <span style=\"color:${this.color}\">\\u25CF</span>\n              ${this.series.name}: <b>${val}%</b>\n              <br/>`;\n          },\n          /* eslint-enable react/no-this-in-sfc */\n        },\n        data: [100],\n      },\n    ],\n    credits: false,\n    navigation: {\n      buttonOptions: {\n        height: 32,\n        width: 32,\n        symbolX: 16,\n        symbolY: 16,\n        y: -10,\n      },\n    },\n    exporting: { enabled: false },\n  };\n  return (\n    <HighchartsReact\n      highcharts={Highcharts}\n      options={options}\n      ref={chartComponentRef}\n      containerProps={{ id: 'reads-gc-barchart' }}\n    />\n  );\n};\n\nexport default GCContentChart;\n","import React, { useContext } from 'react';\n\nimport useMGnifyData from 'hooks/data/useMGnifyData';\nimport Loading from 'components/UI/Loading';\nimport { ResponseFormat } from 'hooks/data/useData';\nimport AnalysisContext from 'pages/Analysis/AnalysisContext';\nimport QualityControlChart from './QCChart';\nimport ContigsHistogram from './ContigsHistogram';\nimport NucleotidesHistogram from './NucleotidesHistogram';\nimport ContigsDistribution from './ContigsDistribution';\nimport SeqLengthChart from './SeqLengthChart';\nimport GCContentChart from './GCContentChart';\n\nimport './style.css';\n\nconst QualityControl: React.FC = () => {\n  const { overviewData: analysisData } = useContext(AnalysisContext);\n  const accession = analysisData.id;\n  const { data, loading, error } = useMGnifyData(\n    `analyses/${accession}/summary`,\n    {},\n    {},\n    ResponseFormat.TSV\n  );\n  if (loading) return <Loading size=\"large\" />;\n  const summaryData =\n    error || !data\n      ? null\n      : Object.fromEntries(data as unknown as Array<[k: string, v: string]>);\n\n  const isAssembly = analysisData.attributes['experiment-type'] === 'assembly';\n  const unit = isAssembly ? 'contig' : 'read';\n  const units = isAssembly ? 'contigs' : 'reads';\n\n  return (\n    <div className=\"vf-stack vf-stack--200\" data-cy=\"run-qc-chart\">\n      <p>\n        The chart below shows the number of {units} which pass the quality\n        control steps in the pipeline. Paired-end sequences may have been\n        merged, in which case the initial number of {units} may differ from the\n        number given by ENA.\n      </p>\n      <QualityControlChart summaryData={summaryData} />\n      {summaryData && Number(analysisData.attributes['pipeline-version']) > 2 && (\n        <>\n          <p>\n            The histograms below show the distributions of sequence lengths\n            (left) and percentage GC content (right) for the sequences having\n            passed quality control. Note that for large files, the distributions\n            were compiled from a random subset of 2 million\n            {units}. The standard deviations are shown on each plot. The bar\n            chart underneath each graph indicates the minimum, mean and maximum\n            length and mean GC and AT content, respectively.\n          </p>\n          <div className=\"vf-grid vf-grid__col-2\">\n            <div className=\"vf-stack\">\n              <ContigsHistogram summaryData={summaryData} />\n              <SeqLengthChart summaryData={summaryData} />\n            </div>\n            <div className=\"vf-stack\">\n              <ContigsDistribution summaryData={summaryData} />\n              <GCContentChart summaryData={summaryData} />\n            </div>\n          </div>\n          <p>\n            The graph below show the relative abundance of nucletotides (A, C,\n            G, T, or ambiguous base &quot;N&quot;) at each position starting\n            from the beginning of each {unit} up to the first 500 base pairs.\n          </p>\n          <NucleotidesHistogram />\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default QualityControl;\n","import React from 'react';\n\nconst ContigsQueryContext = React.createContext({\n  contigsQueryData: {\n    data: null,\n    loading: false,\n    error: null,\n  },\n});\n\nexport default ContigsQueryContext;\n","import { KeyValue } from 'hooks/data/useData';\nimport React from 'react';\n\ntype EMGTableProps = {\n  paginationLinks: KeyValue;\n  handleCursor: (cursor: string) => void;\n};\n\nconst pageCursorFromPaginationURL = (linkURL): string => {\n  return linkURL.split('cursor=')[1].split('&')[0];\n};\n\nconst CursorPagination: React.FC<EMGTableProps> = ({\n  paginationLinks,\n  handleCursor,\n}) => {\n  const canPreviousPage = !!paginationLinks.prev;\n  const canNextPage = !!paginationLinks.next;\n\n  return (\n    <section className=\"mg-table-footer\">\n      <nav className=\"vf-pagination\" aria-label=\"Pagination\">\n        <ul className=\"vf-pagination__list\">\n          <li className=\"vf-pagination__item vf-pagination__item--previous-page\">\n            <button\n              disabled={!canPreviousPage}\n              type=\"button\"\n              onClick={() =>\n                handleCursor(pageCursorFromPaginationURL(paginationLinks.prev))\n              }\n              className=\"vf-button vf-button--link vf-pagination__link\"\n            >\n              Previous<span className=\"vf-u-sr-only\"> page</span>\n            </button>\n          </li>\n\n          <li className=\"vf-pagination__item vf-pagination__item--next-page\">\n            <button\n              disabled={!canNextPage}\n              type=\"button\"\n              onClick={() =>\n                handleCursor(pageCursorFromPaginationURL(paginationLinks.next))\n              }\n              className=\"vf-button vf-button--link vf-pagination__link\"\n            >\n              Next<span className=\"vf-u-sr-only\"> page</span>\n            </button>\n          </li>\n        </ul>\n      </nav>\n    </section>\n  );\n};\n\nexport default CursorPagination;\n","import React, { useContext, useMemo } from 'react';\n\nimport FetchError from 'components/UI/FetchError';\nimport EMGTable from 'components/UI/EMGTable';\nimport Tooltip from 'components/UI/Tooltip';\nimport ContigsQueryContext from 'components/Analysis/ContigViewer/ContigsQueryContext';\n\nimport './style.css';\n\nimport ArrowForLink from 'components/UI/ArrowForLink';\nimport CursorPagination from 'components/UI/EMGTable/CursorPagination';\nimport TruncatedText from 'components/UI/TextTruncated';\nimport useQueryParamState from 'hooks/queryParamState/useQueryParamState';\n\ntype ContigFeatureProps = {\n  annotationType: string;\n  present: boolean;\n};\n\nconst ContigFeatureFlag: React.FC<ContigFeatureProps> = ({\n  annotationType,\n  present,\n}) => {\n  let color;\n  const letter = annotationType[0].toUpperCase();\n  switch (annotationType) {\n    case 'cog':\n      color = '#3b6fb6';\n      break;\n    case 'kegg':\n      color = '#18974c';\n      break;\n    case 'pfam':\n      color = '#193f90';\n      break;\n    case 'interpro':\n      color = '#734595';\n      break;\n    case 'go':\n      color = '#f49e17';\n      break;\n    case 'antismash':\n      color = '#b65417';\n      break;\n    default:\n      color = '#8d8f8e';\n  }\n  if (!present) {\n    color += '55';\n  }\n  const tooltip = `${\n    present ? 'Has' : 'Doesn’t have'\n  } ${annotationType} annotations`;\n  return (\n    <Tooltip content={tooltip}>\n      <div\n        className=\"emg-contig-feature-flag vf-text vf-text-body--4\"\n        style={{ borderColor: color, color }}\n      >\n        {letter}\n      </div>\n    </Tooltip>\n  );\n};\n\nconst ContigsTable: React.FC = () => {\n  const { contigsQueryData } = useContext(ContigsQueryContext);\n  const { data, loading, error } = contigsQueryData || {};\n  const [, setSelectedContig] = useQueryParamState('selected_contig', '');\n  const [, setContigsPageCursor] = useQueryParamState(\n    'contigs_page_cursor',\n    ''\n  );\n\n  const contigsColumns = useMemo(() => {\n    return [\n      {\n        id: 'contig_id',\n        Header: 'Name',\n        accessor: (contig) => contig.attributes['contig-id'],\n        Cell: ({ cell }) => (\n          <button\n            className=\"vf-button vf-button--link vf-button--sm contig-id-button\"\n            type=\"button\"\n            onClick={() => setSelectedContig(cell.value)}\n          >\n            <TruncatedText text={cell.value} withTooltip maxLength={32} />\n            <ArrowForLink />\n          </button>\n        ),\n      },\n      {\n        id: 'length',\n        Header: 'Length (bp)',\n        accessor: (contig) => contig.attributes.length,\n        Cell: ({ cell }) => <span>{cell.value}</span>,\n      },\n      {\n        id: 'coverage',\n        Header: 'Coverage',\n        accessor: (contig) => contig.attributes.coverage,\n        Cell: ({ cell }) => <span>{cell.value}</span>,\n      },\n      {\n        id: 'features',\n        Header: 'Features',\n        accessor: (contig) => contig.attributes,\n        Cell: ({ cell }) => {\n          const flags = Object.entries(cell.value)\n            .filter(([key]) => key.startsWith('has-'))\n            .map(([key, value]) => (\n              <ContigFeatureFlag\n                key={key}\n                annotationType={key.substring(4)}\n                present={!!value}\n              />\n            ));\n          return <div className=\"emg-contig-feature-flags\">{flags}</div>;\n        },\n      },\n    ];\n  }, [setSelectedContig]);\n\n  if (error || !data) return <FetchError error={error} />;\n\n  return (\n    <div>\n      <EMGTable\n        cols={contigsColumns}\n        data={data}\n        showPagination={false}\n        Title={<>Assembly Contigs ({data.meta.pagination.count})</>}\n        initialPage={0}\n        className=\"mg-contigs-table\"\n        namespace=\"contigs_\"\n        isStale={loading}\n        showTextFilter\n      />\n      <CursorPagination\n        paginationLinks={data.links}\n        handleCursor={(cursor) => setContigsPageCursor(cursor)}\n      />\n    </div>\n  );\n};\n\nexport default ContigsTable;\n","import Dexie, { Table } from 'dexie';\n\nexport interface GFF {\n  id?: number;\n  name: string;\n  size: number;\n  encodedGFF: string;\n  added: Date;\n}\n\nexport class GFFDb extends Dexie {\n  gffs!: Table<GFF>;\n\n  constructor() {\n    super('emgGFF');\n    this.version(1).stores({\n      gffs: '++id, name',\n    });\n  }\n}\n\nexport const db = new GFFDb();\n\nexport async function encodeGFF(file: File): Promise<string> {\n  return new Promise((resolve) => {\n    const reader = new FileReader();\n    reader.onload = () => {\n      const text = reader.result;\n      resolve(btoa(text as string));\n    };\n    reader.readAsText(file);\n  });\n}\n","/* eslint-disable react/jsx-props-no-spreading */\nimport React, { useRef } from 'react';\nimport { Column, useSortBy, useTable } from 'react-table';\n\nimport Loading from 'components/UI/Loading';\n\ntype EMGTableProps = {\n  cols: Column[];\n  data: Array<unknown>;\n  className?: string;\n  sortable?: boolean;\n  loading?: boolean;\n  isStale?: boolean;\n};\n\nconst PlainTable: React.FC<EMGTableProps> = ({\n  cols,\n  data,\n  className = '',\n  sortable = false,\n  loading = false,\n  isStale = false,\n}) => {\n  const { getTableProps, getTableBodyProps, headerGroups, rows, prepareRow } =\n    useTable(\n      {\n        columns: cols,\n        data,\n      },\n      useSortBy\n    );\n  const tableRef = useRef(null);\n\n  if (loading && !isStale) return <Loading size=\"small\" />;\n\n  return (\n    <section>\n      <div className=\"mg-table-overlay-container\">\n        <div className={loading && isStale ? 'mg-table-overlay' : undefined} />\n        <table\n          {...getTableProps}\n          className={`vf-table--striped mg-table ${className}`}\n          ref={tableRef}\n        >\n          <thead className=\"vf-table__header\">\n            {headerGroups.map((headerGroup) => (\n              <tr\n                {...headerGroup.getHeaderGroupProps()}\n                className=\"vf-table__row\"\n              >\n                {headerGroup.headers.map((column) => (\n                  <th\n                    {...(sortable && column.canSort\n                      ? column.getHeaderProps(column.getSortByToggleProps())\n                      : { key: column.id })}\n                    className=\"vf-table__heading\"\n                  >\n                    {column.render('Header')}\n                    {sortable && column.canSort && (\n                      <>\n                        &nbsp;\n                        <span>\n                          {/* eslint-disable-next-line no-nested-ternary */}\n                          {column.isSorted ? (\n                            column.isSortedDesc ? (\n                              <i className=\"icon icon-common icon-sort-down\" />\n                            ) : (\n                              <i className=\"icon icon-common icon-sort-up\" />\n                            )\n                          ) : (\n                            <i className=\"icon icon-common icon-sort\" />\n                          )}\n                        </span>\n                      </>\n                    )}\n                  </th>\n                ))}\n              </tr>\n            ))}\n          </thead>\n          <tbody {...getTableBodyProps()} className=\"vf-table__body\">\n            {rows.map((row) => {\n              prepareRow(row);\n              return (\n                <tr {...row.getRowProps()} className=\"vf-table__row\">\n                  {row.cells.map((cell) => {\n                    return (\n                      <td {...cell.getCellProps()} className=\"vf-table__cell\">\n                        {cell.render('Cell')}\n                      </td>\n                    );\n                  })}\n                </tr>\n              );\n            })}\n          </tbody>\n        </table>\n      </div>\n    </section>\n  );\n};\n\nexport default PlainTable;\n","import React, { useEffect, useMemo, useState } from 'react';\n\nimport {\n  db,\n  encodeGFF,\n} from 'components/Analysis/ContigViewer/GFFCompare/gff_db';\nimport { useLiveQuery } from 'dexie-react-hooks';\n\nimport './style.css';\n\nimport ArrowForLink from 'components/UI/ArrowForLink';\nimport PlainTable from 'components/UI/PlainTable';\nimport FileUploaderButton from 'components/UI/FileUploaderButton';\nimport { Browser } from 'igv';\nimport EMGModal from 'components/UI/EMGModal';\nimport useQueryParamState from 'hooks/queryParamState/useQueryParamState';\n\ntype GFFCompareProps = {\n  igvBrowser: Browser;\n};\n\nexport const getGFFHeaderValue = (encodedGff, varName) => {\n  try {\n    return atob(encodedGff).split(`${varName}=`)[1].split('\\n')[0];\n  } catch (TypeError) {\n    return null;\n  }\n};\n\nexport const colorScale = (number, max) => {\n  return `rgba(0,128,128,${0.3 + (0.7 * number) / max})`;\n};\n\nconst GFFCompare: React.FC<GFFCompareProps> = ({ igvBrowser }) => {\n  const [modalIsOpen, setIsOpen] = useState(false);\n  const [uploadError, setUploadError] = useState(null);\n\n  const [gffComparisonId, setGffComparisonId] = useQueryParamState(\n    'gff_comparison_id',\n    null,\n    Number\n  );\n\n  const gffs = useLiveQuery(() => db.gffs.toArray());\n\n  useEffect(() => {\n    if (gffComparisonId) {\n      db.gffs.get(gffComparisonId).then((gff) => {\n        if (gff === undefined) {\n          setGffComparisonId(null);\n        } else if (igvBrowser) {\n          const isMetaproteomics =\n            atob(gff.encodedGFF).indexOf('PeptideShaker') > -1;\n          if (igvBrowser.findTracks('name', gff.name).length === 0) {\n            igvBrowser.removeTrackByName(gff.name);\n            igvBrowser.loadTrack({\n              name: gff.name,\n              type: 'annotation',\n              url: `data:application/octet-stream;base64,${gff.encodedGFF}`,\n              format: 'gff3',\n              filterTypes: [],\n              removable: false,\n              displayMode: 'EXPANDED',\n              label: isMetaproteomics ? 'Metaproteomics' : 'Local GFF',\n            });\n          }\n        }\n      });\n    }\n  }, [gffComparisonId, igvBrowser, setGffComparisonId]);\n\n  const columns = useMemo(() => {\n    return [\n      {\n        id: 'name',\n        Header: 'GFF Filename',\n        accessor: (gff) => gff.name,\n        Cell: ({ cell, row }) => (\n          <button\n            className=\"vf-button vf-button--link vf-button--sm contig-id-button\"\n            type=\"button\"\n            onClick={async () => {\n              const gff = await db.gffs.get(row.original.id);\n              setGffComparisonId(gff.id);\n              setIsOpen(false);\n            }}\n          >\n            {cell.value}\n            <ArrowForLink />\n          </button>\n        ),\n      },\n      {\n        id: 'size',\n        Header: 'File size (Kb)',\n        accessor: (gff) => gff.size,\n        Cell: ({ cell }) => <span>{cell.value}</span>,\n      },\n      {\n        id: 'added',\n        Header: 'Added',\n        accessor: (gff) => gff.added,\n        Cell: ({ cell }) => <span>{cell.value?.toLocaleString()}</span>,\n      },\n      {\n        id: 'del',\n        Header: 'Remove',\n        accessor: (gff) => gff.id,\n        Cell: ({ cell }) => (\n          <button\n            className=\"vf-button vf-button--link vf-button--sm\"\n            type=\"button\"\n            onClick={() => db.gffs.delete(cell.value)}\n          >\n            Remove\n          </button>\n        ),\n      },\n    ];\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [gffComparisonId]);\n\n  async function addGff(gffFile): Promise<void> {\n    if (!gffFile) return;\n    const encoded = await encodeGFF(gffFile);\n    try {\n      await db.gffs.add({\n        name: gffFile.name,\n        size: gffFile.size,\n        added: new Date(Date.now()),\n        encodedGFF: encoded,\n      });\n      setUploadError(null);\n    } catch (error) {\n      setUploadError(`GFF upload error: ${error}`);\n    }\n  }\n\n  return (\n    <div>\n      <EMGModal\n        isOpen={modalIsOpen}\n        onRequestClose={() => setIsOpen(false)}\n        contentLabel=\"GFF comparison file picker modal\"\n      >\n        <div className=\"vf-stack vf-stack--800\">\n          <h1>Compare a GFF to the contig</h1>\n          <form className=\"vf-stack vf-stack--400\" action=\"#\" method=\"get\">\n            <div className=\"vf-form__item vf-stack\">\n              <label\n                htmlFor=\"upload-picker\"\n                className=\"vf-form__label vf-form__label--required\"\n              >\n                <h2>Upload a GFF file from your computer</h2>\n              </label>\n\n              <p className=\"vf-form__helper\">\n                The GFF will be stored in your browser, not sent to MGnify\n                servers.\n              </p>\n              <FileUploaderButton\n                onChange={(e) =>\n                  addGff((e.target as unknown as HTMLInputElement).files[0])\n                }\n                accept=\".gff,.gff3\"\n              />\n              {uploadError && (\n                <p className=\"vf-form__helper vf-form__helper--error\">\n                  {uploadError}\n                </p>\n              )}\n            </div>\n          </form>\n          <div className=\"vf-stack vf-stack--200\">\n            <h2>Previously uploaded GFFs</h2>\n            <p className=\"vf-form__helper\">\n              Click the GFF’s name to view it in the browser\n            </p>\n            <PlainTable cols={columns} data={gffs} />\n          </div>\n        </div>\n      </EMGModal>\n\n      <button\n        className=\"vf-button vf-button--secondary vf-button--sm\"\n        type=\"button\"\n        onClick={() => setIsOpen(true)}\n      >\n        Load a GFF\n      </button>\n    </div>\n  );\n};\n\nexport default GFFCompare;\n","import React, { memo, useEffect, useState } from 'react';\n\nimport Slider from 'components/UI/Slider';\nimport Switch from 'components/UI/Switch';\nimport useQueryParamState from 'hooks/queryParamState/useQueryParamState';\n\nconst MIN = 500;\nconst MAX = 10e6;\n\nconst ContigLengthFilter: React.FC = () => {\n  const [contigLength, setContigLength] = useQueryParamState(\n    'contig_length',\n    ''\n  );\n  const [enabled, setEnabled] = useState(!!contigLength);\n\n  const [range, setRange] = useState(\n    contigLength.split(',').filter(Boolean).map(Number)\n  );\n  useEffect(() => {\n    const newRange = contigLength.split(',').filter(Boolean).map(Number);\n    setRange(newRange);\n  }, [contigLength]);\n\n  const handleSwitch = (isEnabled: boolean): void => {\n    setEnabled(isEnabled);\n    if (!isEnabled) {\n      setContigLength('');\n    }\n  };\n  const handleSlider = ({ min, max }): void => {\n    setRange([min, max]);\n    setContigLength(`${min},${max}`);\n  };\n  return (\n    <fieldset className=\"vf-form__fieldset vf-stack vf-stack--200 mg-contig-length-filter\">\n      <legend className=\"vf-form__legend mg-contig-filter\">\n        Contig length (bp)\n      </legend>\n      <div className=\"mg-switch-and-slider\">\n        <Switch\n          id=\"contig_length_filter\"\n          onChange={handleSwitch}\n          isOn={enabled}\n        />\n        <Slider\n          min={MIN}\n          max={MAX}\n          steps={100}\n          isEnabled={enabled}\n          selection={{\n            min: range?.[0] || MIN,\n            max: range?.[1] || MAX,\n          }}\n          onChange={handleSlider}\n          logarithmic\n        />\n      </div>\n    </fieldset>\n  );\n};\nexport default memo(ContigLengthFilter);\n","import React, { memo } from 'react';\nimport TextInputDebounced from 'components/UI/TextInputDebounced';\n\ntype ContigTextFilterProps = {\n  title: string;\n  placeholder: string;\n};\n\nconst ContigTextFilter: React.FC<ContigTextFilterProps> = ({\n  title,\n  placeholder,\n}) => {\n  return (\n    <fieldset className=\"vf-form__fieldset vf-stack vf-stack--200 mg-contig-text-filter\">\n      <legend className=\"vf-form__legend mg-contig-filter\">{title}</legend>\n      <TextInputDebounced\n        namespace={`${title.replaceAll(' ', '_').toLowerCase()}_`}\n        placeholder={placeholder}\n      />\n    </fieldset>\n  );\n};\nexport default memo(ContigTextFilter);\n","import React, { memo, useEffect, useState } from 'react';\nimport useQueryParamState from 'hooks/queryParamState/useQueryParamState';\n\nconst TYPES = ['COG', 'KEGG', 'GO', 'Pfam', 'InterPro', 'antiSMASH'];\n\nconst ContigAnnotationTypeFilter: React.FC = () => {\n  const [annotationType, setAnnotationType] = useQueryParamState(\n    'annotation_type',\n    ''\n  );\n\n  const [selected, setSelected] = useState(\n    annotationType.split(',').filter(Boolean)\n  );\n\n  useEffect(() => {\n    setSelected(annotationType.split(',').filter(Boolean));\n  }, [annotationType]);\n\n  const handleSelection = (event): void => {\n    const { value, checked: isChecked } = event.target as HTMLInputElement;\n    let newSelected = [...selected];\n    if (isChecked && !selected.includes(value)) {\n      newSelected.push(value);\n    } else {\n      newSelected = selected.filter((s) => s !== value);\n    }\n    setAnnotationType(newSelected.sort().join(','));\n  };\n  return (\n    <fieldset className=\"vf-form__fieldset vf-stack vf-stack--200 mg-contig-text-filter\">\n      <legend className=\"vf-form__legend mg-contig-filter\">\n        Show contigs with:\n      </legend>\n      {TYPES.map((aT) => {\n        const id = aT.toLowerCase();\n        return (\n          <div className=\"vf-form__item vf-form__item--checkbox\" key={id}>\n            <input\n              type=\"checkbox\"\n              name={aT}\n              value={aT.toLowerCase()}\n              id={aT.toLowerCase()}\n              className=\"vf-form__checkbox\"\n              onChange={handleSelection}\n              checked={selected.includes(id)}\n            />\n            <label className=\"vf-form__label\" htmlFor={id}>\n              <span className=\"mg-filter-checkbox-label\">{aT}</span>\n            </label>\n          </div>\n        );\n      })}\n    </fieldset>\n  );\n};\nexport default memo(ContigAnnotationTypeFilter);\n","/* eslint-disable react-hooks/exhaustive-deps */\nimport React, {\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useState,\n} from 'react';\n\nimport useURLAccession from 'hooks/useURLAccession';\nimport useMGnifyData from 'hooks/data/useMGnifyData';\nimport Loading from 'components/UI/Loading';\nimport FetchError from 'components/UI/FetchError';\nimport useData, {\n  KeyValue,\n  MGnifyDatum,\n  ResponseFormat,\n} from 'hooks/data/useData';\nimport './style.css';\nimport UserContext from 'pages/Login/UserContext';\nimport igv from 'igv';\n\nimport ContigsTable from 'components/Analysis/ContigViewer/Table';\nimport ContigsQueryContext from 'components/Analysis/ContigViewer/ContigsQueryContext';\nimport { find } from 'lodash-es';\nimport GFFCompare, {\n  colorScale,\n  getGFFHeaderValue,\n} from 'components/Analysis/ContigViewer/GFFCompare';\nimport ReactDOMServer from 'react-dom/server';\nimport GenomeBrowserPopup from 'components/Genomes/Browser/Popup';\nimport ContigLengthFilter from 'components/Analysis/ContigViewer/Filter/ContigLength';\nimport ContigTextFilter from 'components/Analysis/ContigViewer/Filter/ContigText';\n// eslint-disable-next-line max-len\nimport ContigAnnotationTypeFilter from 'components/Analysis/ContigViewer/Filter/ContigAnnotationType';\nimport LoadingOverlay from 'components/UI/LoadingOverlay';\nimport useQueryParamState from 'hooks/queryParamState/useQueryParamState';\nimport {\n  AnnotationTrackColorPicker,\n  annotationTrackCustomisations,\n} from 'components/IGV/TrackColourPicker';\n\ntype ContigProps = {\n  contig: MGnifyDatum;\n};\n\nconst Contig: React.FC<ContigProps> = ({ contig }) => {\n  const accession = useURLAccession();\n  const { config } = useContext(UserContext);\n  const hasMetaProteomics = config?.featureFlags?.contigIgvGffUploader;\n  const contigId = contig.attributes['contig-id'];\n  const fastaURL = `${config.api}analyses/${contig.attributes.accession}/contigs/${contigId}`;\n\n  const { data, loading, error } = useData(fastaURL, ResponseFormat.TXT);\n\n  const antiSMASH = contig.attributes['has-antismash'];\n  const displayName = contig.attributes['contig-name'];\n  const [igvBrowser, setIgvBrowser] = useState(null);\n\n  const [trackColorBys, setTrackColorBys] = useState({});\n\n  const igvContainer = useCallback(\n    (node) => {\n      const options = {\n        showChromosomeWidget: false,\n        showTrackLabelButton: true,\n        showTrackLabels: true,\n        showCenterGuide: false,\n        reference: {\n          indexed: false,\n          fastaURL,\n        },\n        tracks: [\n          {\n            name: displayName,\n            type: 'annotation',\n            format: 'gff3',\n            url: `${config.api}analyses/${accession}/contigs/${contigId}/annotations`,\n            displayMode: 'EXPANDED',\n            label: 'Functional annotation',\n          },\n        ],\n        showLegend: true,\n        legendParent: '#contig',\n      };\n      if (antiSMASH) {\n        options.tracks.push({\n          name: 'antiSMASH',\n          type: 'annotation',\n          format: 'gff3',\n          displayMode: 'EXPANDED',\n          url: `${config.api}analyses/${accession}/contigs/${contigId}/annotations?antismash=True`,\n          label: 'antiSMASH',\n        });\n      }\n\n      if (node === null) return;\n      igv.createBrowser(node, options).then((browser) => {\n        browser.on('trackclick', (track, trackData) =>\n          ReactDOMServer.renderToString(\n            <GenomeBrowserPopup\n              data={trackData}\n              hasMetaProteomics={hasMetaProteomics}\n            />\n          )\n        );\n        browser.on('trackorderchanged', () => {\n          browser.trackViews.forEach((trackView) => {\n            if (\n              trackView.track.type === 'annotation' &&\n              trackView.track.config.label === 'Metaproteomics'\n            ) {\n              setTrackColorBys({\n                ...trackColorBys,\n                [trackView.track.id]: {\n                  colorBarMax: parseFloat(\n                    getGFFHeaderValue(\n                      trackView.track.config.url.slice(37),\n                      // = GFF data-url without the 'data:application/octet-stream;base64' (37 chars) prefix\n                      'max_spectrum_count_value_in_study'\n                    )\n                  ),\n                },\n              });\n            }\n          });\n        });\n        setIgvBrowser(browser);\n      });\n    },\n    [\n      fastaURL,\n      displayName,\n      config.api,\n      accession,\n      contigId,\n      antiSMASH,\n      hasMetaProteomics,\n    ]\n  );\n\n  useEffect(() => {\n    const tracksToRemove = [];\n    const tracksToAdd = [];\n    igvBrowser?.trackViews?.forEach((trackView) => {\n      if (trackView.track.type !== 'annotation') return;\n      const colorBy = trackColorBys[trackView.track.id];\n      if (colorBy) {\n        const newTrackConfig = {\n          ...trackView.track.config,\n          ...annotationTrackCustomisations(colorBy.value),\n        };\n        if (newTrackConfig.nameField !== trackView.track.config.nameField) {\n          // Prevent unnecessary track reloads\n          tracksToRemove.push(trackView.track.id);\n          tracksToAdd.push(newTrackConfig);\n        }\n      }\n      if (trackView.track.config.label === 'Metaproteomics') {\n        const cbMax = trackColorBys?.[trackView.track.id]?.colorBarMax;\n        const newTrackConfig = {\n          ...trackView.track.config,\n          nameField: 'pride_id',\n          color: cbMax\n            ? (feature) => {\n                const colorBarNumber = parseFloat(\n                  feature.getAttributeValue(\n                    'semiquantitative_expression_spectrum_count'\n                  )\n                );\n                return colorScale(colorBarNumber, cbMax);\n              }\n            : null,\n        };\n        if (newTrackConfig.nameField !== trackView.track.config.nameField) {\n          // Prevent unnecessary track reloads\n          tracksToRemove.push(trackView.track.id);\n          tracksToAdd.push(newTrackConfig);\n        }\n      }\n    });\n    tracksToRemove.forEach((track) => igvBrowser.removeTrackByName(track));\n    tracksToAdd.forEach((track) => igvBrowser.loadTrack(track));\n  }, [trackColorBys, igvBrowser]);\n\n  if (loading) return <Loading size=\"small\" />;\n  if (error) return <FetchError error={error} />;\n  if (!data) return <Loading />;\n\n  return (\n    <div id=\"contig\" className=\"vf-stack vf-stack--600\">\n      <div ref={igvContainer} />\n\n      <div className=\"vf-grid vf-grid__col-3\">\n        {igvBrowser?.trackViews?.map((trackView) => {\n          const trackId = trackView.track.id;\n          if (trackView.track.type !== 'annotation') return React.Fragment;\n          const isMetaProteomics =\n            trackView.track.config.label === 'Metaproteomics';\n\n          if (isMetaProteomics) {\n            if (!trackColorBys?.[trackView.track.id]?.colorBarMax)\n              return React.Fragment;\n            return (\n              <div key={trackView.track.id}>\n                <p className=\"vf-text-body vf-text-body--2\">\n                  {trackView.track.config.label} track colour\n                </p>\n\n                <div className=\"colorBarWrapper\">\n                  0\n                  <div className=\"colorBar\" />\n                  {Math.round(trackColorBys[trackView.track.id].colorBarMax)}\n                </div>\n\n                <p className=\"vf-text-body vf-text-body--4\">\n                  Semiquantitative expression spectrum count — scaled against\n                  the maximum in this study.\n                </p>\n              </div>\n            );\n          }\n          return (\n            <AnnotationTrackColorPicker\n              key={trackView.track.id}\n              trackView={trackView}\n              trackColorBys={trackColorBys}\n              onChange={(option, action) => {\n                if (action.action === 'select-option') {\n                  setTrackColorBys({\n                    ...trackColorBys,\n                    [trackId]: option,\n                  });\n                }\n              }}\n            />\n          );\n        })}\n      </div>\n\n      {hasMetaProteomics && <GFFCompare igvBrowser={igvBrowser} />}\n    </div>\n  );\n};\n\nconst ContigsViewer: React.FC = () => {\n  const accession = useURLAccession();\n\n  const [contigsPageCursorParam] = useQueryParamState(\n    'contigs_page_cursor',\n    ''\n  );\n  const [selectedContigParam, setSelectedContigParam] = useQueryParamState(\n    'selected_contig',\n    ''\n  );\n  useQueryParamState('gff_comparison_id', '');\n  const [contigLengthParam] = useQueryParamState('contig_length', '');\n  const [cogCategorySearchParam] = useQueryParamState(\n    'cog_category_search',\n    ''\n  );\n  const [keggOrthologSearchParam] = useQueryParamState(\n    'kegg_otholog_search',\n    ''\n  );\n  const [goTermSearchParam] = useQueryParamState('go_term_search', '');\n  const [pfamSearchParam] = useQueryParamState('pfam_search', '');\n  const [interproSearchParam] = useQueryParamState('interpro_search', '');\n  const [antismashSearchParam] = useQueryParamState('antismash_search', '');\n  const [annotationTypeParam] = useQueryParamState('annotation_type', '');\n  const [contigsSearchParam] = useQueryParamState('contigs_search', '');\n\n  const lengthRange = useMemo(() => {\n    return (contigLengthParam as string).split(',').filter(Boolean).map(Number);\n  }, [contigLengthParam]);\n\n  const { data, loading, error } = useMGnifyData(\n    `analyses/${accession}/contigs`,\n    {\n      cursor: contigsPageCursorParam,\n      search: contigsSearchParam,\n      gt: lengthRange[0],\n      lt: lengthRange[1],\n      cog: cogCategorySearchParam,\n      kegg: keggOrthologSearchParam,\n      go: goTermSearchParam,\n      pfam: pfamSearchParam,\n      interpro: interproSearchParam,\n      antismash: antismashSearchParam,\n      'facet[]': annotationTypeParam,\n    },\n    {}\n  );\n\n  const context = useMemo(\n    () => ({\n      contigsQueryData: { data, loading, error },\n    }),\n    [data, error, loading]\n  );\n\n  const contig = useMemo(() => {\n    let selectedContig;\n    if (!data) return null;\n\n    const selectedContigId =\n      selectedContigParam || data.data?.[0]?.attributes?.['contig-id'];\n\n    if (selectedContigId) {\n      selectedContig = find(data.data, (c: KeyValue) => {\n        return c.attributes['contig-id'] === selectedContigId;\n      });\n      if (selectedContig) {\n        return selectedContig;\n      }\n    }\n    return null;\n  }, [data, selectedContigParam]);\n\n  useEffect(() => {\n    // If a new contig is autoselected (e.g. page change), put it in URL\n    if (contig && contig.attributes['contig-id'] !== selectedContigParam) {\n      setSelectedContigParam(contig.attributes['contig-id']);\n    }\n  });\n\n  useEffect(() => {\n    // If the contig in URL isnt in the data-page, remove the bad ID from URL\n    if (setSelectedContigParam && data && !contig) {\n      setSelectedContigParam('');\n    }\n  }, [data, contig, setSelectedContigParam]);\n\n  if (error) return <FetchError error={error} />;\n  return (\n    <div className=\"vf-stack vf-stack--800\">\n      <ContigsQueryContext.Provider value={context}>\n        <section>\n          <div className=\"vf-stack\">\n            <details open>\n              <summary>\n                <h4>Contig browser</h4>\n              </summary>\n              <div className=\"contig-igv-container\">\n                <LoadingOverlay loading={loading}>\n                  {!!contig && <Contig contig={contig} />}\n                  {!contig && (\n                    <div\n                      className=\"vf-box vf-box-theme--primary vf-box--easy\"\n                      style={{\n                        backgroundColor: '#d1e3f6',\n                        margin: '8px auto',\n                      }}\n                    >\n                      <h3 className=\"vf-box__heading\">No contig selected</h3>\n                      <p className=\"vf-box__text\">\n                        Select a contig from the table to load the interactive\n                        annotation viewer\n                      </p>\n                    </div>\n                  )}\n                </LoadingOverlay>\n              </div>\n            </details>\n          </div>\n        </section>\n        <section className=\"vf-grid mg-contigs-list\">\n          <div className=\"vf-stack vf-stack--800\">\n            <ContigLengthFilter />\n            <ContigTextFilter title=\"COG Category\" placeholder=\"C\" />\n            <ContigTextFilter title=\"KEGG Ortholog\" placeholder=\"K00161\" />\n            <ContigTextFilter title=\"GO Term\" placeholder=\"GO:1901575\" />\n            <ContigTextFilter title=\"Pfam\" placeholder=\"PF02086\" />\n            <ContigTextFilter title=\"InterPro\" placeholder=\"IPR015200\" />\n            <ContigTextFilter title=\"antiSMASH\" placeholder=\"terpene\" />\n            <ContigAnnotationTypeFilter />\n          </div>\n          <ContigsTable />\n        </section>\n      </ContigsQueryContext.Provider>\n    </div>\n  );\n};\n\nexport default ContigsViewer;\n","import React from 'react';\nimport { Row } from 'react-table';\n\nimport EMGTable from 'components/UI/EMGTable';\nimport useQueryParamState from 'hooks/queryParamState/useQueryParamState';\nimport { TaxDatum } from '../PhylumCharts';\n\nconst sortFunction = (order) => (a: TaxDatum, b: TaxDatum) => {\n  switch (order) {\n    case 'i':\n    case 'y':\n    case 'percentage':\n      return Number(a[order]) - Number(b[order]);\n    case '-i':\n    case '-y':\n    case '-percentage':\n      return Number(b[order.slice(1)]) - Number(a[order.slice(1)]);\n    case 'name':\n      return b.name >= a.name ? -1 : 1;\n    case '-name':\n      return a.name >= b.name ? -1 : 1;\n    case 'lineage':\n      return b.lineage[0] >= a.lineage[0] ? -1 : 1;\n    case '-lineage':\n      return a.lineage[0] >= b.lineage[0] ? -1 : 1;\n    default:\n      return 0;\n  }\n};\n\ntype PhylumTableProps = {\n  clusteredData: Array<TaxDatum>;\n  onMouseEnterRow?: (row: Row) => void;\n  onMouseLeaveRow?: (row: Row) => void;\n};\nconst PhylumTable: React.FC<PhylumTableProps> = ({\n  clusteredData,\n  onMouseEnterRow = () => null,\n  onMouseLeaveRow = () => null,\n}) => {\n  const [order] = useQueryParamState('order', '');\n\n  const columns = [\n    {\n      Header: '',\n      accessor: 'i',\n    },\n    {\n      id: 'name',\n      Header: 'Phylum',\n      accessor: (x) => x,\n      Cell: ({ cell }) => (\n        <>\n          <div\n            style={{\n              width: '1rem',\n              height: '1rem',\n              display: 'inline-block',\n              backgroundColor: cell.value.color,\n              verticalAlign: 'sub',\n            }}\n          >\n            &nbsp;\n          </div>{' '}\n          {cell.value.name}\n        </>\n      ),\n    },\n    {\n      id: 'lineage',\n      Header: 'Domain',\n      accessor: 'lineage[0]',\n    },\n    {\n      Header: 'Unique OTUs',\n      accessor: 'y',\n    },\n    {\n      Header: '%',\n      accessor: 'percentage',\n    },\n  ];\n  return (\n    <EMGTable\n      cols={columns}\n      data={clusteredData.sort(sortFunction(order))}\n      initialPageSize={100}\n      className=\"mg-anlyses-table phylum-table\"\n      showPagination={false}\n      onMouseEnterRow={onMouseEnterRow}\n      onMouseLeaveRow={onMouseLeaveRow}\n      sortable\n    />\n  );\n};\n\nexport default PhylumTable;\n","import React, { useRef, useEffect } from 'react';\nimport * as Highcharts from 'highcharts';\nimport addExportMenu from 'highcharts/modules/exporting';\nimport HighchartsReact from 'highcharts-react-official';\n\nimport { TAXONOMY_COLOURS } from 'utils/taxon';\n\nimport { TaxDatum } from '..';\n\naddExportMenu(Highcharts);\n\n/**\n * Sum data by parameter\n */\nfunction sumData(data: { y: number }[]): number {\n  let sum = 0;\n  data.forEach((e) => {\n    sum += e.y;\n  });\n  return sum;\n}\n/**\n * Extend reference array of colours such that last colour is duplicated for\n * additional data point\n */\nfunction duplicateLastColor(colours: string[], data: unknown[]): string[] {\n  const newColours = [];\n  let i = 0;\n  while (i < data.length) {\n    newColours.push(colours[Math.min(i, colours.length - 1)]);\n    i += 1;\n  }\n  return newColours;\n}\n\n/**\n * Group all data after index n into single category\n */\nfunction groupAfterN(clusteredData: TaxDatum[], n: number): TaxDatum[] {\n  const top10 = clusteredData.slice(0, n);\n  if (clusteredData.length > n) {\n    const others = {\n      name: 'Other',\n      lineageA: [],\n      lineage: [],\n      y: 0,\n      i: n + 1,\n      color: 'grey',\n    };\n    clusteredData.slice(n).forEach((d) => {\n      others.y += d.y;\n      if (others.lineageA.indexOf(d.lineage[0]) === -1) {\n        others.lineageA.push(d.lineage[0]);\n      }\n    });\n    others.lineage = [others.lineageA.join(', ')];\n    top10.push(others);\n  }\n  return top10;\n}\n\ntype PieProps = {\n  clusteredData: Array<TaxDatum>;\n  title: string;\n  showLegend?: boolean;\n  showTotal?: boolean;\n  selectedValue?: number | null;\n};\n\nconst PieChart: React.FC<PieProps> = ({\n  clusteredData,\n  title,\n  selectedValue = null,\n  showLegend = false,\n  showTotal = false,\n}) => {\n  const chartComponentRef = useRef<HighchartsReact.RefObject>(null);\n  useEffect(() => {\n    if (chartComponentRef.current && selectedValue !== null) {\n      const index = Math.min(\n        selectedValue as number,\n        chartComponentRef.current.chart.series[0].data.length - 1\n      );\n      chartComponentRef.current.chart.series[0].data.forEach((d) =>\n        d.setState('')\n      );\n      chartComponentRef.current.chart.series[0].data[index].setState('hover');\n      chartComponentRef.current.chart.tooltip.refresh(\n        chartComponentRef.current.chart.series[0].data[index]\n      );\n    }\n  }, [selectedValue]);\n  const groupedData = groupAfterN(clusteredData, 10);\n  const options: Record<string, unknown> = {\n    chart: {\n      plotBackgroundColor: null,\n      plotBorderWidth: null,\n      plotShadow: false,\n      type: 'pie',\n    },\n    title: {\n      text: title,\n    },\n    tooltip: {\n      pointFormat: '<b>{point.y}</b> {series.name} ({point.percentage:.2f}%)',\n    },\n    plotOptions: {\n      pie: {\n        allowPointSelect: true,\n        cursor: 'pointer',\n        dataLabels: {\n          enabled: true,\n          format: '<b>{point.name}</b>: {point.percentage:.2f} %',\n          style: {\n            color: 'black',\n          },\n        },\n        colors: duplicateLastColor(TAXONOMY_COLOURS, groupedData),\n        showInLegend: showLegend,\n      },\n    },\n    credits: {\n      enabled: false,\n    },\n    series: [\n      {\n        name: 'reads',\n        colorByPoint: true,\n        data: groupedData,\n      },\n    ],\n  };\n  if (showTotal) {\n    options.subtitle = {\n      text: `Total: ${sumData(clusteredData)} reads`,\n    };\n  }\n\n  if (showLegend) {\n    options.legend = {\n      title: {\n        text: 'Click to hide',\n      },\n      align: 'right',\n      verticalAlign: 'middle',\n      layout: 'vertical',\n      /* eslint-disable react/no-this-in-sfc */\n      labelFormatter() {\n        if (this.name.length > 15) {\n          return `${this.name.slice(0, 15)}...`;\n        }\n        return this.name;\n      },\n      /* eslint-enable react/no-this-in-sfc */\n    };\n  }\n  return (\n    <HighchartsReact\n      highcharts={Highcharts}\n      options={options}\n      ref={chartComponentRef}\n    />\n  );\n};\n\nexport default PieChart;\n","import React, { useRef, useEffect } from 'react';\nimport * as Highcharts from 'highcharts';\nimport addExportMenu from 'highcharts/modules/exporting';\nimport HighchartsReact from 'highcharts-react-official';\n\nimport { TAXONOMY_COLOURS } from 'utils/taxon';\nimport { TaxDatum } from '..';\n\naddExportMenu(Highcharts);\n\nconst NUM_COLUMNS = 10;\n\n/**\n * Sum data by parameter\n */\nfunction sumData(data: { y: number }[]): number {\n  let sum = 0;\n  data.forEach((e) => {\n    sum += e.y;\n  });\n  return sum;\n}\ntype ColumnChartProps = {\n  clusteredData: Array<TaxDatum>;\n  title: string;\n  showLegend?: boolean;\n  showTotal?: boolean;\n  selectedValue?: number | null;\n};\n\nconst ColumnChart: React.FC<ColumnChartProps> = ({\n  clusteredData,\n  title,\n  selectedValue = null,\n  showLegend = false,\n  showTotal = false,\n}) => {\n  const chartComponentRef = useRef<HighchartsReact.RefObject>(null);\n  useEffect(() => {\n    if (chartComponentRef.current && selectedValue !== null) {\n      const index = selectedValue as number;\n\n      chartComponentRef.current.chart.series[0].data.forEach((d) =>\n        d.setState('')\n      );\n      if (index < chartComponentRef.current.chart.series[0].data.length) {\n        chartComponentRef.current.chart.series[0].data[index].setState('hover');\n        chartComponentRef.current.chart.tooltip.refresh(\n          chartComponentRef.current.chart.series[0].data[index]\n        );\n      }\n    }\n  }, [selectedValue]);\n\n  const dataSummary = clusteredData.slice(0, NUM_COLUMNS);\n  const categories = dataSummary.map((e) => e.name);\n  const total = sumData(clusteredData);\n  const options: Record<string, unknown> = {\n    chart: {\n      plotBackgroundColor: null,\n      plotBorderWidth: null,\n      plotShadow: false,\n      type: 'column',\n    },\n    title: {\n      text: title,\n    },\n    credits: {\n      enabled: false,\n    },\n    series: [\n      {\n        colorByPoint: true,\n        data: dataSummary,\n        colors: TAXONOMY_COLOURS,\n      },\n    ],\n    xAxis: {\n      categories,\n      title: {\n        text: null,\n      },\n    },\n    yAxis: {\n      min: 0,\n      title: {\n        text: 'Number of sequences',\n        align: 'high',\n      },\n      labels: {\n        overflow: 'justify',\n      },\n    },\n    tooltip: {\n      /* eslint-disable react/no-this-in-sfc */\n      formatter() {\n        const perc = (100 * this.y) / total;\n        return `${this.x}<br/><b>${this.y}</b> reads (${perc.toFixed(2)}%)`;\n      },\n      /* eslint-enable react/no-this-in-sfc */\n    },\n    legend: {\n      enabled: false,\n    },\n  };\n  if (showTotal) {\n    options.subtitle = {\n      text: `Total: ${sumData(clusteredData)} reads`,\n    };\n  }\n\n  if (showLegend) {\n    options.legend = {\n      title: {\n        text: 'Click to hide',\n      },\n      align: 'right',\n      verticalAlign: 'middle',\n      layout: 'vertical',\n      /* eslint-disable react/no-this-in-sfc */\n      labelFormatter() {\n        if (this.name.length > 15) {\n          return `${this.name.slice(0, 15)}...`;\n        }\n        return this.name;\n      },\n      /* eslint-enable react/no-this-in-sfc */\n    };\n  }\n  return (\n    <HighchartsReact\n      highcharts={Highcharts}\n      options={options}\n      ref={chartComponentRef}\n    />\n  );\n};\n\nexport default ColumnChart;\n","import React, { useRef, useEffect } from 'react';\nimport * as Highcharts from 'highcharts';\nimport addExportMenu from 'highcharts/modules/exporting';\nimport HighchartsReact from 'highcharts-react-official';\n\nimport { TAXONOMY_COLOURS } from 'utils/taxon';\n\nimport { TaxDatum } from '..';\n\naddExportMenu(Highcharts);\n\n/**\n * Sum data by parameter\n */\nfunction sumData(data: { y: number }[]): number {\n  let sum = 0;\n  data.forEach((e) => {\n    sum += e.y;\n  });\n  return sum;\n}\n/**\n * Reformat data into multiple series\n */\nfunction transformData(\n  data: Array<{ name: string; y: number }>\n): Array<{ name: string; data: [number]; color: string }> {\n  let i = 0;\n  const maxColorIndex = TAXONOMY_COLOURS.length - 1;\n  return data.map((e) => ({\n    name: e.name,\n    data: [e.y],\n    color: TAXONOMY_COLOURS[Math.min(i++, maxColorIndex)],\n  }));\n}\n\ntype StackedColumnChartProps = {\n  clusteredData: Array<TaxDatum>;\n  title: string;\n  showLegend?: boolean;\n  selectedValue?: number | null;\n};\n\nconst StackedColumnChart: React.FC<StackedColumnChartProps> = ({\n  clusteredData,\n  title,\n  selectedValue = null,\n  showLegend = false,\n}) => {\n  const chartComponentRef = useRef<HighchartsReact.RefObject>(null);\n  useEffect(() => {\n    if (chartComponentRef.current && selectedValue !== null) {\n      const index = selectedValue as number;\n\n      chartComponentRef.current.chart.series[0].data.forEach((d) =>\n        d.setState('')\n      );\n      if (index < chartComponentRef.current.chart.series.length) {\n        chartComponentRef.current.chart.series[index].data[0].setState('hover');\n        chartComponentRef.current.chart.tooltip.refresh(\n          chartComponentRef.current.chart.series[index].data[0]\n        );\n      }\n    }\n  }, [selectedValue]);\n\n  const dataSummary = transformData(clusteredData);\n  const sum = sumData(clusteredData);\n  const options: Record<string, unknown> = {\n    chart: {\n      plotBackgroundColor: null,\n      plotBorderWidth: null,\n      plotShadow: false,\n      type: 'column',\n    },\n    title: {\n      text: title,\n    },\n    subtitle: {\n      text: `Total: ${sum} reads`,\n    },\n    credits: {\n      enabled: false,\n    },\n    tooltip: {\n      /* eslint-disable react/no-this-in-sfc */\n      formatter() {\n        const perc = (100 * this.y) / sum;\n        return (\n          `${this.series.name}<br/>` +\n          `<b>${this.y}</b> reads (${perc.toFixed(2)}%)`\n        );\n      },\n      /* eslint-enable react/no-this-in-sfc */\n    },\n    plotOptions: {\n      series: {\n        stacking: 'percent',\n        dataLabels: {\n          enabled: true,\n        },\n      },\n    },\n    yAxis: {\n      min: 0,\n      max: 100,\n    },\n    xAxis: {\n      title: {\n        text: null,\n        enabled: false,\n      },\n      labels: {\n        enabled: false,\n      },\n    },\n    legend: {\n      enabled: false,\n    },\n    series: dataSummary,\n  };\n\n  if (showLegend) {\n    options.legend = {\n      title: {\n        text: 'Click to hide',\n      },\n      align: 'right',\n      verticalAlign: 'middle',\n      layout: 'vertical',\n      /* eslint-disable react/no-this-in-sfc */\n      labelFormatter() {\n        if (this.name.length > 15) {\n          return `${this.name.slice(0, 15)}...`;\n        }\n        return this.name;\n      },\n      /* eslint-enable react/no-this-in-sfc */\n    };\n  }\n  return (\n    <HighchartsReact\n      highcharts={Highcharts}\n      options={options}\n      ref={chartComponentRef}\n    />\n  );\n};\n\nexport default StackedColumnChart;\n","import React, { useState } from 'react';\nimport { Row } from 'react-table';\n\nimport Loading from 'components/UI/Loading';\nimport FetchError from 'components/UI/FetchError';\nimport useMGnifyData from 'hooks/data/useMGnifyData';\nimport { MGnifyDatum } from 'hooks/data/useData';\nimport { TAXONOMY_COLOURS } from 'utils/taxon';\nimport PhylumTable from '../PhylumTable';\nimport PhylumPie from './Pie';\nimport PhylumColumn from './Column';\nimport PhylumStackedColumn from './StackedColumn';\n\nconst DEPTH_TO_CLUSTER = 2;\n\nexport type TaxDatum = {\n  name: string;\n  i: number;\n  y: number;\n  lineage: string[];\n  color: string;\n};\n\n/**\n * Cluster data by depth\n */\nfunction clusterData(\n  data: Array<{ attributes: Record<string, unknown> }>,\n  depth = 0\n): Array<TaxDatum> {\n  const clusteredData: {\n    [k: string]: { v: number; l: string[] };\n  } = {};\n  let total = 0;\n  data.forEach((d) => {\n    const attr = d.attributes;\n    const lineage = String(attr.lineage).split(':');\n    // Remove empty strings\n    let category: string;\n    if (lineage.length < depth) {\n      category = lineage[lineage.length - 1];\n    } else {\n      category = lineage[depth];\n    }\n\n    if (\n      depth > 0 &&\n      ['', 'Bacteria', 'Eukaryota', 'other_sequences', undefined].includes(\n        category\n      )\n    ) {\n      if (lineage[0] === 'Bacteria') {\n        category = 'Unassigned Bacteria';\n      } else {\n        category = 'Unassigned';\n      }\n    }\n    if (lineage[0] === 'Unusigned' && lineage.length === 1) {\n      category = 'Unassigned';\n    }\n\n    const val = Number(attr.count);\n    total += val;\n    if (category in clusteredData) {\n      clusteredData[category].v += val;\n    } else {\n      clusteredData[category] = {\n        v: val,\n        l: lineage,\n      };\n    }\n  });\n\n  return Object.entries(clusteredData)\n    .map(([name, { v, l }]) => ({\n      name,\n      y: v,\n      lineage: l,\n    }))\n    .sort((a, b) => b.y - a.y)\n    .map((x, i) => ({\n      ...x,\n      i: i + 1,\n      color: TAXONOMY_COLOURS[Math.min(i, TAXONOMY_COLOURS.length - 1)],\n      percentage: ((x.y * 100) / total).toFixed(2),\n    }));\n}\n\ntype PhylumChartsProps = {\n  accession: string;\n  category: string;\n  chartType: string;\n};\nconst PhylumCharts: React.FC<PhylumChartsProps> = ({\n  accession,\n  category,\n  chartType,\n}) => {\n  const { data, loading, error } = useMGnifyData(\n    `analyses/${accession}/taxonomy${category}`\n  );\n  const [selectedRow, setSelectedRow] = useState(null);\n\n  if (loading) return <Loading />;\n  if (error) return <FetchError error={error} />;\n  const clusteredData = clusterData(\n    data.data as MGnifyDatum[],\n    DEPTH_TO_CLUSTER\n  );\n  const clusteredDataTop = clusterData(data.data as MGnifyDatum[]);\n  const includesDomainCharts = ['', '/ssu', '/lsu'].includes(category);\n  const handleMouseEnterRow = (row: Row): void => setSelectedRow(row.values);\n  const handleMouseLeaveRow = (): void => setSelectedRow(null);\n\n  const selectedCategory = clusteredDataTop.findIndex(\n    (e) => e.name === selectedRow?.lineage\n  );\n  return (\n    <div className=\"vf-stack\" data-cy={`phylum-${chartType.replace(' ', '-')}`}>\n      <div\n        className={`vf-grid ${\n          includesDomainCharts && chartType !== 'stacked-column'\n            ? 'vf-grid__col-2 mg-grid-30-70'\n            : ''\n        }`}\n      >\n        {chartType === 'pie' && includesDomainCharts && (\n          <div id=\"domain-composition-pie\">\n            <PhylumPie\n              clusteredData={clusteredDataTop}\n              selectedValue={selectedCategory >= 0 ? selectedCategory : null}\n              title=\"Domain composition\"\n            />\n          </div>\n        )}\n        {chartType === 'pie' && (\n          <div id=\"phylum-composition-pie\">\n            <PhylumPie\n              clusteredData={clusteredData}\n              title=\"Phylum composition\"\n              selectedValue={selectedRow ? selectedRow.i - 1 : null}\n              showTotal\n              showLegend\n            />\n          </div>\n        )}\n        {chartType === 'column' && includesDomainCharts && (\n          <div id=\"domain-composition-column\">\n            <PhylumColumn\n              clusteredData={clusteredDataTop}\n              selectedValue={selectedCategory >= 0 ? selectedCategory : null}\n              title=\"Domain composition\"\n            />\n          </div>\n        )}\n        {chartType === 'column' && (\n          <div id=\"phylum-composition-column\">\n            <PhylumColumn\n              clusteredData={clusteredData}\n              title=\"Phylum composition (top 10)\"\n              selectedValue={selectedRow ? selectedRow.i - 1 : null}\n              showTotal\n            />\n          </div>\n        )}\n        {chartType === 'stacked-column' && (\n          <div id=\"phylum-composition-stacked-column\">\n            <PhylumStackedColumn\n              clusteredData={clusteredData}\n              title=\"Phylum composition (top 10)\"\n              selectedValue={selectedRow ? selectedRow.i - 1 : null}\n            />\n          </div>\n        )}\n      </div>\n      <div>\n        <PhylumTable\n          clusteredData={clusteredData}\n          onMouseEnterRow={handleMouseEnterRow}\n          onMouseLeaveRow={handleMouseLeaveRow}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default PhylumCharts;\n","import React, { useState, useEffect, useContext } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport Loading from 'components/UI/Loading';\nimport FetchError from 'components/UI/FetchError';\nimport TabsForQueryParameter from 'components/UI/TabsForQueryParameter';\nimport useMGnifyData from 'hooks/data/useMGnifyData';\nimport useQueryParamState from 'hooks/queryParamState/useQueryParamState';\nimport UserContext from 'pages/Login/UserContext';\n\nimport PhylumCharts from './PhylumCharts';\nimport './style.css';\n\nconst tabs = [\n  { label: 'Krona', to: 'krona' },\n  { label: 'Pie', to: 'pie' },\n  { label: 'Column', to: 'column' },\n  { label: 'Stacked Column', to: 'stacked-column' },\n];\n\nconst PARAMETER_NAME = 'type';\nconst PARAMETER_DEFAULT = 'krona';\ntype TaxonomicAnalysesProps = {\n  accession: string;\n};\nconst Taxonomy: React.FC<TaxonomicAnalysesProps> = ({ accession }) => {\n  const { data, loading, error } = useMGnifyData(\n    `analyses/${accession}/taxonomy/overview`\n  );\n  const [type] = useQueryParamState(PARAMETER_NAME, PARAMETER_DEFAULT);\n  const datum = data?.data as Record<string, unknown>;\n\n  const enableSSU = datum?.taxonomy_ssu_count > 0 || datum?.taxonomy_count > 0;\n  const enableLSU = datum?.taxonomy_lsu_count > 0;\n  const enableITSoneDB = datum?.taxonomy_itsonedb_count > 0;\n  const enableITSUnite = datum?.taxonomy_itsunite_count > 0;\n\n  const { config } = useContext(UserContext);\n  const [taxResults, setTaxResults] = useState('/unite');\n  useEffect(() => {\n    if (!loading && !error && data) {\n      setTaxResults(\n        (enableITSoneDB && '/itsonedb') ||\n          (enableITSUnite && '/unite') ||\n          (enableSSU && '/ssu') ||\n          (enableLSU && '/lsu')\n      );\n    }\n  }, [\n    data,\n    loading,\n    error,\n    enableITSUnite,\n    enableITSoneDB,\n    enableLSU,\n    enableSSU,\n  ]);\n  if (loading) return <Loading size=\"large\" />;\n  if (error) return <FetchError error={error} />;\n\n  const handleTaxChange = (event): void => {\n    setTaxResults(event.target.value);\n  };\n\n  return (\n    <div className=\"vf-stack mg-analyses-taxonomy\">\n      <div>\n        {(enableSSU || enableLSU) && (\n          <fieldset\n            data-cy=\"ssu-lsu-btns\"\n            className=\"vf-form__fieldset vf-stack vf-stack--400 mg-fieldbox\"\n            style={{\n              width: '15rem',\n            }}\n          >\n            <legend className=\"vf-form__legend\">rRNA</legend>\n            <label>\n              <input\n                type=\"radio\"\n                id=\"smallrRNA\"\n                data-cy=\"ssu-btn\"\n                name=\"tax-results\"\n                disabled={!enableSSU}\n                value=\"/ssu\"\n                checked={taxResults === '/ssu'}\n                onChange={handleTaxChange}\n              />{' '}\n              small subunit rRNA\n            </label>\n            <label>\n              <input\n                type=\"radio\"\n                id=\"largerRNA\"\n                data-cy=\"lsu-btn\"\n                name=\"tax-results\"\n                disabled={!enableLSU}\n                value=\"/lsu\"\n                checked={taxResults === '/lsu'}\n                onChange={handleTaxChange}\n              />{' '}\n              large subunit rRNA\n            </label>\n          </fieldset>\n        )}\n        {(enableITSoneDB || enableITSUnite) && (\n          <fieldset\n            className=\"vf-form__fieldset vf-stack vf-stack--400 mg-fieldbox\"\n            style={{\n              width: '15rem',\n            }}\n          >\n            <legend className=\"vf-form__legend\">ITS</legend>\n            <label>\n              <input\n                type=\"radio\"\n                id=\"smallrRNA\"\n                name=\"tax-results\"\n                value=\"/itsonedb\"\n                checked={taxResults === '/itsonedb'}\n                onChange={handleTaxChange}\n              />{' '}\n              ITS with ITSoneDB\n            </label>\n            <label>\n              <input\n                type=\"radio\"\n                id=\"largerRNA\"\n                name=\"tax-results\"\n                value=\"/unite\"\n                checked={taxResults === '/unite'}\n                onChange={handleTaxChange}\n              />{' '}\n              ITS1/2 with UNITE\n            </label>\n          </fieldset>\n        )}\n      </div>\n      <div>\n        These are the results from the taxonomic analysis steps of our pipeline.\n        You can switch between different views of the data using the menu of\n        icons below (pie, bar, stacked and interactive krona charts). The data\n        used to build these charts can be found under the{' '}\n        <Link to=\"#download\">Download</Link> tab.\n      </div>\n      <TabsForQueryParameter\n        tabs={tabs}\n        queryParameter={PARAMETER_NAME}\n        defaultValue={PARAMETER_DEFAULT}\n      />\n      <div className=\"vf-tabs-content\">\n        {type === 'krona' ? (\n          <object\n            className=\"krona_chart\"\n            data-cy=\"krona-chart\"\n            data={`${config.api}analyses/${accession}/krona${taxResults}?collapse=false`}\n            type=\"text/html\"\n            title=\"Interactive Krona chart\"\n          />\n        ) : (\n          <PhylumCharts\n            accession={accession}\n            category={taxResults}\n            chartType={String(type)}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Taxonomy;\n","import React, { useRef, useEffect, useContext, useState } from 'react';\nimport * as Highcharts from 'highcharts';\nimport addExportMenu from 'highcharts/modules/exporting';\nimport HighchartsReact from 'highcharts-react-official';\nimport { noop } from 'lodash-es';\n\nimport FetchError from 'components/UI/FetchError';\nimport Loading from 'components/UI/Loading';\nimport AnalysisContext from 'pages/Analysis/AnalysisContext';\nimport useInterProMatchesProvider, {\n  InterProCountType,\n} from 'hooks/data/useInterProMatchesProvider';\nimport { TAXONOMY_COLOURS } from 'utils/taxon';\n\naddExportMenu(Highcharts);\n\ntype InterProMatchesChartProps = {\n  selectedName?: string;\n  onTotalChange?: (total: number) => void;\n  onMatchesChange?: (total: InterProCountType[]) => void;\n};\nconst InterProMatchesChart: React.FC<InterProMatchesChartProps> = ({\n  selectedName = null,\n  onTotalChange = noop,\n  onMatchesChange = noop,\n}) => {\n  const { overviewData } = useContext(AnalysisContext);\n  const { matches, total, loading, error, processed } =\n    useInterProMatchesProvider(overviewData.id);\n  const chartComponentRef = useRef<HighchartsReact.RefObject>(null);\n  const [totalCount, setTotalCount] = useState(0);\n  useEffect(() => {\n    if (matches) {\n      const newTotal = matches.reduce((agg, { matches: m }) => agg + m, 0);\n      setTotalCount(newTotal);\n      if (!loading) {\n        onTotalChange(newTotal);\n        onMatchesChange(matches);\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [matches, loading]);\n  useEffect(() => {\n    if (chartComponentRef.current && selectedName !== null) {\n      let index = chartComponentRef.current.chart.series[0].data.findIndex(\n        (e) => e.name === selectedName\n      );\n      chartComponentRef.current.chart.series[0].data.forEach((d) =>\n        d.setState('')\n      );\n      if (index === -1 && selectedName.length)\n        index = chartComponentRef.current.chart.series[0].data.length - 1;\n      chartComponentRef.current.chart.series[0].data[index].setState('hover');\n      chartComponentRef.current.chart.tooltip.refresh(\n        chartComponentRef.current.chart.series[0].data[index]\n      );\n    }\n  }, [selectedName]);\n  if (loading) return <Loading />;\n  if (error) return <FetchError error={error} />;\n\n  const options: Record<string, unknown> = {\n    chart: {\n      plotBackgroundColor: null,\n      plotBorderWidth: null,\n      plotShadow: false,\n      type: 'pie',\n    },\n    title: {\n      text: 'InterPro match summary',\n    },\n    subtitle: {\n      text: `Total: ${totalCount} InterPro matches`,\n    },\n    tooltip: {\n      pointFormat: '<b>{point.y}</b> {series.name} ({point.percentage:.2f}%)',\n    },\n    plotOptions: {\n      pie: {\n        allowPointSelect: true,\n        cursor: 'pointer',\n        dataLabels: {\n          enabled: false,\n        },\n        colors: TAXONOMY_COLOURS,\n      },\n    },\n    credits: {\n      enabled: false,\n    },\n    series: [\n      {\n        name: 'pCDS matched',\n        colorByPoint: true,\n        data: matches.map(({ name, matches: y }) => ({ name, y })),\n      },\n    ],\n  };\n  return (\n    <>\n      <HighchartsReact\n        highcharts={Highcharts}\n        options={options}\n        ref={chartComponentRef}\n        containerProps={{ id: 'interpro-pie-chart' }}\n      />\n      {processed < total && (\n        <sup>\n          * With {processed} out of {total} Interpro matches.\n        </sup>\n      )}\n    </>\n  );\n};\nexport default InterProMatchesChart;\n","import { useState, useEffect } from 'react';\nimport useMGnifyData from 'hooks/data/useMGnifyData';\nimport { MGnifyDatum, ErrorFromFetch } from 'hooks/data/useData';\n\nexport type InterProCountType = {\n  accession?: string;\n  name: string;\n  matches: number;\n};\ntype InterProMatchesProviderResponse = {\n  matches: InterProCountType[];\n  total: number | null;\n  processed: number;\n  loading: boolean;\n  error: ErrorFromFetch;\n};\nconst useInterProMatchesProvider = (\n  accession: string,\n  limit = Infinity\n): InterProMatchesProviderResponse => {\n  const [page, setPage] = useState(1);\n  const [fetchedAllOrLimit, setFetchedAllOrLimit] = useState(false);\n  const [matches, setMatches] = useState<Array<InterProCountType>>([]);\n  const [processed, setProcessed] = useState(0);\n  const [total, setTotal] = useState(null);\n  const { data, isStale, loading, error } = useMGnifyData(\n    `analyses/${accession}/interpro-identifiers`,\n    {\n      page,\n    }\n  );\n  useEffect(() => {\n    if (data?.data && !isStale && page === data?.meta?.pagination?.page) {\n      const other = matches.length\n        ? matches.slice(-1)\n        : [{ name: 'Others', matches: 0 }];\n\n      const newMatches: InterProCountType[] = matches.length\n        ? []\n        : (data.data as MGnifyDatum[]).slice(0, 10).map(({ attributes }) => ({\n            accession: attributes.accession as string,\n            name: attributes.description as string,\n            matches: attributes.count as number,\n          }));\n      other[0].matches += (data.data as MGnifyDatum[])\n        .slice(matches.length ? 0 : 10)\n        .reduce((agg, { attributes }) => agg + Number(attributes.count), 0);\n      const aggregatedMatches = [\n        ...matches.slice(0, -1),\n        ...newMatches,\n        ...other,\n      ];\n      setMatches(aggregatedMatches);\n      setProcessed(processed + (data.data as MGnifyDatum[]).length);\n      const totalInResponse = data?.meta?.pagination?.count;\n      if (total !== totalInResponse && typeof totalInResponse === 'number') {\n        setTotal(totalInResponse);\n      }\n      if (data?.links?.next && aggregatedMatches.length < limit) {\n        setPage(page + 1);\n        setFetchedAllOrLimit(false);\n      } else {\n        setFetchedAllOrLimit(true);\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [data, page, limit]);\n  useEffect(() => {\n    if (data?.links?.next && matches.length < limit) {\n      setPage(page + 1);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [limit]);\n  return {\n    matches,\n    processed,\n    total,\n    loading: loading || !fetchedAllOrLimit,\n    error,\n  };\n};\n\nexport default useInterProMatchesProvider;\n","import React, { useRef, useContext } from 'react';\nimport * as Highcharts from 'highcharts';\nimport addExportMenu from 'highcharts/modules/exporting';\n\nimport HighchartsReact from 'highcharts-react-official';\nimport AnalysisContext from 'pages/Analysis/AnalysisContext';\n\naddExportMenu(Highcharts);\n\n/**\n * Get the series for a category.\n * This method will check if the series contains \"contigs\" or \"reads\".\n * Falling back to \"reads\" if \"contigs\" is missingg in seqData && isAssembly\n */\nfunction getSeriesCategory(\n  seqData: { key: string; value: string }[],\n  category: string\n) {\n  let series = seqData.find(({ key }) => key === category);\n  if (series !== undefined) {\n    return series.value;\n  }\n  series = seqData.find(({ key }) => key === `Contigs${category}`);\n  if (series !== undefined) {\n    return series.value;\n  }\n  series = seqData.find(({ key }) => key === `Reads${category}`);\n  if (series !== undefined) {\n    return series.value;\n  }\n  return 0;\n}\n\nconst InterProQCChart: React.FC = () => {\n  const { overviewData } = useContext(AnalysisContext);\n  const chartComponentRef = useRef<HighchartsReact.RefObject>(null);\n\n  const isAssembly = overviewData.attributes['experiment-type'] === 'assembly';\n  const seqData = overviewData.attributes['analysis-summary'];\n  // TODO: remove mapping when https://www.ebi.ac.uk/panda/jira/browse/EMG-1672\n  const categories = [\n    ' with predicted CDS',\n    ' with predicted RNA',\n    ' with InterProScan match',\n    'Predicted CDS',\n    'Predicted CDS with InterProScan match',\n  ];\n  const series = [\n    getSeriesCategory(seqData, categories[0]),\n    getSeriesCategory(seqData, categories[1]),\n    getSeriesCategory(seqData, categories[2]),\n    getSeriesCategory(seqData, categories[3]),\n    getSeriesCategory(seqData, categories[4]),\n  ].map(Number);\n  const prefix = isAssembly ? 'Contigs' : 'Reads';\n  categories[0] = prefix + categories[0];\n  categories[1] = prefix + categories[1];\n  categories[2] = prefix + categories[2];\n\n  const options: Record<string, unknown> = {\n    chart: {\n      type: 'bar',\n      height: 240,\n    },\n    title: {\n      text: 'Sequence feature summary',\n    },\n    yAxis: {\n      type: 'logarithmic',\n      title: {\n        text: 'Count (note the logarithmic scale)',\n      },\n    },\n    xAxis: {\n      categories,\n    },\n    plotOptions: {\n      series: {\n        stacking: 'normal',\n      },\n    },\n    credits: {\n      enabled: false,\n    },\n    legend: {\n      enabled: false,\n    },\n    tooltip: {\n      pointFormat: '<b>{point.y}</b>',\n    },\n    series: [\n      {\n        data: series,\n        color: '#058dc7',\n      },\n    ],\n  };\n  return (\n    <HighchartsReact\n      highcharts={Highcharts}\n      options={options}\n      ref={chartComponentRef}\n      containerProps={{ id: 'seqfeat-chart' }}\n    />\n  );\n};\nexport default InterProQCChart;\n","import React, { useContext, useState } from 'react';\nimport { Row } from 'react-table';\nimport AnalysisContext from 'pages/Analysis/AnalysisContext';\nimport useMGnifyData from 'hooks/data/useMGnifyData';\nimport EMGTable from 'components/UI/EMGTable';\nimport { TAXONOMY_COLOURS } from 'utils/taxon';\n\nimport Loading from 'components/UI/Loading';\nimport FetchError from 'components/UI/FetchError';\nimport ExtLink from 'components/UI/ExtLink';\nimport useQueryParamState from 'hooks/queryParamState/useQueryParamState';\nimport InterProMatchesChart from './InterProMatchesChart';\nimport InterProQCChart from './QCChart';\n\nconst PAGE_SIZE = 25;\nconst InterPro: React.FC = () => {\n  const { overviewData } = useContext(AnalysisContext);\n  const [total, setTotal] = useState(-1);\n  const [colorMap, setColorMap] = useState(new Map());\n  const [selectedName, setSelectedName] = useState(null);\n  const [page] = useQueryParamState('page', 1, Number);\n  const [pageSize] = useQueryParamState('page_size', PAGE_SIZE, Number);\n  const [order] = useQueryParamState('order', '');\n  const { data, loading, error, isStale } = useMGnifyData(\n    `analyses/${overviewData.id}/interpro-identifiers`,\n    {\n      page: page as number,\n      ordering: order as string,\n      page_size: pageSize as number,\n    }\n  );\n  const columns = [\n    {\n      id: 'color',\n      Header: '',\n      accessor: 'attributes.accession',\n      disableSortBy: true,\n      Cell: ({ cell }) => (\n        <div\n          style={{\n            width: '1rem',\n            height: '1rem',\n            display: 'inline-block',\n            backgroundColor:\n              colorMap.get(cell.value) || TAXONOMY_COLOURS.slice(-1)[0],\n            verticalAlign: 'sub',\n            border: '1px solid white',\n          }}\n        >\n          &nbsp;\n        </div>\n      ),\n    },\n    {\n      id: 'name',\n      Header: 'Entry name',\n      accessor: 'attributes.description',\n    },\n    {\n      id: 'accession',\n      Header: 'ID',\n      accessor: 'attributes.accession',\n      Cell: ({ cell }) => (\n        <ExtLink\n          href={`http://www.ebi.ac.uk/interpro/entry/interpro/${cell.value}`}\n        >\n          {cell.value}\n        </ExtLink>\n      ),\n    },\n    {\n      Header: 'pCDS matched',\n      accessor: 'attributes.count',\n    },\n    {\n      id: 'percentage',\n      Header: '%',\n      accessor: 'attributes.count',\n      Cell: ({ cell }) =>\n        total === -1 ? (\n          <Loading size=\"small\" />\n        ) : (\n          ((100 * cell.value) / total).toFixed(2)\n        ),\n    },\n  ];\n  const handleMouseEnterRow = (row: Row): void =>\n    setSelectedName(row.values.name);\n  const handleMouseLeaveRow = (): void => setSelectedName(null);\n  return (\n    <div className=\"vf-stack\">\n      <div>\n        <InterProQCChart />\n      </div>\n      <h5>InterPro match summary</h5>\n      <div className=\"vf-grid mg-grid-30-70\">\n        <div>\n          <InterProMatchesChart\n            selectedName={selectedName}\n            onTotalChange={(newTotal) => setTotal(newTotal)}\n            onMatchesChange={(matches) => {\n              setColorMap(\n                new Map(\n                  matches.map(({ accession }, i) => [\n                    accession,\n                    TAXONOMY_COLOURS[i],\n                  ])\n                )\n              );\n            }}\n          />\n        </div>\n        {loading && !isStale && <Loading />}\n        {!loading && error && <FetchError error={error} />}\n        {data && !error && (\n          <EMGTable\n            cols={columns}\n            data={data}\n            Title={\n              <div>\n                <h6>\n                  InterPro entries\n                  <span className=\"mg-number\">\n                    {data.meta?.pagination?.count || 1}\n                  </span>\n                </h6>\n              </div>\n            }\n            initialPageSize={PAGE_SIZE}\n            initialPage={(page as number) - 1}\n            className=\"mg-anlyses-table\"\n            loading={loading}\n            isStale={isStale}\n            onMouseEnterRow={handleMouseEnterRow}\n            onMouseLeaveRow={handleMouseLeaveRow}\n            showPagination\n            dataCy=\"interpro-table\"\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default InterPro;\n","import React, { useRef } from 'react';\nimport * as Highcharts from 'highcharts';\nimport addExportMenu from 'highcharts/modules/exporting';\nimport HighchartsReact from 'highcharts-react-official';\n\nimport { TAXONOMY_COLOURS } from 'utils/taxon';\n\naddExportMenu(Highcharts);\n\ntype GOBarChartProps = {\n  categories: Array<string>;\n  series: Array<number>;\n  title: string;\n  color: string;\n  total: number;\n  containerId: string;\n};\nconst GOBarChart: React.FC<GOBarChartProps> = ({\n  categories,\n  series,\n  title,\n  total,\n  color,\n  containerId,\n}) => {\n  const chartComponentRef = useRef<HighchartsReact.RefObject>(null);\n  const options: Record<string, unknown> = {\n    chart: {\n      type: 'bar',\n      height: 800,\n      zoomType: 'xy',\n      renderTo: 'container',\n    },\n    title: {\n      text: title,\n    },\n    subtitle: {\n      text: `Total: ${total} annotations - Drag to zoom in/out`,\n    },\n    yAxis: {\n      min: 0,\n      title: {\n        text: 'Annotations',\n      },\n    },\n    xAxis: {\n      categories,\n    },\n    plotOptions: {\n      series: {\n        stacking: 'normal',\n      },\n      bar: {\n        allowPointSelect: true,\n        cursor: 'pointer',\n        colors: TAXONOMY_COLOURS,\n      },\n    },\n    credits: {\n      enabled: false,\n    },\n    legend: {\n      enabled: false,\n    },\n    tooltip: {\n      pointFormat: '<b>{point.y}</b> {series.name}',\n    },\n    series: [\n      {\n        name: 'annotations',\n        data: series,\n        color,\n      },\n    ],\n  };\n  return (\n    <HighchartsReact\n      highcharts={Highcharts}\n      options={options}\n      ref={chartComponentRef}\n      containerProps={{ id: containerId }}\n    />\n  );\n};\nexport default GOBarChart;\n","import React, { useRef } from 'react';\nimport * as Highcharts from 'highcharts';\nimport addExportMenu from 'highcharts/modules/exporting';\nimport HighchartsReact from 'highcharts-react-official';\n\nimport { TAXONOMY_COLOURS } from 'utils/taxon';\n\naddExportMenu(Highcharts);\n\ntype GOPieChartProps = {\n  categories: Array<string>;\n  series: Array<number>;\n  title: string;\n  total: number;\n  containerId: string;\n};\nconst GOPieChart: React.FC<GOPieChartProps> = ({\n  categories,\n  series,\n  title,\n  total,\n  containerId,\n}) => {\n  const chartComponentRef = useRef<HighchartsReact.RefObject>(null);\n  const pieSeries = categories.slice(0, 10).map((name, i) => ({\n    name,\n    y: series[i],\n  }));\n  const other = { name: 'Others', y: 0 };\n  series.slice(10).forEach((v) => {\n    other.y += v;\n  });\n  pieSeries.push(other);\n  const options: Record<string, unknown> = {\n    chart: {\n      plotBackgroundColor: null,\n      plotBorderWidth: null,\n      plotShadow: false,\n      type: 'pie',\n    },\n    title: {\n      text: title,\n    },\n    subtitle: {\n      text: `Total: ${total} annotations`,\n    },\n    tooltip: {\n      pointFormat: '<b>{point.y}</b> {series.name} ({point.percentage:.2f}%)',\n    },\n    plotOptions: {\n      pie: {\n        allowPointSelect: true,\n        cursor: 'pointer',\n        dataLabels: {\n          enabled: false,\n        },\n        showInLegend: true,\n        colors: TAXONOMY_COLOURS,\n      },\n    },\n    credits: {\n      enabled: false,\n    },\n    series: [\n      {\n        name: 'annotations',\n        colorByPoint: true,\n        data: pieSeries,\n      },\n    ],\n    legend: {\n      align: 'right',\n      verticalAlign: 'middle',\n      layout: 'vertical',\n      /* eslint-disable react/no-this-in-sfc */\n      labelFormatter() {\n        if (this.name.length > 15) {\n          return `${this.name.slice(0, 15)}...`;\n        }\n        return this.name;\n      },\n      /* eslint-enable react/no-this-in-sfc */\n    },\n  };\n  return (\n    <HighchartsReact\n      highcharts={Highcharts}\n      options={options}\n      ref={chartComponentRef}\n      containerProps={{ id: containerId }}\n    />\n  );\n};\nexport default GOPieChart;\n","import React, { useContext, useEffect, useState } from 'react';\nimport TabsForQueryParameter from 'components/UI/TabsForQueryParameter';\nimport AnalysisContext from 'pages/Analysis/AnalysisContext';\nimport useMGnifyData from 'hooks/data/useMGnifyData';\nimport Loading from 'components/UI/Loading';\nimport FetchError from 'components/UI/FetchError';\nimport { MGnifyDatum } from 'hooks/data/useData';\nimport { TAXONOMY_COLOURS } from 'utils/taxon';\nimport useQueryParamState from 'hooks/queryParamState/useQueryParamState';\nimport GOBarChart from './BarChart';\nimport GOPieChart from './PieChart';\n\nconst tabs = [\n  { label: 'Bar', to: 'bar' },\n  { label: 'Pie', to: 'pie' },\n];\n\nconst GO: React.FC = () => {\n  const { overviewData } = useContext(AnalysisContext);\n  const [chart] = useQueryParamState('chart', 'bar');\n  const { data, loading, error } = useMGnifyData(\n    `analyses/${overviewData.id}/go-slim`\n  );\n  const [dataBundles, setDataBundles] = useState(null);\n  useEffect(() => {\n    if ((data?.data as MGnifyDatum[])?.length) {\n      const newBundle = {\n        biological_process: {\n          series: [],\n          categories: [],\n          total: 0,\n        },\n        molecular_function: {\n          series: [],\n          categories: [],\n          total: 0,\n        },\n        cellular_component: {\n          series: [],\n          categories: [],\n          total: 0,\n        },\n      };\n      (data.data as MGnifyDatum[]).forEach((term) => {\n        const lineage = term?.attributes?.lineage as string;\n        if (\n          [\n            'biological_process',\n            'molecular_function',\n            'cellular_component',\n          ].includes(lineage)\n        ) {\n          newBundle[lineage].categories.push(term.attributes.description);\n          newBundle[lineage].series.push(term.attributes.count);\n          newBundle[lineage].total += term.attributes.count;\n        }\n      });\n      setDataBundles(newBundle);\n    }\n  }, [data]);\n  return (\n    <div className=\"vf-stack\">\n      <h4>GO terms annotation</h4>\n      <p>\n        A summary of Gene Ontology (GO) terms derived from InterPro matches to\n        your sample is provided in the charts below.\n      </p>\n      {loading && <Loading />}\n      {error && <FetchError error={error} />}\n      {data && (\n        <>\n          <h5>Switch view:</h5>\n          <TabsForQueryParameter\n            tabs={tabs}\n            queryParameter=\"chart\"\n            defaultValue=\"bar\"\n          />\n          <div className=\"vf-tabs-content\">\n            {chart === 'bar' && dataBundles && (\n              <div id=\"go-slim-bar-charts\">\n                <div className=\"vf-grid vf-grid__col-3\">\n                  <GOBarChart\n                    title=\"Biological process\"\n                    series={dataBundles.biological_process.series}\n                    categories={dataBundles.biological_process.categories}\n                    total={dataBundles.biological_process.total}\n                    color={TAXONOMY_COLOURS[0]}\n                    containerId=\"biological-process-bar-chart\"\n                  />\n                  <GOBarChart\n                    title=\"Molecular Function\"\n                    series={dataBundles.molecular_function.series}\n                    categories={dataBundles.molecular_function.categories}\n                    total={dataBundles.molecular_function.total}\n                    color={TAXONOMY_COLOURS[3]}\n                    containerId=\"molecular-function-bar-chart\"\n                  />\n                  <GOBarChart\n                    title=\"Cellular Component\"\n                    series={dataBundles.cellular_component.series}\n                    categories={dataBundles.cellular_component.categories}\n                    total={dataBundles.cellular_component.total}\n                    color={TAXONOMY_COLOURS[4]}\n                    containerId=\"cellular-component-bar-chart\"\n                  />\n                </div>\n              </div>\n            )}\n            {chart === 'pie' && dataBundles && (\n              <div id=\"go-slim-pie-charts\">\n                <div className=\"vf-grid vf-grid__col-3\">\n                  <GOPieChart\n                    title=\"Biological process\"\n                    series={dataBundles.biological_process.series}\n                    categories={dataBundles.biological_process.categories}\n                    total={dataBundles.biological_process.total}\n                    containerId=\"biological-process-pie-chart\"\n                  />\n                  <GOPieChart\n                    title=\"Molecular Function\"\n                    series={dataBundles.molecular_function.series}\n                    categories={dataBundles.molecular_function.categories}\n                    total={dataBundles.molecular_function.total}\n                    containerId=\"molecular-function-pie-chart\"\n                  />\n                  <GOPieChart\n                    title=\"Cellular Component\"\n                    series={dataBundles.cellular_component.series}\n                    categories={dataBundles.cellular_component.categories}\n                    total={dataBundles.cellular_component.total}\n                    containerId=\"cellular-component-pie-chart\"\n                  />\n                </div>\n              </div>\n            )}\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default GO;\n","import React, { useContext } from 'react';\n\nimport EMGTable from 'components/UI/EMGTable';\nimport useMGnifyData from 'hooks/data/useMGnifyData';\nimport AnalysisContext from 'pages/Analysis/AnalysisContext';\nimport Loading from 'components/UI/Loading';\nimport FetchError from 'components/UI/FetchError';\nimport useQueryParamState from 'hooks/queryParamState/useQueryParamState';\n\nconst PAGE_SIZE = 25;\n\nconst PfamTable: React.FC = () => {\n  const { overviewData } = useContext(AnalysisContext);\n  const [page] = useQueryParamState('page', 1, Number);\n  const [pageSize] = useQueryParamState('page_size', PAGE_SIZE, Number);\n  const { data, loading, error, isStale, downloadURL } = useMGnifyData(\n    `analyses/${overviewData.id}/pfam-entries`,\n    {\n      page: page as number,\n      page_size: pageSize as number,\n    }\n  );\n  const columns = [\n    {\n      Header: 'Class ID',\n      accessor: 'id',\n    },\n    {\n      Header: 'Description',\n      accessor: 'attributes.description',\n    },\n    {\n      Header: 'Count',\n      accessor: 'attributes.count',\n    },\n  ];\n  if (loading && (!isStale || !data)) return <Loading size=\"large\" />;\n  if (error) return <FetchError error={error} />;\n\n  return (\n    <EMGTable\n      cols={columns}\n      data={data}\n      initialPageSize={PAGE_SIZE}\n      initialPage={(page as number) - 1}\n      className=\"mg-anlyses-table\"\n      loading={loading}\n      isStale={isStale}\n      showPagination\n      downloadURL={downloadURL}\n    />\n  );\n};\n\nexport default PfamTable;\n","import React, { useContext, useRef } from 'react';\nimport * as Highcharts from 'highcharts';\nimport addExportMenu from 'highcharts/modules/exporting';\nimport HighchartsReact from 'highcharts-react-official';\n\nimport Loading from 'components/UI/Loading';\nimport FetchError from 'components/UI/FetchError';\nimport { MGnifyDatum } from 'hooks/data/useData';\nimport useMGnifyData from 'hooks/data/useMGnifyData';\nimport AnalysisContext from 'pages/Analysis/AnalysisContext';\nimport { TAXONOMY_COLOURS } from 'utils/taxon';\n\naddExportMenu(Highcharts);\n\nconst PfamBarChart: React.FC = () => {\n  const chartComponentRef = useRef<HighchartsReact.RefObject>(null);\n  const { overviewData } = useContext(AnalysisContext);\n  const { data, loading, error } = useMGnifyData(\n    `analyses/${overviewData.id}/pfam-entries`,\n    {\n      page_size: 10,\n    }\n  );\n  if (loading) return <Loading size=\"large\" />;\n  if (error) return <FetchError error={error} />;\n\n  const series = (data.data as MGnifyDatum[]).map((d) => d.attributes.count);\n  const categories = (data.data as MGnifyDatum[]).map(\n    (d) => d.attributes.accession\n  );\n  const categoriesDescriptions = (data.data as MGnifyDatum[]).reduce(\n    (memo, d) => {\n      // eslint-disable-next-line no-param-reassign\n      memo[d.attributes.accession as string] = d.attributes.description;\n      return memo;\n    },\n    {}\n  );\n  const options: Record<string, unknown> = {\n    chart: {\n      type: 'column',\n      height: 400,\n      zoomType: 'xy',\n      renderTo: 'container',\n    },\n    title: {\n      text: 'Top 10 Pfam entries',\n    },\n    yAxis: {\n      min: 0,\n      title: {\n        text: 'Number of matches',\n      },\n    },\n    xAxis: {\n      categories,\n    },\n    plotOptions: {\n      series: {\n        stacking: 'normal',\n      },\n      column: {\n        allowPointSelect: true,\n        cursor: 'pointer',\n        colors: TAXONOMY_COLOURS,\n      },\n    },\n    credits: {\n      enabled: false,\n    },\n    legend: {\n      enabled: true,\n    },\n    tooltip: {\n      /* eslint-disable react/no-this-in-sfc */\n      formatter() {\n        const description = categoriesDescriptions[this.key];\n        let tooltip = `${this.series.name}<br/>Count: ${this.y}`;\n        if (description) {\n          tooltip += `<br/>Pfam entry: ${description}`;\n        }\n        return tooltip;\n      },\n      /* eslint-enable react/no-this-in-sfc */\n    },\n    series: [\n      {\n        name: `Analysis ${overviewData.id}`,\n        data: series,\n        colors: TAXONOMY_COLOURS[1],\n      },\n    ],\n  };\n  return (\n    <HighchartsReact\n      highcharts={Highcharts}\n      options={options}\n      ref={chartComponentRef}\n    />\n  );\n};\nexport default PfamBarChart;\n","import React from 'react';\nimport KOTable from './Table';\nimport KOBarChart from './BarChart';\n\nconst KOTab: React.FC = () => {\n  return (\n    <div className=\"vf-stack\">\n      <KOBarChart />\n      <KOTable />\n    </div>\n  );\n};\n\nexport default KOTab;\n","import React, { useContext } from 'react';\n\nimport EMGTable from 'components/UI/EMGTable';\nimport useMGnifyData from 'hooks/data/useMGnifyData';\nimport AnalysisContext from 'pages/Analysis/AnalysisContext';\nimport Loading from 'components/UI/Loading';\nimport FetchError from 'components/UI/FetchError';\nimport useQueryParamState from 'hooks/queryParamState/useQueryParamState';\n\nconst PAGE_SIZE = 25;\n\nconst KOTable: React.FC = () => {\n  const { overviewData } = useContext(AnalysisContext);\n  const [page] = useQueryParamState('page', 1, Number);\n  const [pageSize] = useQueryParamState('page_size', PAGE_SIZE, Number);\n  const { data, loading, error, isStale, downloadURL } = useMGnifyData(\n    `analyses/${overviewData.id}/kegg-orthologs`,\n    {\n      page: page as number,\n      page_size: pageSize as number,\n    }\n  );\n  const columns = [\n    {\n      Header: 'Class ID',\n      accessor: 'id',\n    },\n    {\n      Header: 'Description',\n      accessor: 'attributes.description',\n    },\n    {\n      Header: 'Count',\n      accessor: 'attributes.count',\n    },\n  ];\n  if (loading && (!isStale || !data)) return <Loading size=\"large\" />;\n  if (error) return <FetchError error={error} />;\n\n  return (\n    <EMGTable\n      cols={columns}\n      data={data}\n      initialPageSize={PAGE_SIZE}\n      initialPage={(page as number) - 1}\n      className=\"mg-anlyses-table\"\n      loading={loading}\n      isStale={isStale}\n      showPagination\n      downloadURL={downloadURL}\n    />\n  );\n};\n\nexport default KOTable;\n","import React, { useContext, useRef } from 'react';\nimport * as Highcharts from 'highcharts';\nimport addExportMenu from 'highcharts/modules/exporting';\nimport HighchartsReact from 'highcharts-react-official';\n\nimport Loading from 'components/UI/Loading';\nimport FetchError from 'components/UI/FetchError';\nimport useMGnifyData from 'hooks/data/useMGnifyData';\nimport { MGnifyDatum } from 'hooks/data/useData';\nimport AnalysisContext from 'pages/Analysis/AnalysisContext';\nimport { TAXONOMY_COLOURS } from 'utils/taxon';\n\naddExportMenu(Highcharts);\n\nconst KOBarChart: React.FC = () => {\n  const chartComponentRef = useRef<HighchartsReact.RefObject>(null);\n  const { overviewData } = useContext(AnalysisContext);\n  const { data, loading, error } = useMGnifyData(\n    `analyses/${overviewData.id}/kegg-orthologs`,\n    {\n      page_size: 10,\n    }\n  );\n  if (loading) return <Loading size=\"large\" />;\n  if (error) return <FetchError error={error} />;\n\n  const series = (data.data as MGnifyDatum[]).map((d) => d.attributes.count);\n  const categories = (data.data as MGnifyDatum[]).map(\n    (d) => d.attributes.accession\n  );\n  const categoriesDescriptions = (data.data as MGnifyDatum[]).reduce(\n    (memo, d) => {\n      // eslint-disable-next-line no-param-reassign\n      memo[d.attributes.accession as string] = d.attributes.description;\n      return memo;\n    },\n    {}\n  );\n  const options: Record<string, unknown> = {\n    chart: {\n      type: 'column',\n      height: 400,\n      zoomType: 'xy',\n      renderTo: 'container',\n    },\n    title: {\n      text: 'Top 10 KO entries',\n    },\n    yAxis: {\n      min: 0,\n      title: {\n        text: 'Number of matches',\n      },\n    },\n    xAxis: {\n      categories,\n    },\n    plotOptions: {\n      series: {\n        stacking: 'normal',\n      },\n      column: {\n        allowPointSelect: true,\n        cursor: 'pointer',\n        colors: TAXONOMY_COLOURS,\n      },\n    },\n    credits: {\n      enabled: false,\n    },\n    legend: {\n      enabled: true,\n    },\n    tooltip: {\n      /* eslint-disable react/no-this-in-sfc */\n      formatter() {\n        const description = categoriesDescriptions[this.key];\n        let tooltip = `${this.series.name}<br/>Count: ${this.y}`;\n        if (description) {\n          tooltip += `<br/>KEGG Class: ${description}`;\n        }\n        return tooltip;\n      },\n      /* eslint-enable react/no-this-in-sfc */\n    },\n    series: [\n      {\n        name: `Analysis ${overviewData.id}`,\n        data: series,\n        colors: TAXONOMY_COLOURS[1],\n      },\n    ],\n  };\n  return (\n    <HighchartsReact\n      highcharts={Highcharts}\n      options={options}\n      ref={chartComponentRef}\n    />\n  );\n};\nexport default KOBarChart;\n","import React from 'react';\nimport PfamTable from './Table';\nimport PfamBarChart from './BarChart';\n\nconst PfamTab: React.FC = () => {\n  return (\n    <div className=\"vf-stack\">\n      <PfamBarChart />\n      <PfamTable />\n    </div>\n  );\n};\n\nexport default PfamTab;\n","import React, { useContext } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport TabsForQueryParameter from 'components/UI/TabsForQueryParameter';\nimport ExtLink from 'components/UI/ExtLink';\nimport InfoBanner from 'components/UI/InfoBanner';\n\nimport AnalysisContext from 'pages/Analysis/AnalysisContext';\nimport useQueryParamState from 'hooks/queryParamState/useQueryParamState';\nimport InterProTab from './InterPro';\nimport GOTab from './GO';\nimport PfamTab from './Pfam';\nimport KOTab from './KO';\n\nconst PARAMETER_NAME = 'type';\nconst PARAMETER_DEFAULT = 'interpro';\nconst tabs = [\n  { label: 'InterPro', to: 'interpro' },\n  { label: 'GO Terms', to: 'go' },\n  { label: 'Pfam', to: 'pfam' },\n  { label: 'KO', to: 'ko' },\n];\nconst FunctionalAnalysis: React.FC = () => {\n  const { overviewData } = useContext(AnalysisContext);\n\n  const [type] = useQueryParamState(PARAMETER_NAME, PARAMETER_DEFAULT);\n  // const accession=overviewData.id;\n  const version = Number(overviewData.attributes['pipeline-version']);\n  const longReadExperiment =\n    overviewData.attributes['experiment-type'] === 'long_reads_assembly';\n\n  return (\n    <div className=\"vf-stack\">\n      <p>\n        These charts present the functional analysis outputs of our pipeline,\n        which focus on{' '}\n        <ExtLink href=\"http://www.ebi.ac.uk/interpro\" title=\"InterPro website\">\n          InterPro\n        </ExtLink>\n        {version >= 5 && (\n          <>\n            ,{' '}\n            <ExtLink\n              href=\"https://www.ebi.ac.uk/interpro/entry/pfam/\"\n              title=\"InterPro protein families (Pfam)\"\n            >\n              Pfam\n            </ExtLink>\n            ,{' '}\n            <ExtLink\n              href=\"https://www.genome.jp/kegg/ko.html\"\n              title=\"KEGG orthologue (KO) webpage\"\n            >\n              KEGG orthologue\n            </ExtLink>\n          </>\n        )}{' '}\n        and{' '}\n        <ExtLink\n          href=\"https://www.uniprot.org/help/gene_ontology\"\n          title=\"Gene Ontology webpage\"\n        >\n          GO\n        </ExtLink>{' '}\n        term annotations. These summarise the functional content of the\n        sequences in the sample. The full set of results files can be found\n        under the <Link to=\"#download\">Download</Link> tab.\n      </p>\n      {longReadExperiment && (\n        <InfoBanner title=\"Caution:\" type=\"info\">\n          The sequences in this sample are derived from long-read sequencing\n          technology. Gene-prediction on this sequence data can be problematic,\n          potentially resulting in fewer and/or truncated predictions.\n        </InfoBanner>\n      )}\n      <TabsForQueryParameter\n        tabs={version >= 5 ? tabs : tabs.slice(0, 2)}\n        queryParameter={PARAMETER_NAME}\n        defaultValue={PARAMETER_DEFAULT}\n      />\n      <div className=\"vf-tabs-content\">\n        {type === 'interpro' && <InterProTab />}\n        {type === 'go' && <GOTab />}\n        {type === 'pfam' && <PfamTab />}\n        {type === 'ko' && <KOTab />}\n      </div>\n    </div>\n  );\n};\nexport default FunctionalAnalysis;\n","import React, { useContext } from 'react';\n\nimport EMGTable from 'components/UI/EMGTable';\nimport useMGnifyData from 'hooks/data/useMGnifyData';\nimport AnalysisContext from 'pages/Analysis/AnalysisContext';\nimport Loading from 'components/UI/Loading';\nimport FetchError from 'components/UI/FetchError';\nimport useQueryParamState from 'hooks/queryParamState/useQueryParamState';\n\nconst PAGE_SIZE = 25;\n\nconst KeggTable: React.FC = () => {\n  const { overviewData } = useContext(AnalysisContext);\n  const [page] = useQueryParamState('page', 1, Number);\n  const [pageSize] = useQueryParamState('page_size', PAGE_SIZE, Number);\n  const { data, loading, error, isStale, downloadURL } = useMGnifyData(\n    `analyses/${overviewData.id}/kegg-modules`,\n    {\n      page: page as number,\n      page_size: pageSize as number,\n    }\n  );\n  const columns = [\n    {\n      Header: 'Class ID',\n      accessor: 'id',\n    },\n    {\n      Header: 'Name',\n      accessor: 'attributes.name',\n    },\n    {\n      Header: 'Description',\n      accessor: 'attributes.description',\n    },\n    {\n      Header: 'Completeness',\n      accessor: 'attributes.completeness',\n    },\n    {\n      Header: 'Matching KO',\n      accessor: 'attributes.matching-kos.length',\n    },\n    {\n      Header: 'Missing KOs',\n      accessor: 'attributes.missing-kos.length',\n    },\n  ];\n  if (loading && (!isStale || !data)) return <Loading size=\"large\" />;\n  if (error) return <FetchError error={error} />;\n\n  return (\n    <EMGTable\n      cols={columns}\n      data={data}\n      initialPageSize={PAGE_SIZE}\n      initialPage={(page as number) - 1}\n      className=\"mg-anlyses-table\"\n      loading={loading}\n      isStale={isStale}\n      showPagination\n      downloadURL={downloadURL}\n    />\n  );\n};\n\nexport default KeggTable;\n","import React, { useContext, useRef } from 'react';\nimport * as Highcharts from 'highcharts';\nimport addExportMenu from 'highcharts/modules/exporting';\nimport HighchartsReact from 'highcharts-react-official';\n\nimport Loading from 'components/UI/Loading';\nimport FetchError from 'components/UI/FetchError';\nimport useMGnifyData from 'hooks/data/useMGnifyData';\nimport { MGnifyDatum } from 'hooks/data/useData';\nimport AnalysisContext from 'pages/Analysis/AnalysisContext';\n\nimport { TAXONOMY_COLOURS } from 'utils/taxon';\n\naddExportMenu(Highcharts);\n\nconst PfamBarChart: React.FC = () => {\n  const chartComponentRef = useRef<HighchartsReact.RefObject>(null);\n  const { overviewData } = useContext(AnalysisContext);\n  const { data, loading, error } = useMGnifyData(\n    `analyses/${overviewData.id}/kegg-modules`\n  );\n  if (loading) return <Loading size=\"large\" />;\n  if (error) return <FetchError error={error} />;\n\n  const series = (data.data as MGnifyDatum[]).map(\n    (d) => d.attributes.completeness\n  );\n  const categories = (data.data as MGnifyDatum[]).map(\n    (d) => d.attributes.accession\n  );\n  const categoriesDescriptions = (data.data as MGnifyDatum[]).reduce(\n    (memo, d) => {\n      // eslint-disable-next-line no-param-reassign\n      memo[d.attributes.accession as string] = d.attributes.description;\n      return memo;\n    },\n    {}\n  );\n  const options: Record<string, unknown> = {\n    chart: {\n      type: 'column',\n      height: 400,\n      zoomType: 'xy',\n      renderTo: 'container',\n    },\n    title: {\n      text: 'KEGG module categories',\n    },\n    yAxis: {\n      min: 0,\n      max: 100,\n      title: {\n        text: 'Completeness (%)',\n      },\n      labels: {\n        format: '{value} %',\n      },\n    },\n    xAxis: {\n      categories,\n    },\n\n    plotOptions: {\n      series: {\n        stacking: 'normal',\n      },\n      column: {\n        allowPointSelect: true,\n        cursor: 'pointer',\n        colors: TAXONOMY_COLOURS,\n      },\n    },\n    credits: {\n      enabled: false,\n    },\n    legend: {\n      enabled: true,\n    },\n    tooltip: {\n      /* eslint-disable react/no-this-in-sfc */\n      formatter() {\n        const description = categoriesDescriptions[this.key];\n        let tooltip = `${this.series.name}<br/>Completeness: ${this.y}%`;\n        if (description) {\n          tooltip += `<br />KEGG Module: ${description}`;\n        }\n        return tooltip;\n      },\n      /* eslint-enable react/no-this-in-sfc */\n    },\n    series: [\n      {\n        name: `Analysis ${overviewData.id}`,\n        data: series,\n        colors: TAXONOMY_COLOURS[1],\n      },\n    ],\n  };\n  return (\n    <HighchartsReact\n      highcharts={Highcharts}\n      options={options}\n      ref={chartComponentRef}\n    />\n  );\n};\nexport default PfamBarChart;\n","import React from 'react';\nimport KeggTable from './Table';\nimport KeggBarChart from './BarChart';\n\nconst KOTab: React.FC = () => {\n  return (\n    <div className=\"vf-stack\">\n      <KeggBarChart />\n      <KeggTable />\n    </div>\n  );\n};\n\nexport default KOTab;\n","import React, { useContext } from 'react';\n\nimport EMGTable from 'components/UI/EMGTable';\nimport useMGnifyData from 'hooks/data/useMGnifyData';\nimport AnalysisContext from 'pages/Analysis/AnalysisContext';\nimport Loading from 'components/UI/Loading';\nimport FetchError from 'components/UI/FetchError';\nimport useQueryParamState from 'hooks/queryParamState/useQueryParamState';\n\nconst PAGE_SIZE = 25;\n\nconst AntiSMASHTable: React.FC = () => {\n  const { overviewData } = useContext(AnalysisContext);\n  const [page] = useQueryParamState('page', 1, Number);\n  const [pageSize] = useQueryParamState('page_size', PAGE_SIZE, Number);\n  const { data, loading, error, isStale, downloadURL } = useMGnifyData(\n    `analyses/${overviewData.id}/antismash-gene-clusters`,\n    {\n      page: page as number,\n      page_size: pageSize as number,\n    }\n  );\n  const columns = [\n    {\n      Header: 'Class ID',\n      accessor: 'id',\n    },\n    {\n      Header: 'Description',\n      accessor: 'attributes.description',\n    },\n    {\n      Header: 'Count',\n      accessor: 'attributes.count',\n    },\n  ];\n  if (loading && (!isStale || !data)) return <Loading size=\"large\" />;\n  if (error) return <FetchError error={error} />;\n\n  return (\n    <EMGTable\n      cols={columns}\n      data={data}\n      initialPageSize={PAGE_SIZE}\n      initialPage={(page as number) - 1}\n      className=\"mg-anlyses-table\"\n      loading={loading}\n      isStale={isStale}\n      showPagination\n      downloadURL={downloadURL}\n    />\n  );\n};\n\nexport default AntiSMASHTable;\n","import React, { useContext, useRef } from 'react';\nimport * as Highcharts from 'highcharts';\nimport addExportMenu from 'highcharts/modules/exporting';\nimport HighchartsReact from 'highcharts-react-official';\n\nimport Loading from 'components/UI/Loading';\nimport FetchError from 'components/UI/FetchError';\nimport useMGnifyData from 'hooks/data/useMGnifyData';\nimport { MGnifyDatum } from 'hooks/data/useData';\nimport AnalysisContext from 'pages/Analysis/AnalysisContext';\n\nimport { TAXONOMY_COLOURS } from 'utils/taxon';\n\naddExportMenu(Highcharts);\n\nconst AntiSMASHBarChart: React.FC = () => {\n  const chartComponentRef = useRef<HighchartsReact.RefObject>(null);\n  const { overviewData } = useContext(AnalysisContext);\n  const { data, loading, error } = useMGnifyData(\n    `analyses/${overviewData.id}/antismash-gene-clusters`,\n    {\n      page_size: 10,\n    }\n  );\n  if (loading) return <Loading size=\"large\" />;\n  if (error) return <FetchError error={error} />;\n\n  const series = (data.data as MGnifyDatum[]).map((d) => d.attributes.count);\n  const categories = (data.data as MGnifyDatum[]).map(\n    (d) => d.attributes.accession\n  );\n  const categoriesDescriptions = (data.data as MGnifyDatum[]).reduce(\n    (memo, d) => {\n      // eslint-disable-next-line no-param-reassign\n      memo[d.attributes.accession as string] = d.attributes.description;\n      return memo;\n    },\n    {}\n  );\n  const options: Record<string, unknown> = {\n    chart: {\n      type: 'column',\n      height: 400,\n      zoomType: 'xy',\n      renderTo: 'container',\n    },\n    title: {\n      text: 'Top 10 antiSMASH gene clusters',\n    },\n    yAxis: {\n      min: 0,\n      title: {\n        text: 'Number of matches',\n      },\n    },\n    xAxis: {\n      categories,\n    },\n    plotOptions: {\n      series: {\n        stacking: 'normal',\n      },\n      column: {\n        allowPointSelect: true,\n        cursor: 'pointer',\n        colors: TAXONOMY_COLOURS,\n      },\n    },\n    credits: {\n      enabled: false,\n    },\n    legend: {\n      enabled: true,\n    },\n    tooltip: {\n      /* eslint-disable react/no-this-in-sfc */\n      formatter() {\n        const description = categoriesDescriptions[this.key];\n        let tooltip = `${this.series.name}<br/>Count: ${this.y}`;\n        if (description) {\n          tooltip += `<br/>antiSMASH gene cluster: ${description}`;\n        }\n        return tooltip;\n      },\n      /* eslint-enable react/no-this-in-sfc */\n    },\n    series: [\n      {\n        name: `Analysis ${overviewData.id}`,\n        data: series,\n        colors: TAXONOMY_COLOURS[1],\n      },\n    ],\n  };\n  return (\n    <HighchartsReact\n      highcharts={Highcharts}\n      options={options}\n      ref={chartComponentRef}\n    />\n  );\n};\nexport default AntiSMASHBarChart;\n","import React from 'react';\nimport AntiSMASHTable from './Table';\nimport AntiSMASHBarChart from './BarChart';\n\nconst KOTab: React.FC = () => {\n  return (\n    <div className=\"vf-stack\">\n      <AntiSMASHBarChart />\n      <AntiSMASHTable />\n    </div>\n  );\n};\n\nexport default KOTab;\n","import React, { useContext, useEffect, useState } from 'react';\nimport HierarchyNode, { Node } from 'components/UI/Hierarchy';\n\nimport gpHierarchy from 'public/data/genome-properties-hierarchy.json';\nimport useMGnifyData from 'hooks/data/useMGnifyData';\nimport AnalysisContext from 'pages/Analysis/AnalysisContext';\nimport Loading from 'components/UI/Loading';\nimport FetchError from 'components/UI/FetchError';\nimport { MGnifyDatum } from 'hooks/data/useData';\nimport ExtLink from 'components/UI/ExtLink';\n\n/**\n * Annotate the nodes with the counts.\n * @param {Object} node a gp node\n * @return {int} the aggregated count for a sub-tree\n */\nconst annotate = (\n  node: Node,\n  genomePropertiesCount: Record<string, number>\n) => {\n  /* eslint-disable no-param-reassign */\n  if (node.countgen) return node.countgen;\n  node.count = genomePropertiesCount[node.id as string] || 0;\n  node.countgen = (node.countgen || 0) + (node.count as number);\n  if (node.children && node.children.length) {\n    node.countgen += node.children.reduce((mem, child) => {\n      return mem + annotate(child, genomePropertiesCount);\n    }, 0);\n    node.children = node.children.filter(({ countgen }) => countgen > 0);\n  }\n  /* eslint-enable no-param-reassign */\n  return node.countgen;\n};\n\nconst DELAY = 100;\nconst SHOULD_NOT = {\n  collapse: false,\n  expand: false,\n};\n\nconst GenomeProperties: React.FC = () => {\n  const { overviewData } = useContext(AnalysisContext);\n  const { data, loading, error } = useMGnifyData(\n    `analyses/${overviewData.id}/genome-properties`\n  );\n  const [should, setShould] = useState(SHOULD_NOT);\n  useEffect(() => {\n    if (should.expand || should.collapse) {\n      setTimeout(() => setShould(SHOULD_NOT), DELAY);\n    }\n  }, [should]);\n  if (loading) return <Loading size=\"large\" />;\n  if (error) return <FetchError error={error} />;\n  const genomePropertiesCount = {};\n\n  (data.data as MGnifyDatum[]).forEach((d) => {\n    const id = d.attributes.accession as string;\n    const { presence } = d.attributes;\n    genomePropertiesCount[id] =\n      presence === 'Yes' || presence === 'Partial' ? 1 : 0;\n  });\n  annotate(gpHierarchy, genomePropertiesCount);\n  return (\n    <div className=\"vf-stack\">\n      <div>\n        <button\n          type=\"button\"\n          className=\"vf-button vf-button--sm\"\n          onClick={() =>\n            setShould({\n              collapse: false,\n              expand: true,\n            })\n          }\n        >\n          Expand All\n        </button>\n        <button\n          type=\"button\"\n          className=\"vf-button vf-button--sm\"\n          onClick={() =>\n            setShould({\n              collapse: true,\n              expand: false,\n            })\n          }\n        >\n          Collapse All\n        </button>\n      </div>\n      <HierarchyNode\n        tree={gpHierarchy as unknown as Node}\n        triggerExpandAll={should.expand}\n        triggerCollapseAll={should.collapse}\n        getLabel={(node) => {\n          return (\n            <>\n              <ExtLink\n                href={`https://www.ebi.ac.uk/interpro/genomeproperties/genome-property/${node.id}`}\n              >\n                {node.id}\n              </ExtLink>\n              : {node.name}\n            </>\n          );\n        }}\n      />\n    </div>\n  );\n};\n\nexport default GenomeProperties;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport TabsForQueryParameter from 'components/UI/TabsForQueryParameter';\nimport ExtLink from 'components/UI/ExtLink';\nimport useQueryParamState from 'hooks/queryParamState/useQueryParamState';\nimport KeggModule from './KeggModule';\nimport AntiSMASH from './AntiSMASH';\nimport GenomeProperties from './GenomeProperties';\n\nconst PARAMETER_NAME = 'type';\nconst PARAMETER_DEFAULT = 'kegg-modules';\nconst tabs = [\n  { label: 'KEGG Module', to: 'kegg-modules' },\n  { label: 'Genome properties', to: 'genome-properties' },\n  { label: 'antiSMASH', to: 'antismash' },\n];\n\nconst PathwaysSubPage: React.FC = () => {\n  const [type] = useQueryParamState(PARAMETER_NAME, PARAMETER_DEFAULT);\n  return (\n    <div>\n      <p>\n        These are the results from the biochemical pathways and systems\n        predictions steps of our pipeline. These summarise the{' '}\n        <ExtLink href=\"https://www.genome.jp/kegg/module.html\">\n          KEGG Module\n        </ExtLink>\n        ,{' '}\n        <ExtLink href=\"https://www.ebi.ac.uk/interpro/genomeproperties/\">\n          Genome Properties\n        </ExtLink>{' '}\n        and{' '}\n        <ExtLink href=\"https://antismash.secondarymetabolites.org\">\n          antiSMASH\n        </ExtLink>{' '}\n        annotations in this assembly. The full set of results files may be found\n        under the <Link to=\"#download\">Download</Link> tab.\n      </p>\n      <TabsForQueryParameter\n        tabs={tabs}\n        queryParameter={PARAMETER_NAME}\n        defaultValue={PARAMETER_DEFAULT}\n      />\n      <div className=\"vf-tabs-content\">\n        {type === 'kegg-modules' && <KeggModule />}\n        {type === 'genome-properties' && <GenomeProperties />}\n        {type === 'antismash' && <AntiSMASH />}\n      </div>\n    </div>\n  );\n};\n\nexport default PathwaysSubPage;\n","import React, { useContext } from 'react';\n\nimport AnalysisContext from 'pages/Analysis/AnalysisContext';\nimport useData, { ResponseFormat } from 'hooks/data/useData';\nimport Loading from 'components/UI/Loading';\nimport FetchError from 'components/UI/FetchError';\n\nconst Abundance: React.FC = () => {\n  const { included } = useContext(AnalysisContext);\n  const stats = included.find(\n    (item) => item?.attributes?.['group-type'] === 'Statistics'\n  );\n  const { data, error, loading } = useData(\n    stats?.links?.self,\n    ResponseFormat.TXT\n  );\n  if (!stats) return <p>No abundance found in the data</p>;\n  return (\n    <section>\n      <p>\n        This page gives you information regarding metagenomic community\n        diversity estimation and information which allow comparisons between all\n        study runs. The following plots illustrate the taxa abundance\n        distribution.\n      </p>\n      {loading && <Loading />}\n      {!loading && error && <FetchError error={error} />}\n      {\n        // eslint-disable-next-line react/no-danger\n        data && <div dangerouslySetInnerHTML={{ __html: data as string }} />\n      }\n    </section>\n  );\n};\nexport default Abundance;\n","import React, { useMemo } from 'react';\n\nimport useMGnifyData from 'hooks/data/useMGnifyData';\nimport { MGnifyDatum, MGnifyResponseObj } from 'hooks/data/useData';\nimport useURLAccession from 'hooks/useURLAccession';\nimport Loading from 'components/UI/Loading';\nimport FetchError from 'components/UI/FetchError';\nimport Tabs from 'components/UI/Tabs';\nimport Overview from 'components/Analysis/Overview';\nimport QualityControl from 'components/Analysis/QualityControl';\nimport ContigViewer from 'components/Analysis/ContigViewer';\nimport TaxonomySubpage from 'components/Analysis/Taxonomy';\nimport FunctionalSubpage from 'components/Analysis/Functional';\nimport PathwaysSubpage from 'components/Analysis/Pathways';\nimport RouteForHash from 'components/Nav/RouteForHash';\nimport { Link } from 'react-router-dom';\nimport Downloads from 'components/Downloads';\nimport Abundance from 'components/Analysis/Abundance';\nimport AnalysisContext from './AnalysisContext';\n\nconst hasAbundance = (\n  includes: { attributes?: { 'group-type'?: string } }[]\n): boolean => {\n  return includes.some(\n    (included) => included?.attributes?.['group-type'] === 'Statistics'\n  );\n};\n\nconst isAssembly = (data: MGnifyDatum): boolean =>\n  ['assembly', 'hybrid_assembly'].includes(\n    data.attributes['experiment-type'] as string\n  );\nconst isAtleastVersion5 = (data: MGnifyDatum): boolean =>\n  Number(data.attributes['pipeline-version']) >= 5;\nconst isNotAmplicon = (data: MGnifyDatum): boolean =>\n  data.attributes['experiment-type'] !== 'amplicon';\n\nconst AnalysisPage: React.FC = () => {\n  const accession = useURLAccession();\n  const { data, loading, error } = useMGnifyData(`analyses/${accession}`, {\n    include: 'downloads',\n  });\n  const value = useMemo(\n    () => ({ overviewData: data?.data, included: data?.included }),\n    [data]\n  );\n  if (loading) return <Loading size=\"large\" />;\n  if (error) return <FetchError error={error} />;\n  if (!data) return <Loading />;\n  const { data: analysisData, included } = data as MGnifyResponseObj;\n\n  const tabs = [\n    { label: 'Overview', to: '#overview' },\n    { label: 'Quality control', to: '#qc' },\n    { label: 'Taxonomic analysis', to: '#taxonomic' },\n    isNotAmplicon(analysisData)\n      ? { label: 'Functional analysis', to: '#functional' }\n      : null,\n    included && hasAbundance(included)\n      ? { label: 'Abundance and comparison', to: '#abundance' }\n      : null,\n    isAssembly(analysisData) && isAtleastVersion5(analysisData)\n      ? { label: 'Pathways/Systems', to: '#path-systems' }\n      : null,\n    isAssembly(analysisData) && isAtleastVersion5(analysisData)\n      ? { label: 'Contig Viewer', to: '#contigs-viewer' }\n      : null,\n    { label: 'Download', to: '#download' },\n  ].filter(Boolean);\n  const linkToOtherAnalyses = isAssembly(analysisData)\n    ? `/assemblies/${analysisData?.relationships?.assembly?.data?.id}`\n    : `/runs/${analysisData?.relationships?.run?.data?.id}`;\n  return (\n    <section className=\"vf-content\">\n      <h2>Analysis {accession}</h2>\n      {linkToOtherAnalyses && (\n        <h4>\n          <Link to={linkToOtherAnalyses}>\n            <i className=\"icon icon-common icon-arrow-circle-left\" /> Other\n            Analyses\n          </Link>\n        </h4>\n      )}\n      <Tabs tabs={tabs} />\n      <section className=\"vf-grid\">\n        <div className=\"vf-stack vf-stack--200\">\n          <AnalysisContext.Provider value={value}>\n            <RouteForHash hash=\"#overview\" isDefault>\n              <Overview />\n            </RouteForHash>\n            <RouteForHash hash=\"#qc\">\n              <QualityControl />\n            </RouteForHash>\n            <RouteForHash hash=\"#contigs-viewer\">\n              <ContigViewer />\n            </RouteForHash>\n            <RouteForHash hash=\"#taxonomic\">\n              <TaxonomySubpage accession={accession} />\n            </RouteForHash>\n            <RouteForHash hash=\"#functional\">\n              <FunctionalSubpage />\n            </RouteForHash>\n            <RouteForHash hash=\"#abundance\">\n              <Abundance />\n            </RouteForHash>\n            <RouteForHash hash=\"#path-systems\">\n              <PathwaysSubpage />\n            </RouteForHash>\n            <RouteForHash hash=\"#download\">\n              <Downloads endpoint=\"analyses\" accession={accession} />\n            </RouteForHash>\n          </AnalysisContext.Provider>\n        </div>\n      </section>\n    </section>\n  );\n};\n\nexport default AnalysisPage;\n","/**\n * Remove the s__ prefixes from a lineage.\n * @param {string} lineage string with the lineage `d__Bacteria;p__Proteobacteria;c__Gammapr...`\n * @param {string} replace replace string\n * @return {string}\n */\nexport function cleanTaxLineage(lineage: string, replace = ''): string {\n  let cleaned = lineage\n    .replace(/;/g, '')\n    .replace(/[d|p|c|o|f|g|s]__/g, replace);\n  if (cleaned.startsWith(replace)) {\n    cleaned = cleaned.substring(replace.length).trimStart();\n  }\n  return cleaned;\n}\n\n/**\n * Retrieve a non-blank taxonomic identity from the species level or upwards\n * @param {string} fullLineage\n * @param {bool} removePrefix true if this should remove the 'd|p|c|o|f|g|s__' prefix\n * @return {string}\n */\nexport function getSimpleTaxLineage(\n  fullLineage: string,\n  removePrefix: boolean\n): string {\n  const l = fullLineage.split(';');\n  let head = l.pop();\n  // Remove all until species\n  while (head.indexOf('s__') === -1) {\n    head = l.pop();\n  }\n  // Find first non-null\n  while (head.length <= 3) {\n    head = l.pop();\n  }\n  if (removePrefix && head) {\n    return cleanTaxLineage(head);\n  }\n  return head;\n}\n\nexport const TAXONOMY_COLOURS = [\n  '#ABD3DB',\n  '#F2D9D0',\n  '#F2A477',\n  '#5F9595',\n  '#D9C4B8',\n  '#EEEEAB',\n  '#8990B3',\n  '#DEFFE3',\n  '#A0B392',\n  '#DEE3FF',\n  '#F2F2F2',\n];\n"],"names":["endpoint","accession","data","loading","error","page_size","columns","useMemo","Header","accessor","Cell","cell","value","href","className","style","whiteSpace","download","size","categories","forEach","attributes","push","Object","entries","map","category","downloads","key","cols","Title","showPagination","antiSMASHLabels","biosynthetic","regulatory","transport","resistance","MultipleField","url","decodeValue","parts","split","part","text","decodeURIComponent","getAnnotationLoc","location","startEnd","start","parseInt","replaceAll","end","getProteinOrSequenceLength","type","Number","isNaN","Math","ceil","hasMetaProteomics","name","gene","product","properties","rawData","withMetaProteomics","reduce","memo","el","toLowerCase","String","functionalData","title","Value","ecnumber","pfam","kegg","eggnog","cog","go","interpro","as_type","viphog","viphog_taxonomy","as_notes","as_gene_clusters","isProtein","otherData","inference","metaproteomicData","pride_id","unique_peptide_to_protein_mapping","unambiguous_sequences","ambiguous_peptide_to_protein_mapping","ambiguous_sequences","semiquantitative_expression_spectrum_count","id","formatData","property","filter","d","length","pName","Boolean","COG_MAP","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","T","U","Y","Z","S","R","ANTISMASH_MAP_GK","resis","other","COLOUR_PRESENCE","COLOUR_ABSENCE","maybeGetAttributeValue","feature","attrPossibleNames","getAttributeValue","attr","featureAttrVal","annotationTrackCustomisations","trackColorBy","nameField","color","getCOGColour","as","AnnotationTrackColorPicker","trackView","trackColorBys","onChange","htmlFor","track","config","label","theme","borderRadius","border","placeholder","inputId","options","hash","isDefault","children","navigate","useEffect","replace","slice","width","height","xmlns","viewBox","preserveAspectRatio","fill","fillRule","accept","buttonClassName","fileInput","useRef","hidden","ref","onClick","current","click","HierarchyNode","tree","depth","shouldExpand","collapsing","getLabel","node","triggerExpandAll","triggerCollapseAll","displayChildren","setDisplayChildren","useState","triggerExpandAllChildren","setTriggerExpandAllChildren","show","setShow","hideChildren","setHideChildren","setTimeout","marginLeft","countgen","child","list","dataCy","gridTemplateColumns","rowGap","textAlign","areEqual","s1","s2","max","min","steps","precision","logarithmic","isEnabled","selection","s","currentSelection","setCurrentSelection","debounced","useCallback","step","log10","scaleMin","scaleMax","disabled","evt","scaleLoc","target","newVal","v","isOn","setValue","checked","tabs","preservedQueryParameters","queryParamString","preserved","URLSearchParams","existing","search","anyPreserved","queryParam","has","append","get","toString","Label","to","pathname","startsWith","queryParameter","defaultValue","tabQp","setTabQp","setPage","maxLength","withTooltip","isTruncated","truncated","substring","content","interactive","trim","endsWith","overviewData","included","HybridAnalysisDetails","assemblyId","loadingRuns","runs","useMGnifyData","instruments","run","join","KeyValueList","useContext","isHybrid","relationships","assembly","open","study","sample","experimentType","includes","summaryData","analysisData","chartComponentRef","isAssembly","unit","capUnit","remaining","filtered","subsampled","analysisSummary","sequence_count","chart","yAxis","xAxis","plotOptions","series","stacking","credits","enabled","highcharts","containerProps","useURLAccession","Loading","FetchError","histData","x","y","lengthMax","fontFamily","zoomType","fontSize","fontWeight","floor","plotBands","from","average_length","standard_deviation_length","toFixed","legend","navigation","buttonOptions","symbolX","symbolY","dataHist","pos","colors","headers","line","i","tickmarkPlacement","area","lineColor","lineWidth","marker","tooltip","shared","distData","average_gc_content","standard_deviation_gc_content","borderColor","marginTop","tickColor","length_max","grouping","shadow","borderWidth","length_min","pointPadding","pointFormatter","this","exporting","threshold","val","fromEntries","units","contigsQueryData","pageCursorFromPaginationURL","linkURL","paginationLinks","handleCursor","canPreviousPage","prev","canNextPage","next","ContigFeatureFlag","annotationType","present","letter","toUpperCase","Tooltip","setSelectedContig","useQueryParamState","setContigsPageCursor","contigsColumns","contig","ArrowForLink","coverage","flags","EMGTable","meta","pagination","count","initialPage","namespace","isStale","showTextFilter","links","cursor","GFFDb","constructor","super","version","stores","gffs","db","sortable","getTableProps","getTableBodyProps","headerGroups","rows","prepareRow","useTable","useSortBy","tableRef","undefined","headerGroup","getHeaderGroupProps","column","canSort","getHeaderProps","getSortByToggleProps","render","isSorted","isSortedDesc","row","getRowProps","cells","getCellProps","getGFFHeaderValue","encodedGff","varName","atob","TypeError","igvBrowser","modalIsOpen","setIsOpen","uploadError","setUploadError","gffComparisonId","setGffComparisonId","useLiveQuery","toArray","then","gff","isMetaproteomics","encodedGFF","indexOf","findTracks","removeTrackByName","loadTrack","format","filterTypes","removable","displayMode","original","added","toLocaleString","addGff","gffFile","encoded","file","Promise","resolve","reader","FileReader","onload","result","btoa","readAsText","encodeGFF","add","Date","now","EMGModal","isOpen","onRequestClose","contentLabel","action","method","FileUploaderButton","e","files","MAX","contigLength","setContigLength","setEnabled","range","setRange","newRange","Switch","Slider","TextInputDebounced","TYPES","setAnnotationType","selected","setSelected","handleSelection","event","isChecked","newSelected","sort","aT","Contig","UserContext","featureFlags","contigIgvGffUploader","contigId","fastaURL","api","useData","antiSMASH","displayName","setIgvBrowser","setTrackColorBys","igvContainer","showChromosomeWidget","showTrackLabelButton","showTrackLabels","showCenterGuide","reference","indexed","tracks","showLegend","legendParent","browser","on","trackData","trackViews","colorBarMax","parseFloat","tracksToRemove","tracksToAdd","colorBy","newTrackConfig","cbMax","trackId","round","option","contigsPageCursorParam","selectedContigParam","setSelectedContigParam","contigLengthParam","cogCategorySearchParam","keggOrthologSearchParam","goTermSearchParam","pfamSearchParam","interproSearchParam","antismashSearchParam","annotationTypeParam","contigsSearchParam","lengthRange","gt","lt","antismash","context","selectedContig","selectedContigId","find","c","LoadingOverlay","backgroundColor","margin","ContigLength","ContigText","ContigAnnotationType","sortFunction","order","a","b","lineage","clusteredData","onMouseEnterRow","onMouseLeaveRow","display","verticalAlign","initialPageSize","sumData","sum","duplicateLastColor","colours","newColours","selectedValue","showTotal","index","setState","refresh","groupedData","n","top10","others","lineageA","groupAfterN","plotBackgroundColor","plotBorderWidth","plotShadow","pointFormat","pie","allowPointSelect","dataLabels","showInLegend","colorByPoint","subtitle","align","layout","labelFormatter","dataSummary","total","labels","overflow","formatter","perc","maxColorIndex","transformData","clusterData","l","percentage","chartType","selectedRow","setSelectedRow","clusteredDataTop","includesDomainCharts","selectedCategory","findIndex","values","PARAMETER_NAME","PARAMETER_DEFAULT","datum","enableSSU","taxonomy_ssu_count","taxonomy_count","enableLSU","taxonomy_lsu_count","enableITSoneDB","taxonomy_itsonedb_count","enableITSUnite","taxonomy_itsunite_count","taxResults","setTaxResults","handleTaxChange","TabsForQueryParameter","selectedName","onTotalChange","noop","onMatchesChange","matches","processed","limit","Infinity","page","fetchedAllOrLimit","setFetchedAllOrLimit","setMatches","setProcessed","setTotal","newMatches","description","agg","aggregatedMatches","totalInResponse","totalCount","setTotalCount","newTotal","m","getSeriesCategory","seqData","prefix","colorMap","setColorMap","Map","setSelectedName","pageSize","ordering","disableSortBy","ExtLink","containerId","renderTo","bar","pieSeries","dataBundles","setDataBundles","newBundle","biological_process","molecular_function","cellular_component","term","downloadURL","categoriesDescriptions","longReadExperiment","InfoBanner","Pfam","KO","completeness","annotate","genomePropertiesCount","mem","SHOULD_NOT","collapse","expand","should","setShould","presence","Hierarchy","KeggModule","AntiSMASH","stats","item","self","dangerouslySetInnerHTML","__html","isAtleastVersion5","isNotAmplicon","include","some","linkToOtherAnalyses","Tabs","RouteForHash","Overview","ContigViewer","Functional","Pathways","Downloads","cleanTaxLineage","cleaned","trimStart","getSimpleTaxLineage","fullLineage","removePrefix","head","pop","TAXONOMY_COLOURS"],"sourceRoot":""}