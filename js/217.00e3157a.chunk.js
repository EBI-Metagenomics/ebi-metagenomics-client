"use strict";(self.webpackChunkmgportalv2=self.webpackChunkmgportalv2||[]).push([[217],{4217:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var n=a(7294),o=a(8840),s=a(8393),r=a.n(s),c=a(5708),i=a.n(c),l=a(402),m=a(1699),u=a(6313),g=a(8110),p=a(964),d=a(6581),b=a(5457);r()(o);const h=({includePangenomes:e=!0})=>{const t=(0,n.useRef)(null),a=(0,p.Z)(),{columns:s,options:r}=(0,d.Z)(),{data:c,loading:h,error:f}=(0,g.Z)(`genomes/${a}/cogs`,{page_size:100});if(h)return n.createElement(l.Z,{size:"large"});if(f)return n.createElement(m.Z,{error:f});if(!c)return n.createElement(l.Z,null);let C=0;const k=c.data.map((e=>String(e.attributes.name))),y=c.data.reduce(((e,t)=>(e[t.attributes.name]=t.attributes.description,e)),{}),G=c.data.map((e=>{const t=Number(e.attributes["genome-count"]);return C+=t,t})),Z=c.data.map((e=>e.attributes["pangenome-count"]));return r.title={text:"Top 10 COG categories"},r.subtitle={text:`Total: ${C} Genome COG matches - Drag to zoom in/out`},r.xAxis={categories:k},r.tooltip={formatter(){const e=y[this.key];let t=`${this.series.name}<br/>Count: ${this.y}`;return e&&(t+=`<br />COG: ${e}`),t}},r.series=[{name:"Genome",type:"column",data:G.slice(0,10),colors:b.DC,stack:"genome"}],e&&r.series.push({name:"Pan-genome",type:"column",data:Z.slice(0,10),colors:b.DC,stack:"pangenome"}),n.createElement("div",{className:"vf-stack vf-stack--200","data-cy":"genome-cog-analysis"},n.createElement(i(),{highcharts:o,options:r,ref:t}),n.createElement(u.Z,{cols:s,data:c,Title:`All ${c.meta.pagination.count} COG categories`,loading:h,showPagination:!1}))}},6581:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(7294),o=a(5457);const s=()=>({columns:(0,n.useMemo)((()=>[{Header:"COG ID",accessor:"attributes.name"},{Header:"Description",accessor:"attributes.description"},{Header:"Genome Count",accessor:"attributes.genome-count"},{Header:"Pan-genome count",accessor:"attributes.pangenome-count"}]),[]),options:{chart:{type:"column",height:400,zoomType:"xy",renderTo:"container"},yAxis:{min:0,title:{text:"Number of matches"}},plotOptions:{series:{stacking:"normal"},column:{allowPointSelect:!0,cursor:"pointer",colors:o.DC}},credits:{enabled:!1},legend:{enabled:!0}}})}}]);
//# sourceMappingURL=217.00e3157a.chunk.js.map