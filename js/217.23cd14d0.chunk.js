"use strict";(self.webpackChunkmgportalv2=self.webpackChunkmgportalv2||[]).push([[217],{4217:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var n=a(7294),s=a(8840),r=a(5708),o=a.n(r),c=a(402),l=a(1699),i=a(6313),m=a(8110),g=a(964),u=a(6581),p=a(5457);const d=({includePangenomes:e=!0})=>{const t=(0,n.useRef)(null),a=(0,g.Z)(),{columns:r,options:d}=(0,u.Z)(),{data:f,loading:b,error:v}=(0,m.Z)(`genomes/${a}/cogs`,{page_size:100});if(b)return n.createElement(c.Z,{size:"large"});if(v)return n.createElement(l.Z,{error:v});if(!f)return n.createElement(c.Z,null);let _=0;const E=f.data.map((e=>String(e.attributes.name))),h=f.data.reduce(((e,t)=>(e[t.attributes.name]=t.attributes.description,e)),{}),N=f.data.map((e=>{const t=Number(e.attributes["genome-count"]);return _+=t,t})),P=f.data.map((e=>e.attributes["pangenome-count"]));return d.title={text:"Top 10 COG categories"},d.subtitle={text:`Total: ${_} Genome COG matches - Drag to zoom in/out`},d.xAxis={categories:E},d.tooltip={formatter(){const e=h[this.key];let t=`${this.series.name}<br/>Count: ${this.y}`;return e&&(t+=`<br />COG: ${e}`),t}},d.series=[{name:"Genome",type:"column",data:N.slice(0,10),colors:p.DC,stack:"genome"}],e&&d.series.push({name:"Pan-genome",type:"column",data:P.slice(0,10),colors:p.DC,stack:"pangenome"}),n.createElement("div",{className:"vf-stack vf-stack--200"},n.createElement(o(),{highcharts:s,options:d,ref:t}),n.createElement(i.Z,{cols:r,data:f,title:`All ${f.meta.pagination.count} COG categories`,loading:b,showPagination:!1}))}},6313:(e,t,a)=>{a.d(t,{Z:()=>l});var n=a(7294),s=a(9521),r=a(402),o=a(2119);const c=({currentPageIndex:e,pageIndex:t,gotoPage:a})=>e===t?n.createElement("li",{className:"vf-pagination__item vf-pagination__item--is-active"},n.createElement("span",{className:"vf-pagination__label","aria-current":"page"},n.createElement("span",{className:"vf-u-sr-only"},"Page "),e+1)):n.createElement("li",{className:"vf-pagination__item"},n.createElement("button",{type:"button",onClick:()=>a(t),className:"vf-button vf-button--link vf-pagination__link"},n.createElement("span",{className:"vf-u-sr-only"}," page"),t+1)),l=({cols:e,data:t,title:a,initialPage:l=0,initialPageSize:i=25,className:m="",namespace:g="",showPagination:u=!0,sortable:p=!1,loading:d=!1,isStale:f=!1})=>{const[b,v]=(0,o.B)({[`${g}page`]:1,[`${g}order`]:"",[`${g}page_size`]:i},{[`${g}page`]:Number,[`${g}page_size`]:Number}),{getTableProps:_,getTableBodyProps:E,headerGroups:h,rows:N,prepareRow:P,canPreviousPage:y,canNextPage:S,pageCount:k,gotoPage:O,setPageSize:$,nextPage:x,previousPage:C,state:{pageIndex:w,pageSize:j,sortBy:z}}=(0,s.useTable)({columns:e,data:t.data,initialState:{pageIndex:l,pageSize:b[`${g}page_size`]},pageCount:t.meta.pagination.pages,manualPagination:!0,manualSortBy:!0},s.useSortBy,s.usePagination),I=(0,n.useRef)(null),[T,G]=(0,n.useState)(!1);(0,n.useEffect)((()=>{u&&b[`${g}page`]!==w+1&&(v(Object.assign(Object.assign({},b),{[`${g}page`]:w+1})),I.current&&T&&(I.current.scrollIntoView(),G(!1)))}),[u,v,w]),(0,n.useEffect)((()=>{u&&b[`${g}page_size`]!==j&&(v(Object.assign(Object.assign({},b),{[`${g}page_size`]:j})),I.current&&T&&(I.current.scrollIntoView(),G(!1)))}),[u,v,j]),(0,n.useEffect)((()=>{if(p){const e=function(e){if(!e.length)return"";const t=e[0];return`${t.desc?"-":""}${t.id.replace(/attributes./g,"").replace(/-/g,"_")}`}(z);if(e===b[`${g}order`])return;v(Object.assign(Object.assign({},b),{[`${g}order`]:e,[`${g}page`]:1})),I.current&&T&&(I.current.scrollIntoView(),G(!1))}}),[u,v,z,p]);const Z=(0,n.useMemo)((()=>function(e,t){const a=t>1?[0,1]:[0],n=t>2?[Math.max(2,e-2)]:[];for(let e=n[0]+1;e<t-2&&n.length<5;e+=1)n.push(e);let s=[];return t>7?s=[t-2,t-1]:t>6&&(s=[t-1]),{startingPages:a,endingPages:s,adjacentPages:n,hasJumpFromStart:!!n.length&&n[0]>a[a.length-1]+1,hasJumpToEnd:!!s.length&&!!n.length&&s[0]>n[n.length-1]+1}}(w,k)),[w,k]),B=e=>(G(!0),O(e)),H=e=>(G(!0),$(+e.target.value));return d&&!f?n.createElement(r.Z,{size:"small"}):n.createElement("section",null,n.createElement("div",{className:"mg-table-overlay-container"},n.createElement("div",{className:d&&f?"mg-table-overlay":void 0}),n.createElement("table",Object.assign({},_,{className:`vf-table--striped ${m}`,ref:I}),a&&n.createElement("caption",{className:"vf-table__caption"},"string"==typeof a?a:n.createElement(a,null)),n.createElement("thead",{className:"vf-table__header"},h.map((e=>n.createElement("tr",Object.assign({},e.getHeaderGroupProps(),{className:"vf-table__row"}),e.headers.map((e=>n.createElement("th",Object.assign({},p&&e.canSort?e.getHeaderProps(e.getSortByToggleProps()):{key:e.id},{className:"vf-table__heading"}),e.render("Header"),p&&e.canSort&&n.createElement(n.Fragment,null,"Â ",n.createElement("span",null,e.isSorted?e.isSortedDesc?n.createElement("i",{className:"icon icon-common icon-sort-down"}):n.createElement("i",{className:"icon icon-common icon-sort-up"}):n.createElement("i",{className:"icon icon-common icon-sort"})))))))))),n.createElement("tbody",Object.assign({},E(),{className:"vf-table__body"}),N.map((e=>(P(e),n.createElement("tr",Object.assign({},e.getRowProps(),{className:"vf-table__row"}),e.cells.map((e=>n.createElement("td",Object.assign({},e.getCellProps(),{className:"vf-table__cell"}),e.render("Cell"))))))))))),u&&n.createElement("section",{className:"mg-table-footer"},n.createElement("label",{className:"vf-form__label"},"Page Size:",n.createElement("select",{className:"vf-form__select",value:b[`${g}page_size`],onBlur:H,onChange:H},[10,25,50].map((e=>n.createElement("option",{key:e,value:e},"Show ",e))))),n.createElement("nav",{className:"vf-pagination","aria-label":"Pagination"},n.createElement("ul",{className:"vf-pagination__list"},n.createElement("li",{className:"vf-pagination__item vf-pagination__item--previous-page"},n.createElement("button",{disabled:!y,type:"button",onClick:C,className:"vf-button vf-button--link vf-pagination__link"},"Previous",n.createElement("span",{className:"vf-u-sr-only"}," page"))),Z.startingPages.map((e=>n.createElement(c,{key:e,currentPageIndex:w,pageIndex:e,gotoPage:B}))),Z.hasJumpFromStart&&n.createElement("li",{className:"vf-pagination__item"},n.createElement("span",{className:"vf-pagination__label"},"...")),Z.adjacentPages.map((e=>n.createElement(c,{key:e,currentPageIndex:w,pageIndex:e,gotoPage:B}))),Z.hasJumpToEnd&&n.createElement("li",{className:"vf-pagination__item"},n.createElement("span",{className:"vf-pagination__label"},"...")),Z.endingPages.map((e=>n.createElement(c,{key:e,currentPageIndex:w,pageIndex:e,gotoPage:B}))),n.createElement("li",{className:"vf-pagination__item vf-pagination__item--next-page"},n.createElement("button",{disabled:!S,type:"button",onClick:x,className:"vf-button vf-button--link vf-pagination__link"},"Next",n.createElement("span",{className:"vf-u-sr-only"}," page")))))))}},6581:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(7294),s=a(5457);const r=()=>({columns:(0,n.useMemo)((()=>[{Header:"COG ID",accessor:"attributes.name"},{Header:"Description",accessor:"attributes.description"},{Header:"Genome Count",accessor:"attributes.genome-count"},{Header:"Pan-genome count",accessor:"attributes.pangenome-count"}]),[]),options:{chart:{type:"column",height:400,zoomType:"xy",renderTo:"container"},yAxis:{min:0,title:{text:"Number of matches"}},plotOptions:{series:{stacking:"normal"},column:{allowPointSelect:!0,cursor:"pointer",colors:s.DC}},credits:{enabled:!1},legend:{enabled:!0}}})},2119:(e,t,a)=>{a.d(t,{B:()=>o});var n=a(7294),s=a(6974);const r=(e,t,a)=>{const n={},s=new URLSearchParams(t);return Object.entries(e).forEach((([e,t])=>{const r=a[e]||String;n[e]=r(s.get(e)||t)})),n},o=(e,t={})=>{const a=(0,s.TH)(),o=(0,s.s0)(),c=(0,n.useMemo)((()=>r(e,a.search,t)),[e,a.search,t]),[l,i]=(0,n.useState)(c);return(0,n.useEffect)((()=>{const n=r(e,a.search,t);JSON.stringify(n)!==JSON.stringify(l)&&i(n)}),[a.search,l,e,t]),[l,t=>{if(JSON.stringify(t)===JSON.stringify(l))return;const n=new URLSearchParams(a.search);let s=!1;Object.entries(e).forEach((([e,a])=>{const r=e in t?t[e]:a;t[e]!==l[e]&&(n.set(e,String(r)),r===a&&n.delete(e),s=!0)})),s&&(a.search=n.toString(),o(a))}]}}}]);
//# sourceMappingURL=217.23cd14d0.chunk.js.map