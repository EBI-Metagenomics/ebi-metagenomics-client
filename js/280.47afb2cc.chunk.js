"use strict";(self.webpackChunkmgportalv2=self.webpackChunkmgportalv2||[]).push([[280],{8696:(e,a,t)=>{t.d(a,{Z:()=>m});var n=t(7294),r=t(9521),s=t(402),l=t(2119);const o=({currentPageIndex:e,pageIndex:a,gotoPage:t})=>e===a?n.createElement("li",{className:"vf-pagination__item vf-pagination__item--is-active"},n.createElement("span",{className:"vf-pagination__label","aria-current":"page"},n.createElement("span",{className:"vf-u-sr-only"},"Page "),e+1)):n.createElement("li",{className:"vf-pagination__item"},n.createElement("button",{type:"button",onClick:()=>t(a),className:"vf-button vf-button--link vf-pagination__link"},n.createElement("span",{className:"vf-u-sr-only"}," page"),a+1));var i=t(9111);const c=({namespace:e})=>{const[a,t]=(0,l.B)({[`${e}search`]:""}),[r,s]=(0,n.useState)(a[`${e}search`]||""),o=(0,n.useCallback)((0,i.Z)((n=>{t(Object.assign(Object.assign({},a),{[`${e}search`]:n}))}),300),[]);return n.createElement("div",{className:"vf-form__item mg-textsearch"},n.createElement("label",{className:"vf-form__label vf-search__label",htmlFor:"searchitem"},"Filter"),n.createElement("input",{type:"search",placeholder:"Enter your search terms",id:"searchitem",className:"vf-form__input",onChange:e=>{const a=e.target.value;s(a),o(a)},value:r}))},m=({cols:e,data:a,title:t,initialPage:i=0,initialPageSize:m=25,className:u="",namespace:d="",showPagination:g=!0,showTextFilter:p=!1,sortable:v=!1,loading:b=!1,isStale:f=!1,downloadURL:h=null,onMouseEnterRow:_=(()=>null),onMouseLeaveRow:E=(()=>null)})=>{var N,y,w,S;const[P,$]=(0,l.B)({[`${d}page`]:1,[`${d}order`]:"",[`${d}page_size`]:m,[`${d}search`]:m},{[`${d}page`]:Number,[`${d}page_size`]:Number}),{getTableProps:x,getTableBodyProps:k,headerGroups:Z,rows:j,prepareRow:z,canPreviousPage:C,canNextPage:O,pageCount:B,gotoPage:H,setPageSize:I,nextPage:q,previousPage:L,state:{pageIndex:T,pageSize:F,sortBy:R}}=(0,r.useTable)({columns:e,data:(null===(N=a)||void 0===N?void 0:N.data)||a,initialState:{pageIndex:i,pageSize:P[`${d}page_size`]},pageCount:(null===(S=null===(w=null===(y=a)||void 0===y?void 0:y.meta)||void 0===w?void 0:w.pagination)||void 0===S?void 0:S.pages)||1,manualPagination:!0,manualSortBy:!0},r.useSortBy,r.usePagination),J=(0,n.useRef)(null),[U,D]=(0,n.useState)(!1);(0,n.useEffect)((()=>{g&&P[`${d}page`]!==T+1&&($(Object.assign(Object.assign({},P),{[`${d}page`]:T+1})),J.current&&U&&(J.current.scrollIntoView(),D(!1)))}),[g,$,T]),(0,n.useEffect)((()=>{g&&P[`${d}page_size`]!==F&&($(Object.assign(Object.assign({},P),{[`${d}page_size`]:F})),J.current&&U&&(J.current.scrollIntoView(),D(!1)))}),[g,$,F]),(0,n.useEffect)((()=>{if(v){const e=function(e){if(!e.length)return"";const a=e[0];return`${a.desc?"-":""}${a.id.replace(/attributes./g,"").replace(/-/g,"_")}`}(R);if(e===P[`${d}order`])return;$(Object.assign(Object.assign({},P),{[`${d}order`]:e,[`${d}page`]:1})),J.current&&U&&(J.current.scrollIntoView(),D(!1))}}),[g,$,R,v]);const M=(0,n.useMemo)((()=>function(e,a){const t=a>1?[0,1]:[0],n=a>2?[Math.max(2,e-2)]:[];for(let e=n[0]+1;e<a-2&&n.length<5;e+=1)n.push(e);let r=[];return a>7?r=[a-2,a-1]:a>6&&(r=[a-1]),{startingPages:t,endingPages:r,adjacentPages:n,hasJumpFromStart:!!n.length&&n[0]>t[t.length-1]+1,hasJumpToEnd:!!r.length&&!!n.length&&r[0]>n[n.length-1]+1}}(T,B)),[T,B]),G=e=>(D(!0),H(e)),V=e=>(D(!0),I(+e.target.value));return b&&!f?n.createElement(s.Z,{size:"small"}):n.createElement("section",null,n.createElement("div",{className:"mg-table-overlay-container"},n.createElement("div",{className:b&&f?"mg-table-overlay":void 0}),n.createElement("table",Object.assign({},x,{className:`vf-table--striped mg-table ${u}`,ref:J}),(t||p||h)&&n.createElement("caption",{className:"vf-table__caption mg-table-caption"},n.createElement("div",null,n.createElement("div",null,p&&n.createElement(c,{namespace:d}),h&&n.createElement(n.Fragment,null," ",n.createElement("a",{href:h,className:"vf-button vf-button--secondary vf-button--sm",style:{whiteSpace:"nowrap"},download:!0},n.createElement("span",{className:"icon icon-common icon-download"})," ","Download"))),t&&("string"==typeof t?t:n.createElement(t,null)))),n.createElement("thead",{className:"vf-table__header"},Z.map((e=>n.createElement("tr",Object.assign({},e.getHeaderGroupProps(),{className:"vf-table__row"}),e.headers.map((e=>n.createElement("th",Object.assign({},v&&e.canSort?e.getHeaderProps(e.getSortByToggleProps()):{key:e.id},{className:"vf-table__heading"}),e.render("Header"),v&&e.canSort&&n.createElement(n.Fragment,null,"Â ",n.createElement("span",null,e.isSorted?e.isSortedDesc?n.createElement("i",{className:"icon icon-common icon-sort-down"}):n.createElement("i",{className:"icon icon-common icon-sort-up"}):n.createElement("i",{className:"icon icon-common icon-sort"})))))))))),n.createElement("tbody",Object.assign({},k(),{className:"vf-table__body"}),j.map((e=>(z(e),n.createElement("tr",Object.assign({},e.getRowProps(),{className:"vf-table__row",onMouseEnter:()=>_(e),onMouseLeave:()=>E(e)}),e.cells.map((e=>{var a,t;return n.createElement("td",Object.assign({},e.getCellProps(),{colSpan:"function"==typeof(null===(a=e.column)||void 0===a?void 0:a.colspan)?e.column.colspan(e):null===(t=e.column)||void 0===t?void 0:t.colspan,className:"vf-table__cell"}),e.render("Cell"))}))))))))),g&&n.createElement("section",{className:"mg-table-footer"},n.createElement("label",{className:"vf-form__label"},"Page Size:",n.createElement("select",{className:"vf-form__select",value:P[`${d}page_size`],onBlur:V,onChange:V},[10,25,50].map((e=>n.createElement("option",{key:e,value:e},"Show ",e))))),n.createElement("nav",{className:"vf-pagination","aria-label":"Pagination"},n.createElement("ul",{className:"vf-pagination__list"},n.createElement("li",{className:"vf-pagination__item vf-pagination__item--previous-page"},n.createElement("button",{disabled:!C,type:"button",onClick:L,className:"vf-button vf-button--link vf-pagination__link"},"Previous",n.createElement("span",{className:"vf-u-sr-only"}," page"))),M.startingPages.map((e=>n.createElement(o,{key:e,currentPageIndex:T,pageIndex:e,gotoPage:G}))),M.hasJumpFromStart&&n.createElement("li",{className:"vf-pagination__item"},n.createElement("span",{className:"vf-pagination__label"},"...")),M.adjacentPages.map((e=>n.createElement(o,{key:e,currentPageIndex:T,pageIndex:e,gotoPage:G}))),M.hasJumpToEnd&&n.createElement("li",{className:"vf-pagination__item"},n.createElement("span",{className:"vf-pagination__label"},"...")),M.endingPages.map((e=>n.createElement(o,{key:e,currentPageIndex:T,pageIndex:e,gotoPage:G}))),n.createElement("li",{className:"vf-pagination__item vf-pagination__item--next-page"},n.createElement("button",{disabled:!O,type:"button",onClick:q,className:"vf-button vf-button--link vf-pagination__link"},"Next",n.createElement("span",{className:"vf-u-sr-only"}," page")))))))}},1699:(e,a,t)=>{t.d(a,{Z:()=>l});var n=t(7294),r=t(7838);const s=()=>{window.location.reload()},l=({error:e})=>e&&e.type!==r.ZB.NullURL?n.createElement("div",{className:"vf-box vf-box-theme--primary vf-box--easy",style:{backgroundColor:"lemonchiffon"}},n.createElement("h3",{className:"vf-box__heading"},n.createElement("span",{className:"icon icon-common icon-exclamation-triangle"})," Error Fetching Data"),n.createElement("p",{className:"vf-box__text"},(null==e?void 0:e.type)===r.ZB.FetchError&&`There were problems with the request. [${e.error}]`,(null==e?void 0:e.type)===r.ZB.NotOK&&`The response from the server was not OK [Status: ${e.status}].`,(null==e?void 0:e.type)===r.ZB.JSONError&&`The recovered resource didn't follow the expected format [${e.error}].`),n.createElement("div",{className:"mg-right"},n.createElement("button",{type:"button",className:"vf-button vf-button--tertiary vf-button--sm ",onClick:s},"Refresh"))):null},1055:(e,a,t)=>{t.d(a,{Z:()=>r});var n=t(7294);const r=({text:e,maxLength:a=250})=>n.createElement(n.Fragment,null,e.substring(0,a),e.length>=a&&"...")},2119:(e,a,t)=>{t.d(a,{B:()=>l});var n=t(7294),r=t(6974);const s=(e,a,t)=>{const n={},r=new URLSearchParams(a);return Object.entries(e).forEach((([e,a])=>{const s=t[e]||String;n[e]=s(r.get(e)||a)})),n},l=(e,a={})=>{const t=(0,r.TH)(),l=(0,r.s0)(),o=(0,n.useMemo)((()=>s(e,t.search,a)),[e,t.search,a]),[i,c]=(0,n.useState)(o);return(0,n.useEffect)((()=>{const n=s(e,t.search,a);JSON.stringify(n)!==JSON.stringify(i)&&c(n)}),[t.search,i,e,a]),[i,a=>{if(JSON.stringify(a)===JSON.stringify(i))return;const n=new URLSearchParams(t.search);let r=!1;Object.entries(e).forEach((([e,t])=>{const s=e in a?a[e]:t;a[e]!==i[e]&&(n.set(e,String(s)),s===t&&n.delete(e),r=!0)})),r&&(t.search=n.toString(),l(t))}]}},964:(e,a,t)=>{t.d(a,{Z:()=>r});var n=t(6974);const r=()=>{const e=(0,n.TH)();let{pathname:a}=e;a.trim().endsWith("/")&&(a=a.trim().slice(0,-1));const t=a.split("/");return null==t?void 0:t[t.length-1]}},7280:(e,a,t)=>{t.r(a),t.d(a,{default:()=>v});var n=t(7294),r=t(8110),s=t(964),l=t(402),o=t(1699),i=t(9711),c=t(8696),m=t(1055),u=t(2119),d=t(5058);const g=()=>{const e=(0,s.Z)(),[a]=(0,u.B)({"flagship-page":1,"flagship-page_size":10,"flagship-order":""},{"flagship-page":Number,"flagship-page_size":Number}),{data:t,loading:g,error:p,isStale:v}=(0,r.Z)(`super-studies/${e}/flagship-studies`,{page:a["flagship-page"],ordering:a["flagship-order"],page_size:a["flagship-page_size"]});if(g&&!v)return n.createElement(l.Z,{size:"small"});if(p||!t)return n.createElement(o.Z,{error:p});const b=[{id:"biome_id",Header:"Biome",accessor:e=>{var a,t;return null===(t=null===(a=e.relationships.biomes.data)||void 0===a?void 0:a[0])||void 0===t?void 0:t.id},Cell:({cell:e})=>n.createElement("span",{className:`biome_icon icon_xs ${(0,d.G)(e.value)}`,style:{float:"initial"}})},{id:"study",Header:"Study accession",accessor:"id",Cell:({cell:e})=>n.createElement(i.rU,{to:`/studies/${e.value}`},e.value)},{Header:"Name",accessor:"attributes.study-name"},{Header:"Abstract",accessor:"attributes.study-abstract",Cell:({cell:e})=>n.createElement(m.Z,{text:e.value||""})},{Header:"Samples Count",accessor:"attributes.samples-count"},{id:"last_update",Header:"Last Updated",accessor:"attributes.last-update",Cell:({cell:e})=>new Date(e.value).toLocaleDateString()}];return n.createElement("details",null,n.createElement("summary",null,n.createElement("b",null,"Flagship Projects")),n.createElement(c.Z,{cols:b,data:t,initialPage:a["flagship-page"]-1,initialPageSize:10,className:"mg-anlyses-table",loading:g,isStale:v,namespace:"flagship-"}))},p=()=>{var e;const a=(0,s.Z)(),[t]=(0,u.B)({"related-page":1,"related-page_size":10,"related-order":""},{"related-page":Number,"related-page_size":Number}),{data:m,loading:g,error:p,isStale:v}=(0,r.Z)(`super-studies/${a}/related-studies`,{page:t["related-page"],ordering:t["related-order"],page_size:t["related-page_size"]});if(g&&!v)return n.createElement(l.Z,{size:"small"});if(p||!m)return n.createElement(o.Z,{error:p});const b=[{id:"biome_id",Header:"Biome",accessor:e=>{var a,t;return null===(t=null===(a=e.relationships.biomes.data)||void 0===a?void 0:a[0])||void 0===t?void 0:t.id},Cell:({cell:e})=>n.createElement("span",{className:`biome_icon icon_xs ${(0,d.G)(e.value)}`,style:{float:"initial"}})},{id:"study",Header:"Study accession",accessor:"id",Cell:({cell:e})=>n.createElement(i.rU,{to:`/studies/${e.value}`},e.value)},{Header:"Name",accessor:"attributes.study-name"},{Header:"Abstract",accessor:"attributes.study-abstract"},{Header:"Samples Count",accessor:"attributes.samples-count"},{id:"last_update",Header:"Last Updated",accessor:"attributes.last-update",Cell:({cell:e})=>new Date(e.value).toLocaleDateString()}];return(null===(e=null==m?void 0:m.data)||void 0===e?void 0:e.length)?n.createElement("details",null,n.createElement("summary",null,n.createElement("b",null,"Related Projects")),n.createElement(c.Z,{cols:b,data:m,initialPage:t["related-page"]-1,initialPageSize:10,className:"mg-anlyses-table",loading:g,isStale:v,namespace:"related-"})):null},v=()=>{const e=(0,s.Z)(),{data:a,loading:t,error:i}=(0,r.Z)(`super-studies/${e}`);if(t)return n.createElement(l.Z,{size:"large"});if(i)return n.createElement(o.Z,{error:i});if(!a)return n.createElement(l.Z,null);const{data:c}=a;return n.createElement("section",{className:"vf-content"},n.createElement("h2",null,"Super Study"),n.createElement("section",{className:"vf-grid"},n.createElement("div",{className:"vf-stack vf-stack--200"},n.createElement("div",{style:{display:"flex"}},n.createElement("div",null,n.createElement("h3",null,c.attributes.title),n.createElement("p",null,c.attributes.description)),n.createElement("img",{src:c.attributes["image-url"],style:{height:"6em"},alt:`${c.attributes.title} logo`})),n.createElement(g,null),n.createElement(p,null))))}},5058:(e,a,t)=>{t.d(a,{G:()=>i});const n={"root:engineered":"engineered_b"},r={"root:engineered:wastewater":"wastewater_b","root:environmental:air":"air_b","root:host-associated:amphibia":"amphibian_b","root:host-associated:arthropoda":"arthropoda_b","root:host-associated:fish":"fish_b","root:host-associated:human":"human_host_b","root:host-associated:insecta":"insect_b","root:host-associated:mammals":"mammals_b","root:host-associated:mollusca":"mollusca_b","root:host-associated:plants":"plant_host_b","root:host-associated:porifera":"porifera_b"},s={"root:environmental:aquatic:freshwater":"freshwater_b","root:environmental:aquatic:marine":"marine_b","root:environmental:aquatic:thermal springs":"hotspring_b","root:environmental:terrestrial:soil":"soil_b","root:environmental:terrestrial:volcanic":"vulcano_b","root:host-associated:human:digestive system":"human_gut_b","root:host-associated:human:skin":"skin_b"},l={"root:environmental:aquatic:freshwater:drinking water":"drinking_water_b","root:environmental:aquatic:freshwater:groundwater":"groundwater_b","root:environmental:aquatic:freshwater:ice":"ice_b","root:environmental:aquatic:freshwater:lake":"lake_b","root:environmental:aquatic:freshwater:lotic":"river_b","root:environmental:aquatic:marine:hydrothermal vents":"hydrothermal_vents_b","root:environmental:terrestrial:soil:wetlands":"wetlands_b","root:host-associated:human:digestive system:oral":"mouth_b","root:host-associated:human:respiratory system:pulmonary system":"lung_b","root:host-associated:mammals:nervous system:brain":"brain_b"},o={"root:environmental:aquatic:freshwater:groundwater:cave water":"cave_b","root:environmental:aquatic:freshwater:ice:glacier":"glacier_b","root:environmental:terrestrial:soil:grasslands":"grassland_b","root:environmental:terrestrial:soil:loam:forest soil":"forest_b","root:environmental:terrestrial:soil:sand:desert":"desert_b"};function i(e){const a=(e||"").split(":").map((e=>e.toLowerCase())),t=a.slice(0,2).join(":"),i=a.slice(0,3).join(":"),c=a.slice(0,4).join(":"),m=a.slice(0,5).join(":"),u=a.slice(0,6).join(":");return o[u]||l[m]||s[c]||r[i]||n[t]||"default_b"}}}]);
//# sourceMappingURL=280.47afb2cc.chunk.js.map