(self.webpackChunkmgportalv2=self.webpackChunkmgportalv2||[]).push([[301],{6367:(e,t,a)=>{"use strict";a.d(t,{p0:()=>l,Sf:()=>o,ZP:()=>i});var n=a(7294),r=a(8241);const s=JSON.parse('[{"title":"MGnify: the microbiome analysis resource in 2020","journal":"Nucleic Acids Research","year":2019,"link":"https://academic.oup.com/nar/article/48/D1/D570/5614179","doi":"10.1093/nar/gkz1035","authors":"Mitchell AL, Almeida A, Beracochea M, Boland M, Burgin J, Cochrane G, Crusoe MR, Kale V, Potter SC, Richardson LJ, Sakharova E, Scheremetjew M, Korobeynikov A, Shlemov A, Kunyavskaya O, Lapidus A and Finn RD","recent":true,"main":true},{"title":"A new genomic blueprint of the human gut microbiota","journal":"Nature","year":2019,"link":"https://www.nature.com/articles/s41586-019-0965-1","doi":"10.1038/s41586-019-0965-1","authors":"Almeida A, Mitchell AL, Boland M, Forster SC, Gloor GB, Tarkowska A, Lawley TD and Finn RD","recent":true},{"title":"Human gastrointestinal bacteria genome and culture collection","journal":"Nature Biotechnology","year":2019,"link":"https://www.nature.com/articles/s41587-018-0009-7","doi":"10.1038/s41587-018-0009-7","authors":"Forster SC, Kumar N, Anonye BO, Almeida A, Viciani E, Stares MD, Dunn M, Mkandawire TT, Zhu A, Browne HP, Shao Y, Pike LJ, Louie T, Mitchell AL, Neville BA, Finn RD, Lawley TD","recent":true},{"title":"Benchmarking taxonomic assignments based on 16S rRNA gene profiling of the microbiota from commonly sampled environments","journal":"GigaScience","year":2017,"link":"https://doi.org/10.1093/gigascience/giy054","doi":"10.1093/gigascience/giy054","authors":"Almeida A, Mitchell AL, Tarkowska A, Finn RD.","recent":true},{"title":"EBI Metagenomics in 2017: enriching the analysis of microbial communities, from sequence reads to assemblies","journal":"Nucleic Acids Research","year":2017,"link":"https://doi.org/10.1093/nar/gkx967","doi":"10.1093/nar/gkx967","authors":"Mitchell AL, Scheremetjew M, Denise H, Potter S, Tarkowska A, Qureshi M, Salazar GA, Pesseat S, Boland M, Hunter FMI, ten Hoopen P, Alako B, Amid C, Wilkinson DJ, Curtis TP, Cochrane G and Finn RD"},{"title":"EBI metagenomics in 2016 - an expanding and evolving resource for the analysis and archiving of metagenomic data","journal":"Nucleic Acids Research","year":2015,"link":"http://nar.oxfordjournals.org/content/44/D1/D595.full","doi":"10.1093/nar/gkv1195","authors":"Mitchell AL, Bucchini F, Cochrane G, Denise H, ten Hoopen P, Fraser M, Pesseat S, Potter S, Scheremetjew M, Sterk P and Finn RD"},{"title":"EBI metagenomics - a new resource for the analysis and archiving of metagenomic data","journal":"Nucleic Acids Research","year":2013,"link":"http://dx.doi.org/10.1093/nar/gkt961","doi":"10.1093/nar/gkt961","authors":"Hunter S, Corbett M, Denise H, Fraser M, Gonzalez-Beltran A, Hunter C, Jones P, Leinonen R, McAnulla C, Maguire E, Maslen J, Mitchell AL, Nuka G, Oisel A, Pesseat S, Radhakrishnan R, Rocca-Serra P, Scheremetjew M, Sterk P, Vaughan D, Cochrane G, Field D and Sansone SA"}]'),o=({title:e,journal:t,year:a,link:r,doi:s,authors:o,maxAuthorsLength:l})=>{const i=l&&o.length>l?((e,t)=>{const a=e.slice(0,t).split(",");return a.pop(),a.push(" et al."),a.join(",")})(o,l):o;return n.createElement("section",{className:"mg-pub"},n.createElement("span",{className:"mg-pub-title"},e,".")," ",n.createElement("span",{className:"mg-pub-journal"},t)," (",n.createElement("span",{className:"mg-pub-year"},a),")"," ",n.createElement("span",{className:"mg-pub-doi"},"doi:",n.createElement("a",{title:e,href:r,className:"ext"},s)),n.createElement("div",{className:"mg-pub-authors"},i,"."))},l=()=>{var e;const t=null===(e=s.filter((e=>e.main)))||void 0===e?void 0:e[0];return n.createElement("div",{className:"embl-grid | vf-content"},n.createElement("div",{className:"vf-section-header mg-pub-section-header"},n.createElement("img",{alt:"Cover of the journal",src:r,className:"mg-pub-cover"})),n.createElement("div",null,n.createElement("p",null,"To cite MGnify, please refer to the following publication:"),t&&n.createElement(o,{title:t.title,journal:t.journal,year:t.year,link:t.link,doi:t.doi,authors:t.authors})))},i=()=>{const[e,t]=(0,n.useState)(!1);return n.createElement("section",{className:"mg-pub-section"},s.filter((t=>e||t.recent)).map((e=>n.createElement("article",{key:e.doi},n.createElement(o,{title:e.title,journal:e.journal,year:e.year,link:e.link,doi:e.doi,authors:e.authors})))),n.createElement("div",{className:"mg-right"},n.createElement("button",{type:"button",className:"vf-button vf-button--sm",onClick:()=>t(!e)},e?"Less":"More"," publications")))}},1699:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var n=a(7294),r=a(7838);const s=()=>{window.location.reload()},o=({error:e})=>e&&e.type!==r.ZB.NullURL?n.createElement("div",{className:"vf-box vf-box-theme--primary vf-box--easy",style:{backgroundColor:"lemonchiffon"}},n.createElement("h3",{className:"vf-box__heading"},n.createElement("span",{className:"icon icon-common icon-exclamation-triangle"})," Error Fetching Data"),n.createElement("p",{className:"vf-box__text"},(null==e?void 0:e.type)===r.ZB.FetchError&&`There were problems with the request. [${e.error}]`,(null==e?void 0:e.type)===r.ZB.NotOK&&`The response from the server was not OK [Status: ${e.status}].`,(null==e?void 0:e.type)===r.ZB.JSONError&&`The recovered resource didn't follow the expected format [${e.error}].`),n.createElement("div",{className:"mg-right"},n.createElement("button",{type:"button",className:"vf-button vf-button--tertiary vf-button--sm ",onClick:s},"Refresh"))):null},7301:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var n=a(7294),r=a(8110),s=a(1153);var o=a(402),l=a(1699),i=a(3727);const c=({tabs:e})=>{const t=(0,s.TH)();return n.createElement("div",{className:"vf-tabs mg-search-tabs"},n.createElement("ul",{className:"vf-tabs__list"},e.map((({label:e,to:a})=>n.createElement("li",{className:"vf-tabs__item",key:e},n.createElement(i.rU,{className:"vf-tabs__link "+(a===t.pathname||a.startsWith("#")&&a===t.hash?"is-active":""),to:a},e))))))};var m=a(7762),u=a(7212),d=a(6529);var h=a(7838),v=a(6050);const g=e=>e===u.Status.LOADING?n.createElement(o.Z,null):e===u.Status.FAILURE?n.createElement(l.Z,{error:{status:200,type:h.ZB.OtherError,error:e}}):null,p=({sample:e})=>n.createElement("div",{className:"vf-box vf-box--easy"},n.createElement("h3",{className:"vf-box__heading"},n.createElement("a",{href:`../samples/${e.id}`},e.id)),n.createElement("p",{className:"vf-box__text"},e.attributes["sample-desc"])),b=({accessions:e})=>n.createElement("div",{className:"vf-box vf-box--easy"},n.createElement("h3",{className:"vf-box__heading"},"Samples on this geographical location"),n.createElement("ul",{className:"vf-list"},e.map((e=>n.createElement("li",{ref:e},n.createElement("a",{href:`../samples/${e}`},e)))))),f=({data:e})=>{const t=(0,n.useRef)(),[a,r]=(0,n.useState)(null),s=(0,n.useRef)(null),o=(0,n.useRef)(new google.maps.InfoWindow),l=(0,n.useRef)(new google.maps.InfoWindow),i=(0,n.useRef)(new google.maps.LatLngBounds),c=(0,n.useRef)({});return(0,n.useEffect)((()=>{if(null===a){const e=new google.maps.Map(t.current,{maxZoom:10,minZoom:2});r(e)}}),[a]),(0,n.useEffect)((()=>{a&&e&&(s.current&&s.current.clearMarkers(),e.filter((({id:e})=>!(e in c.current))).forEach((e=>{const t={lat:e.attributes.latitude,lng:e.attributes.longitude},r=new google.maps.Marker({position:t,title:e.id});i.current.extend(t),r.addListener("click",(()=>{o.current.setContent(m.renderToString(n.createElement(p,{sample:e}))),o.current.open(a,r)})),c.current[e.id]=r})),s.current=new d.Z(a,Object.values(c.current),{imagePath:"https://googlemaps.github.io/js-markerclustererplus/images/m",maxZoom:10}),google.maps.event.addListener(s.current,"click",(function(e){this.prevZoom_+1<=this.getMaxZoom()||e.getSize()>=10||(l.current.setPosition(e.getCenter()),l.current.setContent(m.renderToString(n.createElement(b,{accessions:e.getMarkers().map((e=>e.getTitle()))}))),l.current.open(a))})),a.fitBounds(i.current))}),[a,e]),n.createElement("div",{ref:t,id:"map",style:{height:"100%"}})},E=({study:e})=>{const[t,a]=(0,n.useState)(200),{samples:s,total:o}=((e,t)=>{const[a,s]=(0,n.useState)(1),[o,l]=(0,n.useState)([]),[i,c]=(0,n.useState)(null),{data:m,isStale:u,loading:d,error:h}=(0,r.Z)("samples",{study_accession:e,page:a});return(0,n.useEffect)((()=>{var e,n,r,d,h;if((null==m?void 0:m.data)&&!u&&a===(null===(n=null===(e=null==m?void 0:m.meta)||void 0===e?void 0:e.pagination)||void 0===n?void 0:n.page)){const e=[...o,...m.data];l(e);const n=null===(d=null===(r=null==m?void 0:m.meta)||void 0===r?void 0:r.pagination)||void 0===d?void 0:d.count;i!==n&&"number"==typeof n&&c(n),(null===(h=null==m?void 0:m.links)||void 0===h?void 0:h.next)&&e.length<t&&s(a+1)}}),[m,a,t]),(0,n.useEffect)((()=>{var e;(null===(e=null==m?void 0:m.links)||void 0===e?void 0:e.next)&&o.length<t&&s(a+1)}),[t]),{samples:o,total:i,loading:d,error:h}})(e,t),{config:l}=(0,n.useContext)(v.Z),i=s.filter((e=>!!(e.attributes&&"longitude"in e.attributes&&"latitude"in e.attributes)&&0!==e.attributes.longitude&&0!==e.attributes.latitude));return n.createElement("div",{className:"mg-map-container"},n.createElement("div",{className:"mg-map-wrapper"},n.createElement(u.Wrapper,{apiKey:l.googleMapsKey,render:g},n.createElement(f,{data:i}))),o&&n.createElement("div",{className:"mg-map-progress"},n.createElement("progress",{max:o,value:s.length}),o>t&&n.createElement("div",null,"⚠️ We are only loading the first ",200," samples. Click"," ",n.createElement("button",{type:"button",className:"vf-button vf-button--link mg-button-as-link",onClick:()=>a(o)},"HERE")," ","to load them all."),0===i.length&&n.createElement("div",null,"⚠️ None of the ",o>t?"loaded":""," samples have geolocation co-ordinates.")))},y=({label:e,theme:t="primary",children:a})=>n.createElement("div",{className:"vf-grid"},n.createElement("div",{className:`vf-box vf-box--easy vf-box-theme--${t}`},n.createElement("h5",{className:"vf-box__heading"},e),n.createElement("div",{className:"vf-box__text"},a)));var k=a(5058),w=a(6367);const N=({data:e,included:t})=>{var a,r,s,o,l;const{config:c}=(0,n.useContext)(v.Z),m=e.relationships.biomes.data[0].id;return n.createElement("section",null,n.createElement("div",{className:"vf-grid"},n.createElement("div",null,n.createElement("h4",null,"Last updated:"," ",new Date(null===(a=null==e?void 0:e.attributes)||void 0===a?void 0:a["last-update"]).toDateString()),n.createElement(y,{label:"Classification"},n.createElement("span",{className:`biome_icon icon_sm ${(0,k.G)(m)}`,style:{float:"initial"}}),m),n.createElement(y,{label:"Description"},e.attributes["study-abstract"])),n.createElement(E,{study:e.id})),n.createElement("div",{className:"mg-flex"},(null===(o=null===(s=null===(r=null==e?void 0:e.relationships)||void 0===r?void 0:r.studies)||void 0===s?void 0:s.data)||void 0===o?void 0:o.length)&&n.createElement(y,{label:"Related studies"},n.createElement("ul",{className:"vf-list"},e.relationships.studies.data.map((({id:e})=>n.createElement("li",{key:e},n.createElement(i.rU,{to:`/studies/${e}`},e)))))),n.createElement("div",null,(null===(l=null==e?void 0:e.attributes)||void 0===l?void 0:l["is-public"])&&n.createElement(y,{label:"External links"},n.createElement("ul",{className:"vf-list"},n.createElement("li",null,n.createElement("a",{className:"ext",href:`${c.enaURL}/${e.attributes["secondary-accession"]}`},"ENA website (",e.attributes["secondary-accession"],")")))),n.createElement(y,{label:"Publications"},n.createElement("ul",{className:"vf-list"},t.filter((({type:e})=>"publications"===e)).map((({attributes:e,id:t})=>n.createElement("li",{key:t},n.createElement(w.Sf,{title:e["pub-title"],journal:e["iso-journal"],year:e["published-year"],link:`http://${e.doi}`,doi:e.doi,authors:e.authors,maxAuthorsLength:70})))))))))},_=({hash:e,isDefault:t=!1,children:a})=>{const r=(0,s.TH)(),o=(0,s.k6)();return""===r.hash&&t&&o.push(e),r.hash===e?n.createElement(n.Fragment,null,a):null},S=[{label:"Overview",to:"#overview"},{label:"Analysis summary",to:"#analysis"}],x=()=>{const e=(()=>{const e=(0,s.TH)().pathname.split("/");return null==e?void 0:e[e.length-1]})(),{data:t,loading:a,error:i}=(0,r.Z)(`studies/${e}`,{include:"publications"});if(a)return n.createElement(o.Z,{size:"large"});if(i)return n.createElement(l.Z,{error:i});if(!t)return n.createElement(o.Z,null);const{data:m,included:u}=t;return n.createElement("section",{className:"vf-content"},n.createElement("h2",null,"Study ",e),n.createElement("h3",null,m.attributes["study-name"]),n.createElement(c,{tabs:S}),n.createElement("section",{className:"vf-grid"},n.createElement("div",{className:"vf-stack vf-stack--200"},n.createElement(_,{hash:"#overview",isDefault:!0},n.createElement(N,{data:m,included:u||[]})),n.createElement(_,{hash:"#analysis"},n.createElement("div",null,"analysis ????")))))}},5058:(e,t,a)=>{"use strict";a.d(t,{G:()=>i});const n={"root:engineered":"engineered_b"},r={"root:engineered:wastewater":"wastewater_b","root:environmental:air":"air_b","root:host-associated:amphibia":"amphibian_b","root:host-associated:arthropoda":"arthropoda_b","root:host-associated:fish":"fish_b","root:host-associated:human":"human_host_b","root:host-associated:insecta":"insect_b","root:host-associated:mammals":"mammals_b","root:host-associated:mollusca":"mollusca_b","root:host-associated:plants":"plant_host_b","root:host-associated:porifera":"porifera_b"},s={"root:environmental:aquatic:freshwater":"freshwater_b","root:environmental:aquatic:marine":"marine_b","root:environmental:aquatic:thermal springs":"hotspring_b","root:environmental:terrestrial:soil":"soil_b","root:environmental:terrestrial:volcanic":"vulcano_b","root:host-associated:human:digestive system":"human_gut_b","root:host-associated:human:skin":"skin_b"},o={"root:environmental:aquatic:freshwater:drinking water":"drinking_water_b","root:environmental:aquatic:freshwater:groundwater":"groundwater_b","root:environmental:aquatic:freshwater:ice":"ice_b","root:environmental:aquatic:freshwater:lake":"lake_b","root:environmental:aquatic:freshwater:lotic":"river_b","root:environmental:aquatic:marine:hydrothermal vents":"hydrothermal_vents_b","root:environmental:terrestrial:soil:wetlands":"wetlands_b","root:host-associated:human:digestive system:oral":"mouth_b","root:host-associated:human:respiratory system:pulmonary system":"lung_b","root:host-associated:mammals:nervous system:brain":"brain_b"},l={"root:environmental:aquatic:freshwater:groundwater:cave water":"cave_b","root:environmental:aquatic:freshwater:ice:glacier":"glacier_b","root:environmental:terrestrial:soil:grasslands":"grassland_b","root:environmental:terrestrial:soil:loam:forest soil":"forest_b","root:environmental:terrestrial:soil:sand:desert":"desert_b"};function i(e){const t=(e||"").split(":").map((e=>e.toLowerCase())),a=t.slice(0,2).join(":"),i=t.slice(0,3).join(":"),c=t.slice(0,4).join(":"),m=t.slice(0,5).join(":"),u=t.slice(0,6).join(":");return l[u]||o[m]||s[c]||r[i]||n[a]||"default_b"}},8241:(e,t,a)=>{"use strict";e.exports=a.p+"static/bef88e0e94ffc23af445.gif"}}]);
//# sourceMappingURL=301.9df7ac63.chunk.js.map