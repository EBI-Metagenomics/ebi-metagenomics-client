(self.webpackChunkmgportalv2=self.webpackChunkmgportalv2||[]).push([[306],{9170:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var n=a(7294),l=a(9521);const s=({currentPageIndex:e,pageIndex:t,gotoPage:a})=>e===t?n.createElement("li",{className:"vf-pagination__item vf-pagination__item--is-active"},n.createElement("span",{className:"vf-pagination__label","aria-current":"page"},n.createElement("span",{className:"vf-u-sr-only"},"Page "),e+1)):n.createElement("li",{className:"vf-pagination__item"},n.createElement("button",{type:"button",onClick:()=>a(t),className:"vf-button vf-button--link vf-pagination__link"},n.createElement("span",{className:"vf-u-sr-only"}," page"),t+1)),r=({cols:e,data:t,title:a,fetchPage:r,onChangeSort:o,initialPage:i=0})=>{const{getTableProps:c,getTableBodyProps:m,headerGroups:u,rows:d,prepareRow:v,canPreviousPage:p,canNextPage:f,pageCount:g,gotoPage:E,nextPage:_,previousPage:h,state:{pageIndex:b,pageSize:N,sortBy:y}}=(0,l.useTable)({columns:e,data:t.data,initialState:{pageIndex:i},pageCount:t.meta.pagination.pages,manualPagination:!0,manualSortBy:!0},l.useSortBy,l.usePagination);n.useEffect((()=>{r&&r(b,N)}),[r,b,N]),n.useEffect((()=>{o&&o(y)}),[o,y]);const S=n.useMemo((()=>function(e,t){const a=t>1?[0,1]:[0],n=t>2?[Math.max(2,e-2)]:[];for(let e=n[0]+1;e<t-2&&n.length<5;e+=1)n.push(e);let l=[];return t>7?l=[t-2,t-1]:t>6&&(l=[t-1]),{startingPages:a,endingPages:l,adjacentPages:n,hasJumpFromStart:!!n.length&&n[0]>a[a.length-1]+1,hasJumpToEnd:!!l.length&&!!n.length&&l[0]>n[n.length-1]+1}}(b,g)),[b,g]);return n.createElement("section",null,n.createElement("table",Object.assign({},c,{className:"vf-table--striped"}),n.createElement("caption",{className:"vf-table__caption"},a),n.createElement("thead",{className:"vf-table__header"},u.map((e=>n.createElement("tr",Object.assign({},e.getHeaderGroupProps(),{className:"vf-table__row"}),e.headers.map((e=>n.createElement("th",Object.assign({},e.getHeaderProps(e.getSortByToggleProps()),{className:"vf-table__heading"}),e.render("Header"),o&&n.createElement(n.Fragment,null,"Â ",n.createElement("span",null,e.isSorted?e.isSortedDesc?n.createElement("i",{className:"icon icon-common icon-sort-down"}):n.createElement("i",{className:"icon icon-common icon-sort-up"}):n.createElement("i",{className:"icon icon-common icon-sort"})))))))))),n.createElement("tbody",Object.assign({},m(),{className:"vf-table__body"}),d.map((e=>(v(e),n.createElement("tr",Object.assign({},e.getRowProps(),{className:"vf-table__row"}),e.cells.map((e=>n.createElement("td",Object.assign({},e.getCellProps(),{className:"vf-table__cell"}),e.render("Cell")))))))))),r&&n.createElement("nav",{className:"vf-pagination","aria-label":"Pagination"},n.createElement("ul",{className:"vf-pagination__list"},n.createElement("li",{className:"vf-pagination__item vf-pagination__item--previous-page"},n.createElement("button",{disabled:!p,type:"button",onClick:h,className:"vf-button vf-button--link vf-pagination__link"},"Previous",n.createElement("span",{className:"vf-u-sr-only"}," page"))),S.startingPages.map((e=>n.createElement(s,{key:e,currentPageIndex:b,pageIndex:e,gotoPage:E}))),S.hasJumpFromStart&&n.createElement("li",{className:"vf-pagination__item"},n.createElement("span",{className:"vf-pagination__label"},"...")),S.adjacentPages.map((e=>n.createElement(s,{key:e,currentPageIndex:b,pageIndex:e,gotoPage:E}))),S.hasJumpToEnd&&n.createElement("li",{className:"vf-pagination__item"},n.createElement("span",{className:"vf-pagination__label"},"...")),S.endingPages.map((e=>n.createElement(s,{key:e,currentPageIndex:b,pageIndex:e,gotoPage:E}))),n.createElement("li",{className:"vf-pagination__item vf-pagination__item--next-page"},n.createElement("button",{disabled:!f,type:"button",onClick:_,className:"vf-button vf-button--link vf-pagination__link"},"Next",n.createElement("span",{className:"vf-u-sr-only"}," page"))))))}},1699:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var n=a(7294),l=a(3647);const s=()=>{window.location.reload()},r=({error:e})=>e.type===l.ZB.NullURL?null:n.createElement("div",{className:"vf-box vf-box-theme--primary vf-box--easy",style:{backgroundColor:"lemonchiffon"}},n.createElement("h3",{className:"vf-box__heading"},n.createElement("span",{className:"icon icon-common icon-exclamation-triangle"})," Error Fetching Data"),n.createElement("p",{className:"vf-box__text"},(null==e?void 0:e.type)===l.ZB.FetchError&&`There were problems with the request. [${e.error}]`,(null==e?void 0:e.type)===l.ZB.NotOK&&`The response from the server was not OK [Status: ${e.status}].`,(null==e?void 0:e.type)===l.ZB.JSONError&&`The recovered resource didn't follow the expected format [${e.error}].`),n.createElement("div",{className:"mg-right"},n.createElement("button",{type:"button",className:"vf-button vf-button--tertiary vf-button--sm ",onClick:s},"Refresh")))},3647:(e,t,a)=>{"use strict";a.d(t,{ZB:()=>n,Yg:()=>i,XE:()=>c,nh:()=>m});var n,l=a(7294),s=a(150);!function(e){e[e.FetchError=0]="FetchError",e[e.NotOK=1]="NotOK",e[e.JSONError=2]="JSONError",e[e.NullURL=3]="NullURL"}(n||(n={}));const r={data:null,loading:!1,error:{type:n.NullURL,error:"The queried URL is null"}},o=e=>{const[t,a]=(0,l.useState)({data:null,loading:!0,error:null}),s=e=>{a((t=>Object.assign(Object.assign({},t),e)))};return(0,l.useEffect)((()=>{e?function(e,t){var a,l,s,r;a=this,l=void 0,r=function*(){let a=null,l=null;try{a=yield fetch(e)}catch(e){return void t({error:{error:e,type:n.FetchError},loading:!1})}if(a.ok){try{l=yield a.json()}catch(e){return void t({error:{error:e,type:n.JSONError},loading:!1})}t({data:l,loading:!1,error:null})}else t({error:{status:a.status,response:a,type:n.NotOK},loading:!1})},new((s=void 0)||(s=Promise))((function(e,t){function n(e){try{i(r.next(e))}catch(e){t(e)}}function o(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var a;t.done?e(t.value):(a=t.value,a instanceof s?a:new s((function(e){e(a)}))).then(n,o)}i((r=r.apply(a,l||[])).next())}))}(e,s):a(r)}),[e]),t},i=(e,t={})=>{const a=Object.assign(Object.assign({},{format:"json",start:0}),t),n=`${s.l0}${e}?${Object.entries(a).map((([e,t])=>`${e}=${t}`)).join("&")}`;return console.log(n),o([null,void 0].includes(e)?null:n)},c=(e,t={})=>{const a=Object.assign(Object.assign({},{}),t);let n=`${s.hi}${e}`;return Object.keys(a).length>0&&(n+=`?${Object.entries(a).map((([e,t])=>`${e}=${t}`)).join("&")}`),o([null,void 0].includes(e)?null:n)},m=e=>o([null,void 0].includes(e)?null:`${s.tQ}${e}`)},2119:(e,t,a)=>{"use strict";a.d(t,{B:()=>r});var n=a(7294),l=a(1153);const s=(e,t,a)=>{const n={},l=new URLSearchParams(t);return Object.entries(e).forEach((([e,t])=>{const s=a[e]||String;n[e]=s(l.get(e)||t)})),n},r=(e,t={})=>{const a=(0,l.TH)(),r=(0,l.k6)(),o=(0,n.useMemo)((()=>s(e,a.search,t)),[e,a.search,t]),[i,c]=(0,n.useState)(o);return(0,n.useEffect)((()=>{const n=s(e,a.search,t);JSON.stringify(n)!==JSON.stringify(i)&&c(n)}),[a.search,i,e,t]),[i,t=>{if(JSON.stringify(t)===JSON.stringify(i))return;const n=new URLSearchParams(a.search);let l=!1;Object.entries(e).forEach((([e,a])=>{const s=e in t?t[e]:a;t[e]!==i[e]&&(n.set(e,String(s)),s===a&&n.delete(e),l=!0)})),l&&(a.search=n.toString(),r.push(a))}]}},306:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>E});var n=a(7294);const l=()=>{const e="a_cery_uniqueID";return n.createElement("fieldset",{className:"vf-form__fieldset vf-stack vf-stack--400"},n.createElement("legend",{className:"vf-form__legend"},"Centre name"),n.createElement("div",{className:"vf-form__item vf-form__item--checkbox"},n.createElement("input",{type:"checkbox",name:"emg",value:"emg",id:e,className:"vf-form__checkbox"}),n.createElement("label",{className:"vf-form__label",htmlFor:e},"EMG")))};var s=a(3727),r=a(1153);const o=[{label:"Studies",to:"/search/studies"},{label:"Samples",to:"/search/samples"},{label:"Analyses",to:"/search/analyses"}],i=()=>{const e=(0,r.TH)(),t=(0,r.k6)();return(0,n.useEffect)((()=>{o.some((({to:t})=>t===e.pathname))||t.replace(Object.assign(Object.assign({},e),{pathname:o[0].to}))}),[e.pathname,t]),n.createElement("div",{className:"vf-tabs"},n.createElement("ul",{className:"vf-tabs__list"},o.map((({label:t,to:a})=>n.createElement("li",{className:"vf-tabs__item",key:t},n.createElement(s.rU,{className:"vf-tabs__link "+(a===e.pathname?"is-active":""),to:a},t))))))};var c=a(2119);const m=()=>{const[e,t]=(0,c.B)({query:""}),[a,l]=(0,n.useState)(e.query);return(0,n.useEffect)((()=>{l(e.query)}),[e.query]),n.createElement("form",{className:"vf-form vf-form--search vf-form--search--responsive | vf-sidebar vf-sidebar--end"},n.createElement("div",{className:"vf-sidebar__inner"},n.createElement("div",{className:"vf-form__item | vf-search__item"},n.createElement("input",{type:"text",placeholder:"Enter your search terms",id:"text",className:"vf-form__input | st-default-search-input",value:a,onChange:e=>{l(e.target.value)}})),n.createElement("button",{type:"button",className:"vf-search__button | vf-button vf-button--primary",onClick:()=>{t(Object.assign(Object.assign({},e),{query:a}))}},n.createElement("span",{className:"vf-button__text"},"Search "),n.createElement("span",{className:"icon icon-common icon-search"})),n.createElement("button",{type:"button",className:"vf-search__button | vf-button vf-button--tertiary",onClick:()=>{t({})}},n.createElement("span",{className:"vf-button__text"},"Clear All "),n.createElement("span",{className:"icon icon-common icon-times-circle"}))))};var u=a(3647),d=a(402),v=a(1699),p=a(9170);const f={"/search/studies":{endpoint:"metagenomics_projects",query:"domain_source:metagenomics_projects",fields:"ENA_PROJECT,biome_name,centre_name",columns:[{id:"study_id",Header:"MGnify ID",accessor:e=>e.id,Cell:({cell:e})=>n.createElement(s.rU,{to:`/studies/${e.value}`},e.value)},{id:"ena_id",Header:"ENA accession",accessor:e=>{var t,a;return(null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.ENA_PROJECT)||void 0===a?void 0:a[0])||""},Cell:({cell:e})=>n.createElement("span",null,n.createElement("a",{href:`https://www.ebi.ac.uk/ena/browser/view/${e.value}`,className:"ext"},e.value))},{id:"biome",Header:"Biome",accessor:e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.biome_name)||void 0===a?void 0:a.join(":")},Cell:({cell:e})=>n.createElement("span",null,e.value)},{id:"centre",Header:"Centre name",accessor:e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.centre_name)||void 0===a?void 0:a[0]},Cell:({cell:e})=>n.createElement("span",null,e.value)}]},"/search/samples":{endpoint:"metagenomics_samples",query:"domain_source:metagenomics_samples",fields:"METAGENOMICS_PROJECTS,name,description",columns:[{id:"sample_id",Header:"Sample",accessor:e=>e.id,Cell:({cell:e})=>n.createElement(s.rU,{to:`/samples/${e.value}`},e.value)},{id:"mgnify_id",Header:"MGnify ID",accessor:e=>{var t,a;return(null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.METAGENOMICS_PROJECTS)||void 0===a?void 0:a[0])||""},Cell:({cell:e})=>n.createElement(s.rU,{to:`/studies/${e.value}`},e.value)},{id:"sample_name",Header:"Name",pathnames:["/search/studies"],accessor:e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.name)||void 0===a?void 0:a[0]},Cell:({cell:e})=>n.createElement("span",null,e.value)},{id:"sample_description",Header:"Description",pathnames:["/search/studies"],accessor:e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.description)||void 0===a?void 0:a[0]},Cell:({cell:e})=>n.createElement("span",null,e.value)}]},"/search/analyses":{endpoint:"metagenomics_analyses",query:"domain_source:metagenomics_analyses",fields:"METAGENOMICS_PROJECTS,METAGENOMICS_SAMPLES,pipeline_version,experiment_type",columns:[{id:"analyses_id",Header:"Analysis",accessor:e=>(e.id||"").split("_"),Cell:({cell:e})=>n.createElement(s.rU,{to:`/analyses/${e.value[0]}?version=${e.value[1]}`},e.value[0])},{id:"pipeline",Header:"Pipeline version",accessor:e=>{var t,a;return(null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.pipeline_version)||void 0===a?void 0:a[0])||""},Cell:({cell:e})=>n.createElement("span",null,n.createElement(s.rU,{to:`/pipelines/${e.value}`},e.value))},{id:"sample_id",Header:"Sample",accessor:e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.METAGENOMICS_SAMPLES)||void 0===a?void 0:a[0]},Cell:({cell:e})=>n.createElement(s.rU,{to:`/samples/${e.value}`},e.value)},{id:"mgnify_id",Header:"MGnify ID",accessor:e=>{var t,a;return(null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.METAGENOMICS_PROJECTS)||void 0===a?void 0:a[0])||""},Cell:({cell:e})=>n.createElement(s.rU,{to:`/studies/${e.value}`},e.value)},{id:"experiment",Header:"Experiment type",accessor:e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.experiment_type)||void 0===a?void 0:a[0]},Cell:({cell:e})=>n.createElement("span",null,e.value)}]}},g=()=>{var e,t,a,l;const[s]=(0,c.B)({query:""}),{pathname:o}=(0,r.TH)();console.log(null===(e=null==f?void 0:f[o])||void 0===e?void 0:e.endpoint);const{data:i,loading:m,error:g}=(0,u.Yg)(null===(t=null==f?void 0:f[o])||void 0===t?void 0:t.endpoint,{query:(null==s?void 0:s.query)||(null===(a=null==f?void 0:f[o])||void 0===a?void 0:a.query),size:25,fields:null===(l=null==f?void 0:f[o])||void 0===l?void 0:l.fields,facetcount:10,facetsdepth:2,facets:""}),E=(0,n.useMemo)((()=>{var e;return null===(e=null==f?void 0:f[o])||void 0===e?void 0:e.columns}),[o]);if(m)return n.createElement(d.Z,{size:"small"});if(g||!i)return n.createElement(v.Z,{error:g});const _={data:i.entries,meta:{pagination:{pages:Math.ceil(i.hitCount/25)}}};return n.createElement(p.Z,{cols:E,data:_,title:`Studies (${i.hitCount})`,initialPage:1})},E=()=>n.createElement("section",{className:"vf-content"},n.createElement("h2",null,"Text Search."),n.createElement(m,null),n.createElement(i,null),n.createElement("section",{className:"embl-grid"},n.createElement("div",{className:"vf-stack vf-stack--400"},n.createElement(l,null)),n.createElement(g,null)))}}]);
//# sourceMappingURL=306.e1e2e63a.chunk.js.map