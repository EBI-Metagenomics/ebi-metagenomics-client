"use strict";(self.webpackChunkmgportalv2=self.webpackChunkmgportalv2||[]).push([[328],{8696:(e,a,t)=>{t.d(a,{Z:()=>m});var n=t(7294),l=t(9521),s=t(402),r=t(2119);const c=({currentPageIndex:e,pageIndex:a,gotoPage:t})=>e===a?n.createElement("li",{className:"vf-pagination__item vf-pagination__item--is-active"},n.createElement("span",{className:"vf-pagination__label","aria-current":"page"},n.createElement("span",{className:"vf-u-sr-only"},"Page "),e+1)):n.createElement("li",{className:"vf-pagination__item"},n.createElement("button",{type:"button",onClick:()=>t(a),className:"vf-button vf-button--link vf-pagination__link"},n.createElement("span",{className:"vf-u-sr-only"}," page"),a+1));var i=t(9111);const o=({namespace:e})=>{const[a,t]=(0,r.B)({[`${e}search`]:""}),[l,s]=(0,n.useState)(a[`${e}search`]||""),c=(0,n.useCallback)((0,i.Z)((n=>{t(Object.assign(Object.assign({},a),{[`${e}search`]:n}))}),300),[]);return n.createElement("div",{className:"vf-form__item mg-textsearch"},n.createElement("label",{className:"vf-form__label vf-search__label",htmlFor:"searchitem"},"Filter"),n.createElement("input",{type:"search",placeholder:"Enter your search terms",id:"searchitem",className:"vf-form__input",onChange:e=>{const a=e.target.value;s(a),c(a)},value:l}))},m=({cols:e,data:a,title:t,initialPage:i=0,initialPageSize:m=25,className:u="",namespace:d="",showPagination:v=!0,showTextFilter:p=!1,sortable:f=!1,loading:g=!1,isStale:h=!1,downloadURL:E=null,onMouseEnterRow:b=(()=>null),onMouseLeaveRow:_=(()=>null)})=>{var N,y,x,C;const[S,P]=(0,r.B)({[`${d}page`]:1,[`${d}order`]:"",[`${d}page_size`]:m,[`${d}search`]:m},{[`${d}page`]:Number,[`${d}page_size`]:Number}),{getTableProps:O,getTableBodyProps:k,headerGroups:w,rows:$,prepareRow:j,canPreviousPage:T,canNextPage:M,pageCount:B,gotoPage:Z,setPageSize:I,nextPage:q,previousPage:F,state:{pageIndex:R,pageSize:H,sortBy:A}}=(0,l.useTable)({columns:e,data:(null===(N=a)||void 0===N?void 0:N.data)||a,initialState:{pageIndex:i,pageSize:S[`${d}page_size`]},pageCount:(null===(C=null===(x=null===(y=a)||void 0===y?void 0:y.meta)||void 0===x?void 0:x.pagination)||void 0===C?void 0:C.pages)||1,manualPagination:!0,manualSortBy:!0},l.useSortBy,l.usePagination),D=(0,n.useRef)(null),[z,G]=(0,n.useState)(!1);(0,n.useEffect)((()=>{v&&S[`${d}page`]!==R+1&&(P(Object.assign(Object.assign({},S),{[`${d}page`]:R+1})),D.current&&z&&(D.current.scrollIntoView(),G(!1)))}),[v,P,R]),(0,n.useEffect)((()=>{v&&S[`${d}page_size`]!==H&&(P(Object.assign(Object.assign({},S),{[`${d}page_size`]:H})),D.current&&z&&(D.current.scrollIntoView(),G(!1)))}),[v,P,H]),(0,n.useEffect)((()=>{if(f){const e=function(e){if(!e.length)return"";const a=e[0];return`${a.desc?"-":""}${a.id.replace(/attributes./g,"").replace(/-/g,"_")}`}(A);if(e===S[`${d}order`])return;P(Object.assign(Object.assign({},S),{[`${d}order`]:e,[`${d}page`]:1})),D.current&&z&&(D.current.scrollIntoView(),G(!1))}}),[v,P,A,f]);const J=(0,n.useMemo)((()=>function(e,a){const t=a>1?[0,1]:[0],n=a>2?[Math.max(2,e-2)]:[];for(let e=n[0]+1;e<a-2&&n.length<5;e+=1)n.push(e);let l=[];return a>7?l=[a-2,a-1]:a>6&&(l=[a-1]),{startingPages:t,endingPages:l,adjacentPages:n,hasJumpFromStart:!!n.length&&n[0]>t[t.length-1]+1,hasJumpToEnd:!!l.length&&!!n.length&&l[0]>n[n.length-1]+1}}(R,B)),[R,B]),L=e=>(G(!0),Z(e)),U=e=>(G(!0),I(+e.target.value));return g&&!h?n.createElement(s.Z,{size:"small"}):n.createElement("section",null,n.createElement("div",{className:"mg-table-overlay-container"},n.createElement("div",{className:g&&h?"mg-table-overlay":void 0}),n.createElement("table",Object.assign({},O,{className:`vf-table--striped mg-table ${u}`,ref:D}),(t||p||E)&&n.createElement("caption",{className:"vf-table__caption mg-table-caption"},n.createElement("div",null,n.createElement("div",null,p&&n.createElement(o,{namespace:d}),E&&n.createElement(n.Fragment,null," ",n.createElement("a",{href:E,className:"vf-button vf-button--secondary vf-button--sm",style:{whiteSpace:"nowrap"},download:!0},n.createElement("span",{className:"icon icon-common icon-download"})," ","Download"))),t&&("string"==typeof t?t:n.createElement(t,null)))),n.createElement("thead",{className:"vf-table__header"},w.map((e=>n.createElement("tr",Object.assign({},e.getHeaderGroupProps(),{className:"vf-table__row"}),e.headers.map((e=>n.createElement("th",Object.assign({},f&&e.canSort?e.getHeaderProps(e.getSortByToggleProps()):{key:e.id},{className:"vf-table__heading"}),e.render("Header"),f&&e.canSort&&n.createElement(n.Fragment,null," ",n.createElement("span",null,e.isSorted?e.isSortedDesc?n.createElement("i",{className:"icon icon-common icon-sort-down"}):n.createElement("i",{className:"icon icon-common icon-sort-up"}):n.createElement("i",{className:"icon icon-common icon-sort"})))))))))),n.createElement("tbody",Object.assign({},k(),{className:"vf-table__body"}),$.map((e=>(j(e),n.createElement("tr",Object.assign({},e.getRowProps(),{className:"vf-table__row",onMouseEnter:()=>b(e),onMouseLeave:()=>_(e)}),e.cells.map((e=>{var a,t;return n.createElement("td",Object.assign({},e.getCellProps(),{colSpan:"function"==typeof(null===(a=e.column)||void 0===a?void 0:a.colspan)?e.column.colspan(e):null===(t=e.column)||void 0===t?void 0:t.colspan,className:"vf-table__cell"}),e.render("Cell"))}))))))))),v&&n.createElement("section",{className:"mg-table-footer"},n.createElement("label",{className:"vf-form__label"},"Page Size:",n.createElement("select",{className:"vf-form__select",value:S[`${d}page_size`],onBlur:U,onChange:U},[10,25,50].map((e=>n.createElement("option",{key:e,value:e},"Show ",e))))),n.createElement("nav",{className:"vf-pagination","aria-label":"Pagination"},n.createElement("ul",{className:"vf-pagination__list"},n.createElement("li",{className:"vf-pagination__item vf-pagination__item--previous-page"},n.createElement("button",{disabled:!T,type:"button",onClick:F,className:"vf-button vf-button--link vf-pagination__link"},"Previous",n.createElement("span",{className:"vf-u-sr-only"}," page"))),J.startingPages.map((e=>n.createElement(c,{key:e,currentPageIndex:R,pageIndex:e,gotoPage:L}))),J.hasJumpFromStart&&n.createElement("li",{className:"vf-pagination__item"},n.createElement("span",{className:"vf-pagination__label"},"...")),J.adjacentPages.map((e=>n.createElement(c,{key:e,currentPageIndex:R,pageIndex:e,gotoPage:L}))),J.hasJumpToEnd&&n.createElement("li",{className:"vf-pagination__item"},n.createElement("span",{className:"vf-pagination__label"},"...")),J.endingPages.map((e=>n.createElement(c,{key:e,currentPageIndex:R,pageIndex:e,gotoPage:L}))),n.createElement("li",{className:"vf-pagination__item vf-pagination__item--next-page"},n.createElement("button",{disabled:!M,type:"button",onClick:q,className:"vf-button vf-button--link vf-pagination__link"},"Next",n.createElement("span",{className:"vf-u-sr-only"}," page")))))))}},2531:(e,a,t)=>{t.d(a,{Z:()=>l});var n=t(7294);const l=({href:e,id:a,title:t,children:l})=>n.createElement("a",{href:e,title:t,id:a,target:"_blank",rel:"noreferrer noopener",className:"mg-ext"},n.createElement("span",{className:"icon icon-common icon-external-link-alt"})," ",l)},1699:(e,a,t)=>{t.d(a,{Z:()=>r});var n=t(7294),l=t(7838);const s=()=>{window.location.reload()},r=({error:e})=>e&&e.type!==l.ZB.NullURL?n.createElement("div",{className:"vf-box vf-box-theme--primary vf-box--easy",style:{backgroundColor:"lemonchiffon"}},n.createElement("h3",{className:"vf-box__heading"},n.createElement("span",{className:"icon icon-common icon-exclamation-triangle"})," Error Fetching Data"),n.createElement("p",{className:"vf-box__text"},(null==e?void 0:e.type)===l.ZB.FetchError&&`There were problems with the request. [${e.error}]`,(null==e?void 0:e.type)===l.ZB.NotOK&&`The response from the server was not OK [Status: ${e.status}].`,(null==e?void 0:e.type)===l.ZB.JSONError&&`The recovered resource didn't follow the expected format [${e.error}].`),n.createElement("div",{className:"mg-right"},n.createElement("button",{type:"button",className:"vf-button vf-button--tertiary vf-button--sm ",onClick:s},"Refresh"))):null},4821:(e,a,t)=>{t.d(a,{Z:()=>r});var n=t(7294),l=t(6974),s=t(9711);const r=({tabs:e})=>{const a=(0,l.TH)();return n.createElement("div",{className:"vf-tabs mg-search-tabs"},n.createElement("ul",{className:"vf-tabs__list"},e.map((({label:e,to:t})=>n.createElement("li",{className:"vf-tabs__item",key:t},n.createElement(s.rU,{className:"vf-tabs__link "+(t===a.pathname||t.startsWith("#")&&t===a.hash||"#"===t&&""===a.hash?"is-active":""),to:t},"string"==typeof e?e:n.createElement(e,null)))))))}},7832:(e,a,t)=>{t.d(a,{Z:()=>r});var n=t(7294),l=t(7838),s=t(6050);const r=(e,a={})=>{const{config:t}=(0,n.useContext)(s.Z),r=Object.assign(Object.assign({},{format:"json",start:0}),a),c=`${t.ebisearch}${e}?${Object.entries(r).map((([e,a])=>`${e}=${a}`)).join("&")}`;return(0,l.ZP)([null,void 0].includes(e)?null:c)}},2119:(e,a,t)=>{t.d(a,{B:()=>r});var n=t(7294),l=t(6974);const s=(e,a,t)=>{const n={},l=new URLSearchParams(a);return Object.entries(e).forEach((([e,a])=>{const s=t[e]||String;n[e]=s(l.get(e)||a)})),n},r=(e,a={})=>{const t=(0,l.TH)(),r=(0,l.s0)(),c=(0,n.useMemo)((()=>s(e,t.search,a)),[e,t.search,a]),[i,o]=(0,n.useState)(c);return(0,n.useEffect)((()=>{const n=s(e,t.search,a);JSON.stringify(n)!==JSON.stringify(i)&&o(n)}),[t.search,i,e,a]),[i,a=>{if(JSON.stringify(a)===JSON.stringify(i))return;const n=new URLSearchParams(t.search);let l=!1;Object.entries(e).forEach((([e,t])=>{const s=e in a?a[e]:t;a[e]!==i[e]&&(n.set(e,String(s)),s===t&&n.delete(e),l=!0)})),l&&(t.search=n.toString(),r(t))}]}},8328:(e,a,t)=>{t.r(a),t.d(a,{default:()=>T});var n=t(7294),l=t(6974),s=t(2054);const r=n.createContext({searchData:{"/search/studies":{data:null,loading:!1,error:null},"/search/samples":{data:null,loading:!1,error:null},"/search/analyses":{data:null,loading:!1,error:null}},queryParameters:{},setQueryParameters:s.Z});var c=t(402);const i=({facetName:e,header:a,includeTextFilter:t=!1})=>{const s=(0,l.TH)(),{searchData:i,queryParameters:o,setQueryParameters:m}=(0,n.useContext)(r),[u,d]=(0,n.useState)(o[e].split(",").filter(Boolean)),[v,p]=(0,n.useState)("");(0,n.useEffect)((()=>{d(o[e].split(",").filter(Boolean))}),[o,e]);const f=(0,n.useMemo)((()=>{var a,t,n;return null===(n=((null===(t=null===(a=null==i?void 0:i[s.pathname])||void 0===a?void 0:a.data)||void 0===t?void 0:t.facets)||[]).filter((a=>a.id===e)))||void 0===n?void 0:n[0]}),[s.pathname,i,e]);if((null==i?void 0:i[s.pathname].loading)&&!(null==i?void 0:i[s.pathname].isStale))return n.createElement(c.Z,null);if(null==i?void 0:i[s.pathname].error)return null;if(!f)return null;const g=a=>{const{value:t,checked:n}=a.target;let l=[...u];n&&!u.includes(t)?l.push(t):l=u.filter((e=>e!==t)),m(Object.assign(Object.assign({},o),{[e]:l.sort().join(",")}))};return n.createElement("fieldset",{className:"vf-form__fieldset vf-stack vf-stack--400"},n.createElement("legend",{className:"vf-form__legend"},a,(null==i?void 0:i[s.pathname].loading)&&(null==i?void 0:i[s.pathname].isStale)&&n.createElement(c.Z,{size:"small"})),t&&n.createElement("input",{type:"text",placeholder:"Filter the list",className:"vf-form__input",value:v,onChange:e=>p(e.target.value)}),f.facetValues.filter((({label:e,value:a})=>""===v||e.toLowerCase().includes(v.toLowerCase())||a.toLowerCase().includes(v.toLowerCase()))).map((({label:e,value:a,count:t})=>n.createElement("div",{className:"vf-form__item vf-form__item--checkbox",key:a},n.createElement("input",{type:"checkbox",name:a,value:a,id:a,className:"vf-form__checkbox",onChange:g,checked:u.includes(a)}),n.createElement("label",{className:"vf-form__label",htmlFor:a},n.createElement("span",{className:"mg-filter-checkbox-label"},e," ",n.createElement("span",{className:"mg-number"},t)))))))},o=({value:e,label:a,count:t,optionChildren:l,depth:s=0,shouldExpand:r,handleSelection:c,isSelected:i})=>{const[m,u]=(0,n.useState)(r(e));return n.createElement("div",{style:{marginLeft:.5*s+"rem"}},n.createElement("div",{className:"mg-hierarchy-selector"},(null==l?void 0:l.length)?n.createElement("button",{type:"button",className:"mg-expander",onClick:()=>u(!m)},m?"▾":"▸"):n.createElement("span",{className:"mg-hierarchy-spacer"}),n.createElement("div",{className:"vf-form__item vf-form__item--checkbox"},n.createElement("input",{type:"checkbox",name:e,value:e,id:e,className:"vf-form__checkbox",onChange:c,checked:i(e)}),n.createElement("label",{className:"vf-form__label",htmlFor:e},n.createElement("span",{className:"mg-filter-checkbox-label"},a," ",n.createElement("span",{className:"mg-number"},t))))),l&&l.length&&m&&l.map((({label:a,value:t,count:l,children:m})=>n.createElement(o,{key:`${e}/${t}`,label:a,value:`${e}/${t}`,count:l,depth:s+1,optionChildren:m,handleSelection:c,isSelected:i,shouldExpand:r}))))},m=({facetName:e,header:a})=>{const t=(0,l.TH)(),{searchData:s,queryParameters:i,setQueryParameters:m}=(0,n.useContext)(r),[u,d]=(0,n.useState)(i[e].split(",").filter(Boolean));(0,n.useEffect)((()=>{d(i[e].split(",").filter(Boolean))}),[i,e]);const v=(0,n.useMemo)((()=>{var a,n,l;return null===(l=((null===(n=null===(a=null==s?void 0:s[t.pathname])||void 0===a?void 0:a.data)||void 0===n?void 0:n.facets)||[]).filter((a=>a.id===e)))||void 0===l?void 0:l[0]}),[t.pathname,s,e]);if((null==s?void 0:s[t.pathname].loading)&&!(null==s?void 0:s[t.pathname].isStale))return n.createElement(c.Z,null);if(null==s?void 0:s[t.pathname].error)return null;if(!v)return null;const p=a=>{const{value:t,checked:n}=a.target;let l=[...u];n&&!u.includes(t)?l.push(t):l=u.filter((e=>e!==t)),m(Object.assign(Object.assign({},i),{[e]:l.sort().join(",")}))};return n.createElement("fieldset",{className:"vf-form__fieldset vf-stack vf-stack--400"},n.createElement("legend",{className:"vf-form__legend"},a,(null==s?void 0:s[t.pathname].loading)&&(null==s?void 0:s[t.pathname].isStale)&&n.createElement(c.Z,{size:"small"})),v.facetValues.map((({label:e,value:a,count:t,children:l})=>n.createElement(o,{key:a,label:e,value:a,count:t,optionChildren:l,handleSelection:p,isSelected:e=>u.includes(e),shouldExpand:e=>u.some((a=>a.startsWith(e)))}))))};var u=t(9111);const d=(e,a)=>e.max===a.max&&e.min===a.min,v=({min:e,max:a,isEnabled:t=!0,selection:l=null,onChange:s=(e=>e)})=>{const[r,c]=(0,n.useState)({min:l&&"min"in l?l.min:e,max:l&&"max"in l?l.max:a}),i=(0,n.useCallback)((0,u.Z)(s,300),[]);return(0,n.useEffect)((()=>{d(r,l)||i(r)}),[r]),(0,n.useEffect)((()=>{d(r,l)||c(l)}),[l]),n.createElement("div",{className:"mg-multirange-wrapper"},n.createElement("input",{type:"range",min:e,max:a,name:"min",value:r.min,className:"original",disabled:!t,onChange:e=>{c({min:Number(e.target.value),max:r.max})}}),n.createElement("input",{type:"range",min:e,max:a,name:"max",value:r.max,className:"ghost",disabled:!t,onChange:e=>{c({max:Number(e.target.value),min:r.min})}}),n.createElement("div",{className:"labels"},n.createElement("div",{className:"label-min"},n.createElement("span",null,Math.min(r.min,r.max))),n.createElement("div",{className:"label-max"},n.createElement("span",null,Math.max(r.min,r.max)))))},p=({id:e,onChange:a=(e=>e),isOn:t=!1})=>{const[l,s]=(0,n.useState)(t);return(0,n.useEffect)((()=>{s(t),a(t)}),[t,a]),n.createElement("div",null,n.createElement("input",{className:"mg-switch",type:"checkbox",id:e,checked:l,onChange:()=>{a(!l),s(!l)}}))},f=(0,n.memo)((()=>{const{queryParameters:e,setQueryParameters:a}=(0,n.useContext)(r),[t,l]=(0,n.useState)(!!e.temperature),[s,c]=(0,n.useState)(e.temperature.split(",").filter(Boolean).map(Number));return(0,n.useEffect)((()=>{const a=e.temperature.split(",").filter(Boolean).map(Number);c(a)}),[e.temperature]),n.createElement("fieldset",{className:"vf-form__fieldset vf-stack vf-stack--400 mg-temperature-filter"},n.createElement("legend",{className:"vf-form__legend"},"Temperature (°C)"),n.createElement("div",{className:"mg-switch-and-slider"},n.createElement(p,{id:"temp_filter",onChange:t=>{l(t),t||a(Object.assign(Object.assign({},e),{temperature:""}))},isOn:t}),n.createElement(v,{min:-20,max:100,isEnabled:t,selection:{min:(null==s?void 0:s[0])||-20,max:(null==s?void 0:s[1])||100},onChange:({min:t,max:n})=>{a(Object.assign(Object.assign({},e),{temperature:`${t},${n}`}))}})))})),g=(0,n.memo)((()=>{const{queryParameters:e,setQueryParameters:a}=(0,n.useContext)(r),[t,l]=(0,n.useState)(!!e.depth),[s,c]=(0,n.useState)(e.depth.split(",").filter(Boolean).map(Number));return(0,n.useEffect)((()=>{const a=e.depth.split(",").filter(Boolean).map(Number);c(a)}),[e.depth]),n.createElement("fieldset",{className:"vf-form__fieldset vf-stack vf-stack--400 mg-depth-filter"},n.createElement("legend",{className:"vf-form__legend"},"Depth (meters)"),n.createElement("div",{className:"mg-switch-and-slider"},n.createElement(p,{id:"temp_filter",onChange:t=>{l(t),t||a(Object.assign(Object.assign({},e),{depth:""}))},isOn:t}),n.createElement(v,{min:0,max:2e3,isEnabled:t,selection:{min:(null==s?void 0:s[0])||0,max:(null==s?void 0:s[1])||2e3},onChange:({min:t,max:n})=>{a(Object.assign(Object.assign({},e),{depth:`${t},${n}`}))}})))}));var h=t(4821);const E=()=>{const{queryParameters:e,setQueryParameters:a}=(0,n.useContext)(r),[t,l]=(0,n.useState)(e.query);return(0,n.useEffect)((()=>{l(e.query)}),[e.query]),n.createElement("div",{className:"vf-form vf-form--search vf-sidebar vf-sidebar--end mg-text-search"},n.createElement("div",{className:"vf-sidebar__inner"},n.createElement("div",{className:"vf-form__item | vf-search__item"},n.createElement("input",{type:"text",placeholder:"Enter your search terms",id:"mg-text-search",className:"vf-form__input | st-default-search-input mg-text-search-textfield",value:t,onChange:e=>{l(e.target.value)}})),n.createElement("div",{className:"vf-form__item | vf-search__item"},n.createElement("button",{type:"button",className:"vf-search__button | vf-button vf-button--primary mg-text-search-button",onClick:()=>{a(Object.assign(Object.assign({},e),{query:t}))}},n.createElement("span",{className:"vf-button__text"},"Search "),n.createElement("span",{className:"icon icon-common icon-search"})),n.createElement("button",{type:"button",className:"vf-search__button | vf-button vf-button--tertiary mg-text-search-clear",onClick:()=>{a({})}},n.createElement("span",{className:"vf-button__text"},"Clear All "),n.createElement("span",{className:"icon icon-common icon-times-circle"})))))};var b=t(9711),_=t(1699),N=t(8696),y=t(2531),x=t(8101);const C={"/search/studies":{label:"Studies",columns:[{id:"study_id",Header:"MGnify ID",accessor:e=>e.id,Cell:({cell:e})=>n.createElement(b.rU,{to:`/studies/${e.value}`},e.value)},{id:"ena_id",Header:"ENA accession",accessor:e=>{var a,t;return(null===(t=null===(a=null==e?void 0:e.fields)||void 0===a?void 0:a.ENA_PROJECT)||void 0===t?void 0:t[0])||""},Cell:({cell:e})=>n.createElement("span",null,n.createElement(y.Z,{href:x.sn+e.value},e.value))},{id:"biome",Header:"Biome",accessor:e=>{var a,t;return null===(t=null===(a=null==e?void 0:e.fields)||void 0===a?void 0:a.biome_name)||void 0===t?void 0:t.join(":")},Cell:({cell:e})=>n.createElement("span",null,e.value)},{id:"centre",Header:"Centre name",accessor:e=>{var a,t;return null===(t=null===(a=null==e?void 0:e.fields)||void 0===a?void 0:a.centre_name)||void 0===t?void 0:t[0]},Cell:({cell:e})=>n.createElement("span",null,e.value)}]},"/search/samples":{label:"Samples",columns:[{id:"sample_id",Header:"Sample",accessor:e=>e.id,Cell:({cell:e})=>n.createElement(b.rU,{to:`/samples/${e.value}`},e.value)},{id:"mgnify_id",Header:"MGnify ID",accessor:e=>{var a,t;return(null===(t=null===(a=null==e?void 0:e.fields)||void 0===a?void 0:a.METAGENOMICS_PROJECTS)||void 0===t?void 0:t[0])||""},Cell:({cell:e})=>n.createElement(b.rU,{to:`/studies/${e.value}`},e.value)},{id:"sample_name",Header:"Name",pathnames:["/search/studies"],accessor:e=>{var a,t;return null===(t=null===(a=null==e?void 0:e.fields)||void 0===a?void 0:a.name)||void 0===t?void 0:t[0]},Cell:({cell:e})=>n.createElement("span",null,e.value)},{id:"sample_description",Header:"Description",pathnames:["/search/studies"],accessor:e=>{var a,t;return null===(t=null===(a=null==e?void 0:e.fields)||void 0===a?void 0:a.description)||void 0===t?void 0:t[0]},Cell:({cell:e})=>n.createElement("span",null,e.value)}]},"/search/analyses":{label:"Analyses",columns:[{id:"analyses_id",Header:"Analysis",accessor:e=>(e.id||"").split("_"),Cell:({cell:e})=>n.createElement(b.rU,{to:`/analyses/${e.value[0]}?version=${e.value[1]}`},e.value[0])},{id:"pipeline",Header:"Pipeline version",accessor:e=>{var a,t;return(null===(t=null===(a=null==e?void 0:e.fields)||void 0===a?void 0:a.pipeline_version)||void 0===t?void 0:t[0])||""},Cell:({cell:e})=>n.createElement("span",null,n.createElement(b.rU,{to:`/pipelines/${e.value}`},e.value))},{id:"sample_id",Header:"Sample",accessor:e=>{var a,t;return null===(t=null===(a=null==e?void 0:e.fields)||void 0===a?void 0:a.METAGENOMICS_SAMPLES)||void 0===t?void 0:t[0]},Cell:({cell:e})=>n.createElement(b.rU,{to:`/samples/${e.value}`},e.value)},{id:"mgnify_id",Header:"MGnify ID",accessor:e=>{var a,t;return(null===(t=null===(a=null==e?void 0:e.fields)||void 0===a?void 0:a.METAGENOMICS_PROJECTS)||void 0===t?void 0:t[0])||""},Cell:({cell:e})=>n.createElement(b.rU,{to:`/studies/${e.value}`},e.value)},{id:"experiment",Header:"Experiment type",accessor:e=>{var a,t;return null===(t=null===(a=null==e?void 0:e.fields)||void 0===a?void 0:a.experiment_type)||void 0===t?void 0:t[0]},Cell:({cell:e})=>n.createElement("span",null,e.value)}]}},S=()=>{const{pathname:e}=(0,l.TH)(),{searchData:a}=(0,n.useContext)(r),{data:t,loading:s,error:i,isStale:o}=(null==a?void 0:a[e])||{},m=(0,n.useMemo)((()=>{var a;return null===(a=null==C?void 0:C[e])||void 0===a?void 0:a.columns}),[e]);if(s&&(!o||!t))return n.createElement(c.Z,{size:"large"});if(i||!t)return n.createElement(_.Z,{error:i});const u={data:t.entries,links:{},meta:{pagination:{pages:Math.ceil(t.hitCount/25),count:25,page:1}}};return n.createElement(N.Z,{cols:m,data:u,title:()=>{var a;return n.createElement(n.Fragment,null,(null===(a=null==C?void 0:C[e])||void 0===a?void 0:a.label)||""," ",n.createElement("span",{className:"mg-number"},t.hitCount))},initialPage:0,className:"mg-search-result",loading:s,isStale:o})};var P=t(7832),O=t(2119);const k=(e,a)=>e.map((e=>{return t=e,a[e].split(",").filter(Boolean).map((e=>`${t}:${e}`)).join(",");var t})).filter(Boolean).join(","),w=(e,a,t)=>{const n=e.map((e=>{switch(e){case"query":return a[e];case"temperature":case"depth":{const t=a[e].split(",").filter(Boolean).map(Number);return 2===t.length?`${e}:[${Math.min(...t)} TO ${Math.max(...t)}]`:""}default:return""}})).filter(Boolean);return n.length?n.join(" AND "):t},$=({to:e,label:a})=>{var t,l;const{searchData:s}=(0,n.useContext)(r);return n.createElement(n.Fragment,null,a,n.createElement("span",{className:"mg-number"},(null===(l=null===(t=null==s?void 0:s[e])||void 0===t?void 0:t.data)||void 0===l?void 0:l.hitCount)||""))},j=[{to:"/search/studies",label:()=>n.createElement($,{to:"/search/studies",label:"Studies"})},{to:"/search/samples",label:()=>n.createElement($,{to:"/search/samples",label:"Samples"})},{to:"/search/analyses",label:()=>n.createElement($,{to:"/search/analyses",label:"Analyses"})}],T=()=>{const[e,a]=(0,O.B)({query:"",centre_name:"",biome:"",temperature:"",depth:"",experiment_type:"",sequencing_method:"",location_name:"",disease_status:"",phenotype:"",organism:"",pipeline_version:"",GO:"",INTERPRO:""}),t=(0,P.Z)("metagenomics_projects",{query:w(["query"],e,"domain_source:metagenomics_projects"),size:25,fields:"ENA_PROJECT,biome_name,centre_name",facetcount:10,facetsdepth:4,facets:k(["centre_name","biome"],e)}),s=(0,P.Z)("metagenomics_samples",{query:w(["query","temperature","depth"],e,"domain_source:metagenomics_samples"),size:25,fields:"METAGENOMICS_PROJECTS,name,description",facetcount:10,facetsdepth:4,facets:k(["biome","experiment_type","location_name","disease_status","sequencing_method","phenotype"],e)}),c=(0,P.Z)("metagenomics_analyses",{query:w(["query","temperature","depth"],e,"domain_source:metagenomics_analyses"),size:25,fields:"METAGENOMICS_PROJECTS,METAGENOMICS_SAMPLES,pipeline_version,experiment_type",facetcount:10,facetsdepth:4,facets:k(["biome","organism","pipeline_version","experiment_type","GO","INTERPRO"],e)}),o=(0,n.useMemo)((()=>({searchData:{"/search/studies":t,"/search/samples":s,"/search/analyses":c},queryParameters:e,setQueryParameters:a})),[t,s,c,e,a]);return n.createElement("section",{className:"vf-content mg-page-search"},n.createElement("h2",null,"Text Search."),n.createElement(r.Provider,{value:o},n.createElement(E,null),n.createElement(h.Z,{tabs:j}),n.createElement("section",{className:"vf-grid"},n.createElement("div",{className:"vf-stack vf-stack--200"},n.createElement(l.Z5,null,n.createElement(l.AW,{path:"studies",element:n.createElement(n.Fragment,null,n.createElement(m,{facetName:"biome",header:"Biome"}),n.createElement(i,{facetName:"centre_name",header:"Centre Name",includeTextFilter:!0}))}),n.createElement(l.AW,{path:"samples",element:n.createElement(n.Fragment,null,n.createElement(f,null),n.createElement(g,null),n.createElement(m,{facetName:"biome",header:"Biome"}),n.createElement(i,{facetName:"experiment_type",header:"Experiment type"}),n.createElement(i,{facetName:"sequencing_method",header:"Sequencing method"}),n.createElement(i,{facetName:"location_name",header:"Location name",includeTextFilter:!0}),n.createElement(i,{facetName:"disease_status",header:"Disease status"}),n.createElement(i,{facetName:"phenotype",header:"Phenotype"}))}),n.createElement(l.AW,{path:"analyses",element:n.createElement(n.Fragment,null,n.createElement(f,null),n.createElement(g,null),n.createElement(m,{facetName:"organism",header:"Organism"}),n.createElement(m,{facetName:"biome",header:"Biome"}),n.createElement(i,{facetName:"pipeline_version",header:"Pipeline version"}),n.createElement(i,{facetName:"experiment_type",header:"Experiment type"}),n.createElement(i,{facetName:"GO",header:"GO",includeTextFilter:!0}),n.createElement(i,{facetName:"INTERPRO",header:"InterPro",includeTextFilter:!0}))}),n.createElement(l.AW,{index:!0,element:n.createElement(l.Fg,{to:"studies",replace:!0})}))),n.createElement(S,null))))}},8101:(e,a,t)=>{t.d(a,{sn:()=>n,bV:()=>l,QD:()=>s,s8:()=>r,mL:()=>c,gM:()=>i});const n="https://www.ebi.ac.uk/ena/browser/view/",l=" https://img.jgi.doe.gov/cgi-bin/m/main.cgi?section=TaxonDetail&page=taxonDetail&taxon_oid=",s="https://www.ncbi.nlm.nih.gov/assembly/",r="https://www.ncbi.nlm.nih.gov/biosample/?term=",c="https://www.ncbi.nlm.nih.gov/bioproject/",i="https://www.patricbrc.org/view/Genome/"}}]);
//# sourceMappingURL=328.38d06ee1.chunk.js.map