(self.webpackChunkmgportalv2=self.webpackChunkmgportalv2||[]).push([[34],{6313:(e,a,t)=>{"use strict";t.d(a,{Z:()=>i});var r=t(7294),n=t(9521),o=t(402),s=t(2119);const l=({currentPageIndex:e,pageIndex:a,gotoPage:t})=>e===a?r.createElement("li",{className:"vf-pagination__item vf-pagination__item--is-active"},r.createElement("span",{className:"vf-pagination__label","aria-current":"page"},r.createElement("span",{className:"vf-u-sr-only"},"Page "),e+1)):r.createElement("li",{className:"vf-pagination__item"},r.createElement("button",{type:"button",onClick:()=>t(a),className:"vf-button vf-button--link vf-pagination__link"},r.createElement("span",{className:"vf-u-sr-only"}," page"),a+1)),i=({cols:e,data:a,title:t,initialPage:i=0,initialPageSize:c=25,className:m="",namespace:u="",showPagination:g=!0,sortable:d=!1,loading:v=!1,isStale:p=!1})=>{const[b,f]=(0,s.B)({[`${u}page`]:1,[`${u}order`]:"",[`${u}page_size`]:c},{[`${u}page`]:Number,[`${u}page_size`]:Number}),{getTableProps:_,getTableBodyProps:h,headerGroups:y,rows:E,prepareRow:N,canPreviousPage:w,canNextPage:P,pageCount:S,gotoPage:k,setPageSize:j,nextPage:x,previousPage:O,state:{pageIndex:$,pageSize:z,sortBy:C}}=(0,n.useTable)({columns:e,data:a.data,initialState:{pageIndex:i,pageSize:b[`${u}page_size`]},pageCount:a.meta.pagination.pages,manualPagination:!0,manualSortBy:!0},n.useSortBy,n.usePagination),I=(0,r.useRef)(null),[B,q]=(0,r.useState)(!1);(0,r.useEffect)((()=>{g&&b[`${u}page`]!==$+1&&(f(Object.assign(Object.assign({},b),{[`${u}page`]:$+1})),I.current&&B&&(I.current.scrollIntoView(),q(!1)))}),[g,f,$]),(0,r.useEffect)((()=>{g&&b[`${u}page_size`]!==z&&(f(Object.assign(Object.assign({},b),{[`${u}page_size`]:z})),I.current&&B&&(I.current.scrollIntoView(),q(!1)))}),[g,f,z]),(0,r.useEffect)((()=>{if(d){const e=function(e){if(!e.length)return"";const a=e[0];return`${a.desc?"-":""}${a.id.replace(/attributes./g,"").replace(/-/g,"_")}`}(C);if(e===b[`${u}order`])return;f(Object.assign(Object.assign({},b),{[`${u}order`]:e,[`${u}page`]:1})),I.current&&B&&(I.current.scrollIntoView(),q(!1))}}),[g,f,C,d]);const Z=(0,r.useMemo)((()=>function(e,a){const t=a>1?[0,1]:[0],r=a>2?[Math.max(2,e-2)]:[];for(let e=r[0]+1;e<a-2&&r.length<5;e+=1)r.push(e);let n=[];return a>7?n=[a-2,a-1]:a>6&&(n=[a-1]),{startingPages:t,endingPages:n,adjacentPages:r,hasJumpFromStart:!!r.length&&r[0]>t[t.length-1]+1,hasJumpToEnd:!!n.length&&!!r.length&&n[0]>r[r.length-1]+1}}($,S)),[$,S]),H=e=>(q(!0),k(e)),L=e=>(q(!0),j(+e.target.value));return v&&!p?r.createElement(o.Z,{size:"small"}):r.createElement("section",null,r.createElement("div",{className:"mg-table-overlay-container"},r.createElement("div",{className:v&&p?"mg-table-overlay":void 0}),r.createElement("table",Object.assign({},_,{className:`vf-table--striped ${m}`,ref:I}),r.createElement("caption",{className:"vf-table__caption"},t),r.createElement("thead",{className:"vf-table__header"},y.map((e=>r.createElement("tr",Object.assign({},e.getHeaderGroupProps(),{className:"vf-table__row"}),e.headers.map((e=>r.createElement("th",Object.assign({},d&&e.canSort?e.getHeaderProps(e.getSortByToggleProps()):{key:e.id},{className:"vf-table__heading"}),e.render("Header"),d&&e.canSort&&r.createElement(r.Fragment,null,"Â ",r.createElement("span",null,e.isSorted?e.isSortedDesc?r.createElement("i",{className:"icon icon-common icon-sort-down"}):r.createElement("i",{className:"icon icon-common icon-sort-up"}):r.createElement("i",{className:"icon icon-common icon-sort"})))))))))),r.createElement("tbody",Object.assign({},h(),{className:"vf-table__body"}),E.map((e=>(N(e),r.createElement("tr",Object.assign({},e.getRowProps(),{className:"vf-table__row"}),e.cells.map((e=>r.createElement("td",Object.assign({},e.getCellProps(),{className:"vf-table__cell"}),e.render("Cell"))))))))))),g&&r.createElement("section",{className:"mg-table-footer"},r.createElement("label",{className:"vf-form__label"},"Page Size:",r.createElement("select",{className:"vf-form__select",value:b[`${u}page_size`],onBlur:L,onChange:L},[10,25,50].map((e=>r.createElement("option",{key:e,value:e},"Show ",e))))),r.createElement("nav",{className:"vf-pagination","aria-label":"Pagination"},r.createElement("ul",{className:"vf-pagination__list"},r.createElement("li",{className:"vf-pagination__item vf-pagination__item--previous-page"},r.createElement("button",{disabled:!w,type:"button",onClick:O,className:"vf-button vf-button--link vf-pagination__link"},"Previous",r.createElement("span",{className:"vf-u-sr-only"}," page"))),Z.startingPages.map((e=>r.createElement(l,{key:e,currentPageIndex:$,pageIndex:e,gotoPage:H}))),Z.hasJumpFromStart&&r.createElement("li",{className:"vf-pagination__item"},r.createElement("span",{className:"vf-pagination__label"},"...")),Z.adjacentPages.map((e=>r.createElement(l,{key:e,currentPageIndex:$,pageIndex:e,gotoPage:H}))),Z.hasJumpToEnd&&r.createElement("li",{className:"vf-pagination__item"},r.createElement("span",{className:"vf-pagination__label"},"...")),Z.endingPages.map((e=>r.createElement(l,{key:e,currentPageIndex:$,pageIndex:e,gotoPage:H}))),r.createElement("li",{className:"vf-pagination__item vf-pagination__item--next-page"},r.createElement("button",{disabled:!P,type:"button",onClick:x,className:"vf-button vf-button--link vf-pagination__link"},"Next",r.createElement("span",{className:"vf-u-sr-only"}," page")))))))}},2119:(e,a,t)=>{"use strict";t.d(a,{B:()=>s});var r=t(7294),n=t(1153);const o=(e,a,t)=>{const r={},n=new URLSearchParams(a);return Object.entries(e).forEach((([e,a])=>{const o=t[e]||String;r[e]=o(n.get(e)||a)})),r},s=(e,a={})=>{const t=(0,n.TH)(),s=(0,n.k6)(),l=(0,r.useMemo)((()=>o(e,t.search,a)),[e,t.search,a]),[i,c]=(0,r.useState)(l);return(0,r.useEffect)((()=>{const r=o(e,t.search,a);JSON.stringify(r)!==JSON.stringify(i)&&c(r)}),[t.search,i,e,a]),[i,a=>{if(JSON.stringify(a)===JSON.stringify(i))return;const r=new URLSearchParams(t.search);let n=!1;Object.entries(e).forEach((([e,t])=>{const o=e in a?a[e]:t;a[e]!==i[e]&&(r.set(e,String(o)),o===t&&r.delete(e),n=!0)})),n&&(t.search=r.toString(),s.push(t))}]}},8034:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>f});var r=t(7294),n=t(3727),o=t(6313),s=t(3434),l=t(7475),i=t(6744),c=t(8218),m=t(5306),u=t(3740),g=t(8110),d=t(5058);const v=({value:e,label:a})=>r.createElement("div",{style:{display:"flex",alignItems:"center"}},r.createElement("div",{style:{display:"flex"}},r.createElement("span",{className:`biome_icon icon_xxs ${(0,d.G)(e.id)}`,style:{float:"initial"}})),r.createElement("div",null,a)),p=({onSelect:e,initialValue:a})=>{const{data:t,loading:n}=(0,g.Z)("biomes/root/children?depth_gte=1&depth_lte=3&page_size=100"),[o,d]=(0,r.useState)(),p=r.useMemo((()=>{if(n)return[{label:"Loading...",value:"root"}];const e=(0,s.Z)(t.data,(e=>(0,l.Z)(e.id.replace("root:",""),":",1).join(":")));return(0,i.Z)(e,((e,a)=>({label:a,options:e.map((e=>({value:e,label:a===e.attributes["biome-name"]?`All ${a}`:e.attributes["biome-name"]})))})))}),[t,n]);return(0,r.useEffect)((()=>{a&&(null==p?void 0:p.length)&&!n&&d((0,c.Z)((0,m.Z)(p,"options"),(e=>e.value.id===a)))}),[a,p,n]),r.createElement(u.ZP,{theme:e=>Object.assign(Object.assign({},e),{borderRadius:0,border:"2px solid grey",colors:Object.assign(Object.assign({},e.colors),{primary:"var(--vf-color--blue--dark)",primary25:"var(--vf-color--blue--light)",primary50:"var(--vf-color--blue--light)",primary75:"var(--vf-color--blue)",neutral0:"var(--vf-color--neutral--0)",neutral5:"var(--vf-color--neutral--100)",neutral10:"var(--vf-color--neutral--100)",neutral20:"var(--vf-color--neutral--200)",neutral30:"var(--vf-color--neutral--300)",neutral40:"var(--vf-color--neutral--400)",neutral50:"var(--vf-color--neutral--500)",neutral60:"var(--vf-color--neutral--600)",neutral70:"var(--vf-color--neutral--700)",neutral80:"var(--vf-color--neutral--800)",neutral90:"var(--vf-color--neutral--900)",danger:"var(--vf-color--red)",dangerLight:"var(--vf-color--red--light)"})}),styles:{control:(e,a)=>Object.assign(Object.assign({},e),{border:a.isFocused?"2px solid var(--vf-color--grey--dark)":"2px solid var(--vf-color--grey)",boxShadow:a.isFocused?"0 0 0 .0625rem var(--vf-color--grey--dark)":"unset","&:hover":{border:"2px solid var(--vf-color--grey--dark)",boxShadow:"0 0 0 .0625rem var(--vf-color--grey--dark)"},color:a.isFocused?"var(--vf-color--grey--dark)":"var(--vf-color--grey)"})},placeholder:"Filter by biome",value:o,onChange:(a,t)=>{"select-option"===t.action&&(d(a),e(a.value.id))},formatOptionLabel:v,isLoading:n,isSearchable:!0,name:"biome",options:p})};var b=t(2119);const f=()=>{const[e,a]=(0,b.B)({page:1,order:"",biome:"root",page_size:25},{page:Number,page_size:Number}),[t,s]=(0,r.useState)(!1),{data:l,loading:i,isStale:c}=(0,g.Z)("studies",{page:e.page,ordering:e.order,lineage:e.biome,page_size:e.page_size}),m=r.useMemo((()=>[{id:"biome",Header:"Biome",accessor:e=>{var a,t;return null===(t=null===(a=e.relationships.biomes.data)||void 0===a?void 0:a[0])||void 0===t?void 0:t.id},Cell:({cell:e})=>r.createElement("span",{className:`biome_icon icon_xs ${(0,d.G)(e.value)}`,style:{float:"initial"}}),disableSortBy:!0},{id:"study_id",Header:"Accession",accessor:"attributes.accession",Cell:({cell:e})=>r.createElement(n.rU,{to:`/studies/${e.value}`},e.value)},{Header:"Study name",accessor:"attributes.study-name"},{Header:"Samples",accessor:"attributes.samples-count"},{id:"last_update",Header:"Last Updated",accessor:"attributes.last-update",Cell:({cell:e})=>new Date(e.value).toLocaleDateString()}]),[]);return(0,r.useEffect)((()=>{s(!!l)}),[l]),r.createElement("section",{className:"vf-content"},r.createElement("h2",null,"Browse Page."),r.createElement(p,{onSelect:t=>{return r=void 0,n=void 0,i=function*(){yield s(!1),a(Object.assign(Object.assign({},e),{biome:t,page:1})),yield l,s(!0)},new((o=void 0)||(o=Promise))((function(e,a){function t(e){try{l(i.next(e))}catch(e){a(e)}}function s(e){try{l(i.throw(e))}catch(e){a(e)}}function l(a){var r;a.done?e(a.value):(r=a.value,r instanceof o?r:new o((function(e){e(r)}))).then(t,s)}l((i=i.apply(r,n||[])).next())}));var r,n,o,i},initialValue:e.biome}),r.createElement("div",{style:{height:"2rem"}}),t&&r.createElement(o.Z,{cols:m,data:l,title:`Studies (${l.meta.pagination.count})`,initialPage:e.page-1,sortable:!0,loading:i,isStale:c}))}},5058:(e,a,t)=>{"use strict";t.d(a,{G:()=>i});const r={"root:engineered":"engineered_b"},n={"root:engineered:wastewater":"wastewater_b","root:environmental:air":"air_b","root:host-associated:amphibia":"amphibian_b","root:host-associated:arthropoda":"arthropoda_b","root:host-associated:fish":"fish_b","root:host-associated:human":"human_host_b","root:host-associated:insecta":"insect_b","root:host-associated:mammals":"mammals_b","root:host-associated:mollusca":"mollusca_b","root:host-associated:plants":"plant_host_b","root:host-associated:porifera":"porifera_b"},o={"root:environmental:aquatic:freshwater":"freshwater_b","root:environmental:aquatic:marine":"marine_b","root:environmental:aquatic:thermal springs":"hotspring_b","root:environmental:terrestrial:soil":"soil_b","root:environmental:terrestrial:volcanic":"vulcano_b","root:host-associated:human:digestive system":"human_gut_b","root:host-associated:human:skin":"skin_b"},s={"root:environmental:aquatic:freshwater:drinking water":"drinking_water_b","root:environmental:aquatic:freshwater:groundwater":"groundwater_b","root:environmental:aquatic:freshwater:ice":"ice_b","root:environmental:aquatic:freshwater:lake":"lake_b","root:environmental:aquatic:freshwater:lotic":"river_b","root:environmental:aquatic:marine:hydrothermal vents":"hydrothermal_vents_b","root:environmental:terrestrial:soil:wetlands":"wetlands_b","root:host-associated:human:digestive system:oral":"mouth_b","root:host-associated:human:respiratory system:pulmonary system":"lung_b","root:host-associated:mammals:nervous system:brain":"brain_b"},l={"root:environmental:aquatic:freshwater:groundwater:cave water":"cave_b","root:environmental:aquatic:freshwater:ice:glacier":"glacier_b","root:environmental:terrestrial:soil:grasslands":"grassland_b","root:environmental:terrestrial:soil:loam:forest soil":"forest_b","root:environmental:terrestrial:soil:sand:desert":"desert_b"};function i(e){const a=(e||"").split(":").map((e=>e.toLowerCase())),t=a.slice(0,2).join(":"),i=a.slice(0,3).join(":"),c=a.slice(0,4).join(":"),m=a.slice(0,5).join(":"),u=a.slice(0,6).join(":");return l[u]||s[m]||o[c]||n[i]||r[t]||"default_b"}}}]);
//# sourceMappingURL=34.020232a3.chunk.js.map