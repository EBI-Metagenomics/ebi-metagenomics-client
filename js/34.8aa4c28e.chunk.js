(self.webpackChunkmgportalv2=self.webpackChunkmgportalv2||[]).push([[34],{9170:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(7294),n=a(9521);const o=({currentPageIndex:e,pageIndex:t,gotoPage:a})=>e===t?r.createElement("li",{className:"vf-pagination__item vf-pagination__item--is-active"},r.createElement("span",{className:"vf-pagination__label","aria-current":"page"},r.createElement("span",{className:"vf-u-sr-only"},"Page "),e+1)):r.createElement("li",{className:"vf-pagination__item"},r.createElement("button",{type:"button",onClick:()=>a(t),className:"vf-button vf-button--link vf-pagination__link"},r.createElement("span",{className:"vf-u-sr-only"}," page"),t+1)),s=({cols:e,data:t,title:a,fetchPage:s,onChangeSort:i,initialPage:l=0})=>{const{getTableProps:c,getTableBodyProps:u,headerGroups:m,rows:g,prepareRow:d,canPreviousPage:v,canNextPage:p,pageCount:b,gotoPage:f,nextPage:h,previousPage:_,state:{pageIndex:y,pageSize:E,sortBy:N}}=(0,n.useTable)({columns:e,data:t.data,initialState:{pageIndex:l},pageCount:t.meta.pagination.pages,manualPagination:!0,manualSortBy:!0},n.useSortBy,n.usePagination);r.useEffect((()=>{s&&s(y,E)}),[s,y,E]),r.useEffect((()=>{i&&i(N)}),[i,N]);const w=r.useMemo((()=>function(e,t){const a=t>1?[0,1]:[0],r=t>2?[Math.max(2,e-2)]:[];for(let e=r[0]+1;e<t-2&&r.length<5;e+=1)r.push(e);let n=[];return t>7?n=[t-2,t-1]:t>6&&(n=[t-1]),{startingPages:a,endingPages:n,adjacentPages:r,hasJumpFromStart:!!r.length&&r[0]>a[a.length-1]+1,hasJumpToEnd:!!n.length&&!!r.length&&n[0]>r[r.length-1]+1}}(y,b)),[y,b]);return r.createElement("section",null,r.createElement("table",Object.assign({},c,{className:"vf-table--striped"}),r.createElement("caption",{className:"vf-table__caption"},a),r.createElement("thead",{className:"vf-table__header"},m.map((e=>r.createElement("tr",Object.assign({},e.getHeaderGroupProps(),{className:"vf-table__row"}),e.headers.map((e=>r.createElement("th",Object.assign({},e.getHeaderProps(e.getSortByToggleProps()),{className:"vf-table__heading"}),e.render("Header"),i&&r.createElement(r.Fragment,null,"Â ",r.createElement("span",null,e.isSorted?e.isSortedDesc?r.createElement("i",{className:"icon icon-common icon-sort-down"}):r.createElement("i",{className:"icon icon-common icon-sort-up"}):r.createElement("i",{className:"icon icon-common icon-sort"})))))))))),r.createElement("tbody",Object.assign({},u(),{className:"vf-table__body"}),g.map((e=>(d(e),r.createElement("tr",Object.assign({},e.getRowProps(),{className:"vf-table__row"}),e.cells.map((e=>r.createElement("td",Object.assign({},e.getCellProps(),{className:"vf-table__cell"}),e.render("Cell")))))))))),s&&r.createElement("nav",{className:"vf-pagination","aria-label":"Pagination"},r.createElement("ul",{className:"vf-pagination__list"},r.createElement("li",{className:"vf-pagination__item vf-pagination__item--previous-page"},r.createElement("button",{disabled:!v,type:"button",onClick:_,className:"vf-button vf-button--link vf-pagination__link"},"Previous",r.createElement("span",{className:"vf-u-sr-only"}," page"))),w.startingPages.map((e=>r.createElement(o,{key:e,currentPageIndex:y,pageIndex:e,gotoPage:f}))),w.hasJumpFromStart&&r.createElement("li",{className:"vf-pagination__item"},r.createElement("span",{className:"vf-pagination__label"},"...")),w.adjacentPages.map((e=>r.createElement(o,{key:e,currentPageIndex:y,pageIndex:e,gotoPage:f}))),w.hasJumpToEnd&&r.createElement("li",{className:"vf-pagination__item"},r.createElement("span",{className:"vf-pagination__label"},"...")),w.endingPages.map((e=>r.createElement(o,{key:e,currentPageIndex:y,pageIndex:e,gotoPage:f}))),r.createElement("li",{className:"vf-pagination__item vf-pagination__item--next-page"},r.createElement("button",{disabled:!p,type:"button",onClick:h,className:"vf-button vf-button--link vf-pagination__link"},"Next",r.createElement("span",{className:"vf-u-sr-only"}," page"))))))}},3647:(e,t,a)=>{"use strict";a.d(t,{ZB:()=>r,Yg:()=>l,XE:()=>c,nh:()=>u});var r,n=a(7294),o=a(150);!function(e){e[e.FetchError=0]="FetchError",e[e.NotOK=1]="NotOK",e[e.JSONError=2]="JSONError",e[e.NullURL=3]="NullURL"}(r||(r={}));const s={data:null,loading:!1,error:{type:r.NullURL,error:"The queried URL is null"}},i=e=>{const[t,a]=(0,n.useState)({data:null,loading:!0,error:null}),o=e=>{a((t=>Object.assign(Object.assign({},t),e)))};return(0,n.useEffect)((()=>{e?function(e,t){var a,n,o,s;a=this,n=void 0,s=function*(){let a=null,n=null;try{a=yield fetch(e)}catch(e){return void t({error:{error:e,type:r.FetchError},loading:!1})}if(a.ok){try{n=yield a.json()}catch(e){return void t({error:{error:e,type:r.JSONError},loading:!1})}t({data:n,loading:!1,error:null})}else t({error:{status:a.status,response:a,type:r.NotOK},loading:!1})},new((o=void 0)||(o=Promise))((function(e,t){function r(e){try{l(s.next(e))}catch(e){t(e)}}function i(e){try{l(s.throw(e))}catch(e){t(e)}}function l(t){var a;t.done?e(t.value):(a=t.value,a instanceof o?a:new o((function(e){e(a)}))).then(r,i)}l((s=s.apply(a,n||[])).next())}))}(e,o):a(s)}),[e]),t},l=(e,t={})=>{const a=Object.assign(Object.assign({},{format:"json",start:0}),t),r=`${o.l0}${e}?${Object.entries(a).map((([e,t])=>`${e}=${t}`)).join("&")}`;return i([null,void 0].includes(e)?null:r)},c=(e,t={})=>{const a=Object.assign(Object.assign({},{}),t);let r=`${o.hi}${e}`;return Object.keys(a).length>0&&(r+=`?${Object.entries(a).map((([e,t])=>`${e}=${t}`)).join("&")}`),i([null,void 0].includes(e)?null:r)},u=e=>i([null,void 0].includes(e)?null:`${o.tQ}${e}`)},2119:(e,t,a)=>{"use strict";a.d(t,{B:()=>s});var r=a(7294),n=a(1153);const o=(e,t,a)=>{const r={},n=new URLSearchParams(t);return Object.entries(e).forEach((([e,t])=>{const o=a[e]||String;r[e]=o(n.get(e)||t)})),r},s=(e,t={})=>{const a=(0,n.TH)(),s=(0,n.k6)(),i=(0,r.useMemo)((()=>o(e,a.search,t)),[e,a.search,t]),[l,c]=(0,r.useState)(i);return(0,r.useEffect)((()=>{const r=o(e,a.search,t);JSON.stringify(r)!==JSON.stringify(l)&&c(r)}),[a.search,l,e,t]),[l,t=>{if(JSON.stringify(t)===JSON.stringify(l))return;const r=new URLSearchParams(a.search);let n=!1;Object.entries(e).forEach((([e,a])=>{const o=e in t?t[e]:a;t[e]!==l[e]&&(r.set(e,String(o)),o===a&&r.delete(e),n=!0)})),n&&(a.search=r.toString(),s.push(a))}]}},8034:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>E});var r=a(7294),n=a(3647),o=a(9170),s=a(5058),i=a(2119),l=a(7739),c=a.n(l),u=a(1640),m=a.n(u),g=a(5161),d=a.n(g),v=a(4654),p=a.n(v),b=a(3311),f=a.n(b),h=a(3740);const _=({value:e,label:t})=>r.createElement("div",{style:{display:"flex",alignItems:"center"}},r.createElement("div",{style:{display:"flex"}},r.createElement("span",{className:`biome_icon icon_xxs ${(0,s.G)(e.id)}`,style:{float:"initial"}})),r.createElement("div",null,t)),y=({onSelect:e,initialValue:t})=>{const{data:a,loading:o}=(0,n.XE)("biomes/root/children?depth_gte=1&depth_lte=3&page_size=100"),[s,i]=(0,r.useState)(),l=r.useMemo((()=>{if(o)return[{label:"Loading...",value:"root"}];const e=c()(a.data,(e=>m()(e.id.replace("root:",""),":",1).join(":")));return d()(e,((e,t)=>({label:t,options:e.map((e=>({value:e,label:t===e.attributes["biome-name"]?`All ${t}`:e.attributes["biome-name"]})))})))}),[a,o]);return(0,r.useEffect)((()=>{t&&(null==l?void 0:l.length)&&!o&&i(f()(p()(l,"options"),(e=>e.value.id===t)))}),[t,l,o]),r.createElement(h.ZP,{theme:e=>Object.assign(Object.assign({},e),{borderRadius:0,border:"2px solid grey",colors:Object.assign(Object.assign({},e.colors),{primary:"var(--vf-color--blue--dark)",primary25:"var(--vf-color--blue--light)",primary50:"var(--vf-color--blue--light)",primary75:"var(--vf-color--blue)",neutral0:"var(--vf-color--neutral--0)",neutral5:"var(--vf-color--neutral--100)",neutral10:"var(--vf-color--neutral--100)",neutral20:"var(--vf-color--neutral--200)",neutral30:"var(--vf-color--neutral--300)",neutral40:"var(--vf-color--neutral--400)",neutral50:"var(--vf-color--neutral--500)",neutral60:"var(--vf-color--neutral--600)",neutral70:"var(--vf-color--neutral--700)",neutral80:"var(--vf-color--neutral--800)",neutral90:"var(--vf-color--neutral--900)",danger:"var(--vf-color--red)",dangerLight:"var(--vf-color--red--light)"})}),styles:{control:(e,t)=>Object.assign(Object.assign({},e),{border:t.isFocused?"2px solid var(--vf-color--grey--dark)":"2px solid var(--vf-color--grey)",boxShadow:t.isFocused?"0 0 0 .0625rem var(--vf-color--grey--dark)":"unset","&:hover":{border:"2px solid var(--vf-color--grey--dark)",boxShadow:"0 0 0 .0625rem var(--vf-color--grey--dark)"},color:t.isFocused?"var(--vf-color--grey--dark)":"var(--vf-color--grey)"})},placeholder:"Filter by biome",value:s,onChange:(t,a)=>{"select-option"===a.action&&(i(t),e(t.value.id))},formatOptionLabel:_,isLoading:o,isSearchable:!0,name:"biome",options:l})};const E=()=>{const[e,t]=(0,i.B)({page:1,order:"",biome:"root"},{page:Number}),[a,l]=(0,r.useState)(!1),{data:c}=(0,n.XE)("studies",{page:Number(e.page),ordering:e.order,lineage:e.biome,page_size:10}),u=r.useMemo((()=>[{id:"biome",Header:"Biome",accessor:e=>{var t,a;return null===(a=null===(t=e.relationships.biomes.data)||void 0===t?void 0:t[0])||void 0===a?void 0:a.id},Cell:({cell:e})=>r.createElement("span",{className:`biome_icon icon_xs ${(0,s.G)(e.value)}`,style:{float:"initial"}})},{id:"accession",Header:"Accession",accessor:"attributes.accession",Cell:({cell:e,row:t})=>r.createElement("a",{href:t.original.links.self,className:"vf-link"},e.value)},{Header:"Study name",accessor:"attributes.study-name"},{Header:"Samples",accessor:"attributes.samples-count"}]),[]);return(0,r.useEffect)((()=>{l(!!c)}),[c]),r.createElement("section",{className:"vf-content"},r.createElement("h2",null,"Browse Page."),r.createElement(y,{onSelect:a=>{return r=void 0,n=void 0,s=function*(){yield l(!1),t(Object.assign(Object.assign({},e),{biome:a,page:1})),yield c,l(!0)},new((o=void 0)||(o=Promise))((function(e,t){function a(e){try{l(s.next(e))}catch(e){t(e)}}function i(e){try{l(s.throw(e))}catch(e){t(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(a,i)}l((s=s.apply(r,n||[])).next())}));var r,n,o,s},initialValue:e.biome}),r.createElement("div",{style:{height:"2rem"}}),a&&r.createElement(o.Z,{cols:u,data:c,title:`Studies (${c.meta.pagination.count})`,fetchPage:a=>{t(Object.assign(Object.assign({},e),{page:a+1}))},onChangeSort:a=>{const r=function(e){if(!e.length)return"";const t=e[0];return`${t.desc?"-":""}${t.id.replace(/attributes./g,"").replace(/-/g,"_")}`}(a);r!==e.order&&t(Object.assign(Object.assign({},e),{order:r,page:1}))},initialPage:e.page-1}))}},5058:(e,t,a)=>{"use strict";a.d(t,{G:()=>l});const r={"root:engineered":"engineered_b"},n={"root:engineered:wastewater":"wastewater_b","root:environmental:air":"air_b","root:host-associated:amphibia":"amphibian_b","root:host-associated:arthropoda":"arthropoda_b","root:host-associated:fish":"fish_b","root:host-associated:human":"human_host_b","root:host-associated:insecta":"insect_b","root:host-associated:mammals":"mammals_b","root:host-associated:mollusca":"mollusca_b","root:host-associated:plants":"plant_host_b","root:host-associated:porifera":"porifera_b"},o={"root:environmental:aquatic:freshwater":"freshwater_b","root:environmental:aquatic:marine":"marine_b","root:environmental:aquatic:thermal springs":"hotspring_b","root:environmental:terrestrial:soil":"soil_b","root:environmental:terrestrial:volcanic":"vulcano_b","root:host-associated:human:digestive system":"human_gut_b","root:host-associated:human:skin":"skin_b"},s={"root:environmental:aquatic:freshwater:drinking water":"drinking_water_b","root:environmental:aquatic:freshwater:groundwater":"groundwater_b","root:environmental:aquatic:freshwater:ice":"ice_b","root:environmental:aquatic:freshwater:lake":"lake_b","root:environmental:aquatic:freshwater:lotic":"river_b","root:environmental:aquatic:marine:hydrothermal vents":"hydrothermal_vents_b","root:environmental:terrestrial:soil:wetlands":"wetlands_b","root:host-associated:human:digestive system:oral":"mouth_b","root:host-associated:human:respiratory system:pulmonary system":"lung_b","root:host-associated:mammals:nervous system:brain":"brain_b"},i={"root:environmental:aquatic:freshwater:groundwater:cave water":"cave_b","root:environmental:aquatic:freshwater:ice:glacier":"glacier_b","root:environmental:terrestrial:soil:grasslands":"grassland_b","root:environmental:terrestrial:soil:loam:forest soil":"forest_b","root:environmental:terrestrial:soil:sand:desert":"desert_b"};function l(e){const t=(e||"").split(":").map((e=>e.toLowerCase())),a=t.slice(0,2).join(":"),l=t.slice(0,3).join(":"),c=t.slice(0,4).join(":"),u=t.slice(0,5).join(":"),m=t.slice(0,6).join(":");return i[m]||s[u]||o[c]||n[l]||r[a]||"default_b"}}}]);
//# sourceMappingURL=34.8aa4c28e.chunk.js.map