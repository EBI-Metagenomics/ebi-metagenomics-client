"use strict";(self.webpackChunkmgportalv2=self.webpackChunkmgportalv2||[]).push([[383],{6174:(e,t,a)=>{a.d(t,{Z:()=>v});var n=a(7294),l=a(8127);const r=function(e){var t,a,r=(0,n.useRef)(0),s=(0,n.useState)(e),i=s[0],o=s[1],c=(0,n.useCallback)((function(e){cancelAnimationFrame(r.current),r.current=requestAnimationFrame((function(){o(e)}))}),[]);return t=function(){cancelAnimationFrame(r.current)},(a=(0,n.useRef)(t)).current=t,(0,l.Z)((function(){return function(){return a.current()}})),[i,c]};var s=a(6362);const i=s.jU?n.useLayoutEffect:n.useEffect;var o={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};const c=s.jU&&void 0!==window.ResizeObserver?function(){var e=(0,n.useState)(null),t=e[0],a=e[1],l=(0,n.useState)(o),r=l[0],s=l[1],c=(0,n.useMemo)((function(){return new window.ResizeObserver((function(e){if(e[0]){var t=e[0].contentRect,a=t.x,n=t.y,l=t.width,r=t.height,i=t.top,o=t.left,c=t.bottom,m=t.right;s({x:a,y:n,width:l,height:r,top:i,left:o,bottom:c,right:m})}}))}),[]);return i((function(){if(t)return c.observe(t),function(){c.disconnect()}}),[t]),[a,r]}:function(){return[s.ZT,o]},m={boxShadow:"inset 0 15px 10px -10px var(--vf-color--neutral--200)",borderTop:"1px solid var(--vf-color--neutral--200)"},u={boxShadow:"inset 0 -15px 10px -10px var(--vf-color--neutral--200)",borderBottom:"1px solid var(--vf-color--neutral--200)"},d={boxShadow:"inset 0 -15px 10px -10px var(--vf-color--neutral--200), inset 0 15px 10px -10px var(--vf-color--neutral--200)"},v=({children:e,heightPx:t,className:a})=>{const l=n.useRef(null),{y:i}=(h=l,E=r({x:0,y:0}),g=E[0],b=E[1],(0,n.useEffect)((function(){var e=function(){h.current&&b({x:h.current.scrollLeft,y:h.current.scrollTop})};return h.current&&(0,s.on)(h.current,"scroll",e,{capture:!1,passive:!0}),function(){h.current&&(0,s.S1)(h.current,"scroll",e)}}),[h]),g),[o,{height:v}]=c(),f=i>5,p=i+t<v-5;var h,E,g,b;return n.createElement("div",{ref:l,className:`${a} fixed-height-scrollable__outer`,style:Object.assign(Object.assign(Object.assign({maxHeight:`${t}px`,overflowY:"scroll"},f&&m),p&&u),p&&f&&d)},n.createElement("div",{ref:o,className:"fixed-height-scrollable__inner"},e))}},2717:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(7294),l=a(9111),r=a(5883);const s=(e,t)=>e.max===t.max&&e.min===t.min,i=({min:e,max:t,steps:a=100,precision:i=0,logarithmic:o=!1,isEnabled:c=!0,selection:m=null,onChange:u=(e=>e)})=>{const[d,v]=(0,n.useState)({min:m&&"min"in m?m.min:e,max:m&&"max"in m?m.max:t}),f=(0,n.useCallback)((0,l.Z)(u,300),[]);(0,n.useEffect)((()=>{s(d,m)||f(d)}),[d]),(0,n.useEffect)((()=>{s(d,m)||v(m)}),[m]);const p=(0,n.useMemo)((()=>o?(Math.log10(t)-Math.log10(e))/a:(t-e)/a),[a,e,t,o]),h=(0,n.useMemo)((()=>o?Math.log10(e):e),[o,e]),E=(0,n.useMemo)((()=>o?Math.log10(t):t),[o,t]);return n.createElement("div",{className:"mg-multirange-wrapper"},n.createElement("input",{type:"range",min:h,max:E,step:p,name:"min",value:o?Math.log10(d.min):d.min,className:"original",disabled:!c,onChange:e=>{const t=Number(e.target.value),a=o?Math.pow(10,t):t;v(Object.assign(Object.assign({},d),{min:(0,r.Z)(a,i)}))}}),n.createElement("input",{type:"range",min:h,max:E,step:p,name:"max",value:o?Math.log10(d.max):d.max,className:"ghost",disabled:!c,onChange:e=>{const t=Number(e.target.value),a=o?Math.pow(10,t):t;v(Object.assign(Object.assign({},d),{max:(0,r.Z)(a,i)}))}}),n.createElement("div",{className:"labels"},n.createElement("div",{className:"label-min"},n.createElement("span",null,d.min)),n.createElement("div",{className:"label-max"},n.createElement("span",null,d.max))))}},9790:(e,t,a)=>{a.d(t,{Z:()=>l});var n=a(7294);const l=({id:e,onChange:t=(e=>e),isOn:a=!1})=>{const[l,r]=(0,n.useState)(a);return(0,n.useEffect)((()=>{r(a),t(a)}),[a,t]),n.createElement("div",null,n.createElement("input",{className:"mg-switch",type:"checkbox",id:e,checked:l,onChange:()=>{t(!l),r(!l)}}))}},4821:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(7294),l=a(6974),r=a(9711);const s=({tabs:e,preservedQueryParameters:t})=>{const a=(0,l.TH)(),s=(0,n.useMemo)((()=>{if(!t)return"";const e=new URLSearchParams,n=new URLSearchParams(a.search);let l=!1;return t.forEach((t=>{n.has(t)&&e.append(t,n.get(t)),l=!0})),l?`?${e.toString()}`:""}),[t,a.search]);return n.createElement("div",{className:"vf-tabs mg-search-tabs"},n.createElement("ul",{className:"vf-tabs__list"},e.map((({label:e,to:t})=>n.createElement("li",{className:"vf-tabs__item",key:t},n.createElement(r.rU,{className:"vf-tabs__link "+(t===a.pathname||t.startsWith("#")&&t===a.hash||"#"===t&&""===a.hash?"is-active":""),to:t+s},"string"==typeof e?e:n.createElement(e,null)))))))}},7565:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(7294),l=a(7275);a(3751);const r=({content:e,children:t})=>n.createElement(l.ZP,{content:e},t)},7832:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(7294),l=a(7838),r=a(6050);const s=(e,t={})=>{const{config:a}=(0,n.useContext)(r.ZP),s=Object.assign(Object.assign({},{format:"json",start:0}),t),i=`${a.ebisearch}${e}?${Object.entries(s).map((([e,t])=>`${e}=${t}`)).join("&")}`,o=(0,l.ZP)([null,void 0].includes(e)?null:i);return o.getDownloadURL=((e,t,a)=>n=>{const l=Object.assign(Object.assign({},a),{total:n,facetcount:void 0,facetsdepth:void 0});return`${e}ebi-search-download/${t}?${Object.entries(l).filter((([,e])=>Boolean(e))).map((([e,t])=>`${e}=${t}`)).join("&")}`})(a.api,e,s),o}},5861:(e,t,a)=>{a.r(t),a.d(t,{default:()=>U});var n=a(7294),l=a(6974),r=a(2338),s=a(8341),i=a(8640);const o=function(e,t){var a;return(0,i.Z)(e,(function(e,n,l){return!(a=t(e,n,l))})),!!a};var c=a(7771),m=a(439);const u=n.createContext({searchData:{"/search/studies":{data:null,loading:!1,error:null},"/search/samples":{data:null,loading:!1,error:null},"/search/analyses":{data:null,loading:!1,error:null}}});var d=a(3329),v=a(7832),f=a(402),p=a(6174),h=a(121);const E={"/search/studies":"metagenomics_projects","/search/samples":"metagenomics_samples","/search/analyses":"metagenomics_analyses"},g=({facetName:e,header:t,includeTextFilter:a=!1,sortFn:r})=>{const s=(0,l.TH)(),{searchData:i}=(0,n.useContext)(u),[o,c]=(0,h.Z)(e,""),[m,g]=(0,n.useState)(o.split(",").filter(Boolean)),[b,_]=(0,n.useState)(""),[N,x]=(0,n.useState)(0),{data:y,loading:C}=(0,v.Z)(N>0&&E[s.pathname]||null,{query:`domain_source:${E[s.pathname]||""}`,size:0,facetcount:N,facetfields:e});(0,n.useEffect)((()=>{g(o.split(",").filter(Boolean))}),[o]);const[S,Z]=(0,n.useMemo)((()=>{var t,a,n;const l=null===(n=((null===(a=y||(null===(t=null==i?void 0:i[s.pathname])||void 0===t?void 0:t.data))||void 0===a?void 0:a.facets)||[]).filter((t=>t.id===e)))||void 0===n?void 0:n[0],o=null==l?void 0:l.facetValues,c=null==l?void 0:l.total;return o&&"function"==typeof r&&o.sort(r),[o,c]}),[s.pathname,i,e,r,y]);if(null==i?void 0:i[s.pathname].error)return null;if(!S)return n.createElement(d.Z,{loading:null==i?void 0:i[s.pathname].loading},n.createElement("fieldset",{className:"vf-form__fieldset vf-stack vf-stack--200"},n.createElement("legend",{className:"vf-form__legend"},t),n.createElement("p",{className:"vf-form__helper"},"Displayed data is not filterable by ",t,!!o&&n.createElement("button",{className:"vf-button vf-button--sm vf-button--link",type:"button",onClick:e=>{e.preventDefault(),c("")}},n.createElement("span",{className:"icon icon-common icon-times-circle"})," Clear"," ",t," filter"))));const w=e=>{const{value:t,checked:a}=e.target;let n=[...m];a&&!m.includes(t)?n.push(t):n=m.filter((e=>e!==t)),c(n.sort().join(","))};return n.createElement(p.Z,{className:"mg-filter",heightPx:600},n.createElement(d.Z,{loading:null==i?void 0:i[s.pathname].loading},n.createElement("fieldset",{className:"vf-form__fieldset vf-stack vf-stack--200"},n.createElement("legend",{className:"vf-form__legend"},t),a&&n.createElement("input",{type:"text",placeholder:"Filter the list",className:"vf-form__input",value:b,onChange:e=>_(e.target.value)}),S.filter((({label:e,value:t})=>""===b||e.toLowerCase().includes(b.toLowerCase())||t.toLowerCase().includes(b.toLowerCase()))).map((({label:e,value:t,count:a})=>n.createElement("div",{className:"vf-form__item vf-form__item--checkbox",key:t},n.createElement("input",{type:"checkbox",name:t,value:t,id:t,className:"vf-form__checkbox",onChange:w,checked:m.includes(t)}),n.createElement("label",{className:"vf-form__label",htmlFor:t},n.createElement("span",{className:"mg-filter-checkbox-label"},e," ",n.createElement("span",{className:"mg-number"},a)))))),S.length<Z&&n.createElement("div",{className:"mg-right"},n.createElement("sup",null,"* Showing ",S.length," out of ",Z," entries"),n.createElement("button",{type:"button",className:"vf-button vf-button--sm vf-button--tertiary",onClick:()=>x(N+100)},"Load more"),C&&n.createElement(f.Z,{size:"small"})))))},b=({value:e,label:t,count:a,optionChildren:l,depth:r=0,shouldExpand:s,handleSelection:i,isSelected:o})=>{const[c,m]=(0,n.useState)(s(e));return n.createElement("div",{style:{marginLeft:.5*r+"rem"}},n.createElement("div",{className:"mg-hierarchy-selector"},(null==l?void 0:l.length)?n.createElement("button",{type:"button",className:"mg-expander",onClick:()=>m(!c)},c?"▾":"▸"):n.createElement("span",{className:"mg-hierarchy-spacer"}),n.createElement("div",{className:"vf-form__item vf-form__item--checkbox"},n.createElement("input",{type:"checkbox",name:e,value:e,id:e,className:"vf-form__checkbox",onChange:i,checked:o(e)}),n.createElement("label",{className:"vf-form__label",htmlFor:e},n.createElement("span",{className:"mg-filter-checkbox-label"},t," ",n.createElement("span",{className:"mg-number"},a))))),l&&l.length&&c&&l.map((({label:t,value:a,count:l,children:c})=>n.createElement(b,{key:`${e}/${a}`,label:t,value:`${e}/${a}`,count:l,depth:r+1,optionChildren:c,handleSelection:i,isSelected:o,shouldExpand:s}))))},_=({facetName:e,header:t})=>{const a=(0,l.TH)(),{searchData:r}=(0,n.useContext)(u),[s,i]=(0,h.Z)(e,""),[o,c]=(0,n.useState)(s.split(",").filter(Boolean));(0,n.useEffect)((()=>{c(s.split(",").filter(Boolean))}),[s]);const m=(0,n.useMemo)((()=>{var t,n,l;return null===(l=((null===(n=null===(t=null==r?void 0:r[a.pathname])||void 0===t?void 0:t.data)||void 0===n?void 0:n.facets)||[]).filter((t=>t.id===e)))||void 0===l?void 0:l[0]}),[a.pathname,r,e]);if(null==r?void 0:r[a.pathname].error)return null;if(!m)return n.createElement(d.Z,{loading:null==r?void 0:r[a.pathname].loading},n.createElement("fieldset",{className:"vf-form__fieldset vf-stack vf-stack--200"},n.createElement("legend",{className:"vf-form__legend"},t),n.createElement("p",{className:"vf-form__helper"},"Displayed data is not filterable by ",t,!!s&&n.createElement("button",{className:"vf-button vf-button--sm vf-button--link",type:"button",onClick:e=>{e.preventDefault(),i("")}},n.createElement("span",{className:"icon icon-common icon-times-circle"})," Clear"," ",t," filter"))));const v=e=>{const{value:t,checked:a}=e.target;let n=[...o];a&&!o.includes(t)?n.push(t):n=o.filter((e=>e!==t)),i(n.sort().join(","))};return n.createElement(d.Z,{loading:null==r?void 0:r[a.pathname].loading},n.createElement("fieldset",{className:"vf-form__fieldset vf-stack vf-stack--200"},n.createElement("legend",{className:"vf-form__legend"},t),m.facetValues.map((({label:e,value:t,count:a,children:l})=>n.createElement(b,{key:t,label:e,value:t,count:a,optionChildren:l,handleSelection:v,isSelected:e=>o.includes(e),shouldExpand:e=>o.some((t=>t.startsWith(e)))})))))};var N=a(2717),x=a(9790);const y=(0,n.memo)((()=>{const[e,t]=(0,h.Z)("temperature",""),[a,l]=(0,n.useState)(!!e),[r,s]=(0,n.useState)(e.split(",").filter(Boolean).map(Number));return(0,n.useEffect)((()=>{const t=e.split(",").filter(Boolean).map(Number);s(t)}),[e]),n.createElement("fieldset",{className:"vf-form__fieldset vf-stack vf-stack--200 mg-temperature-filter"},n.createElement("legend",{className:"vf-form__legend"},"Temperature (°C)"),n.createElement("div",{className:"mg-switch-and-slider"},n.createElement(x.Z,{id:"temp_filter",onChange:e=>{l(e),e||t("")},isOn:a}),n.createElement(N.Z,{min:-20,max:100,isEnabled:a,selection:{min:(null==r?void 0:r[0])||-20,max:(null==r?void 0:r[1])||100},onChange:({min:e,max:a})=>{s([e,a]),t(`${e},${a}`)}})))})),C=(0,n.memo)((()=>{const[e,t]=(0,h.Z)("depth",""),[a,l]=(0,n.useState)(!!e),[r,s]=(0,n.useState)(e.split(",").filter(Boolean).map(Number));return(0,n.useEffect)((()=>{const t=e.split(",").filter(Boolean).map(Number);s(t)}),[e]),n.createElement("fieldset",{className:"vf-form__fieldset vf-stack vf-stack--200 mg-depth-filter"},n.createElement("legend",{className:"vf-form__legend"},"Depth (meters)"),n.createElement("div",{className:"mg-switch-and-slider"},n.createElement(x.Z,{id:"temp_filter",onChange:e=>{l(e),e||t("")},isOn:a}),n.createElement(N.Z,{min:0,max:2e3,isEnabled:a,selection:{min:(null==r?void 0:r[0])||0,max:(null==r?void 0:r[1])||2e3},onChange:({min:e,max:a})=>{s([e,a]),t(`${e},${a}`)}})))}));var S=a(4821),Z=a(7955);const w=()=>{const[e,t,{actionDispatcher:a}]=(0,h.Z)("query",""),[l,r]=(0,n.useState)(e);(0,n.useEffect)((()=>{r(e)}),[e]);const s=e=>{e.preventDefault(),t(l)};return n.createElement("form",{className:"vf-form vf-form--search vf-sidebar vf-sidebar--end mg-text-search",onSubmit:s},n.createElement("div",{className:"vf-sidebar__inner"},n.createElement("div",{className:"vf-form__item | vf-search__item"},n.createElement("input",{type:"text",placeholder:"Enter your search terms",id:"mg-text-search",className:"vf-form__input | st-default-search-input mg-text-search-textfield",value:l,onChange:e=>{r(e.target.value)}})),n.createElement("div",{className:"vf-form__item | vf-search__item"},n.createElement("button",{type:"submit",className:"vf-search__button | vf-button vf-button--primary mg-text-search-button",onClick:s},n.createElement("span",{className:"vf-button__text"},"Search "),n.createElement("span",{className:"icon icon-common icon-search"})),n.createElement("button",{type:"button",className:"vf-search__button | vf-button vf-button--tertiary mg-text-search-clear",onClick:()=>{a((0,Z.q_)({}))}},n.createElement("span",{className:"vf-button__text"},"Clear All "),n.createElement("span",{className:"icon icon-common icon-times-circle"})))))};var k=a(9711),M=a(1699),O=a(6313),A=a(2531),T=a(7565),$=a(8101),j=a(32);const D=({pathname:e,columns:t,selectedColumns:a,setSelectedColumns:l})=>{const[r,s]=(0,n.useState)(!1),i=t=>{const{value:n,checked:r}=t.target;l(Object.assign(Object.assign({},a),{[e]:Object.assign(Object.assign({},a[e]),{[n]:r})}))};return n.createElement(n.Fragment,null,n.createElement(j.Z,{isOpen:r,onRequestClose:()=>s(!1),contentLabel:"Example Modal"},n.createElement("h3",null,"Available Columns"),n.createElement("ul",{className:"vf-list"},t[e].columns.map((({id:t,Header:l})=>n.createElement("li",{key:t},n.createElement("input",{type:"checkbox",name:t,value:t,id:`mg-checkbox-${t}`,className:"vf-form__checkbox",onChange:i,checked:a[e][t]})," ",n.createElement("label",{className:"vf-form__label",htmlFor:`mg-checkbox-${t}`},n.createElement("span",{className:"mg-filter-checkbox-label"},l))))))),n.createElement("button",{type:"button",className:"vf-button vf-button--sm vf-button--secondary",style:{whiteSpace:"nowrap",marginBottom:"8px"},onClick:()=>s(!0)},n.createElement("span",{className:"icon icon-common icon-columns"})))},H={"/search/studies":{study_id:!0,ena_id:!0,biome:!0,name:!1,description:!1,samples:!1,analyses:!1,centre:!0},"/search/samples":{sample_id:!0,mgnify_id:!0,sample_name:!0,sample_description:!0},"/search/analyses":{analyses_id:!0,pipeline:!0,sample_id:!0,mgnify_id:!0,experiment:!0,assembly:!1,ena_run:!1,ena_wgs:!1}},P={"/search/studies":{label:"Studies",columns:[{id:"study_id",Header:"MGnify ID",accessor:e=>e.id,Cell:({cell:e})=>n.createElement(k.rU,{to:`/studies/${e.value}`},e.value)},{id:"ena_id",Header:"ENA accession",accessor:e=>{var t,a;return(null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.ENA_PROJECT)||void 0===a?void 0:a[0])||""},Cell:({cell:e})=>n.createElement("span",null,n.createElement(A.Z,{href:$.sn+e.value},e.value))},{id:"biome",Header:"Biome",accessor:e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.biome_name)||void 0===a?void 0:a.join(":")}},{id:"name",Header:"Name",accessor:e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.name)||void 0===a?void 0:a.join(", ")},className:"break-anywhere"},{id:"description",Header:"Description",accessor:e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.description)||void 0===a?void 0:a.join(". ")},className:"break-anywhere"},{id:"samples",Header:"Samples",accessor:e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.METAGENOMICS_SAMPLES)||void 0===a?void 0:a.length}},{id:"analyses",Header:"Analyses",accessor:e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.METAGENOMICS_ANALYSES)||void 0===a?void 0:a.length}},{id:"centre",Header:"Centre name",accessor:e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.centre_name)||void 0===a?void 0:a[0]}}]},"/search/samples":{label:"Samples",columns:[{id:"sample_id",Header:"Sample",accessor:e=>e.id,Cell:({cell:e})=>n.createElement(k.rU,{to:`/samples/${e.value}`},e.value)},{id:"mgnify_id",Header:"MGnify ID",accessor:e=>{var t,a;return(null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.METAGENOMICS_PROJECTS)||void 0===a?void 0:a[0])||""},Cell:({cell:e})=>n.createElement(k.rU,{to:`/studies/${e.value}`},e.value)},{id:"sample_name",Header:"Name",pathnames:["/search/studies"],accessor:e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.name)||void 0===a?void 0:a[0]},Cell:({cell:e})=>n.createElement("span",null,e.value),className:"break-anywhere"},{id:"sample_description",Header:"Description",pathnames:["/search/studies"],accessor:e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.description)||void 0===a?void 0:a[0]},Cell:({cell:e})=>n.createElement("span",null,e.value),className:"break-anywhere"}]},"/search/analyses":{label:"Analyses",columns:[{id:"analyses_id",Header:"Analysis",accessor:e=>(e.id||"").split("_"),Cell:({cell:e})=>n.createElement(k.rU,{to:`/analyses/${e.value[0]}?version=${e.value[1]}`},e.value[0])},{id:"pipeline",Header:"Pipeline version",accessor:e=>{var t,a;return(null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.pipeline_version)||void 0===a?void 0:a[0])||""},Cell:({cell:e})=>n.createElement("span",null,n.createElement(k.rU,{to:`/pipelines/${e.value}`},e.value))},{id:"sample_id",Header:"Sample",accessor:e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.METAGENOMICS_SAMPLES)||void 0===a?void 0:a[0]},Cell:({cell:e})=>n.createElement(k.rU,{to:`/samples/${e.value}`},e.value)},{id:"mgnify_id",Header:"MGnify ID",accessor:e=>{var t,a;return(null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.METAGENOMICS_PROJECTS)||void 0===a?void 0:a[0])||""},Cell:({cell:e})=>n.createElement(k.rU,{to:`/studies/${e.value}`},e.value)},{id:"experiment",Header:"Experiment type",accessor:e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.experiment_type)||void 0===a?void 0:a[0]}},{id:"assembly",Header:"Assembly",accessor:e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.ASSEMBLY)||void 0===a?void 0:a[0]}},{id:"ena_run",Header:"ENA run",accessor:e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.ENA_RUN)||void 0===a?void 0:a[0]}},{id:"ena_wgs",Header:"ENA WGS sequence set",accessor:e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.ENA_WGS_SEQUENCE_SET)||void 0===a?void 0:a[0]}}]}},L=()=>{var e;const{pathname:t}=(0,l.TH)(),{searchData:a}=(0,n.useContext)(u),{data:r,loading:s,error:i,isStale:o,getDownloadURL:c}=(null==a?void 0:a[t])||{},[m,d]=(0,n.useState)(H),v=(0,n.useMemo)((()=>{var e;return null===(e=null==P?void 0:P[t])||void 0===e?void 0:e.columns}),[t]);if(s&&(!o||!r))return n.createElement(f.Z,{size:"large"});if(i||!r)return n.createElement(M.Z,{error:i});const p={data:r.entries,links:{},meta:{pagination:{pages:Math.ceil(r.hitCount/25),count:25,page:1}}};return n.createElement(O.Z,{cols:v.filter((({id:e})=>{var a;return null===(a=null==m?void 0:m[t])||void 0===a?void 0:a[e]})),data:p,Title:n.createElement("div",null,(null===(e=null==P?void 0:P[t])||void 0===e?void 0:e.label)||""," ",n.createElement("span",{className:"mg-number"},r.hitCount)),ExtraBarComponent:n.createElement(n.Fragment,null,n.createElement(T.Z,{content:"Show/Hide Columns"},n.createElement("section",null,n.createElement(D,{pathname:t,columns:P,selectedColumns:m,setSelectedColumns:d}))),r.hitCount>100&&n.createElement(T.Z,{content:"CSV download limited to 100 results."},n.createElement("div",{className:"vf-button vf-button--sm mg-button-disabled",style:{whiteSpace:"nowrap",marginBottom:"8px"}},n.createElement("span",{className:"icon icon-common icon-download"})," Download"))),initialPage:0,className:"mg-search-result",loading:s,isStale:o,downloadURL:r.hitCount>100?null:c(r.hitCount)})},R=e=>e.map((e=>{return void 0===e?"":(t=e.name,e.value.split(",").filter(Boolean).map((e=>`${t}:${e}`)).join(","));var t})).filter(Boolean).join(","),B=(e,t)=>{if(!e.length||(a=e,n=e=>void 0===e,i=(0,c.Z)(a)?r.Z:o,l&&(0,m.Z)(a,n,l)&&(n=void 0),i(a,(0,s.Z)(n,3))))return t;var a,n,l,i;const u=e.map((e=>{switch(e.name){case"query":return e.value;case"temperature":case"depth":return(e=>{const t=e.value.split(",").filter(Boolean).map(Number);return 2===t.length?`${e.name}:[${Math.min(...t)} TO ${Math.max(...t)}]`:""})(e);default:return""}})).filter(Boolean);return u.length?u.join(" AND "):t},F=({to:e,label:t})=>{var a,l;const{searchData:r}=(0,n.useContext)(u);return n.createElement(n.Fragment,null,t,n.createElement("span",{className:"mg-number"},(null===(l=null===(a=null==r?void 0:r[e])||void 0===a?void 0:a.data)||void 0===l?void 0:l.hitCount)||"0"))},G=[{to:"/search/studies",label:()=>n.createElement(F,{to:"/search/studies",label:"Studies"})},{to:"/search/samples",label:()=>n.createElement(F,{to:"/search/samples",label:"Samples"})},{to:"/search/analyses",label:()=>n.createElement(F,{to:"/search/analyses",label:"Analyses"})}],U=()=>{const[,,{param:e}]=(0,h.Z)("query",""),[t]=(0,h.Z)("page_size",25,Number),[,,{param:a}]=(0,h.Z)("centre_name",""),[,,{param:r}]=(0,h.Z)("biome",""),[,,{param:s}]=(0,h.Z)("temperature",""),[,,{param:i}]=(0,h.Z)("depth",""),[,,{param:o}]=(0,h.Z)("experiment_type",""),[,,{param:c}]=(0,h.Z)("sequencing_method",""),[,,{param:m}]=(0,h.Z)("location_name",""),[,,{param:d}]=(0,h.Z)("disease_status",""),[,,{param:f}]=(0,h.Z)("phenotype",""),[,,{param:p}]=(0,h.Z)("organism",""),[,,{param:E}]=(0,h.Z)("pipeline_version",""),[,,{param:b}]=(0,h.Z)("GO",""),[,,{param:N}]=(0,h.Z)("INTERPRO",""),x=(0,v.Z)("metagenomics_projects",{query:B([e],"domain_source:metagenomics_projects"),size:t,fields:"ENA_PROJECT,METAGENOMICS_ANALYSES,METAGENOMICS_SAMPLES,biome_name,centre_name,description,name",facetcount:10,facetsdepth:4,facets:R([a,r])}),Z=(0,v.Z)("metagenomics_samples",{query:B([e,s,i],"domain_source:metagenomics_samples"),size:t,fields:"METAGENOMICS_PROJECTS,name,description",facetcount:10,facetsdepth:4,facets:R([r,o,m,d,c,f])}),k=(0,v.Z)("metagenomics_analyses",{query:B([e,s,i],"domain_source:metagenomics_analyses"),size:t,fields:"METAGENOMICS_PROJECTS,METAGENOMICS_SAMPLES,pipeline_version,experiment_type,ASSEMBLY,ENA_RUN,ENA_WGS_SEQUENCE_SET",facetcount:10,facetsdepth:4,facets:R([r,p,E,o,b,N])}),M=(0,n.useMemo)((()=>({searchData:{"/search/studies":x,"/search/samples":Z,"/search/analyses":k}})),[x,Z,k]);return n.createElement("section",{className:"vf-content mg-page-search"},n.createElement("h2",null,"Text Search"),n.createElement(u.Provider,{value:M},n.createElement(w,null),n.createElement(S.Z,{tabs:G,preservedQueryParameters:["query"]}),n.createElement("section",{className:"vf-grid mg-grid-search vf-u-padding__top--400"},n.createElement("div",{className:"vf-stack vf-stack--800"},n.createElement(l.Z5,null,n.createElement(l.AW,{path:"studies",element:n.createElement(n.Fragment,null,n.createElement(_,{facetName:"biome",header:"Biome"}),n.createElement(g,{facetName:"centre_name",header:"Centre Name",includeTextFilter:!0}))}),n.createElement(l.AW,{path:"samples",element:n.createElement(n.Fragment,null,n.createElement(y,null),n.createElement(C,null),n.createElement(_,{facetName:"biome",header:"Biome"}),n.createElement(g,{facetName:"experiment_type",header:"Experiment type"}),n.createElement(g,{facetName:"sequencing_method",header:"Sequencing method"}),n.createElement(g,{facetName:"location_name",header:"Location name",includeTextFilter:!0}),n.createElement(g,{facetName:"disease_status",header:"Disease status"}),n.createElement(g,{facetName:"phenotype",header:"Phenotype"}))}),n.createElement(l.AW,{path:"analyses",element:n.createElement(n.Fragment,null,n.createElement(y,null),n.createElement(C,null),n.createElement(_,{facetName:"organism",header:"Organism"}),n.createElement(_,{facetName:"biome",header:"Biome"}),n.createElement(g,{facetName:"pipeline_version",header:"Pipeline version",sortFn:({value:e},{value:t})=>Number(t)-Number(e)}),n.createElement(g,{facetName:"experiment_type",header:"Experiment type"}),n.createElement(g,{facetName:"GO",header:"GO",includeTextFilter:!0}),n.createElement(g,{facetName:"INTERPRO",header:"InterPro",includeTextFilter:!0}))}),n.createElement(l.AW,{index:!0,element:n.createElement(l.Fg,{to:"studies",replace:!0})}))),n.createElement(L,null))))}},8101:(e,t,a)=>{a.d(t,{sn:()=>n,bV:()=>l,QD:()=>r,s8:()=>s,mL:()=>i,gM:()=>o});const n="https://www.ebi.ac.uk/ena/browser/view/",l=" https://img.jgi.doe.gov/cgi-bin/m/main.cgi?section=TaxonDetail&page=taxonDetail&taxon_oid=",r="https://www.ncbi.nlm.nih.gov/assembly/",s="https://www.ncbi.nlm.nih.gov/biosample/?term=",i="https://www.ncbi.nlm.nih.gov/bioproject/",o="https://www.patricbrc.org/view/Genome/"},8640:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(149),l=a(585);const r=(s=n.Z,function(e,t){if(null==e)return e;if(!(0,l.Z)(e))return s(e,t);for(var a=e.length,n=-1,r=Object(e);++n<a&&!1!==t(r[n],n,r););return e});var s},439:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(9651),l=a(585),r=a(6009),s=a(7226);const i=function(e,t,a){if(!(0,s.Z)(a))return!1;var i=typeof t;return!!("number"==i?(0,l.Z)(a)&&(0,r.Z)(t,a.length):"string"==i&&t in a)&&(0,n.Z)(a[t],e)}},9111:(e,t,a)=>{a.d(t,{Z:()=>c});var n=a(7226),l=a(6092);const r=function(){return l.Z.Date.now()};var s=a(3782),i=Math.max,o=Math.min;const c=function(e,t,a){var l,c,m,u,d,v,f=0,p=!1,h=!1,E=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function g(t){var a=l,n=c;return l=c=void 0,f=t,u=e.apply(n,a)}function b(e){return f=e,d=setTimeout(N,t),p?g(e):u}function _(e){var a=e-v;return void 0===v||a>=t||a<0||h&&e-f>=m}function N(){var e=r();if(_(e))return x(e);d=setTimeout(N,function(e){var a=t-(e-v);return h?o(a,m-(e-f)):a}(e))}function x(e){return d=void 0,E&&l?g(e):(l=c=void 0,u)}function y(){var e=r(),a=_(e);if(l=arguments,c=this,v=e,a){if(void 0===d)return b(v);if(h)return clearTimeout(d),d=setTimeout(N,t),g(v)}return void 0===d&&(d=setTimeout(N,t)),u}return t=(0,s.Z)(t)||0,(0,n.Z)(a)&&(p=!!a.leading,m=(h="maxWait"in a)?i((0,s.Z)(a.maxWait)||0,t):m,E="trailing"in a?!!a.trailing:E),y.cancel=function(){void 0!==d&&clearTimeout(d),f=0,l=v=c=d=void 0},y.flush=function(){return void 0===d?u:x(r())},y}},5883:(e,t,a)=>{a.d(t,{Z:()=>c});var n=a(6092),l=a(620),r=a(3782),s=a(7338),i=n.Z.isFinite,o=Math.min;const c=(m=Math.round,function(e,t){if(e=(0,r.Z)(e),(t=null==t?0:o((0,l.Z)(t),292))&&i(e)){var a=((0,s.Z)(e)+"e").split("e"),n=m(a[0]+"e"+(+a[1]+t));return+((a=((0,s.Z)(n)+"e").split("e"))[0]+"e"+(+a[1]-t))}return m(e)});var m},620:(e,t,a)=>{a.d(t,{Z:()=>l});var n=a(3782);const l=function(e){var t=function(e){return e?1/0===(e=(0,n.Z)(e))||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),a=t%1;return t==t?a?t-a:t:0}},3782:(e,t,a)=>{a.d(t,{Z:()=>d});var n=/\s/;var l=/^\s+/;const r=function(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}(e)+1).replace(l,""):e};var s=a(7226),i=a(2714),o=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,m=/^0o[0-7]+$/i,u=parseInt;const d=function(e){if("number"==typeof e)return e;if((0,i.Z)(e))return NaN;if((0,s.Z)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=(0,s.Z)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var a=c.test(e);return a||m.test(e)?u(e.slice(2),a?2:8):o.test(e)?NaN:+e}}}]);
//# sourceMappingURL=383.38dd357c.chunk.js.map