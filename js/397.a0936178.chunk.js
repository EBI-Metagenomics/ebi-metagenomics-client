"use strict";(self.webpackChunkmgportalv2=self.webpackChunkmgportalv2||[]).push([[397],{2634:(e,t,a)=>{a.d(t,{Z:()=>r});var l=a(7294),n=a(121);const r=({tabs:e,queryParameter:t,defaultValue:a})=>{const[r,s]=(0,n.Z)(t,a),[,o]=(0,n.Z)("page",1,Number);return(0,l.useEffect)((()=>{""===r&&(s(a),o(1))}),[r,t]),l.createElement("div",{className:"vf-tabs mg-search-tabs"},l.createElement("ul",{className:"vf-tabs__list"},e.map((({label:e,to:t})=>l.createElement("li",{className:"vf-tabs__item",key:t},l.createElement("button",{type:"button",className:"vf-tabs__link mg-button-as-tab "+(t===r?"is-active":""),onClick:()=>{s(t),o(1)}},"string"==typeof e?e:l.createElement(e,null)))))))}},9810:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ie});var l=a(7294),n=a(6974),r=a(9711),s=a(6313),o=a(8774),i=a(8640);const c=function(e,t){var a=[];return(0,i.Z)(e,(function(e,l,n){t(e,l,n)&&a.push(e)})),a};var u=a(6503),m=a(7771);const d=function(e,t){return((0,m.Z)(e)?o.Z:c)(e,(0,u.Z)(t,3))};var b=a(2899);const g=function(e,t,a,l){for(var n=-1,r=null==e?0:e.length;++n<r;){var s=e[n];t(l,s,a(s),e)}return l},v=function(e,t,a,l){return(0,i.Z)(e,(function(e,n,r){t(l,e,a(e),r)})),l};var p=Object.prototype.hasOwnProperty;const f=(Z=function(e,t,a){p.call(e,a)?e[a].push(t):(0,b.Z)(e,a,[t])},function(e,t){var a=(0,m.Z)(e)?g:v,l=E?E():{};return a(e,Z,(0,u.Z)(t,2),l)});var Z,E,h=a(2423),y=a(4073),w=a(585);const S=function(e,t){var a=-1,l=(0,w.Z)(e)?Array(e.length):[];return(0,i.Z)(e,(function(e,n,r){l[++a]=t(e,n,r)})),l},_=function(e,t){return((0,m.Z)(e)?y.Z:S)(e,(0,u.Z)(t,3))};var N=a(1955),H=a(8694),x=a(7685),C=a(4732),$=x.Z?x.Z.isConcatSpreadable:void 0;const U=function(e){return(0,m.Z)(e)||(0,C.Z)(e)||!!($&&e&&e[$])},L=function e(t,a,l,n,r){var s=-1,o=t.length;for(l||(l=U),r||(r=[]);++s<o;){var i=t[s];a>0&&l(i)?a>1?e(i,a-1,l,n,r):(0,H.Z)(r,i):n||(r[r.length]=i)}return r},B=function(e,t){return L(_(e,t),1)};var P=a(8824),z=a(8110),T=a(5058),A=a(1373);const F=({value:e,label:t})=>l.createElement("div",{className:"vf-flag vf-flag--middle vf-flag--200"},l.createElement("div",{className:"vf-flag__media"},l.createElement("span",{className:`biome_icon icon_xxs ${(0,T.G)("string"==typeof e?e:e.id)}`,style:{float:"initial"}})),l.createElement("div",{className:"vf-flag__body"},t)),R=({onSelect:e,initialValue:t,lineageFilter:a=(()=>!0)})=>{const{data:n,loading:r}=(0,z.Z)("biomes/root/children?depth_gte=1&depth_lte=4&page_size=200"),[s,o]=(0,l.useState)(),i=l.useMemo((()=>{if(r)return[{label:"Loading...",value:"root"}];const e=d(n.data,(e=>a(e.attributes.lineage))),t=f(e,(e=>(0,h.Z)(e.id.replace("root:",""),":",1).join(":")));return _(t,((e,t)=>({label:t,options:e.map((e=>({value:e,label:`${e.attributes.lineage.replace(/[^:]/g,"").length>2?"â†³  ":""}${t===e.attributes["biome-name"]?`All ${t}`:e.attributes["biome-name"]}\n            `})))})))}),[n,r,a]);return(0,l.useEffect)((()=>{t&&(null==i?void 0:i.length)&&!r&&o((0,N.Z)(B(i,"options"),(e=>e.value.id===t)))}),[t,i,r]),l.createElement("div",{style:{flexGrow:1,maxWidth:"320px"}},l.createElement("label",{className:"vf-form__label",htmlFor:"biome-select"},"Filter biome"),l.createElement(P.ZP,{theme:A.$,styles:A.i,placeholder:"Filter by biome",value:s,onChange:(t,a)=>{"select-option"===a.action&&(o(t),e("string"==typeof t.value?t.value:t.value.id))},formatOptionLabel:F,isLoading:r,isSearchable:!0,name:"biome",inputId:"biome-select",options:i}))};var G=a(402),D=a(121);const M=()=>{const[e,t]=(0,D.Z)("page",1,Number),[a]=(0,D.Z)("order",""),[n,o]=(0,D.Z)("biome","root"),[i]=(0,D.Z)("page_size",25,Number),[c]=(0,D.Z)("search",""),[u,m]=(0,l.useState)(!1),{data:d,loading:b,isStale:g,downloadURL:v}=(0,z.Z)("studies",{page:e,ordering:a,lineage:n,page_size:i,search:c||void 0}),p=l.useMemo((()=>[{id:"biome",Header:"Biome",accessor:e=>{var t,a;return null===(a=null===(t=e.relationships.biomes.data)||void 0===t?void 0:t[0])||void 0===a?void 0:a.id},Cell:({cell:e})=>l.createElement("span",{className:`biome_icon icon_xs ${(0,T.G)(e.value)}`,style:{float:"initial"}}),disableSortBy:!0,className:"mg-biome"},{id:"study_id",Header:"Accession",accessor:"attributes.accession",Cell:({cell:e})=>l.createElement(r.rU,{to:`/studies/${e.value}`},e.value)},{Header:"Study name",accessor:"attributes.study-name"},{Header:"Samples",accessor:"attributes.samples-count"},{id:"last_update",Header:"Last Updated",accessor:"attributes.last-update",Cell:({cell:e})=>new Date(e.value).toLocaleDateString()}]),[]);return(0,l.useEffect)((()=>{m(!!d)}),[d]),!d&&b?l.createElement(G.Z,null):l.createElement("section",{className:"mg-browse-section"},l.createElement("div",null,l.createElement(R,{onSelect:e=>{return a=void 0,l=void 0,r=function*(){yield m(!1),o(e),t(1),yield d,m(!0)},new((n=void 0)||(n=Promise))((function(e,t){function s(e){try{i(r.next(e))}catch(e){t(e)}}function o(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var a;t.done?e(t.value):(a=t.value,a instanceof n?a:new n((function(e){e(a)}))).then(s,o)}i((r=r.apply(a,l||[])).next())}));var a,l,n,r},initialValue:n})),l.createElement("div",{style:{height:"2rem"}}),u&&l.createElement(s.Z,{cols:p,data:d,Title:`Studies (${d.meta.pagination.count})`,initialPage:e-1,sortable:!0,loading:b,isStale:g,showTextFilter:!0,downloadURL:v}))},k=()=>{const[e]=(0,D.Z)("page",1,Number),[t]=(0,D.Z)("order",""),[a]=(0,D.Z)("biome","root"),[n]=(0,D.Z)("page_size",25,Number),[o,i]=(0,l.useState)(!1),{data:c,loading:u,isStale:m,downloadURL:d}=(0,z.Z)("super-studies",{page:e,ordering:t,lineage:a,page_size:n}),b=l.useMemo((()=>[{Header:"Title",accessor:"attributes.title",Cell:({cell:e})=>l.createElement(r.rU,{to:`/super-studies/${e.row.original.attributes["url-slug"]}`},e.value)},{Header:"Description",accessor:"attributes.description",disableSortBy:!0}]),[]);return(0,l.useEffect)((()=>{i(!!c)}),[c]),!c&&u?l.createElement(G.Z,null):l.createElement("section",{className:"mg-browse-section"},o&&l.createElement(s.Z,{cols:b,data:c,Title:`Super Studies (${c.meta.pagination.count})`,initialPage:e-1,sortable:!0,loading:u,isStale:m,showPagination:!1,downloadURL:d}))};const W=()=>{const[e,t]=(0,D.Z)("page",1,Number),[a]=(0,D.Z)("order",""),[n,o]=(0,D.Z)("biome","root"),[i]=(0,D.Z)("page_size",25,Number),[c]=(0,D.Z)("search",""),[u,m]=(0,l.useState)(!1),{data:d,loading:b,isStale:g,downloadURL:v}=(0,z.Z)("samples",{page:e,ordering:a,lineage:n,page_size:i,search:c||void 0}),p=l.useMemo((()=>[{id:"biome",Header:"Biome",accessor:e=>{var t;return null===(t=e.relationships.biome.data)||void 0===t?void 0:t.id},Cell:({cell:e})=>l.createElement("span",{className:`biome_icon icon_xs ${(0,T.G)(e.value)}`,style:{float:"initial"}}),disableSortBy:!0,className:"mg-biome"},{Header:"Accession",accessor:"attributes.accession",Cell:({cell:e})=>l.createElement(r.rU,{to:`/samples/${e.value}`},e.value)},{Header:"Sample name",accessor:"attributes.sample-name"},{Header:"Description",accessor:"attributes.sample-desc",disableSortBy:!0},{id:"last_update",Header:"Last Updated",accessor:"attributes.last-update",Cell:({cell:e})=>new Date(e.value).toLocaleDateString()}]),[]);return(0,l.useEffect)((()=>{m(!!d)}),[d]),!d&&b?l.createElement(G.Z,null):l.createElement("section",{className:"mg-browse-section"},l.createElement("div",null,l.createElement(R,{onSelect:e=>{return a=void 0,l=void 0,r=function*(){yield m(!1),o(e),t(1),yield d,m(!0)},new((n=void 0)||(n=Promise))((function(e,t){function s(e){try{i(r.next(e))}catch(e){t(e)}}function o(e){try{i(r.throw(e))}catch(e){t(e)}}function i(t){var a;t.done?e(t.value):(a=t.value,a instanceof n?a:new n((function(e){e(a)}))).then(s,o)}i((r=r.apply(a,l||[])).next())}));var a,l,n,r},initialValue:n})),l.createElement("div",{style:{height:"2rem"}}),u&&l.createElement(s.Z,{cols:p,data:d,Title:`Samples (${d.meta.pagination.count})`,initialPage:e-1,sortable:!0,loading:b,isStale:g,showTextFilter:!0,downloadURL:v}))};var V=a(2531);const O=()=>{const[e]=(0,D.Z)("page",1,Number),[t]=(0,D.Z)("order",""),[a]=(0,D.Z)("page_size",25,Number),[n]=(0,D.Z)("search",""),[o,i]=(0,l.useState)(!1),{data:c,loading:u,isStale:m,downloadURL:d}=(0,z.Z)("publications",{page:e,ordering:t,page_size:a,search:n||void 0}),b=l.useMemo((()=>[{id:"pubmed_id",Header:"PMID",accessor:"id",Cell:({cell:e})=>l.createElement(V.Z,{href:`https://europepmc.org/abstract/MED/${e.value}`},e.value)},{Header:"Publication title",accessor:"attributes.pub-title",disableSortBy:!0},{Header:"Studies",accessor:"attributes.studies-count"},{Header:"Year of pub.",accessor:"attributes.published-year"},{Header:"Link",accessor:"attributes.pubmed-id",Cell:({cell:e})=>l.createElement(r.rU,{to:`/publications/${e.value}`,className:"vf-button vf-button--primary vf-button--sm "},"View details"),disableSortBy:!0}]),[]);return(0,l.useEffect)((()=>{i(!!c)}),[c]),!c&&u?l.createElement(G.Z,null):l.createElement("section",{className:"mg-browse-section"},o&&l.createElement(s.Z,{cols:b,data:c,Title:`Publications (${c.meta.pagination.count})`,initialPage:e-1,sortable:!0,loading:u,isStale:m,showTextFilter:!0,downloadURL:d}))};var I=a(8089);const j=()=>{const[e]=(0,D.Z)("page",1,Number),[t]=(0,D.Z)("order",""),[a]=(0,D.Z)("page_size",25,Number),[n,o]=(0,l.useState)(!1),[i,c]=(0,D.Z)("biome","root"),{data:u,loading:m,isStale:d,downloadURL:b}=(0,z.Z)("genome-catalogues",{page:e,ordering:t,page_size:a,lineage:i}),{data:g}=(0,z.Z)("genome-catalogues",{page_size:50}),v=l.useMemo((()=>[{id:"biome",Header:"Biome",accessor:e=>{var t;return null===(t=e.relationships.biome.data)||void 0===t?void 0:t.id},Cell:({cell:e})=>l.createElement("span",{className:`biome_icon icon_xs ${(0,T.G)(e.value)}`,style:{float:"initial"}}),disableSortBy:!0,className:"mg-biome"},{Header:"Catalogue ID",accessor:"id",Cell:({cell:e})=>l.createElement(r.rU,{to:`/genome-catalogues/${e.value}`},e.value)},{Header:"Catalogue name",accessor:"attributes.name"},{Header:"Catalogue version",accessor:"attributes.version"},{Header:"Species count",accessor:"attributes.genome-count"},{Header:"Total genomes count",accessor:"attributes.unclustered-genome-count"},{id:"last_update",Header:"Last Updated",accessor:"attributes.last-update",Cell:({cell:e})=>new Date(e.value).toLocaleDateString()}]),[]);return(0,l.useEffect)((()=>{o(!!u)}),[u]),!u&&m?l.createElement(G.Z,null):l.createElement("section",{className:"mg-browse-section"},l.createElement("p",{className:"vf-text-body vf-text-body--3"},"Select a catalogue in the table to browse or search its genomes."),l.createElement(R,{onSelect:e=>{return t=void 0,a=void 0,n=function*(){yield o(!1),c(e)},new((l=void 0)||(l=Promise))((function(e,r){function s(e){try{i(n.next(e))}catch(e){r(e)}}function o(e){try{i(n.throw(e))}catch(e){r(e)}}function i(t){var a;t.done?e(t.value):(a=t.value,a instanceof l?a:new l((function(e){e(a)}))).then(s,o)}i((n=n.apply(t,a||[])).next())}));var t,a,l,n},initialValue:i,lineageFilter:e=>!g.data||(0,I.Z)(g.data,(t=>t.relationships.biome.data.id.startsWith(e)))}),n&&l.createElement(s.Z,{cols:v,data:u,initialPage:e-1,sortable:!0,loading:m,isStale:d,downloadURL:b}))};var q=a(2634),K=a(5457),Y=a(1699),J=a(7565);const Q=()=>{const[e]=(0,D.Z)("page",1,Number),[t]=(0,D.Z)("order",""),[a]=(0,D.Z)("page_size",25,Number),[n]=(0,D.Z)("search",""),{data:o,loading:i,isStale:c,downloadURL:u,error:m}=(0,z.Z)("genomes",{page:e,ordering:t,page_size:a,search:n||void 0}),d=[{id:"biome_id",Header:"Biome",accessor:e=>{var t;return null===(t=e.relationships.biome.data)||void 0===t?void 0:t.id},Cell:({cell:e})=>l.createElement("span",{className:`biome_icon icon_xs ${(0,T.G)(e.value)}`,style:{float:"initial"}}),disableSortBy:!0,className:"mg-biome"},{id:"genome",Header:"Accession",accessor:"id",Cell:({cell:e})=>l.createElement(r.rU,{to:`/genomes/${e.value}`},e.value)},{id:"catalogue",Header:"Catalogue",accessor:e=>{var t;return null===(t=e.relationships.catalogue.data)||void 0===t?void 0:t.id},Cell:({cell:e})=>l.createElement(r.rU,{to:`/genome-catalogues/${e.value}`},e.value),disableSortBy:!0},{Header:"Type",accessor:"attributes.type",disableSortBy:!0},{Header:"Taxonomy",accessor:"attributes.taxon-lineage",Cell:({cell:e})=>l.createElement(l.Fragment,null,(0,K.FS)(e.value,!0)," ",l.createElement(J.Z,{content:(0,K.wK)(e.value," > ")},l.createElement("sup",null,l.createElement("span",{className:"icon icon-common icon-info"})))),disableSortBy:!0}];return i&&!c?l.createElement(G.Z,{size:"small"}):m||!o?l.createElement(Y.Z,{error:m}):l.createElement("div",null,l.createElement("p",{className:"vf-text-body vf-text-body--3"},"Search for genomes across all catalogues."),l.createElement(s.Z,{cols:d,data:o,Title:`Genomes (${o.meta.pagination.count})`,initialPage:e-1,sortable:!0,loading:i,isStale:c,showTextFilter:!0,downloadURL:u}))};var X=a(6027),ee=a(5625);const te="browse-by",ae="biome",le=[{label:"Catalogues list",to:"biome"},{label:"All genomes",to:"search-all"},{label:"Gene search",to:"gene-search"},{label:"MAG search",to:"mag-search"}],ne=()=>{const[e]=(0,D.Z)(te,ae);return l.createElement("section",{className:"mg-browse-section"},l.createElement("div",null,l.createElement("p",null,"Genome catalogues are biome-specific collections of metagenomic-assembled and isolate genomes. The latest version of each catalogue is shown on this website. Data for current and previous versions are available on the"," ",l.createElement("a",{href:"https://ftp.ebi.ac.uk/pub/databases/metagenomics/mgnify_genomes/"},"FTP server"),".")),l.createElement(q.Z,{tabs:le,queryParameter:te,defaultValue:ae}),l.createElement("div",{className:"vf-tabs-content"},l.createElement("div",{style:{height:"1rem"}}),"biome"===e&&l.createElement(j,null),"search-all"===e&&l.createElement(Q,null),"gene-search"===e&&l.createElement(X.Z,null),"mag-search"===e&&l.createElement(ee.Z,null)))},re=()=>{const[e]=(0,D.Z)("page",1,Number),[t]=(0,D.Z)("order",""),[a]=(0,D.Z)("page_size",25,Number),[n]=(0,D.Z)("search",""),[o,i]=(0,l.useState)(!1),{data:c,loading:u,isStale:m,downloadURL:d}=(0,z.Z)("biomes",{page:e,ordering:t,page_size:a,search:n||void 0}),b=l.useMemo((()=>[{id:"biome",Header:"",accessor:"id",Cell:({cell:e})=>l.createElement("span",{className:`biome_icon icon_xs ${(0,T.G)(e.value)}`}),disableSortBy:!0,className:"mg-biome"},{id:"biome_name",Header:"Biome name and lineage",accessor:e=>({lineage:e.attributes.lineage,name:e.attributes["biome-name"]}),Cell:({cell:e})=>l.createElement(l.Fragment,null,l.createElement(r.rU,{to:`/browse/studies?biome=${e.value.lineage}`},e.value.name),l.createElement("br",null),e.value.lineage)},{Header:"Samples excluding sub-lineages",id:"samples_count",accessor:e=>({lineage:e.attributes.lineage,count:e.attributes["samples-count"]}),Cell:({cell:e})=>l.createElement(r.rU,{to:`/browse/samples?biome=${e.value.lineage}`},e.value.count)}]),[]);return(0,l.useEffect)((()=>{i(!!c)}),[c]),!c&&u?l.createElement(G.Z,null):l.createElement("section",{className:"mg-browse-section"},o&&l.createElement(s.Z,{cols:b,data:c,Title:`Biomes (${c.meta.pagination.count})`,initialPage:e-1,sortable:!0,loading:u,isStale:m,showTextFilter:!0,downloadURL:d}))};var se=a(4821);const oe=[{label:"Super Studies",to:"/browse/super-studies"},{label:"Studies",to:"/browse/studies"},{label:"Samples",to:"/browse/samples"},{label:"Publications",to:"/browse/publications"},{label:"Genomes",to:"/browse/genomes"},{label:"Biomes",to:"/browse/biomes"}],ie=()=>l.createElement("section",{className:"vf-content"},l.createElement("h2",null,"Browse MGnify"),l.createElement(se.Z,{tabs:oe}),l.createElement("div",{className:"vf-u-padding__top--600"},l.createElement(n.Z5,null,l.createElement(n.AW,{path:"super-studies",element:l.createElement(k,null)}),l.createElement(n.AW,{path:"studies",element:l.createElement(M,null)}),l.createElement(n.AW,{path:"samples",element:l.createElement(W,null)}),l.createElement(n.AW,{path:"publications",element:l.createElement(O,null)}),l.createElement(n.AW,{path:"genomes",element:l.createElement(ne,null)}),l.createElement(n.AW,{path:"biomes",element:l.createElement(re,null)}),l.createElement(n.AW,{index:!0,element:l.createElement(n.Fg,{to:"super-studies",replace:!0})}))))},1955:(e,t,a)=>{a.d(t,{Z:()=>i});var l=a(6503),n=a(585),r=a(703);var s=a(620),o=Math.max;const i=(c=function(e,t,a){var n=null==e?0:e.length;if(!n)return-1;var r=null==a?0:(0,s.Z)(a);return r<0&&(r=o(n+r,0)),function(e,t,a,l){for(var n=e.length,r=a+(l?1:-1);l?r--:++r<n;)if(t(e[r],r,e))return r;return-1}(e,(0,l.Z)(t,3),r)},function(e,t,a){var s=Object(e);if(!(0,n.Z)(e)){var o=(0,l.Z)(t,3);e=(0,r.Z)(e),t=function(e){return o(s[e],e,s)}}var i=c(e,t,a);return i>-1?s[o?e[i]:i]:void 0});var c},8089:(e,t,a)=>{a.d(t,{Z:()=>c});var l=a(2338),n=a(6503),r=a(8640);const s=function(e,t){var a;return(0,r.Z)(e,(function(e,l,n){return!(a=t(e,l,n))})),!!a};var o=a(7771),i=a(439);const c=function(e,t,a){var r=(0,o.Z)(e)?l.Z:s;return a&&(0,i.Z)(e,t,a)&&(t=void 0),r(e,(0,n.Z)(t,3))}},620:(e,t,a)=>{a.d(t,{Z:()=>n});var l=a(3782);const n=function(e){var t=function(e){return e?1/0===(e=(0,l.Z)(e))||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),a=t%1;return t==t?a?t-a:t:0}},3782:(e,t,a)=>{a.d(t,{Z:()=>d});var l=/\s/;var n=/^\s+/;const r=function(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&l.test(e.charAt(t)););return t}(e)+1).replace(n,""):e};var s=a(7226),o=a(2714),i=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,u=/^0o[0-7]+$/i,m=parseInt;const d=function(e){if("number"==typeof e)return e;if((0,o.Z)(e))return NaN;if((0,s.Z)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=(0,s.Z)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var a=c.test(e);return a||u.test(e)?m(e.slice(2),a?2:8):i.test(e)?NaN:+e}}}]);
//# sourceMappingURL=397.a0936178.chunk.js.map