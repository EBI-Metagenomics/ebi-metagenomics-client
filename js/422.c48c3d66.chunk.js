"use strict";(self.webpackChunkmgportalv2=self.webpackChunkmgportalv2||[]).push([[422],{4821:(e,a,t)=>{t.d(a,{Z:()=>o});var l=t(7294),r=t(6974),s=t(9711);const o=({tabs:e,preservedQueryParameters:a})=>{const t=(0,r.TH)(),o=(0,l.useMemo)((()=>{if(!a)return"";const e=new URLSearchParams,l=new URLSearchParams(t.search);let r=!1;return a.forEach((a=>{l.has(a)&&e.append(a,l.get(a)),r=!0})),r?`?${e.toString()}`:""}),[a,t.search]);return l.createElement("div",{className:"vf-tabs mg-search-tabs"},l.createElement("ul",{className:"vf-tabs__list"},e.map((({label:e,to:a})=>l.createElement("li",{className:"vf-tabs__item",key:a},l.createElement(s.rU,{className:"vf-tabs__link "+(a===t.pathname||a.startsWith("#")&&a===t.hash||"#"===a&&""===t.hash?"is-active":""),to:a+o},"string"==typeof e?e:l.createElement(e,null)))))))}},2422:(e,a,t)=>{t.r(a),t.d(a,{default:()=>L});var l=t(7294),r=t(6974),s=t(9711),o=t(6313),i=t(9959),n=t(2423),c=t(335),u=t(1955),m=t(3624),d=t(1261),b=t(8110),v=t(5058);const g=({value:e,label:a})=>l.createElement("div",{className:"vf-flag vf-flag--middle vf-flag--200"},l.createElement("div",{className:"vf-flag__media"},l.createElement("span",{className:`biome_icon icon_xxs ${(0,v.G)("string"==typeof e?e:e.id)}`,style:{float:"initial"}})),l.createElement("div",{className:"vf-flag__body"},a)),p=({onSelect:e,initialValue:a})=>{const{data:t,loading:r}=(0,b.Z)("biomes/root/children?depth_gte=1&depth_lte=4&page_size=100"),[s,o]=(0,l.useState)(),v=l.useMemo((()=>{if(r)return[{label:"Loading...",value:"root"}];const e=(0,i.Z)(t.data,(e=>(0,n.Z)(e.id.replace("root:",""),":",1).join(":")));return(0,c.Z)(e,((e,a)=>({label:a,options:e.map((e=>({value:e,label:`${e.attributes.lineage.replace(/[^:]/g,"").length>2?"â†³  ":""}${a===e.attributes["biome-name"]?`All ${a}`:e.attributes["biome-name"]}\n            `})))})))}),[t,r]);return(0,l.useEffect)((()=>{a&&(null==v?void 0:v.length)&&!r&&o((0,u.Z)((0,m.Z)(v,"options"),(e=>e.value.id===a)))}),[a,v,r]),l.createElement("div",{style:{flexGrow:1,maxWidth:"320px"}},l.createElement("label",{className:"vf-form__label",htmlFor:"biome-select"},"Filter biome"),l.createElement(d.ZP,{theme:e=>Object.assign(Object.assign({},e),{borderRadius:0,border:"2px solid grey",colors:Object.assign(Object.assign({},e.colors),{primary:"var(--vf-color--blue--dark)",primary25:"var(--vf-color--blue--light)",primary50:"var(--vf-color--blue--light)",primary75:"var(--vf-color--blue)",neutral0:"var(--vf-color--neutral--0)",neutral5:"var(--vf-color--neutral--100)",neutral10:"var(--vf-color--neutral--100)",neutral20:"var(--vf-color--neutral--200)",neutral30:"var(--vf-color--neutral--300)",neutral40:"var(--vf-color--neutral--400)",neutral50:"var(--vf-color--neutral--500)",neutral60:"var(--vf-color--neutral--600)",neutral70:"var(--vf-color--neutral--700)",neutral80:"var(--vf-color--neutral--800)",neutral90:"var(--vf-color--neutral--900)",danger:"var(--vf-color--red)",dangerLight:"var(--vf-color--red--light)"})}),styles:{control:(e,a)=>Object.assign(Object.assign({},e),{border:a.isFocused?"2px solid var(--vf-color--grey--dark)":"2px solid var(--vf-color--grey)",boxShadow:a.isFocused?"0 0 0 .0625rem var(--vf-color--grey--dark)":"unset","&:hover":{border:"2px solid var(--vf-color--grey--dark)",boxShadow:"0 0 0 .0625rem var(--vf-color--grey--dark)"},color:a.isFocused?"var(--vf-color--grey--dark)":"var(--vf-color--grey)"})},placeholder:"Filter by biome",value:s,onChange:(a,t)=>{"select-option"===t.action&&(o(a),e("string"==typeof a.value?a.value:a.value.id))},formatOptionLabel:g,isLoading:r,isSearchable:!0,name:"biome",inputId:"biome-select",options:v}))};var f=t(402),h=t(121);const E=()=>{const[e,a]=(0,h.Z)("page",1,Number),[t]=(0,h.Z)("order",""),[r,i]=(0,h.Z)("biome","root"),[n]=(0,h.Z)("page_size",25,Number),[c]=(0,h.Z)("search",""),[u,m]=(0,l.useState)(!1),{data:d,loading:g,isStale:E,downloadURL:Z}=(0,b.Z)("studies",{page:e,ordering:t,lineage:r,page_size:n,search:c||void 0}),w=l.useMemo((()=>[{id:"biome",Header:"Biome",accessor:e=>{var a,t;return null===(t=null===(a=e.relationships.biomes.data)||void 0===a?void 0:a[0])||void 0===t?void 0:t.id},Cell:({cell:e})=>l.createElement("span",{className:`biome_icon icon_xs ${(0,v.G)(e.value)}`,style:{float:"initial"}}),disableSortBy:!0,className:"mg-biome"},{id:"study_id",Header:"Accession",accessor:"attributes.accession",Cell:({cell:e})=>l.createElement(s.rU,{to:`/studies/${e.value}`},e.value)},{Header:"Study name",accessor:"attributes.study-name"},{Header:"Samples",accessor:"attributes.samples-count"},{id:"last_update",Header:"Last Updated",accessor:"attributes.last-update",Cell:({cell:e})=>new Date(e.value).toLocaleDateString()}]),[]);return(0,l.useEffect)((()=>{m(!!d)}),[d]),!d&&g?l.createElement(f.Z,null):l.createElement("section",{className:"mg-browse-section"},l.createElement("div",null,l.createElement(p,{onSelect:e=>{return t=void 0,l=void 0,s=function*(){yield m(!1),i(e),a(1),yield d,m(!0)},new((r=void 0)||(r=Promise))((function(e,a){function o(e){try{n(s.next(e))}catch(e){a(e)}}function i(e){try{n(s.throw(e))}catch(e){a(e)}}function n(a){var t;a.done?e(a.value):(t=a.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,i)}n((s=s.apply(t,l||[])).next())}));var t,l,r,s},initialValue:r})),l.createElement("div",{style:{height:"2rem"}}),u&&l.createElement(o.Z,{cols:w,data:d,Title:`Studies (${d.meta.pagination.count})`,initialPage:e-1,sortable:!0,loading:g,isStale:E,showTextFilter:!0,downloadURL:Z}))},Z=()=>{const[e]=(0,h.Z)("page",1,Number),[a]=(0,h.Z)("order",""),[t]=(0,h.Z)("biome","root"),[r]=(0,h.Z)("page_size",25,Number),[i,n]=(0,l.useState)(!1),{data:c,loading:u,isStale:m,downloadURL:d}=(0,b.Z)("super-studies",{page:e,ordering:a,lineage:t,page_size:r}),v=l.useMemo((()=>[{Header:"Title",accessor:"attributes.title",Cell:({cell:e})=>l.createElement(s.rU,{to:`/super-studies/${e.row.original.attributes["url-slug"]}`},e.value)},{Header:"Description",accessor:"attributes.description",disableSortBy:!0}]),[]);return(0,l.useEffect)((()=>{n(!!c)}),[c]),!c&&u?l.createElement(f.Z,null):l.createElement("section",{className:"mg-browse-section"},i&&l.createElement(o.Z,{cols:v,data:c,Title:`Super Studies (${c.meta.pagination.count})`,initialPage:e-1,sortable:!0,loading:u,isStale:m,showPagination:!1,downloadURL:d}))};const w=()=>{const[e,a]=(0,h.Z)("page",1,Number),[t]=(0,h.Z)("order",""),[r,i]=(0,h.Z)("biome","root"),[n]=(0,h.Z)("page_size",25,Number),[c]=(0,h.Z)("search",""),[u,m]=(0,l.useState)(!1),{data:d,loading:g,isStale:E,downloadURL:Z}=(0,b.Z)("samples",{page:e,ordering:t,lineage:r,page_size:n,search:c||void 0}),w=l.useMemo((()=>[{id:"biome",Header:"Biome",accessor:e=>{var a;return null===(a=e.relationships.biome.data)||void 0===a?void 0:a.id},Cell:({cell:e})=>l.createElement("span",{className:`biome_icon icon_xs ${(0,v.G)(e.value)}`,style:{float:"initial"}}),disableSortBy:!0,className:"mg-biome"},{Header:"Accession",accessor:"attributes.accession",Cell:({cell:e})=>l.createElement(s.rU,{to:`/samples/${e.value}`},e.value)},{Header:"Sample name",accessor:"attributes.sample-name"},{Header:"Description",accessor:"attributes.sample-desc",disableSortBy:!0},{id:"last_update",Header:"Last Updated",accessor:"attributes.last-update",Cell:({cell:e})=>new Date(e.value).toLocaleDateString()}]),[]);return(0,l.useEffect)((()=>{m(!!d)}),[d]),!d&&g?l.createElement(f.Z,null):l.createElement("section",{className:"mg-browse-section"},l.createElement("div",null,l.createElement(p,{onSelect:e=>{return t=void 0,l=void 0,s=function*(){yield m(!1),i(e),a(1),yield d,m(!0)},new((r=void 0)||(r=Promise))((function(e,a){function o(e){try{n(s.next(e))}catch(e){a(e)}}function i(e){try{n(s.throw(e))}catch(e){a(e)}}function n(a){var t;a.done?e(a.value):(t=a.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,i)}n((s=s.apply(t,l||[])).next())}));var t,l,r,s},initialValue:r})),l.createElement("div",{style:{height:"2rem"}}),u&&l.createElement(o.Z,{cols:w,data:d,Title:`Samples (${d.meta.pagination.count})`,initialPage:e-1,sortable:!0,loading:g,isStale:E,showTextFilter:!0,downloadURL:Z}))};var y=t(2531);const S=()=>{const[e]=(0,h.Z)("page",1,Number),[a]=(0,h.Z)("order",""),[t]=(0,h.Z)("page_size",25,Number),[r]=(0,h.Z)("search",""),[i,n]=(0,l.useState)(!1),{data:c,loading:u,isStale:m,downloadURL:d}=(0,b.Z)("publications",{page:e,ordering:a,page_size:t,search:r||void 0}),v=l.useMemo((()=>[{id:"pubmed_id",Header:"PMID",accessor:"id",Cell:({cell:e})=>l.createElement(y.Z,{href:`https://europepmc.org/abstract/MED/${e.value}`},e.value)},{Header:"Publication title",accessor:"attributes.pub-title",disableSortBy:!0},{Header:"Studies",accessor:"attributes.studies-count"},{Header:"Year of pub.",accessor:"attributes.published-year"},{Header:"Link",accessor:"attributes.pubmed-id",Cell:({cell:e})=>l.createElement(s.rU,{to:`/publications/${e.value}`,className:"vf-button vf-button--primary vf-button--sm "},"View details"),disableSortBy:!0}]),[]);return(0,l.useEffect)((()=>{n(!!c)}),[c]),!c&&u?l.createElement(f.Z,null):l.createElement("section",{className:"mg-browse-section"},i&&l.createElement(o.Z,{cols:v,data:c,Title:`Publications (${c.meta.pagination.count})`,initialPage:e-1,sortable:!0,loading:u,isStale:m,showTextFilter:!0,downloadURL:d}))},_=()=>{const[e]=(0,h.Z)("page",1,Number),[a]=(0,h.Z)("order",""),[t]=(0,h.Z)("page_size",25,Number),[r,i]=(0,l.useState)(!1),{data:n,loading:c,isStale:u,downloadURL:m}=(0,b.Z)("genome-catalogues",{page:e,ordering:a,page_size:t}),d=l.useMemo((()=>[{id:"biome",Header:"Biome",accessor:e=>{var a;return null===(a=e.relationships.biome.data)||void 0===a?void 0:a.id},Cell:({cell:e})=>l.createElement("span",{className:`biome_icon icon_xs ${(0,v.G)(e.value)}`,style:{float:"initial"}}),disableSortBy:!0,className:"mg-biome"},{Header:"Catalogue ID",accessor:"id",Cell:({cell:e})=>l.createElement(s.rU,{to:`/genome-catalogues/${e.value}`},e.value)},{Header:"Catalogue name",accessor:"attributes.name"},{Header:"Catalogue version",accessor:"attributes.version"},{Header:"Genomes count",accessor:"attributes.genome-count"},{id:"last_update",Header:"Last Updated",accessor:"attributes.last-update",Cell:({cell:e})=>new Date(e.value).toLocaleDateString()}]),[]);return(0,l.useEffect)((()=>{i(!!n)}),[n]),!n&&c?l.createElement(f.Z,null):l.createElement("section",{className:"mg-browse-section"},l.createElement("div",null,l.createElement("p",null,"Genome catalogues are biome-specific collections of metagenomic-assembled and isolate genomes. The latest version of each catalogue is shown on this website. Data for current and previous versions are available on the"," ",l.createElement("a",{href:"https://ftp.ebi.ac.uk/pub/databases/metagenomics/mgnify_genomes/"},"FTP server"),"."),l.createElement("p",null,"Select a catalogue in the table to browse or search its genomes.")),l.createElement("div",{style:{height:"2rem"}}),r&&l.createElement(o.Z,{cols:d,data:n,initialPage:e-1,sortable:!0,loading:c,isStale:u,downloadURL:m}))},N=()=>{const[e]=(0,h.Z)("page",1,Number),[a]=(0,h.Z)("order",""),[t]=(0,h.Z)("page_size",25,Number),[r]=(0,h.Z)("search",""),[i,n]=(0,l.useState)(!1),{data:c,loading:u,isStale:m,downloadURL:d}=(0,b.Z)("biomes",{page:e,ordering:a,page_size:t,search:r||void 0}),g=l.useMemo((()=>[{id:"biome",Header:"",accessor:"id",Cell:({cell:e})=>l.createElement("span",{className:`biome_icon icon_xs ${(0,v.G)(e.value)}`}),disableSortBy:!0,className:"mg-biome"},{id:"biome_name",Header:"Biome name and lineage",accessor:e=>({lineage:e.attributes.lineage,name:e.attributes["biome-name"]}),Cell:({cell:e})=>l.createElement(l.Fragment,null,l.createElement(s.rU,{to:`/browse/studies?biome=${e.value.lineage}`},e.value.name),l.createElement("br",null),e.value.lineage)},{Header:"Samples excluding sub-lineages",id:"samples_count",accessor:e=>({lineage:e.attributes.lineage,count:e.attributes["samples-count"]}),Cell:({cell:e})=>l.createElement(s.rU,{to:`/browse/samples?biome=${e.value.lineage}`},e.value.count)}]),[]);return(0,l.useEffect)((()=>{n(!!c)}),[c]),!c&&u?l.createElement(f.Z,null):l.createElement("section",{className:"mg-browse-section"},i&&l.createElement(o.Z,{cols:g,data:c,Title:`Biomes (${c.meta.pagination.count})`,initialPage:e-1,sortable:!0,loading:u,isStale:m,showTextFilter:!0,downloadURL:d}))};var H=t(4821);const x=[{label:"Super Studies",to:"/browse/super-studies"},{label:"Studies",to:"/browse/studies"},{label:"Samples",to:"/browse/samples"},{label:"Publications",to:"/browse/publications"},{label:"Genomes",to:"/browse/genomes"},{label:"Biomes",to:"/browse/biomes"}],L=()=>l.createElement("section",{className:"vf-content"},l.createElement("h2",null,"Browse MGnify"),l.createElement(H.Z,{tabs:x}),l.createElement("div",{className:"vf-u-padding__top--600"},l.createElement(r.Z5,null,l.createElement(r.AW,{path:"super-studies",element:l.createElement(Z,null)}),l.createElement(r.AW,{path:"studies",element:l.createElement(E,null)}),l.createElement(r.AW,{path:"samples",element:l.createElement(w,null)}),l.createElement(r.AW,{path:"publications",element:l.createElement(S,null)}),l.createElement(r.AW,{path:"genomes",element:l.createElement(_,null)}),l.createElement(r.AW,{path:"biomes",element:l.createElement(N,null)}),l.createElement(r.AW,{index:!0,element:l.createElement(r.Fg,{to:"super-studies",replace:!0})}))))}}]);
//# sourceMappingURL=422.c48c3d66.chunk.js.map