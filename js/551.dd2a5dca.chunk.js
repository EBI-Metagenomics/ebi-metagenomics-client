"use strict";(self.webpackChunkmgportalv2=self.webpackChunkmgportalv2||[]).push([[551],{2551:(e,t,a)=>{a.r(t),a.d(t,{default:()=>E});var n=a(7294),r=a(7762),l=a(4897),o=a.n(l),s=a(6050),m=a(964),c=a(402),u=a(2531);const i={biosynthetic:"Core biosynthetic gene","biosynthetic-additional":"Additional biosynthetic gene",regulatory:"Regulatory genes",transport:"Transport-related gene",resistance:"Resistance genes"},g=({value:e,url:t})=>{if(!e)return null;const a=e.split(",");return n.createElement("ul",{className:"vf-list"},a.map((e=>n.createElement("li",{key:e},t?n.createElement(u.Z,{href:`${t}${e}`},e):e))))},p=e=>{const t="string"==typeof e.start?parseInt(e.start,10):e.start,a="string"==typeof e.end?parseInt(e.end,10):e.end;if(!Number.isNaN(t)&&!Number.isNaN(a)&&null!==t&&null!==a)return Math.ceil((a-t)/3)},d=({data:e})=>{const{name:t,gene:a,product:r,properties:l}=(e=>{const t=e.reduce(((e,t)=>(t.name&&(e[t.name.toLowerCase()]=t.value),e)),{}),a={title:"Functional annotation",data:[{name:"E.C Number",Value:t.ecnumber&&(()=>n.createElement(g,{value:t.ecnumber,url:"https://enzyme.expasy.org/EC/"}))},{name:"Pfam",Value:t.pfam&&(()=>n.createElement(g,{value:t.pfam,url:"https://pfam.xfam.org/family/"}))},{name:"KEGG",Value:t.kegg&&(()=>n.createElement(g,{value:t.kegg,url:"https://www.genome.jp/dbget-bin/www_bget?"}))},{name:"eggNOG",Value:t.eggnog&&decodeURIComponent(t.eggnog)},{name:"COG",Value:t.cog&&(()=>n.createElement(g,{value:t.cog}))},{name:"GO",Value:t.go&&(()=>n.createElement(g,{value:t.go,url:"https://www.ebi.ac.uk/ols/search?q="}))},{name:"InterPro",Value:t.interpro&&(()=>n.createElement(g,{value:t.interpro,url:"https://www.ebi.ac.uk/interpro/entry/InterPro/'"}))},{name:"Gene type",Value:t.as_type&&(i[t.as_type]||t.as_type)},{name:"Notes",Value:t.as_notes&&(()=>n.createElement(g,{value:decodeURIComponent(t.as_notes)}))},{name:"Cluster",Value:t.as_gene_clusters&&(()=>n.createElement(g,{value:t.as_gene_clusters}))}]},r={title:"Feature details",data:[{name:"Type",Value:t.type},{name:"Inference",Value:t.inference},{name:"Start / End",Value:`${t.start}/${t.end}`},{name:"Protein length",Value:String(p(t))}]};return{name:t.id,gene:t.gene,product:t.product,properties:[a,r]}})(e);return n.createElement(n.Fragment,null,n.createElement("table",{className:"stack hover igv-popover-table"},n.createElement("caption",{className:"igv-popover-section-header"},"Feature"),n.createElement("tbody",null,t&&n.createElement("tr",null,n.createElement("td",{className:"igv-popover-table-td-name"},"ID"),n.createElement("td",null,t)),a&&n.createElement("tr",null,n.createElement("td",{className:"igv-popover-table-td-name"},"Gene"),n.createElement("td",null,n.createElement("em",null,a))),r&&n.createElement("tr",null,n.createElement("td",{className:"igv-popover-table-td-name"},"Product"),n.createElement("td",null,r)))),l.map((e=>n.createElement("table",{className:"stack hover igv-popover-table",key:e.title},n.createElement("caption",{className:"igv-popover-section-header"},e.title),n.createElement("tbody",null,e.data.map((({name:e,Value:t})=>t&&n.createElement("tr",{key:e},n.createElement("td",{className:"igv-popover-table-td-name"},e),n.createElement("td",null,"string"==typeof t?t:n.createElement(t,null))))).filter(Boolean))))))},E=()=>{const[e,t]=(0,n.useState)(!0),a=(0,m.Z)(),{config:l}=(0,n.useContext)(s.Z),u=[{type:"mgnify-annotation",url:`${l.api}genomes/${a}/downloads/${a}.gff`,format:"gff3",label:"Functional annotation",displayMode:"EXPANDED",colorAttributes:[["Default",""],["COG","COG"],["Product","product"],["Pfam","Pfam"],["KEGG","KEGG"],["InterPro","InterPro"],["eggNOG","eggNOG"]]}],i={showChromosomeWidget:!1,showTrackLabelButton:!0,showTrackLabels:!0,showCenterGuide:!1,showAllChromosomes:!0,reference:{fastaURL:`${l.api}genomes/${a}/downloads/${a}.fna`,indexURL:`${l.api}genomes/${a}/downloads/${a}.fna.fai`},tracks:u,showLegend:!0,legendParent:"#genome-browser"},g=(0,n.useRef)(null);return(0,n.useEffect)((()=>{o().createBrowser(g.current,i).then((e=>{t(!1),e.on("trackclick",((e,t)=>r.renderToString(n.createElement(d,{data:t}))))}))}),[]),n.createElement("div",{id:"genome-browser"},e&&n.createElement(c.Z,{size:"large"}),n.createElement("div",{className:"genome-browser-container",ref:g}))}}}]);
//# sourceMappingURL=551.dd2a5dca.chunk.js.map