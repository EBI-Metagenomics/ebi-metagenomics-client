{"version":3,"file":"js/569.fe6f92b5.chunk.js","mappings":"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","sources":["webpack://mgportalv2/./node_modules/dexie-react-hooks/dist/dexie-react-hooks.js","webpack://mgportalv2/./node_modules/exenv/index.js","webpack://mgportalv2/./node_modules/react-lifecycles-compat/react-lifecycles-compat.es.js","webpack://mgportalv2/./node_modules/react-modal/lib/components/Modal.js","webpack://mgportalv2/./node_modules/react-modal/lib/components/ModalPortal.js","webpack://mgportalv2/./node_modules/react-modal/lib/helpers/ariaAppHider.js","webpack://mgportalv2/./node_modules/react-modal/lib/helpers/bodyTrap.js","webpack://mgportalv2/./node_modules/react-modal/lib/helpers/classList.js","webpack://mgportalv2/./node_modules/react-modal/lib/helpers/focusManager.js","webpack://mgportalv2/./node_modules/react-modal/lib/helpers/portalOpenInstances.js","webpack://mgportalv2/./node_modules/react-modal/lib/helpers/safeHTMLElement.js","webpack://mgportalv2/./node_modules/react-modal/lib/helpers/scopeTab.js","webpack://mgportalv2/./node_modules/react-modal/lib/helpers/tabbable.js","webpack://mgportalv2/./node_modules/react-modal/lib/index.js","webpack://mgportalv2/./node_modules/warning/warning.js","webpack://mgportalv2/./node_modules/dexie/dist/modern/dexie.mjs"],"sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('dexie'), require('react')) :\n    typeof define === 'function' && define.amd ? define(['exports', 'dexie', 'react'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.DexieReactHooks = {}, global.Dexie, global.React));\n}(this, (function (exports, dexie, React) { 'use strict';\n\n    function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\n    var React__default = /*#__PURE__*/_interopDefaultLegacy(React);\n\n    function useObservable(observableFactory, arg2, arg3) {\n        // Resolve vars from overloading variants of this function:\n        var deps;\n        var defaultResult;\n        if (typeof observableFactory === 'function') {\n            deps = arg2 || [];\n            defaultResult = arg3;\n        }\n        else {\n            deps = [];\n            defaultResult = arg2;\n        }\n        // Create a ref that keeps the state we need\n        var monitor = React__default['default'].useRef({\n            hasResult: false,\n            result: defaultResult,\n            error: null,\n        });\n        // We control when component should rerender. Make triggerUpdate\n        // as examplified on React's docs at:\n        // https://reactjs.org/docs/hooks-faq.html#is-there-something-like-forceupdate\n        var _a = React__default['default'].useReducer(function (x) { return x + 1; }, 0); _a[0]; var triggerUpdate = _a[1];\n        // Memoize the observable based on deps\n        var observable = React__default['default'].useMemo(function () {\n            // Make it remember previous subscription's default value when\n            // resubscribing.\n            var observable = typeof observableFactory === 'function'\n                ? observableFactory()\n                : observableFactory;\n            if (!observable || typeof observable.subscribe !== 'function') {\n                if (observableFactory === observable) {\n                    throw new TypeError(\"Given argument to useObservable() was neither a valid observable nor a function.\");\n                }\n                else {\n                    throw new TypeError(\"Observable factory given to useObservable() did not return a valid observable.\");\n                }\n            }\n            if (!monitor.current.hasResult) {\n                // Optimize for BehaviorSubject and other observables implementing getValue():\n                if (typeof observable.getValue === 'function') {\n                    monitor.current.result = observable.getValue();\n                    monitor.current.hasResult = true;\n                }\n                else {\n                    // Find out if the observable has a current value: try get it by subscribing and\n                    // unsubscribing synchronously\n                    var subscription = observable.subscribe(function (val) {\n                        monitor.current.result = val;\n                        monitor.current.hasResult = true;\n                    });\n                    // Unsubscribe directly. We only needed any synchronous value if it was possible.\n                    if (typeof subscription === 'function') {\n                        subscription();\n                    }\n                    else {\n                        subscription.unsubscribe();\n                    }\n                }\n            }\n            return observable;\n        }, deps);\n        // Integrate with react devtools:\n        React__default['default'].useDebugValue(monitor.current.result);\n        // Subscribe to the observable\n        React__default['default'].useEffect(function () {\n            var subscription = observable.subscribe(function (val) {\n                var current = monitor.current;\n                if (current.error !== null || current.result !== val) {\n                    current.error = null;\n                    current.result = val;\n                    current.hasResult = true;\n                    triggerUpdate();\n                }\n            }, function (err) {\n                var current = monitor.current;\n                if (current.error !== err) {\n                    current.error = err;\n                    triggerUpdate();\n                }\n            });\n            return typeof subscription === 'function'\n                ? subscription // Support observables that return unsubscribe directly\n                : subscription.unsubscribe.bind(subscription);\n        }, deps);\n        // Throw if observable has emitted error so that\n        // an ErrorBoundrary can catch it\n        if (monitor.current.error)\n            throw monitor.current.error;\n        // Return the current result\n        return monitor.current.result;\n    }\n\n    function useLiveQuery(querier, deps, defaultResult) {\n        return useObservable(function () { return dexie.liveQuery(querier); }, deps || [], defaultResult);\n    }\n\n    function usePermissions(firstArg, table, obj) {\n        if (!firstArg)\n            throw new TypeError(\"Invalid arguments to usePermissions(): undefined or null\");\n        var db;\n        if (arguments.length >= 3) {\n            if (!('transaction' in firstArg)) {\n                // Using ducktyping instead of instanceof in case there are multiple Dexie modules in app.\n                // First arg is  ensures first arg is a Dexie instance\n                throw new TypeError(\"Invalid arguments to usePermission(db, table, obj): 1st arg must be a Dexie instance\");\n            }\n            if (typeof table !== 'string')\n                throw new TypeError(\"Invalid arguments to usePermission(db, table, obj): 2nd arg must be string\");\n            if (!obj || typeof obj !== 'object')\n                throw new TypeError(\"Invalid arguments to usePermission(db, table, obj): 3rd arg must be an object\");\n            db = firstArg;\n        }\n        else {\n            if (firstArg instanceof dexie.Dexie)\n                throw new TypeError(\"Invalid arguments to usePermission(db, table, obj): Missing table and obj arguments.\");\n            if (typeof firstArg.table === 'function' &&\n                typeof firstArg.db === 'object') {\n                db = firstArg.db;\n                obj = firstArg;\n                table = firstArg.table();\n            }\n            else {\n                throw new TypeError(\"Invalid arguments to usePermissions(). \" +\n                    \"Expected usePermissions(entity: DexieCloudEntity) or \" +\n                    \"usePermissions(db: Dexie, table: string, obj: DexieCloudObject)\");\n            }\n        }\n        if (!('cloud' in db))\n            throw new Error(\"usePermissions() is only for Dexie Cloud but there's no dexie-cloud-addon active in given db.\");\n        if (!('permissions' in db['cloud']))\n            throw new Error(\"usePermissions() requires a newer version of dexie-cloud-addon. Please upgrade it.\");\n        return useObservable(\n        // @ts-ignore\n        function () { return db.cloud.permissions(obj, table); }, [obj.realmId, obj.owner, table]);\n    }\n\n    exports.useLiveQuery = useLiveQuery;\n    exports.useObservable = useObservable;\n    exports.usePermissions = usePermissions;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=dexie-react-hooks.js.map\n","/*!\n  Copyright (c) 2015 Jed Watson.\n  Based on code that is Copyright 2013-2015, Facebook, Inc.\n  All rights reserved.\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar canUseDOM = !!(\n\t\ttypeof window !== 'undefined' &&\n\t\twindow.document &&\n\t\twindow.document.createElement\n\t);\n\n\tvar ExecutionEnvironment = {\n\n\t\tcanUseDOM: canUseDOM,\n\n\t\tcanUseWorkers: typeof Worker !== 'undefined',\n\n\t\tcanUseEventListeners:\n\t\t\tcanUseDOM && !!(window.addEventListener || window.attachEvent),\n\n\t\tcanUseViewport: canUseDOM && !!window.screen\n\n\t};\n\n\tif (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\tdefine(function () {\n\t\t\treturn ExecutionEnvironment;\n\t\t});\n\t} else if (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = ExecutionEnvironment;\n\t} else {\n\t\twindow.ExecutionEnvironment = ExecutionEnvironment;\n\t}\n\n}());\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nfunction componentWillMount() {\n  // Call this.constructor.gDSFP to support sub-classes.\n  var state = this.constructor.getDerivedStateFromProps(this.props, this.state);\n  if (state !== null && state !== undefined) {\n    this.setState(state);\n  }\n}\n\nfunction componentWillReceiveProps(nextProps) {\n  // Call this.constructor.gDSFP to support sub-classes.\n  // Use the setState() updater to ensure state isn't stale in certain edge cases.\n  function updater(prevState) {\n    var state = this.constructor.getDerivedStateFromProps(nextProps, prevState);\n    return state !== null && state !== undefined ? state : null;\n  }\n  // Binding \"this\" is important for shallow renderer support.\n  this.setState(updater.bind(this));\n}\n\nfunction componentWillUpdate(nextProps, nextState) {\n  try {\n    var prevProps = this.props;\n    var prevState = this.state;\n    this.props = nextProps;\n    this.state = nextState;\n    this.__reactInternalSnapshotFlag = true;\n    this.__reactInternalSnapshot = this.getSnapshotBeforeUpdate(\n      prevProps,\n      prevState\n    );\n  } finally {\n    this.props = prevProps;\n    this.state = prevState;\n  }\n}\n\n// React may warn about cWM/cWRP/cWU methods being deprecated.\n// Add a flag to suppress these warnings for this special case.\ncomponentWillMount.__suppressDeprecationWarning = true;\ncomponentWillReceiveProps.__suppressDeprecationWarning = true;\ncomponentWillUpdate.__suppressDeprecationWarning = true;\n\nfunction polyfill(Component) {\n  var prototype = Component.prototype;\n\n  if (!prototype || !prototype.isReactComponent) {\n    throw new Error('Can only polyfill class components');\n  }\n\n  if (\n    typeof Component.getDerivedStateFromProps !== 'function' &&\n    typeof prototype.getSnapshotBeforeUpdate !== 'function'\n  ) {\n    return Component;\n  }\n\n  // If new component APIs are defined, \"unsafe\" lifecycles won't be called.\n  // Error if any of these lifecycles are present,\n  // Because they would work differently between older and newer (16.3+) versions of React.\n  var foundWillMountName = null;\n  var foundWillReceivePropsName = null;\n  var foundWillUpdateName = null;\n  if (typeof prototype.componentWillMount === 'function') {\n    foundWillMountName = 'componentWillMount';\n  } else if (typeof prototype.UNSAFE_componentWillMount === 'function') {\n    foundWillMountName = 'UNSAFE_componentWillMount';\n  }\n  if (typeof prototype.componentWillReceiveProps === 'function') {\n    foundWillReceivePropsName = 'componentWillReceiveProps';\n  } else if (typeof prototype.UNSAFE_componentWillReceiveProps === 'function') {\n    foundWillReceivePropsName = 'UNSAFE_componentWillReceiveProps';\n  }\n  if (typeof prototype.componentWillUpdate === 'function') {\n    foundWillUpdateName = 'componentWillUpdate';\n  } else if (typeof prototype.UNSAFE_componentWillUpdate === 'function') {\n    foundWillUpdateName = 'UNSAFE_componentWillUpdate';\n  }\n  if (\n    foundWillMountName !== null ||\n    foundWillReceivePropsName !== null ||\n    foundWillUpdateName !== null\n  ) {\n    var componentName = Component.displayName || Component.name;\n    var newApiName =\n      typeof Component.getDerivedStateFromProps === 'function'\n        ? 'getDerivedStateFromProps()'\n        : 'getSnapshotBeforeUpdate()';\n\n    throw Error(\n      'Unsafe legacy lifecycles will not be called for components using new component APIs.\\n\\n' +\n        componentName +\n        ' uses ' +\n        newApiName +\n        ' but also contains the following legacy lifecycles:' +\n        (foundWillMountName !== null ? '\\n  ' + foundWillMountName : '') +\n        (foundWillReceivePropsName !== null\n          ? '\\n  ' + foundWillReceivePropsName\n          : '') +\n        (foundWillUpdateName !== null ? '\\n  ' + foundWillUpdateName : '') +\n        '\\n\\nThe above lifecycles should be removed. Learn more about this warning here:\\n' +\n        'https://fb.me/react-async-component-lifecycle-hooks'\n    );\n  }\n\n  // React <= 16.2 does not support static getDerivedStateFromProps.\n  // As a workaround, use cWM and cWRP to invoke the new static lifecycle.\n  // Newer versions of React will ignore these lifecycles if gDSFP exists.\n  if (typeof Component.getDerivedStateFromProps === 'function') {\n    prototype.componentWillMount = componentWillMount;\n    prototype.componentWillReceiveProps = componentWillReceiveProps;\n  }\n\n  // React <= 16.2 does not support getSnapshotBeforeUpdate.\n  // As a workaround, use cWU to invoke the new lifecycle.\n  // Newer versions of React will ignore that lifecycle if gSBU exists.\n  if (typeof prototype.getSnapshotBeforeUpdate === 'function') {\n    if (typeof prototype.componentDidUpdate !== 'function') {\n      throw new Error(\n        'Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype'\n      );\n    }\n\n    prototype.componentWillUpdate = componentWillUpdate;\n\n    var componentDidUpdate = prototype.componentDidUpdate;\n\n    prototype.componentDidUpdate = function componentDidUpdatePolyfill(\n      prevProps,\n      prevState,\n      maybeSnapshot\n    ) {\n      // 16.3+ will not execute our will-update method;\n      // It will pass a snapshot value to did-update though.\n      // Older versions will require our polyfilled will-update value.\n      // We need to handle both cases, but can't just check for the presence of \"maybeSnapshot\",\n      // Because for <= 15.x versions this might be a \"prevContext\" object.\n      // We also can't just check \"__reactInternalSnapshot\",\n      // Because get-snapshot might return a falsy value.\n      // So check for the explicit __reactInternalSnapshotFlag flag to determine behavior.\n      var snapshot = this.__reactInternalSnapshotFlag\n        ? this.__reactInternalSnapshot\n        : maybeSnapshot;\n\n      componentDidUpdate.call(this, prevProps, prevState, snapshot);\n    };\n  }\n\n  return Component;\n}\n\nexport { polyfill };\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.bodyOpenClassName = exports.portalClassName = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require(\"react-dom\");\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _ModalPortal = require(\"./ModalPortal\");\n\nvar _ModalPortal2 = _interopRequireDefault(_ModalPortal);\n\nvar _ariaAppHider = require(\"../helpers/ariaAppHider\");\n\nvar ariaAppHider = _interopRequireWildcard(_ariaAppHider);\n\nvar _safeHTMLElement = require(\"../helpers/safeHTMLElement\");\n\nvar _safeHTMLElement2 = _interopRequireDefault(_safeHTMLElement);\n\nvar _reactLifecyclesCompat = require(\"react-lifecycles-compat\");\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar portalClassName = exports.portalClassName = \"ReactModalPortal\";\nvar bodyOpenClassName = exports.bodyOpenClassName = \"ReactModal__Body--open\";\n\nvar isReact16 = _safeHTMLElement.canUseDOM && _reactDom2.default.createPortal !== undefined;\n\nvar createHTMLElement = function createHTMLElement(name) {\n  return document.createElement(name);\n};\n\nvar getCreatePortal = function getCreatePortal() {\n  return isReact16 ? _reactDom2.default.createPortal : _reactDom2.default.unstable_renderSubtreeIntoContainer;\n};\n\nfunction getParentElement(parentSelector) {\n  return parentSelector();\n}\n\nvar Modal = function (_Component) {\n  _inherits(Modal, _Component);\n\n  function Modal() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Modal);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Modal.__proto__ || Object.getPrototypeOf(Modal)).call.apply(_ref, [this].concat(args))), _this), _this.removePortal = function () {\n      !isReact16 && _reactDom2.default.unmountComponentAtNode(_this.node);\n      var parent = getParentElement(_this.props.parentSelector);\n      if (parent && parent.contains(_this.node)) {\n        parent.removeChild(_this.node);\n      } else {\n        // eslint-disable-next-line no-console\n        console.warn('React-Modal: \"parentSelector\" prop did not returned any DOM ' + \"element. Make sure that the parent element is unmounted to \" + \"avoid any memory leaks.\");\n      }\n    }, _this.portalRef = function (ref) {\n      _this.portal = ref;\n    }, _this.renderPortal = function (props) {\n      var createPortal = getCreatePortal();\n      var portal = createPortal(_this, _react2.default.createElement(_ModalPortal2.default, _extends({ defaultStyles: Modal.defaultStyles }, props)), _this.node);\n      _this.portalRef(portal);\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Modal, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (!_safeHTMLElement.canUseDOM) return;\n\n      if (!isReact16) {\n        this.node = createHTMLElement(\"div\");\n      }\n      this.node.className = this.props.portalClassName;\n\n      var parent = getParentElement(this.props.parentSelector);\n      parent.appendChild(this.node);\n\n      !isReact16 && this.renderPortal(this.props);\n    }\n  }, {\n    key: \"getSnapshotBeforeUpdate\",\n    value: function getSnapshotBeforeUpdate(prevProps) {\n      var prevParent = getParentElement(prevProps.parentSelector);\n      var nextParent = getParentElement(this.props.parentSelector);\n      return { prevParent: prevParent, nextParent: nextParent };\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, _, snapshot) {\n      if (!_safeHTMLElement.canUseDOM) return;\n      var _props = this.props,\n          isOpen = _props.isOpen,\n          portalClassName = _props.portalClassName;\n\n\n      if (prevProps.portalClassName !== portalClassName) {\n        this.node.className = portalClassName;\n      }\n\n      var prevParent = snapshot.prevParent,\n          nextParent = snapshot.nextParent;\n\n      if (nextParent !== prevParent) {\n        prevParent.removeChild(this.node);\n        nextParent.appendChild(this.node);\n      }\n\n      // Stop unnecessary renders if modal is remaining closed\n      if (!prevProps.isOpen && !isOpen) return;\n\n      !isReact16 && this.renderPortal(this.props);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (!_safeHTMLElement.canUseDOM || !this.node || !this.portal) return;\n\n      var state = this.portal.state;\n      var now = Date.now();\n      var closesAt = state.isOpen && this.props.closeTimeoutMS && (state.closesAt || now + this.props.closeTimeoutMS);\n\n      if (closesAt) {\n        if (!state.beforeClose) {\n          this.portal.closeWithTimeout();\n        }\n\n        setTimeout(this.removePortal, closesAt - now);\n      } else {\n        this.removePortal();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (!_safeHTMLElement.canUseDOM || !isReact16) {\n        return null;\n      }\n\n      if (!this.node && isReact16) {\n        this.node = createHTMLElement(\"div\");\n      }\n\n      var createPortal = getCreatePortal();\n      return createPortal(_react2.default.createElement(_ModalPortal2.default, _extends({\n        ref: this.portalRef,\n        defaultStyles: Modal.defaultStyles\n      }, this.props)), this.node);\n    }\n  }], [{\n    key: \"setAppElement\",\n    value: function setAppElement(element) {\n      ariaAppHider.setElement(element);\n    }\n\n    /* eslint-disable react/no-unused-prop-types */\n\n    /* eslint-enable react/no-unused-prop-types */\n\n  }]);\n\n  return Modal;\n}(_react.Component);\n\nModal.propTypes = {\n  isOpen: _propTypes2.default.bool.isRequired,\n  style: _propTypes2.default.shape({\n    content: _propTypes2.default.object,\n    overlay: _propTypes2.default.object\n  }),\n  portalClassName: _propTypes2.default.string,\n  bodyOpenClassName: _propTypes2.default.string,\n  htmlOpenClassName: _propTypes2.default.string,\n  className: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.shape({\n    base: _propTypes2.default.string.isRequired,\n    afterOpen: _propTypes2.default.string.isRequired,\n    beforeClose: _propTypes2.default.string.isRequired\n  })]),\n  overlayClassName: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.shape({\n    base: _propTypes2.default.string.isRequired,\n    afterOpen: _propTypes2.default.string.isRequired,\n    beforeClose: _propTypes2.default.string.isRequired\n  })]),\n  appElement: _propTypes2.default.oneOfType([_propTypes2.default.instanceOf(_safeHTMLElement2.default), _propTypes2.default.instanceOf(_safeHTMLElement.SafeHTMLCollection), _propTypes2.default.instanceOf(_safeHTMLElement.SafeNodeList), _propTypes2.default.arrayOf(_propTypes2.default.instanceOf(_safeHTMLElement2.default))]),\n  onAfterOpen: _propTypes2.default.func,\n  onRequestClose: _propTypes2.default.func,\n  closeTimeoutMS: _propTypes2.default.number,\n  ariaHideApp: _propTypes2.default.bool,\n  shouldFocusAfterRender: _propTypes2.default.bool,\n  shouldCloseOnOverlayClick: _propTypes2.default.bool,\n  shouldReturnFocusAfterClose: _propTypes2.default.bool,\n  preventScroll: _propTypes2.default.bool,\n  parentSelector: _propTypes2.default.func,\n  aria: _propTypes2.default.object,\n  data: _propTypes2.default.object,\n  role: _propTypes2.default.string,\n  contentLabel: _propTypes2.default.string,\n  shouldCloseOnEsc: _propTypes2.default.bool,\n  overlayRef: _propTypes2.default.func,\n  contentRef: _propTypes2.default.func,\n  id: _propTypes2.default.string,\n  overlayElement: _propTypes2.default.func,\n  contentElement: _propTypes2.default.func\n};\nModal.defaultProps = {\n  isOpen: false,\n  portalClassName: portalClassName,\n  bodyOpenClassName: bodyOpenClassName,\n  role: \"dialog\",\n  ariaHideApp: true,\n  closeTimeoutMS: 0,\n  shouldFocusAfterRender: true,\n  shouldCloseOnEsc: true,\n  shouldCloseOnOverlayClick: true,\n  shouldReturnFocusAfterClose: true,\n  preventScroll: false,\n  parentSelector: function parentSelector() {\n    return document.body;\n  },\n  overlayElement: function overlayElement(props, contentEl) {\n    return _react2.default.createElement(\n      \"div\",\n      props,\n      contentEl\n    );\n  },\n  contentElement: function contentElement(props, children) {\n    return _react2.default.createElement(\n      \"div\",\n      props,\n      children\n    );\n  }\n};\nModal.defaultStyles = {\n  overlay: {\n    position: \"fixed\",\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: \"rgba(255, 255, 255, 0.75)\"\n  },\n  content: {\n    position: \"absolute\",\n    top: \"40px\",\n    left: \"40px\",\n    right: \"40px\",\n    bottom: \"40px\",\n    border: \"1px solid #ccc\",\n    background: \"#fff\",\n    overflow: \"auto\",\n    WebkitOverflowScrolling: \"touch\",\n    borderRadius: \"4px\",\n    outline: \"none\",\n    padding: \"20px\"\n  }\n};\n\n\n(0, _reactLifecyclesCompat.polyfill)(Modal);\n\nif (process.env.NODE_ENV !== \"production\") {\n  Modal.setCreateHTMLElement = function (fn) {\n    return createHTMLElement = fn;\n  };\n}\n\nexports.default = Modal;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require(\"react\");\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _focusManager = require(\"../helpers/focusManager\");\n\nvar focusManager = _interopRequireWildcard(_focusManager);\n\nvar _scopeTab = require(\"../helpers/scopeTab\");\n\nvar _scopeTab2 = _interopRequireDefault(_scopeTab);\n\nvar _ariaAppHider = require(\"../helpers/ariaAppHider\");\n\nvar ariaAppHider = _interopRequireWildcard(_ariaAppHider);\n\nvar _classList = require(\"../helpers/classList\");\n\nvar classList = _interopRequireWildcard(_classList);\n\nvar _safeHTMLElement = require(\"../helpers/safeHTMLElement\");\n\nvar _safeHTMLElement2 = _interopRequireDefault(_safeHTMLElement);\n\nvar _portalOpenInstances = require(\"../helpers/portalOpenInstances\");\n\nvar _portalOpenInstances2 = _interopRequireDefault(_portalOpenInstances);\n\nrequire(\"../helpers/bodyTrap\");\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n// so that our CSS is statically analyzable\nvar CLASS_NAMES = {\n  overlay: \"ReactModal__Overlay\",\n  content: \"ReactModal__Content\"\n};\n\nvar TAB_KEY = 9;\nvar ESC_KEY = 27;\n\nvar ariaHiddenInstances = 0;\n\nvar ModalPortal = function (_Component) {\n  _inherits(ModalPortal, _Component);\n\n  function ModalPortal(props) {\n    _classCallCheck(this, ModalPortal);\n\n    var _this = _possibleConstructorReturn(this, (ModalPortal.__proto__ || Object.getPrototypeOf(ModalPortal)).call(this, props));\n\n    _this.setOverlayRef = function (overlay) {\n      _this.overlay = overlay;\n      _this.props.overlayRef && _this.props.overlayRef(overlay);\n    };\n\n    _this.setContentRef = function (content) {\n      _this.content = content;\n      _this.props.contentRef && _this.props.contentRef(content);\n    };\n\n    _this.afterClose = function () {\n      var _this$props = _this.props,\n          appElement = _this$props.appElement,\n          ariaHideApp = _this$props.ariaHideApp,\n          htmlOpenClassName = _this$props.htmlOpenClassName,\n          bodyOpenClassName = _this$props.bodyOpenClassName;\n\n      // Remove classes.\n\n      bodyOpenClassName && classList.remove(document.body, bodyOpenClassName);\n\n      htmlOpenClassName && classList.remove(document.getElementsByTagName(\"html\")[0], htmlOpenClassName);\n\n      // Reset aria-hidden attribute if all modals have been removed\n      if (ariaHideApp && ariaHiddenInstances > 0) {\n        ariaHiddenInstances -= 1;\n\n        if (ariaHiddenInstances === 0) {\n          ariaAppHider.show(appElement);\n        }\n      }\n\n      if (_this.props.shouldFocusAfterRender) {\n        if (_this.props.shouldReturnFocusAfterClose) {\n          focusManager.returnFocus(_this.props.preventScroll);\n          focusManager.teardownScopedFocus();\n        } else {\n          focusManager.popWithoutFocus();\n        }\n      }\n\n      if (_this.props.onAfterClose) {\n        _this.props.onAfterClose();\n      }\n\n      _portalOpenInstances2.default.deregister(_this);\n    };\n\n    _this.open = function () {\n      _this.beforeOpen();\n      if (_this.state.afterOpen && _this.state.beforeClose) {\n        clearTimeout(_this.closeTimer);\n        _this.setState({ beforeClose: false });\n      } else {\n        if (_this.props.shouldFocusAfterRender) {\n          focusManager.setupScopedFocus(_this.node);\n          focusManager.markForFocusLater();\n        }\n\n        _this.setState({ isOpen: true }, function () {\n          _this.openAnimationFrame = requestAnimationFrame(function () {\n            _this.setState({ afterOpen: true });\n\n            if (_this.props.isOpen && _this.props.onAfterOpen) {\n              _this.props.onAfterOpen({\n                overlayEl: _this.overlay,\n                contentEl: _this.content\n              });\n            }\n          });\n        });\n      }\n    };\n\n    _this.close = function () {\n      if (_this.props.closeTimeoutMS > 0) {\n        _this.closeWithTimeout();\n      } else {\n        _this.closeWithoutTimeout();\n      }\n    };\n\n    _this.focusContent = function () {\n      return _this.content && !_this.contentHasFocus() && _this.content.focus({ preventScroll: true });\n    };\n\n    _this.closeWithTimeout = function () {\n      var closesAt = Date.now() + _this.props.closeTimeoutMS;\n      _this.setState({ beforeClose: true, closesAt: closesAt }, function () {\n        _this.closeTimer = setTimeout(_this.closeWithoutTimeout, _this.state.closesAt - Date.now());\n      });\n    };\n\n    _this.closeWithoutTimeout = function () {\n      _this.setState({\n        beforeClose: false,\n        isOpen: false,\n        afterOpen: false,\n        closesAt: null\n      }, _this.afterClose);\n    };\n\n    _this.handleKeyDown = function (event) {\n      if (event.keyCode === TAB_KEY) {\n        (0, _scopeTab2.default)(_this.content, event);\n      }\n\n      if (_this.props.shouldCloseOnEsc && event.keyCode === ESC_KEY) {\n        event.stopPropagation();\n        _this.requestClose(event);\n      }\n    };\n\n    _this.handleOverlayOnClick = function (event) {\n      if (_this.shouldClose === null) {\n        _this.shouldClose = true;\n      }\n\n      if (_this.shouldClose && _this.props.shouldCloseOnOverlayClick) {\n        if (_this.ownerHandlesClose()) {\n          _this.requestClose(event);\n        } else {\n          _this.focusContent();\n        }\n      }\n      _this.shouldClose = null;\n    };\n\n    _this.handleContentOnMouseUp = function () {\n      _this.shouldClose = false;\n    };\n\n    _this.handleOverlayOnMouseDown = function (event) {\n      if (!_this.props.shouldCloseOnOverlayClick && event.target == _this.overlay) {\n        event.preventDefault();\n      }\n    };\n\n    _this.handleContentOnClick = function () {\n      _this.shouldClose = false;\n    };\n\n    _this.handleContentOnMouseDown = function () {\n      _this.shouldClose = false;\n    };\n\n    _this.requestClose = function (event) {\n      return _this.ownerHandlesClose() && _this.props.onRequestClose(event);\n    };\n\n    _this.ownerHandlesClose = function () {\n      return _this.props.onRequestClose;\n    };\n\n    _this.shouldBeClosed = function () {\n      return !_this.state.isOpen && !_this.state.beforeClose;\n    };\n\n    _this.contentHasFocus = function () {\n      return document.activeElement === _this.content || _this.content.contains(document.activeElement);\n    };\n\n    _this.buildClassName = function (which, additional) {\n      var classNames = (typeof additional === \"undefined\" ? \"undefined\" : _typeof(additional)) === \"object\" ? additional : {\n        base: CLASS_NAMES[which],\n        afterOpen: CLASS_NAMES[which] + \"--after-open\",\n        beforeClose: CLASS_NAMES[which] + \"--before-close\"\n      };\n      var className = classNames.base;\n      if (_this.state.afterOpen) {\n        className = className + \" \" + classNames.afterOpen;\n      }\n      if (_this.state.beforeClose) {\n        className = className + \" \" + classNames.beforeClose;\n      }\n      return typeof additional === \"string\" && additional ? className + \" \" + additional : className;\n    };\n\n    _this.attributesFromObject = function (prefix, items) {\n      return Object.keys(items).reduce(function (acc, name) {\n        acc[prefix + \"-\" + name] = items[name];\n        return acc;\n      }, {});\n    };\n\n    _this.state = {\n      afterOpen: false,\n      beforeClose: false\n    };\n\n    _this.shouldClose = null;\n    _this.moveFromContentToOverlay = null;\n    return _this;\n  }\n\n  _createClass(ModalPortal, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.isOpen) {\n        this.open();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (process.env.NODE_ENV !== \"production\") {\n        if (prevProps.bodyOpenClassName !== this.props.bodyOpenClassName) {\n          // eslint-disable-next-line no-console\n          console.warn('React-Modal: \"bodyOpenClassName\" prop has been modified. ' + \"This may cause unexpected behavior when multiple modals are open.\");\n        }\n        if (prevProps.htmlOpenClassName !== this.props.htmlOpenClassName) {\n          // eslint-disable-next-line no-console\n          console.warn('React-Modal: \"htmlOpenClassName\" prop has been modified. ' + \"This may cause unexpected behavior when multiple modals are open.\");\n        }\n      }\n\n      if (this.props.isOpen && !prevProps.isOpen) {\n        this.open();\n      } else if (!this.props.isOpen && prevProps.isOpen) {\n        this.close();\n      }\n\n      // Focus only needs to be set once when the modal is being opened\n      if (this.props.shouldFocusAfterRender && this.state.isOpen && !prevState.isOpen) {\n        this.focusContent();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.state.isOpen) {\n        this.afterClose();\n      }\n      clearTimeout(this.closeTimer);\n      cancelAnimationFrame(this.openAnimationFrame);\n    }\n  }, {\n    key: \"beforeOpen\",\n    value: function beforeOpen() {\n      var _props = this.props,\n          appElement = _props.appElement,\n          ariaHideApp = _props.ariaHideApp,\n          htmlOpenClassName = _props.htmlOpenClassName,\n          bodyOpenClassName = _props.bodyOpenClassName;\n\n      // Add classes.\n\n      bodyOpenClassName && classList.add(document.body, bodyOpenClassName);\n\n      htmlOpenClassName && classList.add(document.getElementsByTagName(\"html\")[0], htmlOpenClassName);\n\n      if (ariaHideApp) {\n        ariaHiddenInstances += 1;\n        ariaAppHider.hide(appElement);\n      }\n\n      _portalOpenInstances2.default.register(this);\n    }\n\n    // Don't steal focus from inner elements\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _props2 = this.props,\n          id = _props2.id,\n          className = _props2.className,\n          overlayClassName = _props2.overlayClassName,\n          defaultStyles = _props2.defaultStyles,\n          children = _props2.children;\n\n      var contentStyles = className ? {} : defaultStyles.content;\n      var overlayStyles = overlayClassName ? {} : defaultStyles.overlay;\n\n      if (this.shouldBeClosed()) {\n        return null;\n      }\n\n      var overlayProps = {\n        ref: this.setOverlayRef,\n        className: this.buildClassName(\"overlay\", overlayClassName),\n        style: _extends({}, overlayStyles, this.props.style.overlay),\n        onClick: this.handleOverlayOnClick,\n        onMouseDown: this.handleOverlayOnMouseDown\n      };\n\n      var contentProps = _extends({\n        id: id,\n        ref: this.setContentRef,\n        style: _extends({}, contentStyles, this.props.style.content),\n        className: this.buildClassName(\"content\", className),\n        tabIndex: \"-1\",\n        onKeyDown: this.handleKeyDown,\n        onMouseDown: this.handleContentOnMouseDown,\n        onMouseUp: this.handleContentOnMouseUp,\n        onClick: this.handleContentOnClick,\n        role: this.props.role,\n        \"aria-label\": this.props.contentLabel\n      }, this.attributesFromObject(\"aria\", _extends({ modal: true }, this.props.aria)), this.attributesFromObject(\"data\", this.props.data || {}), {\n        \"data-testid\": this.props.testId\n      });\n\n      var contentElement = this.props.contentElement(contentProps, children);\n      return this.props.overlayElement(overlayProps, contentElement);\n    }\n  }]);\n\n  return ModalPortal;\n}(_react.Component);\n\nModalPortal.defaultProps = {\n  style: {\n    overlay: {},\n    content: {}\n  },\n  defaultStyles: {}\n};\nModalPortal.propTypes = {\n  isOpen: _propTypes2.default.bool.isRequired,\n  defaultStyles: _propTypes2.default.shape({\n    content: _propTypes2.default.object,\n    overlay: _propTypes2.default.object\n  }),\n  style: _propTypes2.default.shape({\n    content: _propTypes2.default.object,\n    overlay: _propTypes2.default.object\n  }),\n  className: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.object]),\n  overlayClassName: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.object]),\n  bodyOpenClassName: _propTypes2.default.string,\n  htmlOpenClassName: _propTypes2.default.string,\n  ariaHideApp: _propTypes2.default.bool,\n  appElement: _propTypes2.default.oneOfType([_propTypes2.default.instanceOf(_safeHTMLElement2.default), _propTypes2.default.instanceOf(_safeHTMLElement.SafeHTMLCollection), _propTypes2.default.instanceOf(_safeHTMLElement.SafeNodeList), _propTypes2.default.arrayOf(_propTypes2.default.instanceOf(_safeHTMLElement2.default))]),\n  onAfterOpen: _propTypes2.default.func,\n  onAfterClose: _propTypes2.default.func,\n  onRequestClose: _propTypes2.default.func,\n  closeTimeoutMS: _propTypes2.default.number,\n  shouldFocusAfterRender: _propTypes2.default.bool,\n  shouldCloseOnOverlayClick: _propTypes2.default.bool,\n  shouldReturnFocusAfterClose: _propTypes2.default.bool,\n  preventScroll: _propTypes2.default.bool,\n  role: _propTypes2.default.string,\n  contentLabel: _propTypes2.default.string,\n  aria: _propTypes2.default.object,\n  data: _propTypes2.default.object,\n  children: _propTypes2.default.node,\n  shouldCloseOnEsc: _propTypes2.default.bool,\n  overlayRef: _propTypes2.default.func,\n  contentRef: _propTypes2.default.func,\n  id: _propTypes2.default.string,\n  overlayElement: _propTypes2.default.func,\n  contentElement: _propTypes2.default.func,\n  testId: _propTypes2.default.string\n};\nexports.default = ModalPortal;\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.resetState = resetState;\nexports.log = log;\nexports.assertNodeList = assertNodeList;\nexports.setElement = setElement;\nexports.validateElement = validateElement;\nexports.hide = hide;\nexports.show = show;\nexports.documentNotReadyOrSSRTesting = documentNotReadyOrSSRTesting;\n\nvar _warning = require(\"warning\");\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nvar _safeHTMLElement = require(\"./safeHTMLElement\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar globalElement = null;\n\n/* eslint-disable no-console */\n/* istanbul ignore next */\nfunction resetState() {\n  if (globalElement) {\n    if (globalElement.removeAttribute) {\n      globalElement.removeAttribute(\"aria-hidden\");\n    } else if (globalElement.length != null) {\n      globalElement.forEach(function (element) {\n        return element.removeAttribute(\"aria-hidden\");\n      });\n    } else {\n      document.querySelectorAll(globalElement).forEach(function (element) {\n        return element.removeAttribute(\"aria-hidden\");\n      });\n    }\n  }\n  globalElement = null;\n}\n\n/* istanbul ignore next */\nfunction log() {\n  if (process.env.NODE_ENV !== \"production\") {\n    var check = globalElement || {};\n    console.log(\"ariaAppHider ----------\");\n    console.log(check.nodeName, check.className, check.id);\n    console.log(\"end ariaAppHider ----------\");\n  }\n}\n/* eslint-enable no-console */\n\nfunction assertNodeList(nodeList, selector) {\n  if (!nodeList || !nodeList.length) {\n    throw new Error(\"react-modal: No elements were found for selector \" + selector + \".\");\n  }\n}\n\nfunction setElement(element) {\n  var useElement = element;\n  if (typeof useElement === \"string\" && _safeHTMLElement.canUseDOM) {\n    var el = document.querySelectorAll(useElement);\n    assertNodeList(el, useElement);\n    useElement = el;\n  }\n  globalElement = useElement || globalElement;\n  return globalElement;\n}\n\nfunction validateElement(appElement) {\n  var el = appElement || globalElement;\n  if (el) {\n    return Array.isArray(el) || el instanceof HTMLCollection || el instanceof NodeList ? el : [el];\n  } else {\n    (0, _warning2.default)(false, [\"react-modal: App element is not defined.\", \"Please use `Modal.setAppElement(el)` or set `appElement={el}`.\", \"This is needed so screen readers don't see main content\", \"when modal is opened. It is not recommended, but you can opt-out\", \"by setting `ariaHideApp={false}`.\"].join(\" \"));\n\n    return [];\n  }\n}\n\nfunction hide(appElement) {\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = validateElement(appElement)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var el = _step.value;\n\n      el.setAttribute(\"aria-hidden\", \"true\");\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\n\nfunction show(appElement) {\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = validateElement(appElement)[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var el = _step2.value;\n\n      el.removeAttribute(\"aria-hidden\");\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2.return) {\n        _iterator2.return();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n}\n\nfunction documentNotReadyOrSSRTesting() {\n  globalElement = null;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.resetState = resetState;\nexports.log = log;\n\nvar _portalOpenInstances = require(\"./portalOpenInstances\");\n\nvar _portalOpenInstances2 = _interopRequireDefault(_portalOpenInstances);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Body focus trap see Issue #742\n\nvar before = void 0,\n    after = void 0,\n    instances = [];\n\n/* eslint-disable no-console */\n/* istanbul ignore next */\nfunction resetState() {\n  var _arr = [before, after];\n\n  for (var _i = 0; _i < _arr.length; _i++) {\n    var item = _arr[_i];\n    if (!item) continue;\n    item.parentNode && item.parentNode.removeChild(item);\n  }\n  before = after = null;\n  instances = [];\n}\n\n/* istanbul ignore next */\nfunction log() {\n  console.log(\"bodyTrap ----------\");\n  console.log(instances.length);\n  var _arr2 = [before, after];\n  for (var _i2 = 0; _i2 < _arr2.length; _i2++) {\n    var item = _arr2[_i2];\n    var check = item || {};\n    console.log(check.nodeName, check.className, check.id);\n  }\n  console.log(\"edn bodyTrap ----------\");\n}\n/* eslint-enable no-console */\n\nfunction focusContent() {\n  if (instances.length === 0) {\n    if (process.env.NODE_ENV !== \"production\") {\n      // eslint-disable-next-line no-console\n      console.warn(\"React-Modal: Open instances > 0 expected\");\n    }\n    return;\n  }\n  instances[instances.length - 1].focusContent();\n}\n\nfunction bodyTrap(eventType, openInstances) {\n  if (!before && !after) {\n    before = document.createElement(\"div\");\n    before.setAttribute(\"data-react-modal-body-trap\", \"\");\n    before.style.position = \"absolute\";\n    before.style.opacity = \"0\";\n    before.setAttribute(\"tabindex\", \"0\");\n    before.addEventListener(\"focus\", focusContent);\n    after = before.cloneNode();\n    after.addEventListener(\"focus\", focusContent);\n  }\n\n  instances = openInstances;\n\n  if (instances.length > 0) {\n    // Add focus trap\n    if (document.body.firstChild !== before) {\n      document.body.insertBefore(before, document.body.firstChild);\n    }\n    if (document.body.lastChild !== after) {\n      document.body.appendChild(after);\n    }\n  } else {\n    // Remove focus trap\n    if (before.parentElement) {\n      before.parentElement.removeChild(before);\n    }\n    if (after.parentElement) {\n      after.parentElement.removeChild(after);\n    }\n  }\n}\n\n_portalOpenInstances2.default.subscribe(bodyTrap);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.resetState = resetState;\nexports.log = log;\nvar htmlClassList = {};\nvar docBodyClassList = {};\n\n/* eslint-disable no-console */\n/* istanbul ignore next */\nfunction removeClass(at, cls) {\n  at.classList.remove(cls);\n}\n\n/* istanbul ignore next */\nfunction resetState() {\n  var htmlElement = document.getElementsByTagName(\"html\")[0];\n  for (var cls in htmlClassList) {\n    removeClass(htmlElement, htmlClassList[cls]);\n  }\n\n  var body = document.body;\n  for (var _cls in docBodyClassList) {\n    removeClass(body, docBodyClassList[_cls]);\n  }\n\n  htmlClassList = {};\n  docBodyClassList = {};\n}\n\n/* istanbul ignore next */\nfunction log() {\n  if (process.env.NODE_ENV !== \"production\") {\n    var classes = document.getElementsByTagName(\"html\")[0].className;\n    var buffer = \"Show tracked classes:\\n\\n\";\n\n    buffer += \"<html /> (\" + classes + \"):\\n  \";\n    for (var x in htmlClassList) {\n      buffer += \"  \" + x + \" \" + htmlClassList[x] + \"\\n  \";\n    }\n\n    classes = document.body.className;\n\n    buffer += \"\\n\\ndoc.body (\" + classes + \"):\\n  \";\n    for (var _x in docBodyClassList) {\n      buffer += \"  \" + _x + \" \" + docBodyClassList[_x] + \"\\n  \";\n    }\n\n    buffer += \"\\n\";\n\n    console.log(buffer);\n  }\n}\n/* eslint-enable no-console */\n\n/**\n * Track the number of reference of a class.\n * @param {object} poll The poll to receive the reference.\n * @param {string} className The class name.\n * @return {string}\n */\nvar incrementReference = function incrementReference(poll, className) {\n  if (!poll[className]) {\n    poll[className] = 0;\n  }\n  poll[className] += 1;\n  return className;\n};\n\n/**\n * Drop the reference of a class.\n * @param {object} poll The poll to receive the reference.\n * @param {string} className The class name.\n * @return {string}\n */\nvar decrementReference = function decrementReference(poll, className) {\n  if (poll[className]) {\n    poll[className] -= 1;\n  }\n  return className;\n};\n\n/**\n * Track a class and add to the given class list.\n * @param {Object} classListRef A class list of an element.\n * @param {Object} poll         The poll to be used.\n * @param {Array}  classes      The list of classes to be tracked.\n */\nvar trackClass = function trackClass(classListRef, poll, classes) {\n  classes.forEach(function (className) {\n    incrementReference(poll, className);\n    classListRef.add(className);\n  });\n};\n\n/**\n * Untrack a class and remove from the given class list if the reference\n * reaches 0.\n * @param {Object} classListRef A class list of an element.\n * @param {Object} poll         The poll to be used.\n * @param {Array}  classes      The list of classes to be untracked.\n */\nvar untrackClass = function untrackClass(classListRef, poll, classes) {\n  classes.forEach(function (className) {\n    decrementReference(poll, className);\n    poll[className] === 0 && classListRef.remove(className);\n  });\n};\n\n/**\n * Public inferface to add classes to the document.body.\n * @param {string} bodyClass The class string to be added.\n *                           It may contain more then one class\n *                           with ' ' as separator.\n */\nvar add = exports.add = function add(element, classString) {\n  return trackClass(element.classList, element.nodeName.toLowerCase() == \"html\" ? htmlClassList : docBodyClassList, classString.split(\" \"));\n};\n\n/**\n * Public inferface to remove classes from the document.body.\n * @param {string} bodyClass The class string to be added.\n *                           It may contain more then one class\n *                           with ' ' as separator.\n */\nvar remove = exports.remove = function remove(element, classString) {\n  return untrackClass(element.classList, element.nodeName.toLowerCase() == \"html\" ? htmlClassList : docBodyClassList, classString.split(\" \"));\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.resetState = resetState;\nexports.log = log;\nexports.handleBlur = handleBlur;\nexports.handleFocus = handleFocus;\nexports.markForFocusLater = markForFocusLater;\nexports.returnFocus = returnFocus;\nexports.popWithoutFocus = popWithoutFocus;\nexports.setupScopedFocus = setupScopedFocus;\nexports.teardownScopedFocus = teardownScopedFocus;\n\nvar _tabbable = require(\"../helpers/tabbable\");\n\nvar _tabbable2 = _interopRequireDefault(_tabbable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar focusLaterElements = [];\nvar modalElement = null;\nvar needToFocus = false;\n\n/* eslint-disable no-console */\n/* istanbul ignore next */\nfunction resetState() {\n  focusLaterElements = [];\n}\n\n/* istanbul ignore next */\nfunction log() {\n  if (process.env.NODE_ENV !== \"production\") {\n    console.log(\"focusManager ----------\");\n    focusLaterElements.forEach(function (f) {\n      var check = f || {};\n      console.log(check.nodeName, check.className, check.id);\n    });\n    console.log(\"end focusManager ----------\");\n  }\n}\n/* eslint-enable no-console */\n\nfunction handleBlur() {\n  needToFocus = true;\n}\n\nfunction handleFocus() {\n  if (needToFocus) {\n    needToFocus = false;\n    if (!modalElement) {\n      return;\n    }\n    // need to see how jQuery shims document.on('focusin') so we don't need the\n    // setTimeout, firefox doesn't support focusin, if it did, we could focus\n    // the element outside of a setTimeout. Side-effect of this implementation\n    // is that the document.body gets focus, and then we focus our element right\n    // after, seems fine.\n    setTimeout(function () {\n      if (modalElement.contains(document.activeElement)) {\n        return;\n      }\n      var el = (0, _tabbable2.default)(modalElement)[0] || modalElement;\n      el.focus();\n    }, 0);\n  }\n}\n\nfunction markForFocusLater() {\n  focusLaterElements.push(document.activeElement);\n}\n\n/* eslint-disable no-console */\nfunction returnFocus() {\n  var preventScroll = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n  var toFocus = null;\n  try {\n    if (focusLaterElements.length !== 0) {\n      toFocus = focusLaterElements.pop();\n      toFocus.focus({ preventScroll: preventScroll });\n    }\n    return;\n  } catch (e) {\n    console.warn([\"You tried to return focus to\", toFocus, \"but it is not in the DOM anymore\"].join(\" \"));\n  }\n}\n/* eslint-enable no-console */\n\nfunction popWithoutFocus() {\n  focusLaterElements.length > 0 && focusLaterElements.pop();\n}\n\nfunction setupScopedFocus(element) {\n  modalElement = element;\n\n  if (window.addEventListener) {\n    window.addEventListener(\"blur\", handleBlur, false);\n    document.addEventListener(\"focus\", handleFocus, true);\n  } else {\n    window.attachEvent(\"onBlur\", handleBlur);\n    document.attachEvent(\"onFocus\", handleFocus);\n  }\n}\n\nfunction teardownScopedFocus() {\n  modalElement = null;\n\n  if (window.addEventListener) {\n    window.removeEventListener(\"blur\", handleBlur);\n    document.removeEventListener(\"focus\", handleFocus);\n  } else {\n    window.detachEvent(\"onBlur\", handleBlur);\n    document.detachEvent(\"onFocus\", handleFocus);\n  }\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.log = log;\nexports.resetState = resetState;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// Tracks portals that are open and emits events to subscribers\n\nvar PortalOpenInstances = function PortalOpenInstances() {\n  var _this = this;\n\n  _classCallCheck(this, PortalOpenInstances);\n\n  this.register = function (openInstance) {\n    if (_this.openInstances.indexOf(openInstance) !== -1) {\n      if (process.env.NODE_ENV !== \"production\") {\n        // eslint-disable-next-line no-console\n        console.warn(\"React-Modal: Cannot register modal instance that's already open\");\n      }\n      return;\n    }\n    _this.openInstances.push(openInstance);\n    _this.emit(\"register\");\n  };\n\n  this.deregister = function (openInstance) {\n    var index = _this.openInstances.indexOf(openInstance);\n    if (index === -1) {\n      if (process.env.NODE_ENV !== \"production\") {\n        // eslint-disable-next-line no-console\n        console.warn(\"React-Modal: Unable to deregister \" + openInstance + \" as \" + \"it was never registered\");\n      }\n      return;\n    }\n    _this.openInstances.splice(index, 1);\n    _this.emit(\"deregister\");\n  };\n\n  this.subscribe = function (callback) {\n    _this.subscribers.push(callback);\n  };\n\n  this.emit = function (eventType) {\n    _this.subscribers.forEach(function (subscriber) {\n      return subscriber(eventType,\n      // shallow copy to avoid accidental mutation\n      _this.openInstances.slice());\n    });\n  };\n\n  this.openInstances = [];\n  this.subscribers = [];\n};\n\nvar portalOpenInstances = new PortalOpenInstances();\n\n/* eslint-disable no-console */\n/* istanbul ignore next */\nfunction log() {\n  console.log(\"portalOpenInstances ----------\");\n  console.log(portalOpenInstances.openInstances.length);\n  portalOpenInstances.openInstances.forEach(function (p) {\n    return console.log(p);\n  });\n  console.log(\"end portalOpenInstances ----------\");\n}\n\n/* istanbul ignore next */\nfunction resetState() {\n  portalOpenInstances = new PortalOpenInstances();\n}\n/* eslint-enable no-console */\n\nexports.default = portalOpenInstances;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.canUseDOM = exports.SafeNodeList = exports.SafeHTMLCollection = undefined;\n\nvar _exenv = require(\"exenv\");\n\nvar _exenv2 = _interopRequireDefault(_exenv);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar EE = _exenv2.default;\n\nvar SafeHTMLElement = EE.canUseDOM ? window.HTMLElement : {};\n\nvar SafeHTMLCollection = exports.SafeHTMLCollection = EE.canUseDOM ? window.HTMLCollection : {};\n\nvar SafeNodeList = exports.SafeNodeList = EE.canUseDOM ? window.NodeList : {};\n\nvar canUseDOM = exports.canUseDOM = EE.canUseDOM;\n\nexports.default = SafeHTMLElement;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = scopeTab;\n\nvar _tabbable = require(\"./tabbable\");\n\nvar _tabbable2 = _interopRequireDefault(_tabbable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getActiveElement() {\n  var el = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document;\n\n  return el.activeElement.shadowRoot ? getActiveElement(el.activeElement.shadowRoot) : el.activeElement;\n}\n\nfunction scopeTab(node, event) {\n  var tabbable = (0, _tabbable2.default)(node);\n\n  if (!tabbable.length) {\n    // Do nothing, since there are no elements that can receive focus.\n    event.preventDefault();\n    return;\n  }\n\n  var target = void 0;\n\n  var shiftKey = event.shiftKey;\n  var head = tabbable[0];\n  var tail = tabbable[tabbable.length - 1];\n  var activeElement = getActiveElement();\n\n  // proceed with default browser behavior on tab.\n  // Focus on last element on shift + tab.\n  if (node === activeElement) {\n    if (!shiftKey) return;\n    target = tail;\n  }\n\n  if (tail === activeElement && !shiftKey) {\n    target = head;\n  }\n\n  if (head === activeElement && shiftKey) {\n    target = tail;\n  }\n\n  if (target) {\n    event.preventDefault();\n    target.focus();\n    return;\n  }\n\n  // Safari radio issue.\n  //\n  // Safari does not move the focus to the radio button,\n  // so we need to force it to really walk through all elements.\n  //\n  // This is very error prone, since we are trying to guess\n  // if it is a safari browser from the first occurence between\n  // chrome or safari.\n  //\n  // The chrome user agent contains the first ocurrence\n  // as the 'chrome/version' and later the 'safari/version'.\n  var checkSafari = /(\\bChrome\\b|\\bSafari\\b)\\//.exec(navigator.userAgent);\n  var isSafariDesktop = checkSafari != null && checkSafari[1] != \"Chrome\" && /\\biPod\\b|\\biPad\\b/g.exec(navigator.userAgent) == null;\n\n  // If we are not in safari desktop, let the browser control\n  // the focus\n  if (!isSafariDesktop) return;\n\n  var x = tabbable.indexOf(activeElement);\n\n  if (x > -1) {\n    x += shiftKey ? -1 : 1;\n  }\n\n  target = tabbable[x];\n\n  // If the tabbable element does not exist,\n  // focus head/tail based on shiftKey\n  if (typeof target === \"undefined\") {\n    event.preventDefault();\n    target = shiftKey ? tail : head;\n    target.focus();\n    return;\n  }\n\n  event.preventDefault();\n\n  target.focus();\n}\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = findTabbableDescendants;\n/*!\n * Adapted from jQuery UI core\n *\n * http://jqueryui.com\n *\n * Copyright 2014 jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/category/ui-core/\n */\n\nvar tabbableNode = /input|select|textarea|button|object/;\n\nfunction hidesContents(element) {\n  var zeroSize = element.offsetWidth <= 0 && element.offsetHeight <= 0;\n\n  // If the node is empty, this is good enough\n  if (zeroSize && !element.innerHTML) return true;\n\n  try {\n    // Otherwise we need to check some styles\n    var style = window.getComputedStyle(element);\n    return zeroSize ? style.getPropertyValue(\"overflow\") !== \"visible\" ||\n    // if 'overflow: visible' set, check if there is actually any overflow\n    element.scrollWidth <= 0 && element.scrollHeight <= 0 : style.getPropertyValue(\"display\") == \"none\";\n  } catch (exception) {\n    // eslint-disable-next-line no-console\n    console.warn(\"Failed to inspect element style\");\n    return false;\n  }\n}\n\nfunction visible(element) {\n  var parentElement = element;\n  var rootNode = element.getRootNode && element.getRootNode();\n  while (parentElement) {\n    if (parentElement === document.body) break;\n\n    // if we are not hidden yet, skip to checking outside the Web Component\n    if (rootNode && parentElement === rootNode) parentElement = rootNode.host.parentNode;\n\n    if (hidesContents(parentElement)) return false;\n    parentElement = parentElement.parentNode;\n  }\n  return true;\n}\n\nfunction focusable(element, isTabIndexNotNaN) {\n  var nodeName = element.nodeName.toLowerCase();\n  var res = tabbableNode.test(nodeName) && !element.disabled || (nodeName === \"a\" ? element.href || isTabIndexNotNaN : isTabIndexNotNaN);\n  return res && visible(element);\n}\n\nfunction tabbable(element) {\n  var tabIndex = element.getAttribute(\"tabindex\");\n  if (tabIndex === null) tabIndex = undefined;\n  var isTabIndexNaN = isNaN(tabIndex);\n  return (isTabIndexNaN || tabIndex >= 0) && focusable(element, !isTabIndexNaN);\n}\n\nfunction findTabbableDescendants(element) {\n  var descendants = [].slice.call(element.querySelectorAll(\"*\"), 0).reduce(function (finished, el) {\n    return finished.concat(!el.shadowRoot ? [el] : findTabbableDescendants(el.shadowRoot));\n  }, []);\n  return descendants.filter(tabbable);\n}\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Modal = require(\"./components/Modal\");\n\nvar _Modal2 = _interopRequireDefault(_Modal);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _Modal2.default;\nmodule.exports = exports[\"default\"];","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\n/**\n * Similar to invariant but only logs a warning if the condition is not met.\n * This can be used to log issues in development environments in critical\n * paths. Removing the logging code for production environments will keep the\n * same logic and follow the same code paths.\n */\n\nvar __DEV__ = process.env.NODE_ENV !== 'production';\n\nvar warning = function() {};\n\nif (__DEV__) {\n  var printWarning = function printWarning(format, args) {\n    var len = arguments.length;\n    args = new Array(len > 1 ? len - 1 : 0);\n    for (var key = 1; key < len; key++) {\n      args[key - 1] = arguments[key];\n    }\n    var argIndex = 0;\n    var message = 'Warning: ' +\n      format.replace(/%s/g, function() {\n        return args[argIndex++];\n      });\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  }\n\n  warning = function(condition, format, args) {\n    var len = arguments.length;\n    args = new Array(len > 2 ? len - 2 : 0);\n    for (var key = 2; key < len; key++) {\n      args[key - 2] = arguments[key];\n    }\n    if (format === undefined) {\n      throw new Error(\n          '`warning(condition, format, ...args)` requires a warning ' +\n          'message argument'\n      );\n    }\n    if (!condition) {\n      printWarning.apply(null, [format].concat(args));\n    }\n  };\n}\n\nmodule.exports = warning;\n","/*\n * Dexie.js - a minimalistic wrapper for IndexedDB\n * ===============================================\n *\n * By David Fahlander, david.fahlander@gmail.com\n *\n * Version 3.2.0, Thu Nov 18 2021\n *\n * http://dexie.org\n *\n * Apache License Version 2.0, January 2004, http://www.apache.org/licenses/\n */\n \nconst _global = typeof globalThis !== 'undefined' ? globalThis :\n    typeof self !== 'undefined' ? self :\n        typeof window !== 'undefined' ? window :\n            global;\n\nconst keys = Object.keys;\nconst isArray = Array.isArray;\nif (typeof Promise !== 'undefined' && !_global.Promise) {\n    _global.Promise = Promise;\n}\nfunction extend(obj, extension) {\n    if (typeof extension !== 'object')\n        return obj;\n    keys(extension).forEach(function (key) {\n        obj[key] = extension[key];\n    });\n    return obj;\n}\nconst getProto = Object.getPrototypeOf;\nconst _hasOwn = {}.hasOwnProperty;\nfunction hasOwn(obj, prop) {\n    return _hasOwn.call(obj, prop);\n}\nfunction props(proto, extension) {\n    if (typeof extension === 'function')\n        extension = extension(getProto(proto));\n    (typeof Reflect === \"undefined\" ? keys : Reflect.ownKeys)(extension).forEach(key => {\n        setProp(proto, key, extension[key]);\n    });\n}\nconst defineProperty = Object.defineProperty;\nfunction setProp(obj, prop, functionOrGetSet, options) {\n    defineProperty(obj, prop, extend(functionOrGetSet && hasOwn(functionOrGetSet, \"get\") && typeof functionOrGetSet.get === 'function' ?\n        { get: functionOrGetSet.get, set: functionOrGetSet.set, configurable: true } :\n        { value: functionOrGetSet, configurable: true, writable: true }, options));\n}\nfunction derive(Child) {\n    return {\n        from: function (Parent) {\n            Child.prototype = Object.create(Parent.prototype);\n            setProp(Child.prototype, \"constructor\", Child);\n            return {\n                extend: props.bind(null, Child.prototype)\n            };\n        }\n    };\n}\nconst getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nfunction getPropertyDescriptor(obj, prop) {\n    const pd = getOwnPropertyDescriptor(obj, prop);\n    let proto;\n    return pd || (proto = getProto(obj)) && getPropertyDescriptor(proto, prop);\n}\nconst _slice = [].slice;\nfunction slice(args, start, end) {\n    return _slice.call(args, start, end);\n}\nfunction override(origFunc, overridedFactory) {\n    return overridedFactory(origFunc);\n}\nfunction assert(b) {\n    if (!b)\n        throw new Error(\"Assertion Failed\");\n}\nfunction asap$1(fn) {\n    if (_global.setImmediate)\n        setImmediate(fn);\n    else\n        setTimeout(fn, 0);\n}\nfunction arrayToObject(array, extractor) {\n    return array.reduce((result, item, i) => {\n        var nameAndValue = extractor(item, i);\n        if (nameAndValue)\n            result[nameAndValue[0]] = nameAndValue[1];\n        return result;\n    }, {});\n}\nfunction tryCatch(fn, onerror, args) {\n    try {\n        fn.apply(null, args);\n    }\n    catch (ex) {\n        onerror && onerror(ex);\n    }\n}\nfunction getByKeyPath(obj, keyPath) {\n    if (hasOwn(obj, keyPath))\n        return obj[keyPath];\n    if (!keyPath)\n        return obj;\n    if (typeof keyPath !== 'string') {\n        var rv = [];\n        for (var i = 0, l = keyPath.length; i < l; ++i) {\n            var val = getByKeyPath(obj, keyPath[i]);\n            rv.push(val);\n        }\n        return rv;\n    }\n    var period = keyPath.indexOf('.');\n    if (period !== -1) {\n        var innerObj = obj[keyPath.substr(0, period)];\n        return innerObj === undefined ? undefined : getByKeyPath(innerObj, keyPath.substr(period + 1));\n    }\n    return undefined;\n}\nfunction setByKeyPath(obj, keyPath, value) {\n    if (!obj || keyPath === undefined)\n        return;\n    if ('isFrozen' in Object && Object.isFrozen(obj))\n        return;\n    if (typeof keyPath !== 'string' && 'length' in keyPath) {\n        assert(typeof value !== 'string' && 'length' in value);\n        for (var i = 0, l = keyPath.length; i < l; ++i) {\n            setByKeyPath(obj, keyPath[i], value[i]);\n        }\n    }\n    else {\n        var period = keyPath.indexOf('.');\n        if (period !== -1) {\n            var currentKeyPath = keyPath.substr(0, period);\n            var remainingKeyPath = keyPath.substr(period + 1);\n            if (remainingKeyPath === \"\")\n                if (value === undefined) {\n                    if (isArray(obj) && !isNaN(parseInt(currentKeyPath)))\n                        obj.splice(currentKeyPath, 1);\n                    else\n                        delete obj[currentKeyPath];\n                }\n                else\n                    obj[currentKeyPath] = value;\n            else {\n                var innerObj = obj[currentKeyPath];\n                if (!innerObj)\n                    innerObj = (obj[currentKeyPath] = {});\n                setByKeyPath(innerObj, remainingKeyPath, value);\n            }\n        }\n        else {\n            if (value === undefined) {\n                if (isArray(obj) && !isNaN(parseInt(keyPath)))\n                    obj.splice(keyPath, 1);\n                else\n                    delete obj[keyPath];\n            }\n            else\n                obj[keyPath] = value;\n        }\n    }\n}\nfunction delByKeyPath(obj, keyPath) {\n    if (typeof keyPath === 'string')\n        setByKeyPath(obj, keyPath, undefined);\n    else if ('length' in keyPath)\n        [].map.call(keyPath, function (kp) {\n            setByKeyPath(obj, kp, undefined);\n        });\n}\nfunction shallowClone(obj) {\n    var rv = {};\n    for (var m in obj) {\n        if (hasOwn(obj, m))\n            rv[m] = obj[m];\n    }\n    return rv;\n}\nconst concat = [].concat;\nfunction flatten(a) {\n    return concat.apply([], a);\n}\nconst intrinsicTypeNames = \"Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey\"\n    .split(',').concat(flatten([8, 16, 32, 64].map(num => [\"Int\", \"Uint\", \"Float\"].map(t => t + num + \"Array\")))).filter(t => _global[t]);\nconst intrinsicTypes = intrinsicTypeNames.map(t => _global[t]);\narrayToObject(intrinsicTypeNames, x => [x, true]);\nlet circularRefs = null;\nfunction deepClone(any) {\n    circularRefs = typeof WeakMap !== 'undefined' && new WeakMap();\n    const rv = innerDeepClone(any);\n    circularRefs = null;\n    return rv;\n}\nfunction innerDeepClone(any) {\n    if (!any || typeof any !== 'object')\n        return any;\n    let rv = circularRefs && circularRefs.get(any);\n    if (rv)\n        return rv;\n    if (isArray(any)) {\n        rv = [];\n        circularRefs && circularRefs.set(any, rv);\n        for (var i = 0, l = any.length; i < l; ++i) {\n            rv.push(innerDeepClone(any[i]));\n        }\n    }\n    else if (intrinsicTypes.indexOf(any.constructor) >= 0) {\n        rv = any;\n    }\n    else {\n        const proto = getProto(any);\n        rv = proto === Object.prototype ? {} : Object.create(proto);\n        circularRefs && circularRefs.set(any, rv);\n        for (var prop in any) {\n            if (hasOwn(any, prop)) {\n                rv[prop] = innerDeepClone(any[prop]);\n            }\n        }\n    }\n    return rv;\n}\nconst { toString } = {};\nfunction toStringTag(o) {\n    return toString.call(o).slice(8, -1);\n}\nconst iteratorSymbol = typeof Symbol !== 'undefined' ?\n    Symbol.iterator :\n    '@@iterator';\nconst getIteratorOf = typeof iteratorSymbol === \"symbol\" ? function (x) {\n    var i;\n    return x != null && (i = x[iteratorSymbol]) && i.apply(x);\n} : function () { return null; };\nconst NO_CHAR_ARRAY = {};\nfunction getArrayOf(arrayLike) {\n    var i, a, x, it;\n    if (arguments.length === 1) {\n        if (isArray(arrayLike))\n            return arrayLike.slice();\n        if (this === NO_CHAR_ARRAY && typeof arrayLike === 'string')\n            return [arrayLike];\n        if ((it = getIteratorOf(arrayLike))) {\n            a = [];\n            while ((x = it.next()), !x.done)\n                a.push(x.value);\n            return a;\n        }\n        if (arrayLike == null)\n            return [arrayLike];\n        i = arrayLike.length;\n        if (typeof i === 'number') {\n            a = new Array(i);\n            while (i--)\n                a[i] = arrayLike[i];\n            return a;\n        }\n        return [arrayLike];\n    }\n    i = arguments.length;\n    a = new Array(i);\n    while (i--)\n        a[i] = arguments[i];\n    return a;\n}\nconst isAsyncFunction = typeof Symbol !== 'undefined'\n    ? (fn) => fn[Symbol.toStringTag] === 'AsyncFunction'\n    : () => false;\n\nvar debug = typeof location !== 'undefined' &&\n    /^(http|https):\\/\\/(localhost|127\\.0\\.0\\.1)/.test(location.href);\nfunction setDebug(value, filter) {\n    debug = value;\n    libraryFilter = filter;\n}\nvar libraryFilter = () => true;\nconst NEEDS_THROW_FOR_STACK = !new Error(\"\").stack;\nfunction getErrorWithStack() {\n    if (NEEDS_THROW_FOR_STACK)\n        try {\n            getErrorWithStack.arguments;\n            throw new Error();\n        }\n        catch (e) {\n            return e;\n        }\n    return new Error();\n}\nfunction prettyStack(exception, numIgnoredFrames) {\n    var stack = exception.stack;\n    if (!stack)\n        return \"\";\n    numIgnoredFrames = (numIgnoredFrames || 0);\n    if (stack.indexOf(exception.name) === 0)\n        numIgnoredFrames += (exception.name + exception.message).split('\\n').length;\n    return stack.split('\\n')\n        .slice(numIgnoredFrames)\n        .filter(libraryFilter)\n        .map(frame => \"\\n\" + frame)\n        .join('');\n}\n\nvar dexieErrorNames = [\n    'Modify',\n    'Bulk',\n    'OpenFailed',\n    'VersionChange',\n    'Schema',\n    'Upgrade',\n    'InvalidTable',\n    'MissingAPI',\n    'NoSuchDatabase',\n    'InvalidArgument',\n    'SubTransaction',\n    'Unsupported',\n    'Internal',\n    'DatabaseClosed',\n    'PrematureCommit',\n    'ForeignAwait'\n];\nvar idbDomErrorNames = [\n    'Unknown',\n    'Constraint',\n    'Data',\n    'TransactionInactive',\n    'ReadOnly',\n    'Version',\n    'NotFound',\n    'InvalidState',\n    'InvalidAccess',\n    'Abort',\n    'Timeout',\n    'QuotaExceeded',\n    'Syntax',\n    'DataClone'\n];\nvar errorList = dexieErrorNames.concat(idbDomErrorNames);\nvar defaultTexts = {\n    VersionChanged: \"Database version changed by other database connection\",\n    DatabaseClosed: \"Database has been closed\",\n    Abort: \"Transaction aborted\",\n    TransactionInactive: \"Transaction has already completed or failed\",\n    MissingAPI: \"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb\"\n};\nfunction DexieError(name, msg) {\n    this._e = getErrorWithStack();\n    this.name = name;\n    this.message = msg;\n}\nderive(DexieError).from(Error).extend({\n    stack: {\n        get: function () {\n            return this._stack ||\n                (this._stack = this.name + \": \" + this.message + prettyStack(this._e, 2));\n        }\n    },\n    toString: function () { return this.name + \": \" + this.message; }\n});\nfunction getMultiErrorMessage(msg, failures) {\n    return msg + \". Errors: \" + Object.keys(failures)\n        .map(key => failures[key].toString())\n        .filter((v, i, s) => s.indexOf(v) === i)\n        .join('\\n');\n}\nfunction ModifyError(msg, failures, successCount, failedKeys) {\n    this._e = getErrorWithStack();\n    this.failures = failures;\n    this.failedKeys = failedKeys;\n    this.successCount = successCount;\n    this.message = getMultiErrorMessage(msg, failures);\n}\nderive(ModifyError).from(DexieError);\nfunction BulkError(msg, failures) {\n    this._e = getErrorWithStack();\n    this.name = \"BulkError\";\n    this.failures = Object.keys(failures).map(pos => failures[pos]);\n    this.failuresByPos = failures;\n    this.message = getMultiErrorMessage(msg, failures);\n}\nderive(BulkError).from(DexieError);\nvar errnames = errorList.reduce((obj, name) => (obj[name] = name + \"Error\", obj), {});\nconst BaseException = DexieError;\nvar exceptions = errorList.reduce((obj, name) => {\n    var fullName = name + \"Error\";\n    function DexieError(msgOrInner, inner) {\n        this._e = getErrorWithStack();\n        this.name = fullName;\n        if (!msgOrInner) {\n            this.message = defaultTexts[name] || fullName;\n            this.inner = null;\n        }\n        else if (typeof msgOrInner === 'string') {\n            this.message = `${msgOrInner}${!inner ? '' : '\\n ' + inner}`;\n            this.inner = inner || null;\n        }\n        else if (typeof msgOrInner === 'object') {\n            this.message = `${msgOrInner.name} ${msgOrInner.message}`;\n            this.inner = msgOrInner;\n        }\n    }\n    derive(DexieError).from(BaseException);\n    obj[name] = DexieError;\n    return obj;\n}, {});\nexceptions.Syntax = SyntaxError;\nexceptions.Type = TypeError;\nexceptions.Range = RangeError;\nvar exceptionMap = idbDomErrorNames.reduce((obj, name) => {\n    obj[name + \"Error\"] = exceptions[name];\n    return obj;\n}, {});\nfunction mapError(domError, message) {\n    if (!domError || domError instanceof DexieError || domError instanceof TypeError || domError instanceof SyntaxError || !domError.name || !exceptionMap[domError.name])\n        return domError;\n    var rv = new exceptionMap[domError.name](message || domError.message, domError);\n    if (\"stack\" in domError) {\n        setProp(rv, \"stack\", { get: function () {\n                return this.inner.stack;\n            } });\n    }\n    return rv;\n}\nvar fullNameExceptions = errorList.reduce((obj, name) => {\n    if ([\"Syntax\", \"Type\", \"Range\"].indexOf(name) === -1)\n        obj[name + \"Error\"] = exceptions[name];\n    return obj;\n}, {});\nfullNameExceptions.ModifyError = ModifyError;\nfullNameExceptions.DexieError = DexieError;\nfullNameExceptions.BulkError = BulkError;\n\nfunction nop() { }\nfunction mirror(val) { return val; }\nfunction pureFunctionChain(f1, f2) {\n    if (f1 == null || f1 === mirror)\n        return f2;\n    return function (val) {\n        return f2(f1(val));\n    };\n}\nfunction callBoth(on1, on2) {\n    return function () {\n        on1.apply(this, arguments);\n        on2.apply(this, arguments);\n    };\n}\nfunction hookCreatingChain(f1, f2) {\n    if (f1 === nop)\n        return f2;\n    return function () {\n        var res = f1.apply(this, arguments);\n        if (res !== undefined)\n            arguments[0] = res;\n        var onsuccess = this.onsuccess,\n        onerror = this.onerror;\n        this.onsuccess = null;\n        this.onerror = null;\n        var res2 = f2.apply(this, arguments);\n        if (onsuccess)\n            this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n        if (onerror)\n            this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n        return res2 !== undefined ? res2 : res;\n    };\n}\nfunction hookDeletingChain(f1, f2) {\n    if (f1 === nop)\n        return f2;\n    return function () {\n        f1.apply(this, arguments);\n        var onsuccess = this.onsuccess,\n        onerror = this.onerror;\n        this.onsuccess = this.onerror = null;\n        f2.apply(this, arguments);\n        if (onsuccess)\n            this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n        if (onerror)\n            this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n    };\n}\nfunction hookUpdatingChain(f1, f2) {\n    if (f1 === nop)\n        return f2;\n    return function (modifications) {\n        var res = f1.apply(this, arguments);\n        extend(modifications, res);\n        var onsuccess = this.onsuccess,\n        onerror = this.onerror;\n        this.onsuccess = null;\n        this.onerror = null;\n        var res2 = f2.apply(this, arguments);\n        if (onsuccess)\n            this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n        if (onerror)\n            this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n        return res === undefined ?\n            (res2 === undefined ? undefined : res2) :\n            (extend(res, res2));\n    };\n}\nfunction reverseStoppableEventChain(f1, f2) {\n    if (f1 === nop)\n        return f2;\n    return function () {\n        if (f2.apply(this, arguments) === false)\n            return false;\n        return f1.apply(this, arguments);\n    };\n}\nfunction promisableChain(f1, f2) {\n    if (f1 === nop)\n        return f2;\n    return function () {\n        var res = f1.apply(this, arguments);\n        if (res && typeof res.then === 'function') {\n            var thiz = this, i = arguments.length, args = new Array(i);\n            while (i--)\n                args[i] = arguments[i];\n            return res.then(function () {\n                return f2.apply(thiz, args);\n            });\n        }\n        return f2.apply(this, arguments);\n    };\n}\n\nvar INTERNAL = {};\nconst LONG_STACKS_CLIP_LIMIT = 100,\nMAX_LONG_STACKS = 20, ZONE_ECHO_LIMIT = 100, [resolvedNativePromise, nativePromiseProto, resolvedGlobalPromise] = typeof Promise === 'undefined' ?\n    [] :\n    (() => {\n        let globalP = Promise.resolve();\n        if (typeof crypto === 'undefined' || !crypto.subtle)\n            return [globalP, getProto(globalP), globalP];\n        const nativeP = crypto.subtle.digest(\"SHA-512\", new Uint8Array([0]));\n        return [\n            nativeP,\n            getProto(nativeP),\n            globalP\n        ];\n    })(), nativePromiseThen = nativePromiseProto && nativePromiseProto.then;\nconst NativePromise = resolvedNativePromise && resolvedNativePromise.constructor;\nconst patchGlobalPromise = !!resolvedGlobalPromise;\nvar stack_being_generated = false;\nvar schedulePhysicalTick = resolvedGlobalPromise ?\n    () => { resolvedGlobalPromise.then(physicalTick); }\n    :\n        _global.setImmediate ?\n            setImmediate.bind(null, physicalTick) :\n            _global.MutationObserver ?\n                () => {\n                    var hiddenDiv = document.createElement(\"div\");\n                    (new MutationObserver(() => {\n                        physicalTick();\n                        hiddenDiv = null;\n                    })).observe(hiddenDiv, { attributes: true });\n                    hiddenDiv.setAttribute('i', '1');\n                } :\n                () => { setTimeout(physicalTick, 0); };\nvar asap = function (callback, args) {\n    microtickQueue.push([callback, args]);\n    if (needsNewPhysicalTick) {\n        schedulePhysicalTick();\n        needsNewPhysicalTick = false;\n    }\n};\nvar isOutsideMicroTick = true,\nneedsNewPhysicalTick = true,\nunhandledErrors = [],\nrejectingErrors = [],\ncurrentFulfiller = null, rejectionMapper = mirror;\nvar globalPSD = {\n    id: 'global',\n    global: true,\n    ref: 0,\n    unhandleds: [],\n    onunhandled: globalError,\n    pgp: false,\n    env: {},\n    finalize: function () {\n        this.unhandleds.forEach(uh => {\n            try {\n                globalError(uh[0], uh[1]);\n            }\n            catch (e) { }\n        });\n    }\n};\nvar PSD = globalPSD;\nvar microtickQueue = [];\nvar numScheduledCalls = 0;\nvar tickFinalizers = [];\nfunction DexiePromise(fn) {\n    if (typeof this !== 'object')\n        throw new TypeError('Promises must be constructed via new');\n    this._listeners = [];\n    this.onuncatched = nop;\n    this._lib = false;\n    var psd = (this._PSD = PSD);\n    if (debug) {\n        this._stackHolder = getErrorWithStack();\n        this._prev = null;\n        this._numPrev = 0;\n    }\n    if (typeof fn !== 'function') {\n        if (fn !== INTERNAL)\n            throw new TypeError('Not a function');\n        this._state = arguments[1];\n        this._value = arguments[2];\n        if (this._state === false)\n            handleRejection(this, this._value);\n        return;\n    }\n    this._state = null;\n    this._value = null;\n    ++psd.ref;\n    executePromiseTask(this, fn);\n}\nconst thenProp = {\n    get: function () {\n        var psd = PSD, microTaskId = totalEchoes;\n        function then(onFulfilled, onRejected) {\n            var possibleAwait = !psd.global && (psd !== PSD || microTaskId !== totalEchoes);\n            const cleanup = possibleAwait && !decrementExpectedAwaits();\n            var rv = new DexiePromise((resolve, reject) => {\n                propagateToListener(this, new Listener(nativeAwaitCompatibleWrap(onFulfilled, psd, possibleAwait, cleanup), nativeAwaitCompatibleWrap(onRejected, psd, possibleAwait, cleanup), resolve, reject, psd));\n            });\n            debug && linkToPreviousPromise(rv, this);\n            return rv;\n        }\n        then.prototype = INTERNAL;\n        return then;\n    },\n    set: function (value) {\n        setProp(this, 'then', value && value.prototype === INTERNAL ?\n            thenProp :\n            {\n                get: function () {\n                    return value;\n                },\n                set: thenProp.set\n            });\n    }\n};\nprops(DexiePromise.prototype, {\n    then: thenProp,\n    _then: function (onFulfilled, onRejected) {\n        propagateToListener(this, new Listener(null, null, onFulfilled, onRejected, PSD));\n    },\n    catch: function (onRejected) {\n        if (arguments.length === 1)\n            return this.then(null, onRejected);\n        var type = arguments[0], handler = arguments[1];\n        return typeof type === 'function' ? this.then(null, err =>\n        err instanceof type ? handler(err) : PromiseReject(err))\n            : this.then(null, err =>\n            err && err.name === type ? handler(err) : PromiseReject(err));\n    },\n    finally: function (onFinally) {\n        return this.then(value => {\n            onFinally();\n            return value;\n        }, err => {\n            onFinally();\n            return PromiseReject(err);\n        });\n    },\n    stack: {\n        get: function () {\n            if (this._stack)\n                return this._stack;\n            try {\n                stack_being_generated = true;\n                var stacks = getStack(this, [], MAX_LONG_STACKS);\n                var stack = stacks.join(\"\\nFrom previous: \");\n                if (this._state !== null)\n                    this._stack = stack;\n                return stack;\n            }\n            finally {\n                stack_being_generated = false;\n            }\n        }\n    },\n    timeout: function (ms, msg) {\n        return ms < Infinity ?\n            new DexiePromise((resolve, reject) => {\n                var handle = setTimeout(() => reject(new exceptions.Timeout(msg)), ms);\n                this.then(resolve, reject).finally(clearTimeout.bind(null, handle));\n            }) : this;\n    }\n});\nif (typeof Symbol !== 'undefined' && Symbol.toStringTag)\n    setProp(DexiePromise.prototype, Symbol.toStringTag, 'Dexie.Promise');\nglobalPSD.env = snapShot();\nfunction Listener(onFulfilled, onRejected, resolve, reject, zone) {\n    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n    this.resolve = resolve;\n    this.reject = reject;\n    this.psd = zone;\n}\nprops(DexiePromise, {\n    all: function () {\n        var values = getArrayOf.apply(null, arguments)\n            .map(onPossibleParallellAsync);\n        return new DexiePromise(function (resolve, reject) {\n            if (values.length === 0)\n                resolve([]);\n            var remaining = values.length;\n            values.forEach((a, i) => DexiePromise.resolve(a).then(x => {\n                values[i] = x;\n                if (!--remaining)\n                    resolve(values);\n            }, reject));\n        });\n    },\n    resolve: value => {\n        if (value instanceof DexiePromise)\n            return value;\n        if (value && typeof value.then === 'function')\n            return new DexiePromise((resolve, reject) => {\n                value.then(resolve, reject);\n            });\n        var rv = new DexiePromise(INTERNAL, true, value);\n        linkToPreviousPromise(rv, currentFulfiller);\n        return rv;\n    },\n    reject: PromiseReject,\n    race: function () {\n        var values = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n        return new DexiePromise((resolve, reject) => {\n            values.map(value => DexiePromise.resolve(value).then(resolve, reject));\n        });\n    },\n    PSD: {\n        get: () => PSD,\n        set: value => PSD = value\n    },\n    totalEchoes: { get: () => totalEchoes },\n    newPSD: newScope,\n    usePSD: usePSD,\n    scheduler: {\n        get: () => asap,\n        set: value => { asap = value; }\n    },\n    rejectionMapper: {\n        get: () => rejectionMapper,\n        set: value => { rejectionMapper = value; }\n    },\n    follow: (fn, zoneProps) => {\n        return new DexiePromise((resolve, reject) => {\n            return newScope((resolve, reject) => {\n                var psd = PSD;\n                psd.unhandleds = [];\n                psd.onunhandled = reject;\n                psd.finalize = callBoth(function () {\n                    run_at_end_of_this_or_next_physical_tick(() => {\n                        this.unhandleds.length === 0 ? resolve() : reject(this.unhandleds[0]);\n                    });\n                }, psd.finalize);\n                fn();\n            }, zoneProps, resolve, reject);\n        });\n    }\n});\nif (NativePromise) {\n    if (NativePromise.allSettled)\n        setProp(DexiePromise, \"allSettled\", function () {\n            const possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n            return new DexiePromise(resolve => {\n                if (possiblePromises.length === 0)\n                    resolve([]);\n                let remaining = possiblePromises.length;\n                const results = new Array(remaining);\n                possiblePromises.forEach((p, i) => DexiePromise.resolve(p).then(value => results[i] = { status: \"fulfilled\", value }, reason => results[i] = { status: \"rejected\", reason })\n                    .then(() => --remaining || resolve(results)));\n            });\n        });\n    if (NativePromise.any && typeof AggregateError !== 'undefined')\n        setProp(DexiePromise, \"any\", function () {\n            const possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n            return new DexiePromise((resolve, reject) => {\n                if (possiblePromises.length === 0)\n                    reject(new AggregateError([]));\n                let remaining = possiblePromises.length;\n                const failures = new Array(remaining);\n                possiblePromises.forEach((p, i) => DexiePromise.resolve(p).then(value => resolve(value), failure => {\n                    failures[i] = failure;\n                    if (!--remaining)\n                        reject(new AggregateError(failures));\n                }));\n            });\n        });\n}\nfunction executePromiseTask(promise, fn) {\n    try {\n        fn(value => {\n            if (promise._state !== null)\n                return;\n            if (value === promise)\n                throw new TypeError('A promise cannot be resolved with itself.');\n            var shouldExecuteTick = promise._lib && beginMicroTickScope();\n            if (value && typeof value.then === 'function') {\n                executePromiseTask(promise, (resolve, reject) => {\n                    value instanceof DexiePromise ?\n                        value._then(resolve, reject) :\n                        value.then(resolve, reject);\n                });\n            }\n            else {\n                promise._state = true;\n                promise._value = value;\n                propagateAllListeners(promise);\n            }\n            if (shouldExecuteTick)\n                endMicroTickScope();\n        }, handleRejection.bind(null, promise));\n    }\n    catch (ex) {\n        handleRejection(promise, ex);\n    }\n}\nfunction handleRejection(promise, reason) {\n    rejectingErrors.push(reason);\n    if (promise._state !== null)\n        return;\n    var shouldExecuteTick = promise._lib && beginMicroTickScope();\n    reason = rejectionMapper(reason);\n    promise._state = false;\n    promise._value = reason;\n    debug && reason !== null && typeof reason === 'object' && !reason._promise && tryCatch(() => {\n        var origProp = getPropertyDescriptor(reason, \"stack\");\n        reason._promise = promise;\n        setProp(reason, \"stack\", {\n            get: () => stack_being_generated ?\n                origProp && (origProp.get ?\n                    origProp.get.apply(reason) :\n                    origProp.value) :\n                promise.stack\n        });\n    });\n    addPossiblyUnhandledError(promise);\n    propagateAllListeners(promise);\n    if (shouldExecuteTick)\n        endMicroTickScope();\n}\nfunction propagateAllListeners(promise) {\n    var listeners = promise._listeners;\n    promise._listeners = [];\n    for (var i = 0, len = listeners.length; i < len; ++i) {\n        propagateToListener(promise, listeners[i]);\n    }\n    var psd = promise._PSD;\n    --psd.ref || psd.finalize();\n    if (numScheduledCalls === 0) {\n        ++numScheduledCalls;\n        asap(() => {\n            if (--numScheduledCalls === 0)\n                finalizePhysicalTick();\n        }, []);\n    }\n}\nfunction propagateToListener(promise, listener) {\n    if (promise._state === null) {\n        promise._listeners.push(listener);\n        return;\n    }\n    var cb = promise._state ? listener.onFulfilled : listener.onRejected;\n    if (cb === null) {\n        return (promise._state ? listener.resolve : listener.reject)(promise._value);\n    }\n    ++listener.psd.ref;\n    ++numScheduledCalls;\n    asap(callListener, [cb, promise, listener]);\n}\nfunction callListener(cb, promise, listener) {\n    try {\n        currentFulfiller = promise;\n        var ret, value = promise._value;\n        if (promise._state) {\n            ret = cb(value);\n        }\n        else {\n            if (rejectingErrors.length)\n                rejectingErrors = [];\n            ret = cb(value);\n            if (rejectingErrors.indexOf(value) === -1)\n                markErrorAsHandled(promise);\n        }\n        listener.resolve(ret);\n    }\n    catch (e) {\n        listener.reject(e);\n    }\n    finally {\n        currentFulfiller = null;\n        if (--numScheduledCalls === 0)\n            finalizePhysicalTick();\n        --listener.psd.ref || listener.psd.finalize();\n    }\n}\nfunction getStack(promise, stacks, limit) {\n    if (stacks.length === limit)\n        return stacks;\n    var stack = \"\";\n    if (promise._state === false) {\n        var failure = promise._value, errorName, message;\n        if (failure != null) {\n            errorName = failure.name || \"Error\";\n            message = failure.message || failure;\n            stack = prettyStack(failure, 0);\n        }\n        else {\n            errorName = failure;\n            message = \"\";\n        }\n        stacks.push(errorName + (message ? \": \" + message : \"\") + stack);\n    }\n    if (debug) {\n        stack = prettyStack(promise._stackHolder, 2);\n        if (stack && stacks.indexOf(stack) === -1)\n            stacks.push(stack);\n        if (promise._prev)\n            getStack(promise._prev, stacks, limit);\n    }\n    return stacks;\n}\nfunction linkToPreviousPromise(promise, prev) {\n    var numPrev = prev ? prev._numPrev + 1 : 0;\n    if (numPrev < LONG_STACKS_CLIP_LIMIT) {\n        promise._prev = prev;\n        promise._numPrev = numPrev;\n    }\n}\nfunction physicalTick() {\n    beginMicroTickScope() && endMicroTickScope();\n}\nfunction beginMicroTickScope() {\n    var wasRootExec = isOutsideMicroTick;\n    isOutsideMicroTick = false;\n    needsNewPhysicalTick = false;\n    return wasRootExec;\n}\nfunction endMicroTickScope() {\n    var callbacks, i, l;\n    do {\n        while (microtickQueue.length > 0) {\n            callbacks = microtickQueue;\n            microtickQueue = [];\n            l = callbacks.length;\n            for (i = 0; i < l; ++i) {\n                var item = callbacks[i];\n                item[0].apply(null, item[1]);\n            }\n        }\n    } while (microtickQueue.length > 0);\n    isOutsideMicroTick = true;\n    needsNewPhysicalTick = true;\n}\nfunction finalizePhysicalTick() {\n    var unhandledErrs = unhandledErrors;\n    unhandledErrors = [];\n    unhandledErrs.forEach(p => {\n        p._PSD.onunhandled.call(null, p._value, p);\n    });\n    var finalizers = tickFinalizers.slice(0);\n    var i = finalizers.length;\n    while (i)\n        finalizers[--i]();\n}\nfunction run_at_end_of_this_or_next_physical_tick(fn) {\n    function finalizer() {\n        fn();\n        tickFinalizers.splice(tickFinalizers.indexOf(finalizer), 1);\n    }\n    tickFinalizers.push(finalizer);\n    ++numScheduledCalls;\n    asap(() => {\n        if (--numScheduledCalls === 0)\n            finalizePhysicalTick();\n    }, []);\n}\nfunction addPossiblyUnhandledError(promise) {\n    if (!unhandledErrors.some(p => p._value === promise._value))\n        unhandledErrors.push(promise);\n}\nfunction markErrorAsHandled(promise) {\n    var i = unhandledErrors.length;\n    while (i)\n        if (unhandledErrors[--i]._value === promise._value) {\n            unhandledErrors.splice(i, 1);\n            return;\n        }\n}\nfunction PromiseReject(reason) {\n    return new DexiePromise(INTERNAL, false, reason);\n}\nfunction wrap(fn, errorCatcher) {\n    var psd = PSD;\n    return function () {\n        var wasRootExec = beginMicroTickScope(), outerScope = PSD;\n        try {\n            switchToZone(psd, true);\n            return fn.apply(this, arguments);\n        }\n        catch (e) {\n            errorCatcher && errorCatcher(e);\n        }\n        finally {\n            switchToZone(outerScope, false);\n            if (wasRootExec)\n                endMicroTickScope();\n        }\n    };\n}\nconst task = { awaits: 0, echoes: 0, id: 0 };\nvar taskCounter = 0;\nvar zoneStack = [];\nvar zoneEchoes = 0;\nvar totalEchoes = 0;\nvar zone_id_counter = 0;\nfunction newScope(fn, props, a1, a2) {\n    var parent = PSD, psd = Object.create(parent);\n    psd.parent = parent;\n    psd.ref = 0;\n    psd.global = false;\n    psd.id = ++zone_id_counter;\n    var globalEnv = globalPSD.env;\n    psd.env = patchGlobalPromise ? {\n        Promise: DexiePromise,\n        PromiseProp: { value: DexiePromise, configurable: true, writable: true },\n        all: DexiePromise.all,\n        race: DexiePromise.race,\n        allSettled: DexiePromise.allSettled,\n        any: DexiePromise.any,\n        resolve: DexiePromise.resolve,\n        reject: DexiePromise.reject,\n        nthen: getPatchedPromiseThen(globalEnv.nthen, psd),\n        gthen: getPatchedPromiseThen(globalEnv.gthen, psd)\n    } : {};\n    if (props)\n        extend(psd, props);\n    ++parent.ref;\n    psd.finalize = function () {\n        --this.parent.ref || this.parent.finalize();\n    };\n    var rv = usePSD(psd, fn, a1, a2);\n    if (psd.ref === 0)\n        psd.finalize();\n    return rv;\n}\nfunction incrementExpectedAwaits() {\n    if (!task.id)\n        task.id = ++taskCounter;\n    ++task.awaits;\n    task.echoes += ZONE_ECHO_LIMIT;\n    return task.id;\n}\nfunction decrementExpectedAwaits() {\n    if (!task.awaits)\n        return false;\n    if (--task.awaits === 0)\n        task.id = 0;\n    task.echoes = task.awaits * ZONE_ECHO_LIMIT;\n    return true;\n}\nif (('' + nativePromiseThen).indexOf('[native code]') === -1) {\n    incrementExpectedAwaits = decrementExpectedAwaits = nop;\n}\nfunction onPossibleParallellAsync(possiblePromise) {\n    if (task.echoes && possiblePromise && possiblePromise.constructor === NativePromise) {\n        incrementExpectedAwaits();\n        return possiblePromise.then(x => {\n            decrementExpectedAwaits();\n            return x;\n        }, e => {\n            decrementExpectedAwaits();\n            return rejection(e);\n        });\n    }\n    return possiblePromise;\n}\nfunction zoneEnterEcho(targetZone) {\n    ++totalEchoes;\n    if (!task.echoes || --task.echoes === 0) {\n        task.echoes = task.id = 0;\n    }\n    zoneStack.push(PSD);\n    switchToZone(targetZone, true);\n}\nfunction zoneLeaveEcho() {\n    var zone = zoneStack[zoneStack.length - 1];\n    zoneStack.pop();\n    switchToZone(zone, false);\n}\nfunction switchToZone(targetZone, bEnteringZone) {\n    var currentZone = PSD;\n    if (bEnteringZone ? task.echoes && (!zoneEchoes++ || targetZone !== PSD) : zoneEchoes && (!--zoneEchoes || targetZone !== PSD)) {\n        enqueueNativeMicroTask(bEnteringZone ? zoneEnterEcho.bind(null, targetZone) : zoneLeaveEcho);\n    }\n    if (targetZone === PSD)\n        return;\n    PSD = targetZone;\n    if (currentZone === globalPSD)\n        globalPSD.env = snapShot();\n    if (patchGlobalPromise) {\n        var GlobalPromise = globalPSD.env.Promise;\n        var targetEnv = targetZone.env;\n        nativePromiseProto.then = targetEnv.nthen;\n        GlobalPromise.prototype.then = targetEnv.gthen;\n        if (currentZone.global || targetZone.global) {\n            Object.defineProperty(_global, 'Promise', targetEnv.PromiseProp);\n            GlobalPromise.all = targetEnv.all;\n            GlobalPromise.race = targetEnv.race;\n            GlobalPromise.resolve = targetEnv.resolve;\n            GlobalPromise.reject = targetEnv.reject;\n            if (targetEnv.allSettled)\n                GlobalPromise.allSettled = targetEnv.allSettled;\n            if (targetEnv.any)\n                GlobalPromise.any = targetEnv.any;\n        }\n    }\n}\nfunction snapShot() {\n    var GlobalPromise = _global.Promise;\n    return patchGlobalPromise ? {\n        Promise: GlobalPromise,\n        PromiseProp: Object.getOwnPropertyDescriptor(_global, \"Promise\"),\n        all: GlobalPromise.all,\n        race: GlobalPromise.race,\n        allSettled: GlobalPromise.allSettled,\n        any: GlobalPromise.any,\n        resolve: GlobalPromise.resolve,\n        reject: GlobalPromise.reject,\n        nthen: nativePromiseProto.then,\n        gthen: GlobalPromise.prototype.then\n    } : {};\n}\nfunction usePSD(psd, fn, a1, a2, a3) {\n    var outerScope = PSD;\n    try {\n        switchToZone(psd, true);\n        return fn(a1, a2, a3);\n    }\n    finally {\n        switchToZone(outerScope, false);\n    }\n}\nfunction enqueueNativeMicroTask(job) {\n    nativePromiseThen.call(resolvedNativePromise, job);\n}\nfunction nativeAwaitCompatibleWrap(fn, zone, possibleAwait, cleanup) {\n    return typeof fn !== 'function' ? fn : function () {\n        var outerZone = PSD;\n        if (possibleAwait)\n            incrementExpectedAwaits();\n        switchToZone(zone, true);\n        try {\n            return fn.apply(this, arguments);\n        }\n        finally {\n            switchToZone(outerZone, false);\n            if (cleanup)\n                enqueueNativeMicroTask(decrementExpectedAwaits);\n        }\n    };\n}\nfunction getPatchedPromiseThen(origThen, zone) {\n    return function (onResolved, onRejected) {\n        return origThen.call(this, nativeAwaitCompatibleWrap(onResolved, zone), nativeAwaitCompatibleWrap(onRejected, zone));\n    };\n}\nconst UNHANDLEDREJECTION = \"unhandledrejection\";\nfunction globalError(err, promise) {\n    var rv;\n    try {\n        rv = promise.onuncatched(err);\n    }\n    catch (e) { }\n    if (rv !== false)\n        try {\n            var event, eventData = { promise: promise, reason: err };\n            if (_global.document && document.createEvent) {\n                event = document.createEvent('Event');\n                event.initEvent(UNHANDLEDREJECTION, true, true);\n                extend(event, eventData);\n            }\n            else if (_global.CustomEvent) {\n                event = new CustomEvent(UNHANDLEDREJECTION, { detail: eventData });\n                extend(event, eventData);\n            }\n            if (event && _global.dispatchEvent) {\n                dispatchEvent(event);\n                if (!_global.PromiseRejectionEvent && _global.onunhandledrejection)\n                    try {\n                        _global.onunhandledrejection(event);\n                    }\n                    catch (_) { }\n            }\n            if (debug && event && !event.defaultPrevented) {\n                console.warn(`Unhandled rejection: ${err.stack || err}`);\n            }\n        }\n        catch (e) { }\n}\nvar rejection = DexiePromise.reject;\n\nfunction tempTransaction(db, mode, storeNames, fn) {\n    if (!db.idbdb || (!db._state.openComplete && (!PSD.letThrough && !db._vip))) {\n        if (db._state.openComplete) {\n            return rejection(new exceptions.DatabaseClosed(db._state.dbOpenError));\n        }\n        if (!db._state.isBeingOpened) {\n            if (!db._options.autoOpen)\n                return rejection(new exceptions.DatabaseClosed());\n            db.open().catch(nop);\n        }\n        return db._state.dbReadyPromise.then(() => tempTransaction(db, mode, storeNames, fn));\n    }\n    else {\n        var trans = db._createTransaction(mode, storeNames, db._dbSchema);\n        try {\n            trans.create();\n        }\n        catch (ex) {\n            return rejection(ex);\n        }\n        return trans._promise(mode, (resolve, reject) => {\n            return newScope(() => {\n                PSD.trans = trans;\n                return fn(resolve, reject, trans);\n            });\n        }).then(result => {\n            return trans._completion.then(() => result);\n        });\n    }\n}\n\nconst DEXIE_VERSION = '3.2.0';\nconst maxString = String.fromCharCode(65535);\nconst minKey = -Infinity;\nconst INVALID_KEY_ARGUMENT = \"Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.\";\nconst STRING_EXPECTED = \"String expected.\";\nconst connections = [];\nconst isIEOrEdge = typeof navigator !== 'undefined' && /(MSIE|Trident|Edge)/.test(navigator.userAgent);\nconst hasIEDeleteObjectStoreBug = isIEOrEdge;\nconst hangsOnDeleteLargeKeyRange = isIEOrEdge;\nconst dexieStackFrameFilter = frame => !/(dexie\\.js|dexie\\.min\\.js)/.test(frame);\nconst DBNAMES_DB = '__dbnames';\nconst READONLY = 'readonly';\nconst READWRITE = 'readwrite';\n\nfunction combine(filter1, filter2) {\n    return filter1 ?\n        filter2 ?\n            function () { return filter1.apply(this, arguments) && filter2.apply(this, arguments); } :\n            filter1 :\n        filter2;\n}\n\nconst AnyRange = {\n    type: 3 ,\n    lower: -Infinity,\n    lowerOpen: false,\n    upper: [[]],\n    upperOpen: false\n};\n\nfunction workaroundForUndefinedPrimKey(keyPath) {\n    return typeof keyPath === \"string\" && !/\\./.test(keyPath)\n        ? (obj) => {\n            if (obj[keyPath] === undefined && (keyPath in obj)) {\n                obj = deepClone(obj);\n                delete obj[keyPath];\n            }\n            return obj;\n        }\n        : (obj) => obj;\n}\n\nclass Table {\n    _trans(mode, fn, writeLocked) {\n        const trans = this._tx || PSD.trans;\n        const tableName = this.name;\n        function checkTableInTransaction(resolve, reject, trans) {\n            if (!trans.schema[tableName])\n                throw new exceptions.NotFound(\"Table \" + tableName + \" not part of transaction\");\n            return fn(trans.idbtrans, trans);\n        }\n        const wasRootExec = beginMicroTickScope();\n        try {\n            return trans && trans.db === this.db ?\n                trans === PSD.trans ?\n                    trans._promise(mode, checkTableInTransaction, writeLocked) :\n                    newScope(() => trans._promise(mode, checkTableInTransaction, writeLocked), { trans: trans, transless: PSD.transless || PSD }) :\n                tempTransaction(this.db, mode, [this.name], checkTableInTransaction);\n        }\n        finally {\n            if (wasRootExec)\n                endMicroTickScope();\n        }\n    }\n    get(keyOrCrit, cb) {\n        if (keyOrCrit && keyOrCrit.constructor === Object)\n            return this.where(keyOrCrit).first(cb);\n        return this._trans('readonly', (trans) => {\n            return this.core.get({ trans, key: keyOrCrit })\n                .then(res => this.hook.reading.fire(res));\n        }).then(cb);\n    }\n    where(indexOrCrit) {\n        if (typeof indexOrCrit === 'string')\n            return new this.db.WhereClause(this, indexOrCrit);\n        if (isArray(indexOrCrit))\n            return new this.db.WhereClause(this, `[${indexOrCrit.join('+')}]`);\n        const keyPaths = keys(indexOrCrit);\n        if (keyPaths.length === 1)\n            return this\n                .where(keyPaths[0])\n                .equals(indexOrCrit[keyPaths[0]]);\n        const compoundIndex = this.schema.indexes.concat(this.schema.primKey).filter(ix => ix.compound &&\n            keyPaths.every(keyPath => ix.keyPath.indexOf(keyPath) >= 0) &&\n            ix.keyPath.every(keyPath => keyPaths.indexOf(keyPath) >= 0))[0];\n        if (compoundIndex && this.db._maxKey !== maxString)\n            return this\n                .where(compoundIndex.name)\n                .equals(compoundIndex.keyPath.map(kp => indexOrCrit[kp]));\n        if (!compoundIndex && debug)\n            console.warn(`The query ${JSON.stringify(indexOrCrit)} on ${this.name} would benefit of a ` +\n                `compound index [${keyPaths.join('+')}]`);\n        const { idxByName } = this.schema;\n        const idb = this.db._deps.indexedDB;\n        function equals(a, b) {\n            try {\n                return idb.cmp(a, b) === 0;\n            }\n            catch (e) {\n                return false;\n            }\n        }\n        const [idx, filterFunction] = keyPaths.reduce(([prevIndex, prevFilterFn], keyPath) => {\n            const index = idxByName[keyPath];\n            const value = indexOrCrit[keyPath];\n            return [\n                prevIndex || index,\n                prevIndex || !index ?\n                    combine(prevFilterFn, index && index.multi ?\n                        x => {\n                            const prop = getByKeyPath(x, keyPath);\n                            return isArray(prop) && prop.some(item => equals(value, item));\n                        } : x => equals(value, getByKeyPath(x, keyPath)))\n                    : prevFilterFn\n            ];\n        }, [null, null]);\n        return idx ?\n            this.where(idx.name).equals(indexOrCrit[idx.keyPath])\n                .filter(filterFunction) :\n            compoundIndex ?\n                this.filter(filterFunction) :\n                this.where(keyPaths).equals('');\n    }\n    filter(filterFunction) {\n        return this.toCollection().and(filterFunction);\n    }\n    count(thenShortcut) {\n        return this.toCollection().count(thenShortcut);\n    }\n    offset(offset) {\n        return this.toCollection().offset(offset);\n    }\n    limit(numRows) {\n        return this.toCollection().limit(numRows);\n    }\n    each(callback) {\n        return this.toCollection().each(callback);\n    }\n    toArray(thenShortcut) {\n        return this.toCollection().toArray(thenShortcut);\n    }\n    toCollection() {\n        return new this.db.Collection(new this.db.WhereClause(this));\n    }\n    orderBy(index) {\n        return new this.db.Collection(new this.db.WhereClause(this, isArray(index) ?\n            `[${index.join('+')}]` :\n            index));\n    }\n    reverse() {\n        return this.toCollection().reverse();\n    }\n    mapToClass(constructor) {\n        this.schema.mappedClass = constructor;\n        const readHook = obj => {\n            if (!obj)\n                return obj;\n            const res = Object.create(constructor.prototype);\n            for (var m in obj)\n                if (hasOwn(obj, m))\n                    try {\n                        res[m] = obj[m];\n                    }\n                    catch (_) { }\n            return res;\n        };\n        if (this.schema.readHook) {\n            this.hook.reading.unsubscribe(this.schema.readHook);\n        }\n        this.schema.readHook = readHook;\n        this.hook(\"reading\", readHook);\n        return constructor;\n    }\n    defineClass() {\n        function Class(content) {\n            extend(this, content);\n        }\n        return this.mapToClass(Class);\n    }\n    add(obj, key) {\n        const { auto, keyPath } = this.schema.primKey;\n        let objToAdd = obj;\n        if (keyPath && auto) {\n            objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);\n        }\n        return this._trans('readwrite', trans => {\n            return this.core.mutate({ trans, type: 'add', keys: key != null ? [key] : null, values: [objToAdd] });\n        }).then(res => res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult)\n            .then(lastResult => {\n            if (keyPath) {\n                try {\n                    setByKeyPath(obj, keyPath, lastResult);\n                }\n                catch (_) { }\n            }\n            return lastResult;\n        });\n    }\n    update(keyOrObject, modifications) {\n        if (typeof keyOrObject === 'object' && !isArray(keyOrObject)) {\n            const key = getByKeyPath(keyOrObject, this.schema.primKey.keyPath);\n            if (key === undefined)\n                return rejection(new exceptions.InvalidArgument(\"Given object does not contain its primary key\"));\n            try {\n                if (typeof modifications !== \"function\") {\n                    keys(modifications).forEach(keyPath => {\n                        setByKeyPath(keyOrObject, keyPath, modifications[keyPath]);\n                    });\n                }\n                else {\n                    modifications(keyOrObject, { value: keyOrObject, primKey: key });\n                }\n            }\n            catch (_a) {\n            }\n            return this.where(\":id\").equals(key).modify(modifications);\n        }\n        else {\n            return this.where(\":id\").equals(keyOrObject).modify(modifications);\n        }\n    }\n    put(obj, key) {\n        const { auto, keyPath } = this.schema.primKey;\n        let objToAdd = obj;\n        if (keyPath && auto) {\n            objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);\n        }\n        return this._trans('readwrite', trans => this.core.mutate({ trans, type: 'put', values: [objToAdd], keys: key != null ? [key] : null }))\n            .then(res => res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult)\n            .then(lastResult => {\n            if (keyPath) {\n                try {\n                    setByKeyPath(obj, keyPath, lastResult);\n                }\n                catch (_) { }\n            }\n            return lastResult;\n        });\n    }\n    delete(key) {\n        return this._trans('readwrite', trans => this.core.mutate({ trans, type: 'delete', keys: [key] }))\n            .then(res => res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined);\n    }\n    clear() {\n        return this._trans('readwrite', trans => this.core.mutate({ trans, type: 'deleteRange', range: AnyRange }))\n            .then(res => res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined);\n    }\n    bulkGet(keys) {\n        return this._trans('readonly', trans => {\n            return this.core.getMany({\n                keys,\n                trans\n            }).then(result => result.map(res => this.hook.reading.fire(res)));\n        });\n    }\n    bulkAdd(objects, keysOrOptions, options) {\n        const keys = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;\n        options = options || (keys ? undefined : keysOrOptions);\n        const wantResults = options ? options.allKeys : undefined;\n        return this._trans('readwrite', trans => {\n            const { auto, keyPath } = this.schema.primKey;\n            if (keyPath && keys)\n                throw new exceptions.InvalidArgument(\"bulkAdd(): keys argument invalid on tables with inbound keys\");\n            if (keys && keys.length !== objects.length)\n                throw new exceptions.InvalidArgument(\"Arguments objects and keys must have the same length\");\n            const numObjects = objects.length;\n            let objectsToAdd = keyPath && auto ?\n                objects.map(workaroundForUndefinedPrimKey(keyPath)) :\n                objects;\n            return this.core.mutate({ trans, type: 'add', keys: keys, values: objectsToAdd, wantResults })\n                .then(({ numFailures, results, lastResult, failures }) => {\n                const result = wantResults ? results : lastResult;\n                if (numFailures === 0)\n                    return result;\n                throw new BulkError(`${this.name}.bulkAdd(): ${numFailures} of ${numObjects} operations failed`, failures);\n            });\n        });\n    }\n    bulkPut(objects, keysOrOptions, options) {\n        const keys = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;\n        options = options || (keys ? undefined : keysOrOptions);\n        const wantResults = options ? options.allKeys : undefined;\n        return this._trans('readwrite', trans => {\n            const { auto, keyPath } = this.schema.primKey;\n            if (keyPath && keys)\n                throw new exceptions.InvalidArgument(\"bulkPut(): keys argument invalid on tables with inbound keys\");\n            if (keys && keys.length !== objects.length)\n                throw new exceptions.InvalidArgument(\"Arguments objects and keys must have the same length\");\n            const numObjects = objects.length;\n            let objectsToPut = keyPath && auto ?\n                objects.map(workaroundForUndefinedPrimKey(keyPath)) :\n                objects;\n            return this.core.mutate({ trans, type: 'put', keys: keys, values: objectsToPut, wantResults })\n                .then(({ numFailures, results, lastResult, failures }) => {\n                const result = wantResults ? results : lastResult;\n                if (numFailures === 0)\n                    return result;\n                throw new BulkError(`${this.name}.bulkPut(): ${numFailures} of ${numObjects} operations failed`, failures);\n            });\n        });\n    }\n    bulkDelete(keys) {\n        const numKeys = keys.length;\n        return this._trans('readwrite', trans => {\n            return this.core.mutate({ trans, type: 'delete', keys: keys });\n        }).then(({ numFailures, lastResult, failures }) => {\n            if (numFailures === 0)\n                return lastResult;\n            throw new BulkError(`${this.name}.bulkDelete(): ${numFailures} of ${numKeys} operations failed`, failures);\n        });\n    }\n}\n\nfunction Events(ctx) {\n    var evs = {};\n    var rv = function (eventName, subscriber) {\n        if (subscriber) {\n            var i = arguments.length, args = new Array(i - 1);\n            while (--i)\n                args[i - 1] = arguments[i];\n            evs[eventName].subscribe.apply(null, args);\n            return ctx;\n        }\n        else if (typeof (eventName) === 'string') {\n            return evs[eventName];\n        }\n    };\n    rv.addEventType = add;\n    for (var i = 1, l = arguments.length; i < l; ++i) {\n        add(arguments[i]);\n    }\n    return rv;\n    function add(eventName, chainFunction, defaultFunction) {\n        if (typeof eventName === 'object')\n            return addConfiguredEvents(eventName);\n        if (!chainFunction)\n            chainFunction = reverseStoppableEventChain;\n        if (!defaultFunction)\n            defaultFunction = nop;\n        var context = {\n            subscribers: [],\n            fire: defaultFunction,\n            subscribe: function (cb) {\n                if (context.subscribers.indexOf(cb) === -1) {\n                    context.subscribers.push(cb);\n                    context.fire = chainFunction(context.fire, cb);\n                }\n            },\n            unsubscribe: function (cb) {\n                context.subscribers = context.subscribers.filter(function (fn) { return fn !== cb; });\n                context.fire = context.subscribers.reduce(chainFunction, defaultFunction);\n            }\n        };\n        evs[eventName] = rv[eventName] = context;\n        return context;\n    }\n    function addConfiguredEvents(cfg) {\n        keys(cfg).forEach(function (eventName) {\n            var args = cfg[eventName];\n            if (isArray(args)) {\n                add(eventName, cfg[eventName][0], cfg[eventName][1]);\n            }\n            else if (args === 'asap') {\n                var context = add(eventName, mirror, function fire() {\n                    var i = arguments.length, args = new Array(i);\n                    while (i--)\n                        args[i] = arguments[i];\n                    context.subscribers.forEach(function (fn) {\n                        asap$1(function fireEvent() {\n                            fn.apply(null, args);\n                        });\n                    });\n                });\n            }\n            else\n                throw new exceptions.InvalidArgument(\"Invalid event config\");\n        });\n    }\n}\n\nfunction makeClassConstructor(prototype, constructor) {\n    derive(constructor).from({ prototype });\n    return constructor;\n}\n\nfunction createTableConstructor(db) {\n    return makeClassConstructor(Table.prototype, function Table(name, tableSchema, trans) {\n        this.db = db;\n        this._tx = trans;\n        this.name = name;\n        this.schema = tableSchema;\n        this.hook = db._allTables[name] ? db._allTables[name].hook : Events(null, {\n            \"creating\": [hookCreatingChain, nop],\n            \"reading\": [pureFunctionChain, mirror],\n            \"updating\": [hookUpdatingChain, nop],\n            \"deleting\": [hookDeletingChain, nop]\n        });\n    });\n}\n\nfunction isPlainKeyRange(ctx, ignoreLimitFilter) {\n    return !(ctx.filter || ctx.algorithm || ctx.or) &&\n        (ignoreLimitFilter ? ctx.justLimit : !ctx.replayFilter);\n}\nfunction addFilter(ctx, fn) {\n    ctx.filter = combine(ctx.filter, fn);\n}\nfunction addReplayFilter(ctx, factory, isLimitFilter) {\n    var curr = ctx.replayFilter;\n    ctx.replayFilter = curr ? () => combine(curr(), factory()) : factory;\n    ctx.justLimit = isLimitFilter && !curr;\n}\nfunction addMatchFilter(ctx, fn) {\n    ctx.isMatch = combine(ctx.isMatch, fn);\n}\nfunction getIndexOrStore(ctx, coreSchema) {\n    if (ctx.isPrimKey)\n        return coreSchema.primaryKey;\n    const index = coreSchema.getIndexByKeyPath(ctx.index);\n    if (!index)\n        throw new exceptions.Schema(\"KeyPath \" + ctx.index + \" on object store \" + coreSchema.name + \" is not indexed\");\n    return index;\n}\nfunction openCursor(ctx, coreTable, trans) {\n    const index = getIndexOrStore(ctx, coreTable.schema);\n    return coreTable.openCursor({\n        trans,\n        values: !ctx.keysOnly,\n        reverse: ctx.dir === 'prev',\n        unique: !!ctx.unique,\n        query: {\n            index,\n            range: ctx.range\n        }\n    });\n}\nfunction iter(ctx, fn, coreTrans, coreTable) {\n    const filter = ctx.replayFilter ? combine(ctx.filter, ctx.replayFilter()) : ctx.filter;\n    if (!ctx.or) {\n        return iterate(openCursor(ctx, coreTable, coreTrans), combine(ctx.algorithm, filter), fn, !ctx.keysOnly && ctx.valueMapper);\n    }\n    else {\n        const set = {};\n        const union = (item, cursor, advance) => {\n            if (!filter || filter(cursor, advance, result => cursor.stop(result), err => cursor.fail(err))) {\n                var primaryKey = cursor.primaryKey;\n                var key = '' + primaryKey;\n                if (key === '[object ArrayBuffer]')\n                    key = '' + new Uint8Array(primaryKey);\n                if (!hasOwn(set, key)) {\n                    set[key] = true;\n                    fn(item, cursor, advance);\n                }\n            }\n        };\n        return Promise.all([\n            ctx.or._iterate(union, coreTrans),\n            iterate(openCursor(ctx, coreTable, coreTrans), ctx.algorithm, union, !ctx.keysOnly && ctx.valueMapper)\n        ]);\n    }\n}\nfunction iterate(cursorPromise, filter, fn, valueMapper) {\n    var mappedFn = valueMapper ? (x, c, a) => fn(valueMapper(x), c, a) : fn;\n    var wrappedFn = wrap(mappedFn);\n    return cursorPromise.then(cursor => {\n        if (cursor) {\n            return cursor.start(() => {\n                var c = () => cursor.continue();\n                if (!filter || filter(cursor, advancer => c = advancer, val => { cursor.stop(val); c = nop; }, e => { cursor.fail(e); c = nop; }))\n                    wrappedFn(cursor.value, cursor, advancer => c = advancer);\n                c();\n            });\n        }\n    });\n}\n\nfunction cmp(a, b) {\n    try {\n        const ta = type(a);\n        const tb = type(b);\n        if (ta !== tb) {\n            if (ta === 'Array')\n                return 1;\n            if (tb === 'Array')\n                return -1;\n            if (ta === 'binary')\n                return 1;\n            if (tb === 'binary')\n                return -1;\n            if (ta === 'string')\n                return 1;\n            if (tb === 'string')\n                return -1;\n            if (ta === 'Date')\n                return 1;\n            if (tb !== 'Date')\n                return NaN;\n            return -1;\n        }\n        switch (ta) {\n            case 'number':\n            case 'Date':\n            case 'string':\n                return a > b ? 1 : a < b ? -1 : 0;\n            case 'binary': {\n                return compareUint8Arrays(getUint8Array(a), getUint8Array(b));\n            }\n            case 'Array':\n                return compareArrays(a, b);\n        }\n    }\n    catch (_a) { }\n    return NaN;\n}\nfunction compareArrays(a, b) {\n    const al = a.length;\n    const bl = b.length;\n    const l = al < bl ? al : bl;\n    for (let i = 0; i < l; ++i) {\n        const res = cmp(a[i], b[i]);\n        if (res !== 0)\n            return res;\n    }\n    return al === bl ? 0 : al < bl ? -1 : 1;\n}\nfunction compareUint8Arrays(a, b) {\n    const al = a.length;\n    const bl = b.length;\n    const l = al < bl ? al : bl;\n    for (let i = 0; i < l; ++i) {\n        if (a[i] !== b[i])\n            return a[i] < b[i] ? -1 : 1;\n    }\n    return al === bl ? 0 : al < bl ? -1 : 1;\n}\nfunction type(x) {\n    const t = typeof x;\n    if (t !== 'object')\n        return t;\n    if (ArrayBuffer.isView(x))\n        return 'binary';\n    const tsTag = toStringTag(x);\n    return tsTag === 'ArrayBuffer' ? 'binary' : tsTag;\n}\nfunction getUint8Array(a) {\n    if (a instanceof Uint8Array)\n        return a;\n    if (ArrayBuffer.isView(a))\n        return new Uint8Array(a.buffer, a.byteOffset, a.byteLength);\n    return new Uint8Array(a);\n}\n\nclass Collection {\n    _read(fn, cb) {\n        var ctx = this._ctx;\n        return ctx.error ?\n            ctx.table._trans(null, rejection.bind(null, ctx.error)) :\n            ctx.table._trans('readonly', fn).then(cb);\n    }\n    _write(fn) {\n        var ctx = this._ctx;\n        return ctx.error ?\n            ctx.table._trans(null, rejection.bind(null, ctx.error)) :\n            ctx.table._trans('readwrite', fn, \"locked\");\n    }\n    _addAlgorithm(fn) {\n        var ctx = this._ctx;\n        ctx.algorithm = combine(ctx.algorithm, fn);\n    }\n    _iterate(fn, coreTrans) {\n        return iter(this._ctx, fn, coreTrans, this._ctx.table.core);\n    }\n    clone(props) {\n        var rv = Object.create(this.constructor.prototype), ctx = Object.create(this._ctx);\n        if (props)\n            extend(ctx, props);\n        rv._ctx = ctx;\n        return rv;\n    }\n    raw() {\n        this._ctx.valueMapper = null;\n        return this;\n    }\n    each(fn) {\n        var ctx = this._ctx;\n        return this._read(trans => iter(ctx, fn, trans, ctx.table.core));\n    }\n    count(cb) {\n        return this._read(trans => {\n            const ctx = this._ctx;\n            const coreTable = ctx.table.core;\n            if (isPlainKeyRange(ctx, true)) {\n                return coreTable.count({\n                    trans,\n                    query: {\n                        index: getIndexOrStore(ctx, coreTable.schema),\n                        range: ctx.range\n                    }\n                }).then(count => Math.min(count, ctx.limit));\n            }\n            else {\n                var count = 0;\n                return iter(ctx, () => { ++count; return false; }, trans, coreTable)\n                    .then(() => count);\n            }\n        }).then(cb);\n    }\n    sortBy(keyPath, cb) {\n        const parts = keyPath.split('.').reverse(), lastPart = parts[0], lastIndex = parts.length - 1;\n        function getval(obj, i) {\n            if (i)\n                return getval(obj[parts[i]], i - 1);\n            return obj[lastPart];\n        }\n        var order = this._ctx.dir === \"next\" ? 1 : -1;\n        function sorter(a, b) {\n            var aVal = getval(a, lastIndex), bVal = getval(b, lastIndex);\n            return aVal < bVal ? -order : aVal > bVal ? order : 0;\n        }\n        return this.toArray(function (a) {\n            return a.sort(sorter);\n        }).then(cb);\n    }\n    toArray(cb) {\n        return this._read(trans => {\n            var ctx = this._ctx;\n            if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {\n                const { valueMapper } = ctx;\n                const index = getIndexOrStore(ctx, ctx.table.core.schema);\n                return ctx.table.core.query({\n                    trans,\n                    limit: ctx.limit,\n                    values: true,\n                    query: {\n                        index,\n                        range: ctx.range\n                    }\n                }).then(({ result }) => valueMapper ? result.map(valueMapper) : result);\n            }\n            else {\n                const a = [];\n                return iter(ctx, item => a.push(item), trans, ctx.table.core).then(() => a);\n            }\n        }, cb);\n    }\n    offset(offset) {\n        var ctx = this._ctx;\n        if (offset <= 0)\n            return this;\n        ctx.offset += offset;\n        if (isPlainKeyRange(ctx)) {\n            addReplayFilter(ctx, () => {\n                var offsetLeft = offset;\n                return (cursor, advance) => {\n                    if (offsetLeft === 0)\n                        return true;\n                    if (offsetLeft === 1) {\n                        --offsetLeft;\n                        return false;\n                    }\n                    advance(() => {\n                        cursor.advance(offsetLeft);\n                        offsetLeft = 0;\n                    });\n                    return false;\n                };\n            });\n        }\n        else {\n            addReplayFilter(ctx, () => {\n                var offsetLeft = offset;\n                return () => (--offsetLeft < 0);\n            });\n        }\n        return this;\n    }\n    limit(numRows) {\n        this._ctx.limit = Math.min(this._ctx.limit, numRows);\n        addReplayFilter(this._ctx, () => {\n            var rowsLeft = numRows;\n            return function (cursor, advance, resolve) {\n                if (--rowsLeft <= 0)\n                    advance(resolve);\n                return rowsLeft >= 0;\n            };\n        }, true);\n        return this;\n    }\n    until(filterFunction, bIncludeStopEntry) {\n        addFilter(this._ctx, function (cursor, advance, resolve) {\n            if (filterFunction(cursor.value)) {\n                advance(resolve);\n                return bIncludeStopEntry;\n            }\n            else {\n                return true;\n            }\n        });\n        return this;\n    }\n    first(cb) {\n        return this.limit(1).toArray(function (a) { return a[0]; }).then(cb);\n    }\n    last(cb) {\n        return this.reverse().first(cb);\n    }\n    filter(filterFunction) {\n        addFilter(this._ctx, function (cursor) {\n            return filterFunction(cursor.value);\n        });\n        addMatchFilter(this._ctx, filterFunction);\n        return this;\n    }\n    and(filter) {\n        return this.filter(filter);\n    }\n    or(indexName) {\n        return new this.db.WhereClause(this._ctx.table, indexName, this);\n    }\n    reverse() {\n        this._ctx.dir = (this._ctx.dir === \"prev\" ? \"next\" : \"prev\");\n        if (this._ondirectionchange)\n            this._ondirectionchange(this._ctx.dir);\n        return this;\n    }\n    desc() {\n        return this.reverse();\n    }\n    eachKey(cb) {\n        var ctx = this._ctx;\n        ctx.keysOnly = !ctx.isMatch;\n        return this.each(function (val, cursor) { cb(cursor.key, cursor); });\n    }\n    eachUniqueKey(cb) {\n        this._ctx.unique = \"unique\";\n        return this.eachKey(cb);\n    }\n    eachPrimaryKey(cb) {\n        var ctx = this._ctx;\n        ctx.keysOnly = !ctx.isMatch;\n        return this.each(function (val, cursor) { cb(cursor.primaryKey, cursor); });\n    }\n    keys(cb) {\n        var ctx = this._ctx;\n        ctx.keysOnly = !ctx.isMatch;\n        var a = [];\n        return this.each(function (item, cursor) {\n            a.push(cursor.key);\n        }).then(function () {\n            return a;\n        }).then(cb);\n    }\n    primaryKeys(cb) {\n        var ctx = this._ctx;\n        if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {\n            return this._read(trans => {\n                var index = getIndexOrStore(ctx, ctx.table.core.schema);\n                return ctx.table.core.query({\n                    trans,\n                    values: false,\n                    limit: ctx.limit,\n                    query: {\n                        index,\n                        range: ctx.range\n                    }\n                });\n            }).then(({ result }) => result).then(cb);\n        }\n        ctx.keysOnly = !ctx.isMatch;\n        var a = [];\n        return this.each(function (item, cursor) {\n            a.push(cursor.primaryKey);\n        }).then(function () {\n            return a;\n        }).then(cb);\n    }\n    uniqueKeys(cb) {\n        this._ctx.unique = \"unique\";\n        return this.keys(cb);\n    }\n    firstKey(cb) {\n        return this.limit(1).keys(function (a) { return a[0]; }).then(cb);\n    }\n    lastKey(cb) {\n        return this.reverse().firstKey(cb);\n    }\n    distinct() {\n        var ctx = this._ctx, idx = ctx.index && ctx.table.schema.idxByName[ctx.index];\n        if (!idx || !idx.multi)\n            return this;\n        var set = {};\n        addFilter(this._ctx, function (cursor) {\n            var strKey = cursor.primaryKey.toString();\n            var found = hasOwn(set, strKey);\n            set[strKey] = true;\n            return !found;\n        });\n        return this;\n    }\n    modify(changes) {\n        var ctx = this._ctx;\n        return this._write(trans => {\n            var modifyer;\n            if (typeof changes === 'function') {\n                modifyer = changes;\n            }\n            else {\n                var keyPaths = keys(changes);\n                var numKeys = keyPaths.length;\n                modifyer = function (item) {\n                    var anythingModified = false;\n                    for (var i = 0; i < numKeys; ++i) {\n                        var keyPath = keyPaths[i], val = changes[keyPath];\n                        if (getByKeyPath(item, keyPath) !== val) {\n                            setByKeyPath(item, keyPath, val);\n                            anythingModified = true;\n                        }\n                    }\n                    return anythingModified;\n                };\n            }\n            const coreTable = ctx.table.core;\n            const { outbound, extractKey } = coreTable.schema.primaryKey;\n            const limit = this.db._options.modifyChunkSize || 200;\n            const totalFailures = [];\n            let successCount = 0;\n            const failedKeys = [];\n            const applyMutateResult = (expectedCount, res) => {\n                const { failures, numFailures } = res;\n                successCount += expectedCount - numFailures;\n                for (let pos of keys(failures)) {\n                    totalFailures.push(failures[pos]);\n                }\n            };\n            return this.clone().primaryKeys().then(keys => {\n                const nextChunk = (offset) => {\n                    const count = Math.min(limit, keys.length - offset);\n                    return coreTable.getMany({\n                        trans,\n                        keys: keys.slice(offset, offset + count),\n                        cache: \"immutable\"\n                    }).then(values => {\n                        const addValues = [];\n                        const putValues = [];\n                        const putKeys = outbound ? [] : null;\n                        const deleteKeys = [];\n                        for (let i = 0; i < count; ++i) {\n                            const origValue = values[i];\n                            const ctx = {\n                                value: deepClone(origValue),\n                                primKey: keys[offset + i]\n                            };\n                            if (modifyer.call(ctx, ctx.value, ctx) !== false) {\n                                if (ctx.value == null) {\n                                    deleteKeys.push(keys[offset + i]);\n                                }\n                                else if (!outbound && cmp(extractKey(origValue), extractKey(ctx.value)) !== 0) {\n                                    deleteKeys.push(keys[offset + i]);\n                                    addValues.push(ctx.value);\n                                }\n                                else {\n                                    putValues.push(ctx.value);\n                                    if (outbound)\n                                        putKeys.push(keys[offset + i]);\n                                }\n                            }\n                        }\n                        const criteria = isPlainKeyRange(ctx) &&\n                            ctx.limit === Infinity &&\n                            (typeof changes !== 'function' || changes === deleteCallback) && {\n                            index: ctx.index,\n                            range: ctx.range\n                        };\n                        return Promise.resolve(addValues.length > 0 &&\n                            coreTable.mutate({ trans, type: 'add', values: addValues })\n                                .then(res => {\n                                for (let pos in res.failures) {\n                                    deleteKeys.splice(parseInt(pos), 1);\n                                }\n                                applyMutateResult(addValues.length, res);\n                            })).then(() => (putValues.length > 0 || (criteria && typeof changes === 'object')) &&\n                            coreTable.mutate({\n                                trans,\n                                type: 'put',\n                                keys: putKeys,\n                                values: putValues,\n                                criteria,\n                                changeSpec: typeof changes !== 'function'\n                                    && changes\n                            }).then(res => applyMutateResult(putValues.length, res))).then(() => (deleteKeys.length > 0 || (criteria && changes === deleteCallback)) &&\n                            coreTable.mutate({\n                                trans,\n                                type: 'delete',\n                                keys: deleteKeys,\n                                criteria\n                            }).then(res => applyMutateResult(deleteKeys.length, res))).then(() => {\n                            return keys.length > offset + count && nextChunk(offset + limit);\n                        });\n                    });\n                };\n                return nextChunk(0).then(() => {\n                    if (totalFailures.length > 0)\n                        throw new ModifyError(\"Error modifying one or more objects\", totalFailures, successCount, failedKeys);\n                    return keys.length;\n                });\n            });\n        });\n    }\n    delete() {\n        var ctx = this._ctx, range = ctx.range;\n        if (isPlainKeyRange(ctx) &&\n            ((ctx.isPrimKey && !hangsOnDeleteLargeKeyRange) || range.type === 3 ))\n         {\n            return this._write(trans => {\n                const { primaryKey } = ctx.table.core.schema;\n                const coreRange = range;\n                return ctx.table.core.count({ trans, query: { index: primaryKey, range: coreRange } }).then(count => {\n                    return ctx.table.core.mutate({ trans, type: 'deleteRange', range: coreRange })\n                        .then(({ failures, lastResult, results, numFailures }) => {\n                        if (numFailures)\n                            throw new ModifyError(\"Could not delete some values\", Object.keys(failures).map(pos => failures[pos]), count - numFailures);\n                        return count - numFailures;\n                    });\n                });\n            });\n        }\n        return this.modify(deleteCallback);\n    }\n}\nconst deleteCallback = (value, ctx) => ctx.value = null;\n\nfunction createCollectionConstructor(db) {\n    return makeClassConstructor(Collection.prototype, function Collection(whereClause, keyRangeGenerator) {\n        this.db = db;\n        let keyRange = AnyRange, error = null;\n        if (keyRangeGenerator)\n            try {\n                keyRange = keyRangeGenerator();\n            }\n            catch (ex) {\n                error = ex;\n            }\n        const whereCtx = whereClause._ctx;\n        const table = whereCtx.table;\n        const readingHook = table.hook.reading.fire;\n        this._ctx = {\n            table: table,\n            index: whereCtx.index,\n            isPrimKey: (!whereCtx.index || (table.schema.primKey.keyPath && whereCtx.index === table.schema.primKey.name)),\n            range: keyRange,\n            keysOnly: false,\n            dir: \"next\",\n            unique: \"\",\n            algorithm: null,\n            filter: null,\n            replayFilter: null,\n            justLimit: true,\n            isMatch: null,\n            offset: 0,\n            limit: Infinity,\n            error: error,\n            or: whereCtx.or,\n            valueMapper: readingHook !== mirror ? readingHook : null\n        };\n    });\n}\n\nfunction simpleCompare(a, b) {\n    return a < b ? -1 : a === b ? 0 : 1;\n}\nfunction simpleCompareReverse(a, b) {\n    return a > b ? -1 : a === b ? 0 : 1;\n}\n\nfunction fail(collectionOrWhereClause, err, T) {\n    var collection = collectionOrWhereClause instanceof WhereClause ?\n        new collectionOrWhereClause.Collection(collectionOrWhereClause) :\n        collectionOrWhereClause;\n    collection._ctx.error = T ? new T(err) : new TypeError(err);\n    return collection;\n}\nfunction emptyCollection(whereClause) {\n    return new whereClause.Collection(whereClause, () => rangeEqual(\"\")).limit(0);\n}\nfunction upperFactory(dir) {\n    return dir === \"next\" ?\n        (s) => s.toUpperCase() :\n        (s) => s.toLowerCase();\n}\nfunction lowerFactory(dir) {\n    return dir === \"next\" ?\n        (s) => s.toLowerCase() :\n        (s) => s.toUpperCase();\n}\nfunction nextCasing(key, lowerKey, upperNeedle, lowerNeedle, cmp, dir) {\n    var length = Math.min(key.length, lowerNeedle.length);\n    var llp = -1;\n    for (var i = 0; i < length; ++i) {\n        var lwrKeyChar = lowerKey[i];\n        if (lwrKeyChar !== lowerNeedle[i]) {\n            if (cmp(key[i], upperNeedle[i]) < 0)\n                return key.substr(0, i) + upperNeedle[i] + upperNeedle.substr(i + 1);\n            if (cmp(key[i], lowerNeedle[i]) < 0)\n                return key.substr(0, i) + lowerNeedle[i] + upperNeedle.substr(i + 1);\n            if (llp >= 0)\n                return key.substr(0, llp) + lowerKey[llp] + upperNeedle.substr(llp + 1);\n            return null;\n        }\n        if (cmp(key[i], lwrKeyChar) < 0)\n            llp = i;\n    }\n    if (length < lowerNeedle.length && dir === \"next\")\n        return key + upperNeedle.substr(key.length);\n    if (length < key.length && dir === \"prev\")\n        return key.substr(0, upperNeedle.length);\n    return (llp < 0 ? null : key.substr(0, llp) + lowerNeedle[llp] + upperNeedle.substr(llp + 1));\n}\nfunction addIgnoreCaseAlgorithm(whereClause, match, needles, suffix) {\n    var upper, lower, compare, upperNeedles, lowerNeedles, direction, nextKeySuffix, needlesLen = needles.length;\n    if (!needles.every(s => typeof s === 'string')) {\n        return fail(whereClause, STRING_EXPECTED);\n    }\n    function initDirection(dir) {\n        upper = upperFactory(dir);\n        lower = lowerFactory(dir);\n        compare = (dir === \"next\" ? simpleCompare : simpleCompareReverse);\n        var needleBounds = needles.map(function (needle) {\n            return { lower: lower(needle), upper: upper(needle) };\n        }).sort(function (a, b) {\n            return compare(a.lower, b.lower);\n        });\n        upperNeedles = needleBounds.map(function (nb) { return nb.upper; });\n        lowerNeedles = needleBounds.map(function (nb) { return nb.lower; });\n        direction = dir;\n        nextKeySuffix = (dir === \"next\" ? \"\" : suffix);\n    }\n    initDirection(\"next\");\n    var c = new whereClause.Collection(whereClause, () => createRange(upperNeedles[0], lowerNeedles[needlesLen - 1] + suffix));\n    c._ondirectionchange = function (direction) {\n        initDirection(direction);\n    };\n    var firstPossibleNeedle = 0;\n    c._addAlgorithm(function (cursor, advance, resolve) {\n        var key = cursor.key;\n        if (typeof key !== 'string')\n            return false;\n        var lowerKey = lower(key);\n        if (match(lowerKey, lowerNeedles, firstPossibleNeedle)) {\n            return true;\n        }\n        else {\n            var lowestPossibleCasing = null;\n            for (var i = firstPossibleNeedle; i < needlesLen; ++i) {\n                var casing = nextCasing(key, lowerKey, upperNeedles[i], lowerNeedles[i], compare, direction);\n                if (casing === null && lowestPossibleCasing === null)\n                    firstPossibleNeedle = i + 1;\n                else if (lowestPossibleCasing === null || compare(lowestPossibleCasing, casing) > 0) {\n                    lowestPossibleCasing = casing;\n                }\n            }\n            if (lowestPossibleCasing !== null) {\n                advance(function () { cursor.continue(lowestPossibleCasing + nextKeySuffix); });\n            }\n            else {\n                advance(resolve);\n            }\n            return false;\n        }\n    });\n    return c;\n}\nfunction createRange(lower, upper, lowerOpen, upperOpen) {\n    return {\n        type: 2 ,\n        lower,\n        upper,\n        lowerOpen,\n        upperOpen\n    };\n}\nfunction rangeEqual(value) {\n    return {\n        type: 1 ,\n        lower: value,\n        upper: value\n    };\n}\n\nclass WhereClause {\n    get Collection() {\n        return this._ctx.table.db.Collection;\n    }\n    between(lower, upper, includeLower, includeUpper) {\n        includeLower = includeLower !== false;\n        includeUpper = includeUpper === true;\n        try {\n            if ((this._cmp(lower, upper) > 0) ||\n                (this._cmp(lower, upper) === 0 && (includeLower || includeUpper) && !(includeLower && includeUpper)))\n                return emptyCollection(this);\n            return new this.Collection(this, () => createRange(lower, upper, !includeLower, !includeUpper));\n        }\n        catch (e) {\n            return fail(this, INVALID_KEY_ARGUMENT);\n        }\n    }\n    equals(value) {\n        if (value == null)\n            return fail(this, INVALID_KEY_ARGUMENT);\n        return new this.Collection(this, () => rangeEqual(value));\n    }\n    above(value) {\n        if (value == null)\n            return fail(this, INVALID_KEY_ARGUMENT);\n        return new this.Collection(this, () => createRange(value, undefined, true));\n    }\n    aboveOrEqual(value) {\n        if (value == null)\n            return fail(this, INVALID_KEY_ARGUMENT);\n        return new this.Collection(this, () => createRange(value, undefined, false));\n    }\n    below(value) {\n        if (value == null)\n            return fail(this, INVALID_KEY_ARGUMENT);\n        return new this.Collection(this, () => createRange(undefined, value, false, true));\n    }\n    belowOrEqual(value) {\n        if (value == null)\n            return fail(this, INVALID_KEY_ARGUMENT);\n        return new this.Collection(this, () => createRange(undefined, value));\n    }\n    startsWith(str) {\n        if (typeof str !== 'string')\n            return fail(this, STRING_EXPECTED);\n        return this.between(str, str + maxString, true, true);\n    }\n    startsWithIgnoreCase(str) {\n        if (str === \"\")\n            return this.startsWith(str);\n        return addIgnoreCaseAlgorithm(this, (x, a) => x.indexOf(a[0]) === 0, [str], maxString);\n    }\n    equalsIgnoreCase(str) {\n        return addIgnoreCaseAlgorithm(this, (x, a) => x === a[0], [str], \"\");\n    }\n    anyOfIgnoreCase() {\n        var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n        if (set.length === 0)\n            return emptyCollection(this);\n        return addIgnoreCaseAlgorithm(this, (x, a) => a.indexOf(x) !== -1, set, \"\");\n    }\n    startsWithAnyOfIgnoreCase() {\n        var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n        if (set.length === 0)\n            return emptyCollection(this);\n        return addIgnoreCaseAlgorithm(this, (x, a) => a.some(n => x.indexOf(n) === 0), set, maxString);\n    }\n    anyOf() {\n        const set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n        let compare = this._cmp;\n        try {\n            set.sort(compare);\n        }\n        catch (e) {\n            return fail(this, INVALID_KEY_ARGUMENT);\n        }\n        if (set.length === 0)\n            return emptyCollection(this);\n        const c = new this.Collection(this, () => createRange(set[0], set[set.length - 1]));\n        c._ondirectionchange = direction => {\n            compare = (direction === \"next\" ?\n                this._ascending :\n                this._descending);\n            set.sort(compare);\n        };\n        let i = 0;\n        c._addAlgorithm((cursor, advance, resolve) => {\n            const key = cursor.key;\n            while (compare(key, set[i]) > 0) {\n                ++i;\n                if (i === set.length) {\n                    advance(resolve);\n                    return false;\n                }\n            }\n            if (compare(key, set[i]) === 0) {\n                return true;\n            }\n            else {\n                advance(() => { cursor.continue(set[i]); });\n                return false;\n            }\n        });\n        return c;\n    }\n    notEqual(value) {\n        return this.inAnyRange([[minKey, value], [value, this.db._maxKey]], { includeLowers: false, includeUppers: false });\n    }\n    noneOf() {\n        const set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n        if (set.length === 0)\n            return new this.Collection(this);\n        try {\n            set.sort(this._ascending);\n        }\n        catch (e) {\n            return fail(this, INVALID_KEY_ARGUMENT);\n        }\n        const ranges = set.reduce((res, val) => res ?\n            res.concat([[res[res.length - 1][1], val]]) :\n            [[minKey, val]], null);\n        ranges.push([set[set.length - 1], this.db._maxKey]);\n        return this.inAnyRange(ranges, { includeLowers: false, includeUppers: false });\n    }\n    inAnyRange(ranges, options) {\n        const cmp = this._cmp, ascending = this._ascending, descending = this._descending, min = this._min, max = this._max;\n        if (ranges.length === 0)\n            return emptyCollection(this);\n        if (!ranges.every(range => range[0] !== undefined &&\n            range[1] !== undefined &&\n            ascending(range[0], range[1]) <= 0)) {\n            return fail(this, \"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower\", exceptions.InvalidArgument);\n        }\n        const includeLowers = !options || options.includeLowers !== false;\n        const includeUppers = options && options.includeUppers === true;\n        function addRange(ranges, newRange) {\n            let i = 0, l = ranges.length;\n            for (; i < l; ++i) {\n                const range = ranges[i];\n                if (cmp(newRange[0], range[1]) < 0 && cmp(newRange[1], range[0]) > 0) {\n                    range[0] = min(range[0], newRange[0]);\n                    range[1] = max(range[1], newRange[1]);\n                    break;\n                }\n            }\n            if (i === l)\n                ranges.push(newRange);\n            return ranges;\n        }\n        let sortDirection = ascending;\n        function rangeSorter(a, b) { return sortDirection(a[0], b[0]); }\n        let set;\n        try {\n            set = ranges.reduce(addRange, []);\n            set.sort(rangeSorter);\n        }\n        catch (ex) {\n            return fail(this, INVALID_KEY_ARGUMENT);\n        }\n        let rangePos = 0;\n        const keyIsBeyondCurrentEntry = includeUppers ?\n            key => ascending(key, set[rangePos][1]) > 0 :\n            key => ascending(key, set[rangePos][1]) >= 0;\n        const keyIsBeforeCurrentEntry = includeLowers ?\n            key => descending(key, set[rangePos][0]) > 0 :\n            key => descending(key, set[rangePos][0]) >= 0;\n        function keyWithinCurrentRange(key) {\n            return !keyIsBeyondCurrentEntry(key) && !keyIsBeforeCurrentEntry(key);\n        }\n        let checkKey = keyIsBeyondCurrentEntry;\n        const c = new this.Collection(this, () => createRange(set[0][0], set[set.length - 1][1], !includeLowers, !includeUppers));\n        c._ondirectionchange = direction => {\n            if (direction === \"next\") {\n                checkKey = keyIsBeyondCurrentEntry;\n                sortDirection = ascending;\n            }\n            else {\n                checkKey = keyIsBeforeCurrentEntry;\n                sortDirection = descending;\n            }\n            set.sort(rangeSorter);\n        };\n        c._addAlgorithm((cursor, advance, resolve) => {\n            var key = cursor.key;\n            while (checkKey(key)) {\n                ++rangePos;\n                if (rangePos === set.length) {\n                    advance(resolve);\n                    return false;\n                }\n            }\n            if (keyWithinCurrentRange(key)) {\n                return true;\n            }\n            else if (this._cmp(key, set[rangePos][1]) === 0 || this._cmp(key, set[rangePos][0]) === 0) {\n                return false;\n            }\n            else {\n                advance(() => {\n                    if (sortDirection === ascending)\n                        cursor.continue(set[rangePos][0]);\n                    else\n                        cursor.continue(set[rangePos][1]);\n                });\n                return false;\n            }\n        });\n        return c;\n    }\n    startsWithAnyOf() {\n        const set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n        if (!set.every(s => typeof s === 'string')) {\n            return fail(this, \"startsWithAnyOf() only works with strings\");\n        }\n        if (set.length === 0)\n            return emptyCollection(this);\n        return this.inAnyRange(set.map((str) => [str, str + maxString]));\n    }\n}\n\nfunction createWhereClauseConstructor(db) {\n    return makeClassConstructor(WhereClause.prototype, function WhereClause(table, index, orCollection) {\n        this.db = db;\n        this._ctx = {\n            table: table,\n            index: index === \":id\" ? null : index,\n            or: orCollection\n        };\n        const indexedDB = db._deps.indexedDB;\n        if (!indexedDB)\n            throw new exceptions.MissingAPI();\n        this._cmp = this._ascending = indexedDB.cmp.bind(indexedDB);\n        this._descending = (a, b) => indexedDB.cmp(b, a);\n        this._max = (a, b) => indexedDB.cmp(a, b) > 0 ? a : b;\n        this._min = (a, b) => indexedDB.cmp(a, b) < 0 ? a : b;\n        this._IDBKeyRange = db._deps.IDBKeyRange;\n    });\n}\n\nfunction eventRejectHandler(reject) {\n    return wrap(function (event) {\n        preventDefault(event);\n        reject(event.target.error);\n        return false;\n    });\n}\nfunction preventDefault(event) {\n    if (event.stopPropagation)\n        event.stopPropagation();\n    if (event.preventDefault)\n        event.preventDefault();\n}\n\nconst DEXIE_STORAGE_MUTATED_EVENT_NAME = 'storagemutated';\nconst STORAGE_MUTATED_DOM_EVENT_NAME = 'x-storagemutated-1';\nconst globalEvents = Events(null, DEXIE_STORAGE_MUTATED_EVENT_NAME);\n\nclass Transaction {\n    _lock() {\n        assert(!PSD.global);\n        ++this._reculock;\n        if (this._reculock === 1 && !PSD.global)\n            PSD.lockOwnerFor = this;\n        return this;\n    }\n    _unlock() {\n        assert(!PSD.global);\n        if (--this._reculock === 0) {\n            if (!PSD.global)\n                PSD.lockOwnerFor = null;\n            while (this._blockedFuncs.length > 0 && !this._locked()) {\n                var fnAndPSD = this._blockedFuncs.shift();\n                try {\n                    usePSD(fnAndPSD[1], fnAndPSD[0]);\n                }\n                catch (e) { }\n            }\n        }\n        return this;\n    }\n    _locked() {\n        return this._reculock && PSD.lockOwnerFor !== this;\n    }\n    create(idbtrans) {\n        if (!this.mode)\n            return this;\n        const idbdb = this.db.idbdb;\n        const dbOpenError = this.db._state.dbOpenError;\n        assert(!this.idbtrans);\n        if (!idbtrans && !idbdb) {\n            switch (dbOpenError && dbOpenError.name) {\n                case \"DatabaseClosedError\":\n                    throw new exceptions.DatabaseClosed(dbOpenError);\n                case \"MissingAPIError\":\n                    throw new exceptions.MissingAPI(dbOpenError.message, dbOpenError);\n                default:\n                    throw new exceptions.OpenFailed(dbOpenError);\n            }\n        }\n        if (!this.active)\n            throw new exceptions.TransactionInactive();\n        assert(this._completion._state === null);\n        idbtrans = this.idbtrans = idbtrans ||\n            (this.db.core\n                ? this.db.core.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability })\n                : idbdb.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability }));\n        idbtrans.onerror = wrap(ev => {\n            preventDefault(ev);\n            this._reject(idbtrans.error);\n        });\n        idbtrans.onabort = wrap(ev => {\n            preventDefault(ev);\n            this.active && this._reject(new exceptions.Abort(idbtrans.error));\n            this.active = false;\n            this.on(\"abort\").fire(ev);\n        });\n        idbtrans.oncomplete = wrap(() => {\n            this.active = false;\n            this._resolve();\n            if ('mutatedParts' in idbtrans) {\n                globalEvents.storagemutated.fire(idbtrans[\"mutatedParts\"]);\n            }\n        });\n        return this;\n    }\n    _promise(mode, fn, bWriteLock) {\n        if (mode === 'readwrite' && this.mode !== 'readwrite')\n            return rejection(new exceptions.ReadOnly(\"Transaction is readonly\"));\n        if (!this.active)\n            return rejection(new exceptions.TransactionInactive());\n        if (this._locked()) {\n            return new DexiePromise((resolve, reject) => {\n                this._blockedFuncs.push([() => {\n                        this._promise(mode, fn, bWriteLock).then(resolve, reject);\n                    }, PSD]);\n            });\n        }\n        else if (bWriteLock) {\n            return newScope(() => {\n                var p = new DexiePromise((resolve, reject) => {\n                    this._lock();\n                    const rv = fn(resolve, reject, this);\n                    if (rv && rv.then)\n                        rv.then(resolve, reject);\n                });\n                p.finally(() => this._unlock());\n                p._lib = true;\n                return p;\n            });\n        }\n        else {\n            var p = new DexiePromise((resolve, reject) => {\n                var rv = fn(resolve, reject, this);\n                if (rv && rv.then)\n                    rv.then(resolve, reject);\n            });\n            p._lib = true;\n            return p;\n        }\n    }\n    _root() {\n        return this.parent ? this.parent._root() : this;\n    }\n    waitFor(promiseLike) {\n        var root = this._root();\n        const promise = DexiePromise.resolve(promiseLike);\n        if (root._waitingFor) {\n            root._waitingFor = root._waitingFor.then(() => promise);\n        }\n        else {\n            root._waitingFor = promise;\n            root._waitingQueue = [];\n            var store = root.idbtrans.objectStore(root.storeNames[0]);\n            (function spin() {\n                ++root._spinCount;\n                while (root._waitingQueue.length)\n                    (root._waitingQueue.shift())();\n                if (root._waitingFor)\n                    store.get(-Infinity).onsuccess = spin;\n            }());\n        }\n        var currentWaitPromise = root._waitingFor;\n        return new DexiePromise((resolve, reject) => {\n            promise.then(res => root._waitingQueue.push(wrap(resolve.bind(null, res))), err => root._waitingQueue.push(wrap(reject.bind(null, err)))).finally(() => {\n                if (root._waitingFor === currentWaitPromise) {\n                    root._waitingFor = null;\n                }\n            });\n        });\n    }\n    abort() {\n        if (this.active) {\n            this.active = false;\n            if (this.idbtrans)\n                this.idbtrans.abort();\n            this._reject(new exceptions.Abort());\n        }\n    }\n    table(tableName) {\n        const memoizedTables = (this._memoizedTables || (this._memoizedTables = {}));\n        if (hasOwn(memoizedTables, tableName))\n            return memoizedTables[tableName];\n        const tableSchema = this.schema[tableName];\n        if (!tableSchema) {\n            throw new exceptions.NotFound(\"Table \" + tableName + \" not part of transaction\");\n        }\n        const transactionBoundTable = new this.db.Table(tableName, tableSchema, this);\n        transactionBoundTable.core = this.db.core.table(tableName);\n        memoizedTables[tableName] = transactionBoundTable;\n        return transactionBoundTable;\n    }\n}\n\nfunction createTransactionConstructor(db) {\n    return makeClassConstructor(Transaction.prototype, function Transaction(mode, storeNames, dbschema, chromeTransactionDurability, parent) {\n        this.db = db;\n        this.mode = mode;\n        this.storeNames = storeNames;\n        this.schema = dbschema;\n        this.chromeTransactionDurability = chromeTransactionDurability;\n        this.idbtrans = null;\n        this.on = Events(this, \"complete\", \"error\", \"abort\");\n        this.parent = parent || null;\n        this.active = true;\n        this._reculock = 0;\n        this._blockedFuncs = [];\n        this._resolve = null;\n        this._reject = null;\n        this._waitingFor = null;\n        this._waitingQueue = null;\n        this._spinCount = 0;\n        this._completion = new DexiePromise((resolve, reject) => {\n            this._resolve = resolve;\n            this._reject = reject;\n        });\n        this._completion.then(() => {\n            this.active = false;\n            this.on.complete.fire();\n        }, e => {\n            var wasActive = this.active;\n            this.active = false;\n            this.on.error.fire(e);\n            this.parent ?\n                this.parent._reject(e) :\n                wasActive && this.idbtrans && this.idbtrans.abort();\n            return rejection(e);\n        });\n    });\n}\n\nfunction createIndexSpec(name, keyPath, unique, multi, auto, compound, isPrimKey) {\n    return {\n        name,\n        keyPath,\n        unique,\n        multi,\n        auto,\n        compound,\n        src: (unique && !isPrimKey ? '&' : '') + (multi ? '*' : '') + (auto ? \"++\" : \"\") + nameFromKeyPath(keyPath)\n    };\n}\nfunction nameFromKeyPath(keyPath) {\n    return typeof keyPath === 'string' ?\n        keyPath :\n        keyPath ? ('[' + [].join.call(keyPath, '+') + ']') : \"\";\n}\n\nfunction createTableSchema(name, primKey, indexes) {\n    return {\n        name,\n        primKey,\n        indexes,\n        mappedClass: null,\n        idxByName: arrayToObject(indexes, index => [index.name, index])\n    };\n}\n\nfunction safariMultiStoreFix(storeNames) {\n    return storeNames.length === 1 ? storeNames[0] : storeNames;\n}\nlet getMaxKey = (IdbKeyRange) => {\n    try {\n        IdbKeyRange.only([[]]);\n        getMaxKey = () => [[]];\n        return [[]];\n    }\n    catch (e) {\n        getMaxKey = () => maxString;\n        return maxString;\n    }\n};\n\nfunction getKeyExtractor(keyPath) {\n    if (keyPath == null) {\n        return () => undefined;\n    }\n    else if (typeof keyPath === 'string') {\n        return getSinglePathKeyExtractor(keyPath);\n    }\n    else {\n        return obj => getByKeyPath(obj, keyPath);\n    }\n}\nfunction getSinglePathKeyExtractor(keyPath) {\n    const split = keyPath.split('.');\n    if (split.length === 1) {\n        return obj => obj[keyPath];\n    }\n    else {\n        return obj => getByKeyPath(obj, keyPath);\n    }\n}\n\nfunction arrayify(arrayLike) {\n    return [].slice.call(arrayLike);\n}\nlet _id_counter = 0;\nfunction getKeyPathAlias(keyPath) {\n    return keyPath == null ?\n        \":id\" :\n        typeof keyPath === 'string' ?\n            keyPath :\n            `[${keyPath.join('+')}]`;\n}\nfunction createDBCore(db, IdbKeyRange, tmpTrans) {\n    function extractSchema(db, trans) {\n        const tables = arrayify(db.objectStoreNames);\n        return {\n            schema: {\n                name: db.name,\n                tables: tables.map(table => trans.objectStore(table)).map(store => {\n                    const { keyPath, autoIncrement } = store;\n                    const compound = isArray(keyPath);\n                    const outbound = keyPath == null;\n                    const indexByKeyPath = {};\n                    const result = {\n                        name: store.name,\n                        primaryKey: {\n                            name: null,\n                            isPrimaryKey: true,\n                            outbound,\n                            compound,\n                            keyPath,\n                            autoIncrement,\n                            unique: true,\n                            extractKey: getKeyExtractor(keyPath)\n                        },\n                        indexes: arrayify(store.indexNames).map(indexName => store.index(indexName))\n                            .map(index => {\n                            const { name, unique, multiEntry, keyPath } = index;\n                            const compound = isArray(keyPath);\n                            const result = {\n                                name,\n                                compound,\n                                keyPath,\n                                unique,\n                                multiEntry,\n                                extractKey: getKeyExtractor(keyPath)\n                            };\n                            indexByKeyPath[getKeyPathAlias(keyPath)] = result;\n                            return result;\n                        }),\n                        getIndexByKeyPath: (keyPath) => indexByKeyPath[getKeyPathAlias(keyPath)]\n                    };\n                    indexByKeyPath[\":id\"] = result.primaryKey;\n                    if (keyPath != null) {\n                        indexByKeyPath[getKeyPathAlias(keyPath)] = result.primaryKey;\n                    }\n                    return result;\n                })\n            },\n            hasGetAll: tables.length > 0 && ('getAll' in trans.objectStore(tables[0])) &&\n                !(typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&\n                    !/(Chrome\\/|Edge\\/)/.test(navigator.userAgent) &&\n                    [].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1] < 604)\n        };\n    }\n    function makeIDBKeyRange(range) {\n        if (range.type === 3 )\n            return null;\n        if (range.type === 4 )\n            throw new Error(\"Cannot convert never type to IDBKeyRange\");\n        const { lower, upper, lowerOpen, upperOpen } = range;\n        const idbRange = lower === undefined ?\n            upper === undefined ?\n                null :\n                IdbKeyRange.upperBound(upper, !!upperOpen) :\n            upper === undefined ?\n                IdbKeyRange.lowerBound(lower, !!lowerOpen) :\n                IdbKeyRange.bound(lower, upper, !!lowerOpen, !!upperOpen);\n        return idbRange;\n    }\n    function createDbCoreTable(tableSchema) {\n        const tableName = tableSchema.name;\n        function mutate({ trans, type, keys, values, range }) {\n            return new Promise((resolve, reject) => {\n                resolve = wrap(resolve);\n                const store = trans.objectStore(tableName);\n                const outbound = store.keyPath == null;\n                const isAddOrPut = type === \"put\" || type === \"add\";\n                if (!isAddOrPut && type !== 'delete' && type !== 'deleteRange')\n                    throw new Error(\"Invalid operation type: \" + type);\n                const { length } = keys || values || { length: 1 };\n                if (keys && values && keys.length !== values.length) {\n                    throw new Error(\"Given keys array must have same length as given values array.\");\n                }\n                if (length === 0)\n                    return resolve({ numFailures: 0, failures: {}, results: [], lastResult: undefined });\n                let req;\n                const reqs = [];\n                const failures = [];\n                let numFailures = 0;\n                const errorHandler = event => {\n                    ++numFailures;\n                    preventDefault(event);\n                };\n                if (type === 'deleteRange') {\n                    if (range.type === 4 )\n                        return resolve({ numFailures, failures, results: [], lastResult: undefined });\n                    if (range.type === 3 )\n                        reqs.push(req = store.clear());\n                    else\n                        reqs.push(req = store.delete(makeIDBKeyRange(range)));\n                }\n                else {\n                    const [args1, args2] = isAddOrPut ?\n                        outbound ?\n                            [values, keys] :\n                            [values, null] :\n                        [keys, null];\n                    if (isAddOrPut) {\n                        for (let i = 0; i < length; ++i) {\n                            reqs.push(req = (args2 && args2[i] !== undefined ?\n                                store[type](args1[i], args2[i]) :\n                                store[type](args1[i])));\n                            req.onerror = errorHandler;\n                        }\n                    }\n                    else {\n                        for (let i = 0; i < length; ++i) {\n                            reqs.push(req = store[type](args1[i]));\n                            req.onerror = errorHandler;\n                        }\n                    }\n                }\n                const done = event => {\n                    const lastResult = event.target.result;\n                    reqs.forEach((req, i) => req.error != null && (failures[i] = req.error));\n                    resolve({\n                        numFailures,\n                        failures,\n                        results: type === \"delete\" ? keys : reqs.map(req => req.result),\n                        lastResult\n                    });\n                };\n                req.onerror = event => {\n                    errorHandler(event);\n                    done(event);\n                };\n                req.onsuccess = done;\n            });\n        }\n        function openCursor({ trans, values, query, reverse, unique }) {\n            return new Promise((resolve, reject) => {\n                resolve = wrap(resolve);\n                const { index, range } = query;\n                const store = trans.objectStore(tableName);\n                const source = index.isPrimaryKey ?\n                    store :\n                    store.index(index.name);\n                const direction = reverse ?\n                    unique ?\n                        \"prevunique\" :\n                        \"prev\" :\n                    unique ?\n                        \"nextunique\" :\n                        \"next\";\n                const req = values || !('openKeyCursor' in source) ?\n                    source.openCursor(makeIDBKeyRange(range), direction) :\n                    source.openKeyCursor(makeIDBKeyRange(range), direction);\n                req.onerror = eventRejectHandler(reject);\n                req.onsuccess = wrap(ev => {\n                    const cursor = req.result;\n                    if (!cursor) {\n                        resolve(null);\n                        return;\n                    }\n                    cursor.___id = ++_id_counter;\n                    cursor.done = false;\n                    const _cursorContinue = cursor.continue.bind(cursor);\n                    let _cursorContinuePrimaryKey = cursor.continuePrimaryKey;\n                    if (_cursorContinuePrimaryKey)\n                        _cursorContinuePrimaryKey = _cursorContinuePrimaryKey.bind(cursor);\n                    const _cursorAdvance = cursor.advance.bind(cursor);\n                    const doThrowCursorIsNotStarted = () => { throw new Error(\"Cursor not started\"); };\n                    const doThrowCursorIsStopped = () => { throw new Error(\"Cursor not stopped\"); };\n                    cursor.trans = trans;\n                    cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsNotStarted;\n                    cursor.fail = wrap(reject);\n                    cursor.next = function () {\n                        let gotOne = 1;\n                        return this.start(() => gotOne-- ? this.continue() : this.stop()).then(() => this);\n                    };\n                    cursor.start = (callback) => {\n                        const iterationPromise = new Promise((resolveIteration, rejectIteration) => {\n                            resolveIteration = wrap(resolveIteration);\n                            req.onerror = eventRejectHandler(rejectIteration);\n                            cursor.fail = rejectIteration;\n                            cursor.stop = value => {\n                                cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsStopped;\n                                resolveIteration(value);\n                            };\n                        });\n                        const guardedCallback = () => {\n                            if (req.result) {\n                                try {\n                                    callback();\n                                }\n                                catch (err) {\n                                    cursor.fail(err);\n                                }\n                            }\n                            else {\n                                cursor.done = true;\n                                cursor.start = () => { throw new Error(\"Cursor behind last entry\"); };\n                                cursor.stop();\n                            }\n                        };\n                        req.onsuccess = wrap(ev => {\n                            req.onsuccess = guardedCallback;\n                            guardedCallback();\n                        });\n                        cursor.continue = _cursorContinue;\n                        cursor.continuePrimaryKey = _cursorContinuePrimaryKey;\n                        cursor.advance = _cursorAdvance;\n                        guardedCallback();\n                        return iterationPromise;\n                    };\n                    resolve(cursor);\n                }, reject);\n            });\n        }\n        function query(hasGetAll) {\n            return (request) => {\n                return new Promise((resolve, reject) => {\n                    resolve = wrap(resolve);\n                    const { trans, values, limit, query } = request;\n                    const nonInfinitLimit = limit === Infinity ? undefined : limit;\n                    const { index, range } = query;\n                    const store = trans.objectStore(tableName);\n                    const source = index.isPrimaryKey ? store : store.index(index.name);\n                    const idbKeyRange = makeIDBKeyRange(range);\n                    if (limit === 0)\n                        return resolve({ result: [] });\n                    if (hasGetAll) {\n                        const req = values ?\n                            source.getAll(idbKeyRange, nonInfinitLimit) :\n                            source.getAllKeys(idbKeyRange, nonInfinitLimit);\n                        req.onsuccess = event => resolve({ result: event.target.result });\n                        req.onerror = eventRejectHandler(reject);\n                    }\n                    else {\n                        let count = 0;\n                        const req = values || !('openKeyCursor' in source) ?\n                            source.openCursor(idbKeyRange) :\n                            source.openKeyCursor(idbKeyRange);\n                        const result = [];\n                        req.onsuccess = event => {\n                            const cursor = req.result;\n                            if (!cursor)\n                                return resolve({ result });\n                            result.push(values ? cursor.value : cursor.primaryKey);\n                            if (++count === limit)\n                                return resolve({ result });\n                            cursor.continue();\n                        };\n                        req.onerror = eventRejectHandler(reject);\n                    }\n                });\n            };\n        }\n        return {\n            name: tableName,\n            schema: tableSchema,\n            mutate,\n            getMany({ trans, keys }) {\n                return new Promise((resolve, reject) => {\n                    resolve = wrap(resolve);\n                    const store = trans.objectStore(tableName);\n                    const length = keys.length;\n                    const result = new Array(length);\n                    let keyCount = 0;\n                    let callbackCount = 0;\n                    let req;\n                    const successHandler = event => {\n                        const req = event.target;\n                        if ((result[req._pos] = req.result) != null)\n                            ;\n                        if (++callbackCount === keyCount)\n                            resolve(result);\n                    };\n                    const errorHandler = eventRejectHandler(reject);\n                    for (let i = 0; i < length; ++i) {\n                        const key = keys[i];\n                        if (key != null) {\n                            req = store.get(keys[i]);\n                            req._pos = i;\n                            req.onsuccess = successHandler;\n                            req.onerror = errorHandler;\n                            ++keyCount;\n                        }\n                    }\n                    if (keyCount === 0)\n                        resolve(result);\n                });\n            },\n            get({ trans, key }) {\n                return new Promise((resolve, reject) => {\n                    resolve = wrap(resolve);\n                    const store = trans.objectStore(tableName);\n                    const req = store.get(key);\n                    req.onsuccess = event => resolve(event.target.result);\n                    req.onerror = eventRejectHandler(reject);\n                });\n            },\n            query: query(hasGetAll),\n            openCursor,\n            count({ query, trans }) {\n                const { index, range } = query;\n                return new Promise((resolve, reject) => {\n                    const store = trans.objectStore(tableName);\n                    const source = index.isPrimaryKey ? store : store.index(index.name);\n                    const idbKeyRange = makeIDBKeyRange(range);\n                    const req = idbKeyRange ? source.count(idbKeyRange) : source.count();\n                    req.onsuccess = wrap(ev => resolve(ev.target.result));\n                    req.onerror = eventRejectHandler(reject);\n                });\n            }\n        };\n    }\n    const { schema, hasGetAll } = extractSchema(db, tmpTrans);\n    const tables = schema.tables.map(tableSchema => createDbCoreTable(tableSchema));\n    const tableMap = {};\n    tables.forEach(table => tableMap[table.name] = table);\n    return {\n        stack: \"dbcore\",\n        transaction: db.transaction.bind(db),\n        table(name) {\n            const result = tableMap[name];\n            if (!result)\n                throw new Error(`Table '${name}' not found`);\n            return tableMap[name];\n        },\n        MIN_KEY: -Infinity,\n        MAX_KEY: getMaxKey(IdbKeyRange),\n        schema\n    };\n}\n\nfunction createMiddlewareStack(stackImpl, middlewares) {\n    return middlewares.reduce((down, { create }) => ({ ...down, ...create(down) }), stackImpl);\n}\nfunction createMiddlewareStacks(middlewares, idbdb, { IDBKeyRange, indexedDB }, tmpTrans) {\n    const dbcore = createMiddlewareStack(createDBCore(idbdb, IDBKeyRange, tmpTrans), middlewares.dbcore);\n    return {\n        dbcore\n    };\n}\nfunction generateMiddlewareStacks({ _novip: db }, tmpTrans) {\n    const idbdb = tmpTrans.db;\n    const stacks = createMiddlewareStacks(db._middlewares, idbdb, db._deps, tmpTrans);\n    db.core = stacks.dbcore;\n    db.tables.forEach(table => {\n        const tableName = table.name;\n        if (db.core.schema.tables.some(tbl => tbl.name === tableName)) {\n            table.core = db.core.table(tableName);\n            if (db[tableName] instanceof db.Table) {\n                db[tableName].core = table.core;\n            }\n        }\n    });\n}\n\nfunction setApiOnPlace({ _novip: db }, objs, tableNames, dbschema) {\n    tableNames.forEach(tableName => {\n        const schema = dbschema[tableName];\n        objs.forEach(obj => {\n            const propDesc = getPropertyDescriptor(obj, tableName);\n            if (!propDesc || (\"value\" in propDesc && propDesc.value === undefined)) {\n                if (obj === db.Transaction.prototype || obj instanceof db.Transaction) {\n                    setProp(obj, tableName, {\n                        get() { return this.table(tableName); },\n                        set(value) {\n                            defineProperty(this, tableName, { value, writable: true, configurable: true, enumerable: true });\n                        }\n                    });\n                }\n                else {\n                    obj[tableName] = new db.Table(tableName, schema);\n                }\n            }\n        });\n    });\n}\nfunction removeTablesApi({ _novip: db }, objs) {\n    objs.forEach(obj => {\n        for (let key in obj) {\n            if (obj[key] instanceof db.Table)\n                delete obj[key];\n        }\n    });\n}\nfunction lowerVersionFirst(a, b) {\n    return a._cfg.version - b._cfg.version;\n}\nfunction runUpgraders(db, oldVersion, idbUpgradeTrans, reject) {\n    const globalSchema = db._dbSchema;\n    const trans = db._createTransaction('readwrite', db._storeNames, globalSchema);\n    trans.create(idbUpgradeTrans);\n    trans._completion.catch(reject);\n    const rejectTransaction = trans._reject.bind(trans);\n    const transless = PSD.transless || PSD;\n    newScope(() => {\n        PSD.trans = trans;\n        PSD.transless = transless;\n        if (oldVersion === 0) {\n            keys(globalSchema).forEach(tableName => {\n                createTable(idbUpgradeTrans, tableName, globalSchema[tableName].primKey, globalSchema[tableName].indexes);\n            });\n            generateMiddlewareStacks(db, idbUpgradeTrans);\n            DexiePromise.follow(() => db.on.populate.fire(trans)).catch(rejectTransaction);\n        }\n        else\n            updateTablesAndIndexes(db, oldVersion, trans, idbUpgradeTrans).catch(rejectTransaction);\n    });\n}\nfunction updateTablesAndIndexes({ _novip: db }, oldVersion, trans, idbUpgradeTrans) {\n    const queue = [];\n    const versions = db._versions;\n    let globalSchema = db._dbSchema = buildGlobalSchema(db, db.idbdb, idbUpgradeTrans);\n    let anyContentUpgraderHasRun = false;\n    const versToRun = versions.filter(v => v._cfg.version >= oldVersion);\n    versToRun.forEach(version => {\n        queue.push(() => {\n            const oldSchema = globalSchema;\n            const newSchema = version._cfg.dbschema;\n            adjustToExistingIndexNames(db, oldSchema, idbUpgradeTrans);\n            adjustToExistingIndexNames(db, newSchema, idbUpgradeTrans);\n            globalSchema = db._dbSchema = newSchema;\n            const diff = getSchemaDiff(oldSchema, newSchema);\n            diff.add.forEach(tuple => {\n                createTable(idbUpgradeTrans, tuple[0], tuple[1].primKey, tuple[1].indexes);\n            });\n            diff.change.forEach(change => {\n                if (change.recreate) {\n                    throw new exceptions.Upgrade(\"Not yet support for changing primary key\");\n                }\n                else {\n                    const store = idbUpgradeTrans.objectStore(change.name);\n                    change.add.forEach(idx => addIndex(store, idx));\n                    change.change.forEach(idx => {\n                        store.deleteIndex(idx.name);\n                        addIndex(store, idx);\n                    });\n                    change.del.forEach(idxName => store.deleteIndex(idxName));\n                }\n            });\n            const contentUpgrade = version._cfg.contentUpgrade;\n            if (contentUpgrade && version._cfg.version > oldVersion) {\n                generateMiddlewareStacks(db, idbUpgradeTrans);\n                trans._memoizedTables = {};\n                anyContentUpgraderHasRun = true;\n                let upgradeSchema = shallowClone(newSchema);\n                diff.del.forEach(table => {\n                    upgradeSchema[table] = oldSchema[table];\n                });\n                removeTablesApi(db, [db.Transaction.prototype]);\n                setApiOnPlace(db, [db.Transaction.prototype], keys(upgradeSchema), upgradeSchema);\n                trans.schema = upgradeSchema;\n                const contentUpgradeIsAsync = isAsyncFunction(contentUpgrade);\n                if (contentUpgradeIsAsync) {\n                    incrementExpectedAwaits();\n                }\n                let returnValue;\n                const promiseFollowed = DexiePromise.follow(() => {\n                    returnValue = contentUpgrade(trans);\n                    if (returnValue) {\n                        if (contentUpgradeIsAsync) {\n                            var decrementor = decrementExpectedAwaits.bind(null, null);\n                            returnValue.then(decrementor, decrementor);\n                        }\n                    }\n                });\n                return (returnValue && typeof returnValue.then === 'function' ?\n                    DexiePromise.resolve(returnValue) : promiseFollowed.then(() => returnValue));\n            }\n        });\n        queue.push(idbtrans => {\n            if (!anyContentUpgraderHasRun || !hasIEDeleteObjectStoreBug) {\n                const newSchema = version._cfg.dbschema;\n                deleteRemovedTables(newSchema, idbtrans);\n            }\n            removeTablesApi(db, [db.Transaction.prototype]);\n            setApiOnPlace(db, [db.Transaction.prototype], db._storeNames, db._dbSchema);\n            trans.schema = db._dbSchema;\n        });\n    });\n    function runQueue() {\n        return queue.length ? DexiePromise.resolve(queue.shift()(trans.idbtrans)).then(runQueue) :\n            DexiePromise.resolve();\n    }\n    return runQueue().then(() => {\n        createMissingTables(globalSchema, idbUpgradeTrans);\n    });\n}\nfunction getSchemaDiff(oldSchema, newSchema) {\n    const diff = {\n        del: [],\n        add: [],\n        change: []\n    };\n    let table;\n    for (table in oldSchema) {\n        if (!newSchema[table])\n            diff.del.push(table);\n    }\n    for (table in newSchema) {\n        const oldDef = oldSchema[table], newDef = newSchema[table];\n        if (!oldDef) {\n            diff.add.push([table, newDef]);\n        }\n        else {\n            const change = {\n                name: table,\n                def: newDef,\n                recreate: false,\n                del: [],\n                add: [],\n                change: []\n            };\n            if ((\n            '' + (oldDef.primKey.keyPath || '')) !== ('' + (newDef.primKey.keyPath || '')) ||\n                (oldDef.primKey.auto !== newDef.primKey.auto && !isIEOrEdge))\n             {\n                change.recreate = true;\n                diff.change.push(change);\n            }\n            else {\n                const oldIndexes = oldDef.idxByName;\n                const newIndexes = newDef.idxByName;\n                let idxName;\n                for (idxName in oldIndexes) {\n                    if (!newIndexes[idxName])\n                        change.del.push(idxName);\n                }\n                for (idxName in newIndexes) {\n                    const oldIdx = oldIndexes[idxName], newIdx = newIndexes[idxName];\n                    if (!oldIdx)\n                        change.add.push(newIdx);\n                    else if (oldIdx.src !== newIdx.src)\n                        change.change.push(newIdx);\n                }\n                if (change.del.length > 0 || change.add.length > 0 || change.change.length > 0) {\n                    diff.change.push(change);\n                }\n            }\n        }\n    }\n    return diff;\n}\nfunction createTable(idbtrans, tableName, primKey, indexes) {\n    const store = idbtrans.db.createObjectStore(tableName, primKey.keyPath ?\n        { keyPath: primKey.keyPath, autoIncrement: primKey.auto } :\n        { autoIncrement: primKey.auto });\n    indexes.forEach(idx => addIndex(store, idx));\n    return store;\n}\nfunction createMissingTables(newSchema, idbtrans) {\n    keys(newSchema).forEach(tableName => {\n        if (!idbtrans.db.objectStoreNames.contains(tableName)) {\n            createTable(idbtrans, tableName, newSchema[tableName].primKey, newSchema[tableName].indexes);\n        }\n    });\n}\nfunction deleteRemovedTables(newSchema, idbtrans) {\n    [].slice.call(idbtrans.db.objectStoreNames).forEach(storeName => newSchema[storeName] == null && idbtrans.db.deleteObjectStore(storeName));\n}\nfunction addIndex(store, idx) {\n    store.createIndex(idx.name, idx.keyPath, { unique: idx.unique, multiEntry: idx.multi });\n}\nfunction buildGlobalSchema(db, idbdb, tmpTrans) {\n    const globalSchema = {};\n    const dbStoreNames = slice(idbdb.objectStoreNames, 0);\n    dbStoreNames.forEach(storeName => {\n        const store = tmpTrans.objectStore(storeName);\n        let keyPath = store.keyPath;\n        const primKey = createIndexSpec(nameFromKeyPath(keyPath), keyPath || \"\", false, false, !!store.autoIncrement, keyPath && typeof keyPath !== \"string\", true);\n        const indexes = [];\n        for (let j = 0; j < store.indexNames.length; ++j) {\n            const idbindex = store.index(store.indexNames[j]);\n            keyPath = idbindex.keyPath;\n            var index = createIndexSpec(idbindex.name, keyPath, !!idbindex.unique, !!idbindex.multiEntry, false, keyPath && typeof keyPath !== \"string\", false);\n            indexes.push(index);\n        }\n        globalSchema[storeName] = createTableSchema(storeName, primKey, indexes);\n    });\n    return globalSchema;\n}\nfunction readGlobalSchema({ _novip: db }, idbdb, tmpTrans) {\n    db.verno = idbdb.version / 10;\n    const globalSchema = db._dbSchema = buildGlobalSchema(db, idbdb, tmpTrans);\n    db._storeNames = slice(idbdb.objectStoreNames, 0);\n    setApiOnPlace(db, [db._allTables], keys(globalSchema), globalSchema);\n}\nfunction verifyInstalledSchema(db, tmpTrans) {\n    const installedSchema = buildGlobalSchema(db, db.idbdb, tmpTrans);\n    const diff = getSchemaDiff(installedSchema, db._dbSchema);\n    return !(diff.add.length || diff.change.some(ch => ch.add.length || ch.change.length));\n}\nfunction adjustToExistingIndexNames({ _novip: db }, schema, idbtrans) {\n    const storeNames = idbtrans.db.objectStoreNames;\n    for (let i = 0; i < storeNames.length; ++i) {\n        const storeName = storeNames[i];\n        const store = idbtrans.objectStore(storeName);\n        db._hasGetAll = 'getAll' in store;\n        for (let j = 0; j < store.indexNames.length; ++j) {\n            const indexName = store.indexNames[j];\n            const keyPath = store.index(indexName).keyPath;\n            const dexieName = typeof keyPath === 'string' ? keyPath : \"[\" + slice(keyPath).join('+') + \"]\";\n            if (schema[storeName]) {\n                const indexSpec = schema[storeName].idxByName[dexieName];\n                if (indexSpec) {\n                    indexSpec.name = indexName;\n                    delete schema[storeName].idxByName[dexieName];\n                    schema[storeName].idxByName[indexName] = indexSpec;\n                }\n            }\n        }\n    }\n    if (typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&\n        !/(Chrome\\/|Edge\\/)/.test(navigator.userAgent) &&\n        _global.WorkerGlobalScope && _global instanceof _global.WorkerGlobalScope &&\n        [].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1] < 604) {\n        db._hasGetAll = false;\n    }\n}\nfunction parseIndexSyntax(primKeyAndIndexes) {\n    return primKeyAndIndexes.split(',').map((index, indexNum) => {\n        index = index.trim();\n        const name = index.replace(/([&*]|\\+\\+)/g, \"\");\n        const keyPath = /^\\[/.test(name) ? name.match(/^\\[(.*)\\]$/)[1].split('+') : name;\n        return createIndexSpec(name, keyPath || null, /\\&/.test(index), /\\*/.test(index), /\\+\\+/.test(index), isArray(keyPath), indexNum === 0);\n    });\n}\n\nclass Version {\n    _parseStoresSpec(stores, outSchema) {\n        keys(stores).forEach(tableName => {\n            if (stores[tableName] !== null) {\n                var indexes = parseIndexSyntax(stores[tableName]);\n                var primKey = indexes.shift();\n                if (primKey.multi)\n                    throw new exceptions.Schema(\"Primary key cannot be multi-valued\");\n                indexes.forEach(idx => {\n                    if (idx.auto)\n                        throw new exceptions.Schema(\"Only primary key can be marked as autoIncrement (++)\");\n                    if (!idx.keyPath)\n                        throw new exceptions.Schema(\"Index must have a name and cannot be an empty string\");\n                });\n                outSchema[tableName] = createTableSchema(tableName, primKey, indexes);\n            }\n        });\n    }\n    stores(stores) {\n        const db = this.db;\n        this._cfg.storesSource = this._cfg.storesSource ?\n            extend(this._cfg.storesSource, stores) :\n            stores;\n        const versions = db._versions;\n        const storesSpec = {};\n        let dbschema = {};\n        versions.forEach(version => {\n            extend(storesSpec, version._cfg.storesSource);\n            dbschema = (version._cfg.dbschema = {});\n            version._parseStoresSpec(storesSpec, dbschema);\n        });\n        db._dbSchema = dbschema;\n        removeTablesApi(db, [db._allTables, db, db.Transaction.prototype]);\n        setApiOnPlace(db, [db._allTables, db, db.Transaction.prototype, this._cfg.tables], keys(dbschema), dbschema);\n        db._storeNames = keys(dbschema);\n        return this;\n    }\n    upgrade(upgradeFunction) {\n        this._cfg.contentUpgrade = promisableChain(this._cfg.contentUpgrade || nop, upgradeFunction);\n        return this;\n    }\n}\n\nfunction createVersionConstructor(db) {\n    return makeClassConstructor(Version.prototype, function Version(versionNumber) {\n        this.db = db;\n        this._cfg = {\n            version: versionNumber,\n            storesSource: null,\n            dbschema: {},\n            tables: {},\n            contentUpgrade: null\n        };\n    });\n}\n\nfunction getDbNamesTable(indexedDB, IDBKeyRange) {\n    let dbNamesDB = indexedDB[\"_dbNamesDB\"];\n    if (!dbNamesDB) {\n        dbNamesDB = indexedDB[\"_dbNamesDB\"] = new Dexie$1(DBNAMES_DB, {\n            addons: [],\n            indexedDB,\n            IDBKeyRange,\n        });\n        dbNamesDB.version(1).stores({ dbnames: \"name\" });\n    }\n    return dbNamesDB.table(\"dbnames\");\n}\nfunction hasDatabasesNative(indexedDB) {\n    return indexedDB && typeof indexedDB.databases === \"function\";\n}\nfunction getDatabaseNames({ indexedDB, IDBKeyRange, }) {\n    return hasDatabasesNative(indexedDB)\n        ? Promise.resolve(indexedDB.databases()).then((infos) => infos\n            .map((info) => info.name)\n            .filter((name) => name !== DBNAMES_DB))\n        : getDbNamesTable(indexedDB, IDBKeyRange).toCollection().primaryKeys();\n}\nfunction _onDatabaseCreated({ indexedDB, IDBKeyRange }, name) {\n    !hasDatabasesNative(indexedDB) &&\n        name !== DBNAMES_DB &&\n        getDbNamesTable(indexedDB, IDBKeyRange).put({ name }).catch(nop);\n}\nfunction _onDatabaseDeleted({ indexedDB, IDBKeyRange }, name) {\n    !hasDatabasesNative(indexedDB) &&\n        name !== DBNAMES_DB &&\n        getDbNamesTable(indexedDB, IDBKeyRange).delete(name).catch(nop);\n}\n\nfunction vip(fn) {\n    return newScope(function () {\n        PSD.letThrough = true;\n        return fn();\n    });\n}\n\nfunction idbReady() {\n    var isSafari = !navigator.userAgentData &&\n        /Safari\\//.test(navigator.userAgent) &&\n        !/Chrom(e|ium)\\//.test(navigator.userAgent);\n    if (!isSafari || !indexedDB.databases)\n        return Promise.resolve();\n    var intervalId;\n    return new Promise(function (resolve) {\n        var tryIdb = function () { return indexedDB.databases().finally(resolve); };\n        intervalId = setInterval(tryIdb, 100);\n        tryIdb();\n    }).finally(function () { return clearInterval(intervalId); });\n}\n\nfunction dexieOpen(db) {\n    const state = db._state;\n    const { indexedDB } = db._deps;\n    if (state.isBeingOpened || db.idbdb)\n        return state.dbReadyPromise.then(() => state.dbOpenError ?\n            rejection(state.dbOpenError) :\n            db);\n    debug && (state.openCanceller._stackHolder = getErrorWithStack());\n    state.isBeingOpened = true;\n    state.dbOpenError = null;\n    state.openComplete = false;\n    const openCanceller = state.openCanceller;\n    function throwIfCancelled() {\n        if (state.openCanceller !== openCanceller)\n            throw new exceptions.DatabaseClosed('db.open() was cancelled');\n    }\n    let resolveDbReady = state.dbReadyResolve,\n    upgradeTransaction = null, wasCreated = false;\n    return DexiePromise.race([openCanceller, (typeof navigator === 'undefined' ? DexiePromise.resolve() : idbReady()).then(() => new DexiePromise((resolve, reject) => {\n            throwIfCancelled();\n            if (!indexedDB)\n                throw new exceptions.MissingAPI();\n            const dbName = db.name;\n            const req = state.autoSchema ?\n                indexedDB.open(dbName) :\n                indexedDB.open(dbName, Math.round(db.verno * 10));\n            if (!req)\n                throw new exceptions.MissingAPI();\n            req.onerror = eventRejectHandler(reject);\n            req.onblocked = wrap(db._fireOnBlocked);\n            req.onupgradeneeded = wrap(e => {\n                upgradeTransaction = req.transaction;\n                if (state.autoSchema && !db._options.allowEmptyDB) {\n                    req.onerror = preventDefault;\n                    upgradeTransaction.abort();\n                    req.result.close();\n                    const delreq = indexedDB.deleteDatabase(dbName);\n                    delreq.onsuccess = delreq.onerror = wrap(() => {\n                        reject(new exceptions.NoSuchDatabase(`Database ${dbName} doesnt exist`));\n                    });\n                }\n                else {\n                    upgradeTransaction.onerror = eventRejectHandler(reject);\n                    var oldVer = e.oldVersion > Math.pow(2, 62) ? 0 : e.oldVersion;\n                    wasCreated = oldVer < 1;\n                    db._novip.idbdb = req.result;\n                    runUpgraders(db, oldVer / 10, upgradeTransaction, reject);\n                }\n            }, reject);\n            req.onsuccess = wrap(() => {\n                upgradeTransaction = null;\n                const idbdb = db._novip.idbdb = req.result;\n                const objectStoreNames = slice(idbdb.objectStoreNames);\n                if (objectStoreNames.length > 0)\n                    try {\n                        const tmpTrans = idbdb.transaction(safariMultiStoreFix(objectStoreNames), 'readonly');\n                        if (state.autoSchema)\n                            readGlobalSchema(db, idbdb, tmpTrans);\n                        else {\n                            adjustToExistingIndexNames(db, db._dbSchema, tmpTrans);\n                            if (!verifyInstalledSchema(db, tmpTrans)) {\n                                console.warn(`Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.`);\n                            }\n                        }\n                        generateMiddlewareStacks(db, tmpTrans);\n                    }\n                    catch (e) {\n                    }\n                connections.push(db);\n                idbdb.onversionchange = wrap(ev => {\n                    state.vcFired = true;\n                    db.on(\"versionchange\").fire(ev);\n                });\n                idbdb.onclose = wrap(ev => {\n                    db.on(\"close\").fire(ev);\n                });\n                if (wasCreated)\n                    _onDatabaseCreated(db._deps, dbName);\n                resolve();\n            }, reject);\n        }))]).then(() => {\n        throwIfCancelled();\n        state.onReadyBeingFired = [];\n        return DexiePromise.resolve(vip(() => db.on.ready.fire(db.vip))).then(function fireRemainders() {\n            if (state.onReadyBeingFired.length > 0) {\n                let remainders = state.onReadyBeingFired.reduce(promisableChain, nop);\n                state.onReadyBeingFired = [];\n                return DexiePromise.resolve(vip(() => remainders(db.vip))).then(fireRemainders);\n            }\n        });\n    }).finally(() => {\n        state.onReadyBeingFired = null;\n        state.isBeingOpened = false;\n    }).then(() => {\n        return db;\n    }).catch(err => {\n        state.dbOpenError = err;\n        try {\n            upgradeTransaction && upgradeTransaction.abort();\n        }\n        catch (_a) { }\n        if (openCanceller === state.openCanceller) {\n            db._close();\n        }\n        return rejection(err);\n    }).finally(() => {\n        state.openComplete = true;\n        resolveDbReady();\n    });\n}\n\nfunction awaitIterator(iterator) {\n    var callNext = result => iterator.next(result), doThrow = error => iterator.throw(error), onSuccess = step(callNext), onError = step(doThrow);\n    function step(getNext) {\n        return (val) => {\n            var next = getNext(val), value = next.value;\n            return next.done ? value :\n                (!value || typeof value.then !== 'function' ?\n                    isArray(value) ? Promise.all(value).then(onSuccess, onError) : onSuccess(value) :\n                    value.then(onSuccess, onError));\n        };\n    }\n    return step(callNext)();\n}\n\nfunction extractTransactionArgs(mode, _tableArgs_, scopeFunc) {\n    var i = arguments.length;\n    if (i < 2)\n        throw new exceptions.InvalidArgument(\"Too few arguments\");\n    var args = new Array(i - 1);\n    while (--i)\n        args[i - 1] = arguments[i];\n    scopeFunc = args.pop();\n    var tables = flatten(args);\n    return [mode, tables, scopeFunc];\n}\nfunction enterTransactionScope(db, mode, storeNames, parentTransaction, scopeFunc) {\n    return DexiePromise.resolve().then(() => {\n        const transless = PSD.transless || PSD;\n        const trans = db._createTransaction(mode, storeNames, db._dbSchema, parentTransaction);\n        const zoneProps = {\n            trans: trans,\n            transless: transless\n        };\n        if (parentTransaction) {\n            trans.idbtrans = parentTransaction.idbtrans;\n        }\n        else {\n            trans.create();\n        }\n        const scopeFuncIsAsync = isAsyncFunction(scopeFunc);\n        if (scopeFuncIsAsync) {\n            incrementExpectedAwaits();\n        }\n        let returnValue;\n        const promiseFollowed = DexiePromise.follow(() => {\n            returnValue = scopeFunc.call(trans, trans);\n            if (returnValue) {\n                if (scopeFuncIsAsync) {\n                    var decrementor = decrementExpectedAwaits.bind(null, null);\n                    returnValue.then(decrementor, decrementor);\n                }\n                else if (typeof returnValue.next === 'function' && typeof returnValue.throw === 'function') {\n                    returnValue = awaitIterator(returnValue);\n                }\n            }\n        }, zoneProps);\n        return (returnValue && typeof returnValue.then === 'function' ?\n            DexiePromise.resolve(returnValue).then(x => trans.active ?\n                x\n                : rejection(new exceptions.PrematureCommit(\"Transaction committed too early. See http://bit.ly/2kdckMn\")))\n            : promiseFollowed.then(() => returnValue)).then(x => {\n            if (parentTransaction)\n                trans._resolve();\n            return trans._completion.then(() => x);\n        }).catch(e => {\n            trans._reject(e);\n            return rejection(e);\n        });\n    });\n}\n\nfunction pad(a, value, count) {\n    const result = isArray(a) ? a.slice() : [a];\n    for (let i = 0; i < count; ++i)\n        result.push(value);\n    return result;\n}\nfunction createVirtualIndexMiddleware(down) {\n    return {\n        ...down,\n        table(tableName) {\n            const table = down.table(tableName);\n            const { schema } = table;\n            const indexLookup = {};\n            const allVirtualIndexes = [];\n            function addVirtualIndexes(keyPath, keyTail, lowLevelIndex) {\n                const keyPathAlias = getKeyPathAlias(keyPath);\n                const indexList = (indexLookup[keyPathAlias] = indexLookup[keyPathAlias] || []);\n                const keyLength = keyPath == null ? 0 : typeof keyPath === 'string' ? 1 : keyPath.length;\n                const isVirtual = keyTail > 0;\n                const virtualIndex = {\n                    ...lowLevelIndex,\n                    isVirtual,\n                    keyTail,\n                    keyLength,\n                    extractKey: getKeyExtractor(keyPath),\n                    unique: !isVirtual && lowLevelIndex.unique\n                };\n                indexList.push(virtualIndex);\n                if (!virtualIndex.isPrimaryKey) {\n                    allVirtualIndexes.push(virtualIndex);\n                }\n                if (keyLength > 1) {\n                    const virtualKeyPath = keyLength === 2 ?\n                        keyPath[0] :\n                        keyPath.slice(0, keyLength - 1);\n                    addVirtualIndexes(virtualKeyPath, keyTail + 1, lowLevelIndex);\n                }\n                indexList.sort((a, b) => a.keyTail - b.keyTail);\n                return virtualIndex;\n            }\n            const primaryKey = addVirtualIndexes(schema.primaryKey.keyPath, 0, schema.primaryKey);\n            indexLookup[\":id\"] = [primaryKey];\n            for (const index of schema.indexes) {\n                addVirtualIndexes(index.keyPath, 0, index);\n            }\n            function findBestIndex(keyPath) {\n                const result = indexLookup[getKeyPathAlias(keyPath)];\n                return result && result[0];\n            }\n            function translateRange(range, keyTail) {\n                return {\n                    type: range.type === 1  ?\n                        2  :\n                        range.type,\n                    lower: pad(range.lower, range.lowerOpen ? down.MAX_KEY : down.MIN_KEY, keyTail),\n                    lowerOpen: true,\n                    upper: pad(range.upper, range.upperOpen ? down.MIN_KEY : down.MAX_KEY, keyTail),\n                    upperOpen: true\n                };\n            }\n            function translateRequest(req) {\n                const index = req.query.index;\n                return index.isVirtual ? {\n                    ...req,\n                    query: {\n                        index,\n                        range: translateRange(req.query.range, index.keyTail)\n                    }\n                } : req;\n            }\n            const result = {\n                ...table,\n                schema: {\n                    ...schema,\n                    primaryKey,\n                    indexes: allVirtualIndexes,\n                    getIndexByKeyPath: findBestIndex\n                },\n                count(req) {\n                    return table.count(translateRequest(req));\n                },\n                query(req) {\n                    return table.query(translateRequest(req));\n                },\n                openCursor(req) {\n                    const { keyTail, isVirtual, keyLength } = req.query.index;\n                    if (!isVirtual)\n                        return table.openCursor(req);\n                    function createVirtualCursor(cursor) {\n                        function _continue(key) {\n                            key != null ?\n                                cursor.continue(pad(key, req.reverse ? down.MAX_KEY : down.MIN_KEY, keyTail)) :\n                                req.unique ?\n                                    cursor.continue(cursor.key.slice(0, keyLength)\n                                        .concat(req.reverse\n                                        ? down.MIN_KEY\n                                        : down.MAX_KEY, keyTail)) :\n                                    cursor.continue();\n                        }\n                        const virtualCursor = Object.create(cursor, {\n                            continue: { value: _continue },\n                            continuePrimaryKey: {\n                                value(key, primaryKey) {\n                                    cursor.continuePrimaryKey(pad(key, down.MAX_KEY, keyTail), primaryKey);\n                                }\n                            },\n                            primaryKey: {\n                                get() {\n                                    return cursor.primaryKey;\n                                }\n                            },\n                            key: {\n                                get() {\n                                    const key = cursor.key;\n                                    return keyLength === 1 ?\n                                        key[0] :\n                                        key.slice(0, keyLength);\n                                }\n                            },\n                            value: {\n                                get() {\n                                    return cursor.value;\n                                }\n                            }\n                        });\n                        return virtualCursor;\n                    }\n                    return table.openCursor(translateRequest(req))\n                        .then(cursor => cursor && createVirtualCursor(cursor));\n                }\n            };\n            return result;\n        }\n    };\n}\nconst virtualIndexMiddleware = {\n    stack: \"dbcore\",\n    name: \"VirtualIndexMiddleware\",\n    level: 1,\n    create: createVirtualIndexMiddleware\n};\n\nfunction getObjectDiff(a, b, rv, prfx) {\n    rv = rv || {};\n    prfx = prfx || '';\n    keys(a).forEach((prop) => {\n        if (!hasOwn(b, prop)) {\n            rv[prfx + prop] = undefined;\n        }\n        else {\n            var ap = a[prop], bp = b[prop];\n            if (typeof ap === 'object' && typeof bp === 'object' && ap && bp) {\n                const apTypeName = toStringTag(ap);\n                const bpTypeName = toStringTag(bp);\n                if (apTypeName !== bpTypeName) {\n                    rv[prfx + prop] = b[prop];\n                }\n                else if (apTypeName === 'Object') {\n                    getObjectDiff(ap, bp, rv, prfx + prop + '.');\n                }\n                else if (ap !== bp) {\n                    rv[prfx + prop] = b[prop];\n                }\n            }\n            else if (ap !== bp)\n                rv[prfx + prop] = b[prop];\n        }\n    });\n    keys(b).forEach((prop) => {\n        if (!hasOwn(a, prop)) {\n            rv[prfx + prop] = b[prop];\n        }\n    });\n    return rv;\n}\n\nfunction getEffectiveKeys(primaryKey, req) {\n    if (req.type === 'delete')\n        return req.keys;\n    return req.keys || req.values.map(primaryKey.extractKey);\n}\n\nconst hooksMiddleware = {\n    stack: \"dbcore\",\n    name: \"HooksMiddleware\",\n    level: 2,\n    create: (downCore) => ({\n        ...downCore,\n        table(tableName) {\n            const downTable = downCore.table(tableName);\n            const { primaryKey } = downTable.schema;\n            const tableMiddleware = {\n                ...downTable,\n                mutate(req) {\n                    const dxTrans = PSD.trans;\n                    const { deleting, creating, updating } = dxTrans.table(tableName).hook;\n                    switch (req.type) {\n                        case 'add':\n                            if (creating.fire === nop)\n                                break;\n                            return dxTrans._promise('readwrite', () => addPutOrDelete(req), true);\n                        case 'put':\n                            if (creating.fire === nop && updating.fire === nop)\n                                break;\n                            return dxTrans._promise('readwrite', () => addPutOrDelete(req), true);\n                        case 'delete':\n                            if (deleting.fire === nop)\n                                break;\n                            return dxTrans._promise('readwrite', () => addPutOrDelete(req), true);\n                        case 'deleteRange':\n                            if (deleting.fire === nop)\n                                break;\n                            return dxTrans._promise('readwrite', () => deleteRange(req), true);\n                    }\n                    return downTable.mutate(req);\n                    function addPutOrDelete(req) {\n                        const dxTrans = PSD.trans;\n                        const keys = req.keys || getEffectiveKeys(primaryKey, req);\n                        if (!keys)\n                            throw new Error(\"Keys missing\");\n                        req = req.type === 'add' || req.type === 'put' ?\n                            { ...req, keys } :\n                            { ...req };\n                        if (req.type !== 'delete')\n                            req.values = [...req.values];\n                        if (req.keys)\n                            req.keys = [...req.keys];\n                        return getExistingValues(downTable, req, keys).then(existingValues => {\n                            const contexts = keys.map((key, i) => {\n                                const existingValue = existingValues[i];\n                                const ctx = { onerror: null, onsuccess: null };\n                                if (req.type === 'delete') {\n                                    deleting.fire.call(ctx, key, existingValue, dxTrans);\n                                }\n                                else if (req.type === 'add' || existingValue === undefined) {\n                                    const generatedPrimaryKey = creating.fire.call(ctx, key, req.values[i], dxTrans);\n                                    if (key == null && generatedPrimaryKey != null) {\n                                        key = generatedPrimaryKey;\n                                        req.keys[i] = key;\n                                        if (!primaryKey.outbound) {\n                                            setByKeyPath(req.values[i], primaryKey.keyPath, key);\n                                        }\n                                    }\n                                }\n                                else {\n                                    const objectDiff = getObjectDiff(existingValue, req.values[i]);\n                                    const additionalChanges = updating.fire.call(ctx, objectDiff, key, existingValue, dxTrans);\n                                    if (additionalChanges) {\n                                        const requestedValue = req.values[i];\n                                        Object.keys(additionalChanges).forEach(keyPath => {\n                                            if (hasOwn(requestedValue, keyPath)) {\n                                                requestedValue[keyPath] = additionalChanges[keyPath];\n                                            }\n                                            else {\n                                                setByKeyPath(requestedValue, keyPath, additionalChanges[keyPath]);\n                                            }\n                                        });\n                                    }\n                                }\n                                return ctx;\n                            });\n                            return downTable.mutate(req).then(({ failures, results, numFailures, lastResult }) => {\n                                for (let i = 0; i < keys.length; ++i) {\n                                    const primKey = results ? results[i] : keys[i];\n                                    const ctx = contexts[i];\n                                    if (primKey == null) {\n                                        ctx.onerror && ctx.onerror(failures[i]);\n                                    }\n                                    else {\n                                        ctx.onsuccess && ctx.onsuccess(req.type === 'put' && existingValues[i] ?\n                                            req.values[i] :\n                                            primKey\n                                        );\n                                    }\n                                }\n                                return { failures, results, numFailures, lastResult };\n                            }).catch(error => {\n                                contexts.forEach(ctx => ctx.onerror && ctx.onerror(error));\n                                return Promise.reject(error);\n                            });\n                        });\n                    }\n                    function deleteRange(req) {\n                        return deleteNextChunk(req.trans, req.range, 10000);\n                    }\n                    function deleteNextChunk(trans, range, limit) {\n                        return downTable.query({ trans, values: false, query: { index: primaryKey, range }, limit })\n                            .then(({ result }) => {\n                            return addPutOrDelete({ type: 'delete', keys: result, trans }).then(res => {\n                                if (res.numFailures > 0)\n                                    return Promise.reject(res.failures[0]);\n                                if (result.length < limit) {\n                                    return { failures: [], numFailures: 0, lastResult: undefined };\n                                }\n                                else {\n                                    return deleteNextChunk(trans, { ...range, lower: result[result.length - 1], lowerOpen: true }, limit);\n                                }\n                            });\n                        });\n                    }\n                }\n            };\n            return tableMiddleware;\n        },\n    })\n};\nfunction getExistingValues(table, req, effectiveKeys) {\n    return req.type === \"add\"\n        ? Promise.resolve([])\n        : table.getMany({ trans: req.trans, keys: effectiveKeys, cache: \"immutable\" });\n}\n\nfunction getFromTransactionCache(keys, cache, clone) {\n    try {\n        if (!cache)\n            return null;\n        if (cache.keys.length < keys.length)\n            return null;\n        const result = [];\n        for (let i = 0, j = 0; i < cache.keys.length && j < keys.length; ++i) {\n            if (cmp(cache.keys[i], keys[j]) !== 0)\n                continue;\n            result.push(clone ? deepClone(cache.values[i]) : cache.values[i]);\n            ++j;\n        }\n        return result.length === keys.length ? result : null;\n    }\n    catch (_a) {\n        return null;\n    }\n}\nconst cacheExistingValuesMiddleware = {\n    stack: \"dbcore\",\n    level: -1,\n    create: (core) => {\n        return {\n            table: (tableName) => {\n                const table = core.table(tableName);\n                return {\n                    ...table,\n                    getMany: (req) => {\n                        if (!req.cache) {\n                            return table.getMany(req);\n                        }\n                        const cachedResult = getFromTransactionCache(req.keys, req.trans[\"_cache\"], req.cache === \"clone\");\n                        if (cachedResult) {\n                            return DexiePromise.resolve(cachedResult);\n                        }\n                        return table.getMany(req).then((res) => {\n                            req.trans[\"_cache\"] = {\n                                keys: req.keys,\n                                values: req.cache === \"clone\" ? deepClone(res) : res,\n                            };\n                            return res;\n                        });\n                    },\n                    mutate: (req) => {\n                        if (req.type !== \"add\")\n                            req.trans[\"_cache\"] = null;\n                        return table.mutate(req);\n                    },\n                };\n            },\n        };\n    },\n};\n\nfunction isEmptyRange(node) {\n    return !(\"from\" in node);\n}\nconst RangeSet = function (fromOrTree, to) {\n    if (this) {\n        extend(this, arguments.length ? { d: 1, from: fromOrTree, to: arguments.length > 1 ? to : fromOrTree } : { d: 0 });\n    }\n    else {\n        const rv = new RangeSet();\n        if (fromOrTree && (\"d\" in fromOrTree)) {\n            extend(rv, fromOrTree);\n        }\n        return rv;\n    }\n};\nprops(RangeSet.prototype, {\n    add(rangeSet) {\n        mergeRanges(this, rangeSet);\n        return this;\n    },\n    addKey(key) {\n        addRange(this, key, key);\n        return this;\n    },\n    addKeys(keys) {\n        keys.forEach(key => addRange(this, key, key));\n        return this;\n    },\n    [iteratorSymbol]() {\n        return getRangeSetIterator(this);\n    }\n});\nfunction addRange(target, from, to) {\n    const diff = cmp(from, to);\n    if (isNaN(diff))\n        return;\n    if (diff > 0)\n        throw RangeError();\n    if (isEmptyRange(target))\n        return extend(target, { from, to, d: 1 });\n    const left = target.l;\n    const right = target.r;\n    if (cmp(to, target.from) < 0) {\n        left\n            ? addRange(left, from, to)\n            : (target.l = { from, to, d: 1, l: null, r: null });\n        return rebalance(target);\n    }\n    if (cmp(from, target.to) > 0) {\n        right\n            ? addRange(right, from, to)\n            : (target.r = { from, to, d: 1, l: null, r: null });\n        return rebalance(target);\n    }\n    if (cmp(from, target.from) < 0) {\n        target.from = from;\n        target.l = null;\n        target.d = right ? right.d + 1 : 1;\n    }\n    if (cmp(to, target.to) > 0) {\n        target.to = to;\n        target.r = null;\n        target.d = target.l ? target.l.d + 1 : 1;\n    }\n    const rightWasCutOff = !target.r;\n    if (left && !target.l) {\n        mergeRanges(target, left);\n    }\n    if (right && rightWasCutOff) {\n        mergeRanges(target, right);\n    }\n}\nfunction mergeRanges(target, newSet) {\n    function _addRangeSet(target, { from, to, l, r }) {\n        addRange(target, from, to);\n        if (l)\n            _addRangeSet(target, l);\n        if (r)\n            _addRangeSet(target, r);\n    }\n    if (!isEmptyRange(newSet))\n        _addRangeSet(target, newSet);\n}\nfunction rangesOverlap(rangeSet1, rangeSet2) {\n    const i1 = getRangeSetIterator(rangeSet2);\n    let nextResult1 = i1.next();\n    if (nextResult1.done)\n        return false;\n    let a = nextResult1.value;\n    const i2 = getRangeSetIterator(rangeSet1);\n    let nextResult2 = i2.next(a.from);\n    let b = nextResult2.value;\n    while (!nextResult1.done && !nextResult2.done) {\n        if (cmp(b.from, a.to) <= 0 && cmp(b.to, a.from) >= 0)\n            return true;\n        cmp(a.from, b.from) < 0\n            ? (a = (nextResult1 = i1.next(b.from)).value)\n            : (b = (nextResult2 = i2.next(a.from)).value);\n    }\n    return false;\n}\nfunction getRangeSetIterator(node) {\n    let state = isEmptyRange(node) ? null : { s: 0, n: node };\n    return {\n        next(key) {\n            const keyProvided = arguments.length > 0;\n            while (state) {\n                switch (state.s) {\n                    case 0:\n                        state.s = 1;\n                        if (keyProvided) {\n                            while (state.n.l && cmp(key, state.n.from) < 0)\n                                state = { up: state, n: state.n.l, s: 1 };\n                        }\n                        else {\n                            while (state.n.l)\n                                state = { up: state, n: state.n.l, s: 1 };\n                        }\n                    case 1:\n                        state.s = 2;\n                        if (!keyProvided || cmp(key, state.n.to) <= 0)\n                            return { value: state.n, done: false };\n                    case 2:\n                        if (state.n.r) {\n                            state.s = 3;\n                            state = { up: state, n: state.n.r, s: 0 };\n                            continue;\n                        }\n                    case 3:\n                        state = state.up;\n                }\n            }\n            return { done: true };\n        },\n    };\n}\nfunction rebalance(target) {\n    var _a, _b;\n    const diff = (((_a = target.r) === null || _a === void 0 ? void 0 : _a.d) || 0) - (((_b = target.l) === null || _b === void 0 ? void 0 : _b.d) || 0);\n    const r = diff > 1 ? \"r\" : diff < -1 ? \"l\" : \"\";\n    if (r) {\n        const l = r === \"r\" ? \"l\" : \"r\";\n        const rootClone = { ...target };\n        const oldRootRight = target[r];\n        target.from = oldRootRight.from;\n        target.to = oldRootRight.to;\n        target[r] = oldRootRight[r];\n        rootClone[r] = oldRootRight[l];\n        target[l] = rootClone;\n        rootClone.d = computeDepth(rootClone);\n    }\n    target.d = computeDepth(target);\n}\nfunction computeDepth({ r, l }) {\n    return (r ? (l ? Math.max(r.d, l.d) : r.d) : l ? l.d : 0) + 1;\n}\n\nconst observabilityMiddleware = {\n    stack: \"dbcore\",\n    level: 0,\n    create: (core) => {\n        const dbName = core.schema.name;\n        const FULL_RANGE = new RangeSet(core.MIN_KEY, core.MAX_KEY);\n        return {\n            ...core,\n            table: (tableName) => {\n                const table = core.table(tableName);\n                const { schema } = table;\n                const { primaryKey } = schema;\n                const { extractKey, outbound } = primaryKey;\n                const tableClone = {\n                    ...table,\n                    mutate: (req) => {\n                        const trans = req.trans;\n                        const mutatedParts = trans.mutatedParts || (trans.mutatedParts = {});\n                        const getRangeSet = (indexName) => {\n                            const part = `idb://${dbName}/${tableName}/${indexName}`;\n                            return (mutatedParts[part] ||\n                                (mutatedParts[part] = new RangeSet()));\n                        };\n                        const pkRangeSet = getRangeSet(\"\");\n                        const delsRangeSet = getRangeSet(\":dels\");\n                        const { type } = req;\n                        let [keys, newObjs] = req.type === \"deleteRange\"\n                            ? [req.range]\n                            : req.type === \"delete\"\n                                ? [req.keys]\n                                : req.values.length < 50\n                                    ? [[], req.values]\n                                    : [];\n                        const oldCache = req.trans[\"_cache\"];\n                        return table.mutate(req).then((res) => {\n                            if (isArray(keys)) {\n                                if (type !== \"delete\")\n                                    keys = res.results;\n                                pkRangeSet.addKeys(keys);\n                                const oldObjs = getFromTransactionCache(keys, oldCache);\n                                if (!oldObjs && type !== \"add\") {\n                                    delsRangeSet.addKeys(keys);\n                                }\n                                if (oldObjs || newObjs) {\n                                    trackAffectedIndexes(getRangeSet, schema, oldObjs, newObjs);\n                                }\n                            }\n                            else if (keys) {\n                                const range = { from: keys.lower, to: keys.upper };\n                                delsRangeSet.add(range);\n                                pkRangeSet.add(range);\n                            }\n                            else {\n                                pkRangeSet.add(FULL_RANGE);\n                                delsRangeSet.add(FULL_RANGE);\n                                schema.indexes.forEach(idx => getRangeSet(idx.name).add(FULL_RANGE));\n                            }\n                            return res;\n                        });\n                    },\n                };\n                const getRange = ({ query: { index, range }, }) => {\n                    var _a, _b;\n                    return [\n                        index,\n                        new RangeSet((_a = range.lower) !== null && _a !== void 0 ? _a : core.MIN_KEY, (_b = range.upper) !== null && _b !== void 0 ? _b : core.MAX_KEY),\n                    ];\n                };\n                const readSubscribers = {\n                    get: (req) => [primaryKey, new RangeSet(req.key)],\n                    getMany: (req) => [primaryKey, new RangeSet().addKeys(req.keys)],\n                    count: getRange,\n                    query: getRange,\n                    openCursor: getRange,\n                };\n                keys(readSubscribers).forEach(method => {\n                    tableClone[method] = function (req) {\n                        const { subscr } = PSD;\n                        if (subscr) {\n                            const getRangeSet = (indexName) => {\n                                const part = `idb://${dbName}/${tableName}/${indexName}`;\n                                return (subscr[part] ||\n                                    (subscr[part] = new RangeSet()));\n                            };\n                            const pkRangeSet = getRangeSet(\"\");\n                            const delsRangeSet = getRangeSet(\":dels\");\n                            const [queriedIndex, queriedRanges] = readSubscribers[method](req);\n                            getRangeSet(queriedIndex.name || \"\").add(queriedRanges);\n                            if (!queriedIndex.isPrimaryKey) {\n                                if (method === \"count\") {\n                                    delsRangeSet.add(FULL_RANGE);\n                                }\n                                else {\n                                    const keysPromise = method === \"query\" &&\n                                        outbound &&\n                                        req.values &&\n                                        table.query({\n                                            ...req,\n                                            values: false,\n                                        });\n                                    return table[method].apply(this, arguments).then((res) => {\n                                        if (method === \"query\") {\n                                            if (outbound && req.values) {\n                                                return keysPromise.then(({ result: resultingKeys }) => {\n                                                    pkRangeSet.addKeys(resultingKeys);\n                                                    return res;\n                                                });\n                                            }\n                                            const pKeys = req.values\n                                                ? res.result.map(extractKey)\n                                                : res.result;\n                                            if (req.values) {\n                                                pkRangeSet.addKeys(pKeys);\n                                            }\n                                            else {\n                                                delsRangeSet.addKeys(pKeys);\n                                            }\n                                        }\n                                        else if (method === \"openCursor\") {\n                                            const cursor = res;\n                                            const wantValues = req.values;\n                                            return (cursor &&\n                                                Object.create(cursor, {\n                                                    key: {\n                                                        get() {\n                                                            delsRangeSet.addKey(cursor.primaryKey);\n                                                            return cursor.key;\n                                                        },\n                                                    },\n                                                    primaryKey: {\n                                                        get() {\n                                                            const pkey = cursor.primaryKey;\n                                                            delsRangeSet.addKey(pkey);\n                                                            return pkey;\n                                                        },\n                                                    },\n                                                    value: {\n                                                        get() {\n                                                            wantValues && pkRangeSet.addKey(cursor.primaryKey);\n                                                            return cursor.value;\n                                                        },\n                                                    },\n                                                }));\n                                        }\n                                        return res;\n                                    });\n                                }\n                            }\n                        }\n                        return table[method].apply(this, arguments);\n                    };\n                });\n                return tableClone;\n            },\n        };\n    },\n};\nfunction trackAffectedIndexes(getRangeSet, schema, oldObjs, newObjs) {\n    function addAffectedIndex(ix) {\n        const rangeSet = getRangeSet(ix.name || \"\");\n        function extractKey(obj) {\n            return obj != null ? ix.extractKey(obj) : null;\n        }\n        const addKeyOrKeys = (key) => ix.multiEntry && isArray(key)\n            ? key.forEach(key => rangeSet.addKey(key))\n            : rangeSet.addKey(key);\n        (oldObjs || newObjs).forEach((_, i) => {\n            const oldKey = oldObjs && extractKey(oldObjs[i]);\n            const newKey = newObjs && extractKey(newObjs[i]);\n            if (cmp(oldKey, newKey) !== 0) {\n                if (oldKey != null)\n                    addKeyOrKeys(oldKey);\n                if (newKey != null)\n                    addKeyOrKeys(newKey);\n            }\n        });\n    }\n    schema.indexes.forEach(addAffectedIndex);\n}\n\nclass Dexie$1 {\n    constructor(name, options) {\n        this._middlewares = {};\n        this.verno = 0;\n        const deps = Dexie$1.dependencies;\n        this._options = options = {\n            addons: Dexie$1.addons,\n            autoOpen: true,\n            indexedDB: deps.indexedDB,\n            IDBKeyRange: deps.IDBKeyRange,\n            ...options\n        };\n        this._deps = {\n            indexedDB: options.indexedDB,\n            IDBKeyRange: options.IDBKeyRange\n        };\n        const { addons, } = options;\n        this._dbSchema = {};\n        this._versions = [];\n        this._storeNames = [];\n        this._allTables = {};\n        this.idbdb = null;\n        this._novip = this;\n        const state = {\n            dbOpenError: null,\n            isBeingOpened: false,\n            onReadyBeingFired: null,\n            openComplete: false,\n            dbReadyResolve: nop,\n            dbReadyPromise: null,\n            cancelOpen: nop,\n            openCanceller: null,\n            autoSchema: true\n        };\n        state.dbReadyPromise = new DexiePromise(resolve => {\n            state.dbReadyResolve = resolve;\n        });\n        state.openCanceller = new DexiePromise((_, reject) => {\n            state.cancelOpen = reject;\n        });\n        this._state = state;\n        this.name = name;\n        this.on = Events(this, \"populate\", \"blocked\", \"versionchange\", \"close\", { ready: [promisableChain, nop] });\n        this.on.ready.subscribe = override(this.on.ready.subscribe, subscribe => {\n            return (subscriber, bSticky) => {\n                Dexie$1.vip(() => {\n                    const state = this._state;\n                    if (state.openComplete) {\n                        if (!state.dbOpenError)\n                            DexiePromise.resolve().then(subscriber);\n                        if (bSticky)\n                            subscribe(subscriber);\n                    }\n                    else if (state.onReadyBeingFired) {\n                        state.onReadyBeingFired.push(subscriber);\n                        if (bSticky)\n                            subscribe(subscriber);\n                    }\n                    else {\n                        subscribe(subscriber);\n                        const db = this;\n                        if (!bSticky)\n                            subscribe(function unsubscribe() {\n                                db.on.ready.unsubscribe(subscriber);\n                                db.on.ready.unsubscribe(unsubscribe);\n                            });\n                    }\n                });\n            };\n        });\n        this.Collection = createCollectionConstructor(this);\n        this.Table = createTableConstructor(this);\n        this.Transaction = createTransactionConstructor(this);\n        this.Version = createVersionConstructor(this);\n        this.WhereClause = createWhereClauseConstructor(this);\n        this.on(\"versionchange\", ev => {\n            if (ev.newVersion > 0)\n                console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`);\n            else\n                console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`);\n            this.close();\n        });\n        this.on(\"blocked\", ev => {\n            if (!ev.newVersion || ev.newVersion < ev.oldVersion)\n                console.warn(`Dexie.delete('${this.name}') was blocked`);\n            else\n                console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${ev.oldVersion / 10}`);\n        });\n        this._maxKey = getMaxKey(options.IDBKeyRange);\n        this._createTransaction = (mode, storeNames, dbschema, parentTransaction) => new this.Transaction(mode, storeNames, dbschema, this._options.chromeTransactionDurability, parentTransaction);\n        this._fireOnBlocked = ev => {\n            this.on(\"blocked\").fire(ev);\n            connections\n                .filter(c => c.name === this.name && c !== this && !c._state.vcFired)\n                .map(c => c.on(\"versionchange\").fire(ev));\n        };\n        this.use(virtualIndexMiddleware);\n        this.use(hooksMiddleware);\n        this.use(observabilityMiddleware);\n        this.use(cacheExistingValuesMiddleware);\n        this.vip = Object.create(this, { _vip: { value: true } });\n        addons.forEach(addon => addon(this));\n    }\n    version(versionNumber) {\n        if (isNaN(versionNumber) || versionNumber < 0.1)\n            throw new exceptions.Type(`Given version is not a positive number`);\n        versionNumber = Math.round(versionNumber * 10) / 10;\n        if (this.idbdb || this._state.isBeingOpened)\n            throw new exceptions.Schema(\"Cannot add version when database is open\");\n        this.verno = Math.max(this.verno, versionNumber);\n        const versions = this._versions;\n        var versionInstance = versions.filter(v => v._cfg.version === versionNumber)[0];\n        if (versionInstance)\n            return versionInstance;\n        versionInstance = new this.Version(versionNumber);\n        versions.push(versionInstance);\n        versions.sort(lowerVersionFirst);\n        versionInstance.stores({});\n        this._state.autoSchema = false;\n        return versionInstance;\n    }\n    _whenReady(fn) {\n        return (this.idbdb && (this._state.openComplete || PSD.letThrough || this._vip)) ? fn() : new DexiePromise((resolve, reject) => {\n            if (this._state.openComplete) {\n                return reject(new exceptions.DatabaseClosed(this._state.dbOpenError));\n            }\n            if (!this._state.isBeingOpened) {\n                if (!this._options.autoOpen) {\n                    reject(new exceptions.DatabaseClosed());\n                    return;\n                }\n                this.open().catch(nop);\n            }\n            this._state.dbReadyPromise.then(resolve, reject);\n        }).then(fn);\n    }\n    use({ stack, create, level, name }) {\n        if (name)\n            this.unuse({ stack, name });\n        const middlewares = this._middlewares[stack] || (this._middlewares[stack] = []);\n        middlewares.push({ stack, create, level: level == null ? 10 : level, name });\n        middlewares.sort((a, b) => a.level - b.level);\n        return this;\n    }\n    unuse({ stack, name, create }) {\n        if (stack && this._middlewares[stack]) {\n            this._middlewares[stack] = this._middlewares[stack].filter(mw => create ? mw.create !== create :\n                name ? mw.name !== name :\n                    false);\n        }\n        return this;\n    }\n    open() {\n        return dexieOpen(this);\n    }\n    _close() {\n        const state = this._state;\n        const idx = connections.indexOf(this);\n        if (idx >= 0)\n            connections.splice(idx, 1);\n        if (this.idbdb) {\n            try {\n                this.idbdb.close();\n            }\n            catch (e) { }\n            this._novip.idbdb = null;\n        }\n        state.dbReadyPromise = new DexiePromise(resolve => {\n            state.dbReadyResolve = resolve;\n        });\n        state.openCanceller = new DexiePromise((_, reject) => {\n            state.cancelOpen = reject;\n        });\n    }\n    close() {\n        this._close();\n        const state = this._state;\n        this._options.autoOpen = false;\n        state.dbOpenError = new exceptions.DatabaseClosed();\n        if (state.isBeingOpened)\n            state.cancelOpen(state.dbOpenError);\n    }\n    delete() {\n        const hasArguments = arguments.length > 0;\n        const state = this._state;\n        return new DexiePromise((resolve, reject) => {\n            const doDelete = () => {\n                this.close();\n                var req = this._deps.indexedDB.deleteDatabase(this.name);\n                req.onsuccess = wrap(() => {\n                    _onDatabaseDeleted(this._deps, this.name);\n                    resolve();\n                });\n                req.onerror = eventRejectHandler(reject);\n                req.onblocked = this._fireOnBlocked;\n            };\n            if (hasArguments)\n                throw new exceptions.InvalidArgument(\"Arguments not allowed in db.delete()\");\n            if (state.isBeingOpened) {\n                state.dbReadyPromise.then(doDelete);\n            }\n            else {\n                doDelete();\n            }\n        });\n    }\n    backendDB() {\n        return this.idbdb;\n    }\n    isOpen() {\n        return this.idbdb !== null;\n    }\n    hasBeenClosed() {\n        const dbOpenError = this._state.dbOpenError;\n        return dbOpenError && (dbOpenError.name === 'DatabaseClosed');\n    }\n    hasFailed() {\n        return this._state.dbOpenError !== null;\n    }\n    dynamicallyOpened() {\n        return this._state.autoSchema;\n    }\n    get tables() {\n        return keys(this._allTables).map(name => this._allTables[name]);\n    }\n    transaction() {\n        const args = extractTransactionArgs.apply(this, arguments);\n        return this._transaction.apply(this, args);\n    }\n    _transaction(mode, tables, scopeFunc) {\n        let parentTransaction = PSD.trans;\n        if (!parentTransaction || parentTransaction.db !== this || mode.indexOf('!') !== -1)\n            parentTransaction = null;\n        const onlyIfCompatible = mode.indexOf('?') !== -1;\n        mode = mode.replace('!', '').replace('?', '');\n        let idbMode, storeNames;\n        try {\n            storeNames = tables.map(table => {\n                var storeName = table instanceof this.Table ? table.name : table;\n                if (typeof storeName !== 'string')\n                    throw new TypeError(\"Invalid table argument to Dexie.transaction(). Only Table or String are allowed\");\n                return storeName;\n            });\n            if (mode == \"r\" || mode === READONLY)\n                idbMode = READONLY;\n            else if (mode == \"rw\" || mode == READWRITE)\n                idbMode = READWRITE;\n            else\n                throw new exceptions.InvalidArgument(\"Invalid transaction mode: \" + mode);\n            if (parentTransaction) {\n                if (parentTransaction.mode === READONLY && idbMode === READWRITE) {\n                    if (onlyIfCompatible) {\n                        parentTransaction = null;\n                    }\n                    else\n                        throw new exceptions.SubTransaction(\"Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY\");\n                }\n                if (parentTransaction) {\n                    storeNames.forEach(storeName => {\n                        if (parentTransaction && parentTransaction.storeNames.indexOf(storeName) === -1) {\n                            if (onlyIfCompatible) {\n                                parentTransaction = null;\n                            }\n                            else\n                                throw new exceptions.SubTransaction(\"Table \" + storeName +\n                                    \" not included in parent transaction.\");\n                        }\n                    });\n                }\n                if (onlyIfCompatible && parentTransaction && !parentTransaction.active) {\n                    parentTransaction = null;\n                }\n            }\n        }\n        catch (e) {\n            return parentTransaction ?\n                parentTransaction._promise(null, (_, reject) => { reject(e); }) :\n                rejection(e);\n        }\n        const enterTransaction = enterTransactionScope.bind(null, this, idbMode, storeNames, parentTransaction, scopeFunc);\n        return (parentTransaction ?\n            parentTransaction._promise(idbMode, enterTransaction, \"lock\") :\n            PSD.trans ?\n                usePSD(PSD.transless, () => this._whenReady(enterTransaction)) :\n                this._whenReady(enterTransaction));\n    }\n    table(tableName) {\n        if (!hasOwn(this._allTables, tableName)) {\n            throw new exceptions.InvalidTable(`Table ${tableName} does not exist`);\n        }\n        return this._allTables[tableName];\n    }\n}\n\nconst symbolObservable = typeof Symbol !== \"undefined\" && \"observable\" in Symbol\n    ? Symbol.observable\n    : \"@@observable\";\nclass Observable {\n    constructor(subscribe) {\n        this._subscribe = subscribe;\n    }\n    subscribe(x, error, complete) {\n        return this._subscribe(!x || typeof x === \"function\" ? { next: x, error, complete } : x);\n    }\n    [symbolObservable]() {\n        return this;\n    }\n}\n\nfunction extendObservabilitySet(target, newSet) {\n    keys(newSet).forEach(part => {\n        const rangeSet = target[part] || (target[part] = new RangeSet());\n        mergeRanges(rangeSet, newSet[part]);\n    });\n    return target;\n}\n\nfunction liveQuery(querier) {\n    return new Observable((observer) => {\n        const scopeFuncIsAsync = isAsyncFunction(querier);\n        function execute(subscr) {\n            if (scopeFuncIsAsync) {\n                incrementExpectedAwaits();\n            }\n            const exec = () => newScope(querier, { subscr, trans: null });\n            const rv = PSD.trans\n                ?\n                    usePSD(PSD.transless, exec)\n                : exec();\n            if (scopeFuncIsAsync) {\n                rv.then(decrementExpectedAwaits, decrementExpectedAwaits);\n            }\n            return rv;\n        }\n        let closed = false;\n        let accumMuts = {};\n        let currentObs = {};\n        const subscription = {\n            get closed() {\n                return closed;\n            },\n            unsubscribe: () => {\n                closed = true;\n                globalEvents.storagemutated.unsubscribe(mutationListener);\n            },\n        };\n        observer.start && observer.start(subscription);\n        let querying = false, startedListening = false;\n        function shouldNotify() {\n            return keys(currentObs).some((key) => accumMuts[key] && rangesOverlap(accumMuts[key], currentObs[key]));\n        }\n        const mutationListener = (parts) => {\n            extendObservabilitySet(accumMuts, parts);\n            if (shouldNotify()) {\n                doQuery();\n            }\n        };\n        const doQuery = () => {\n            if (querying || closed)\n                return;\n            accumMuts = {};\n            const subscr = {};\n            const ret = execute(subscr);\n            if (!startedListening) {\n                globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, mutationListener);\n                startedListening = true;\n            }\n            querying = true;\n            Promise.resolve(ret).then((result) => {\n                querying = false;\n                if (closed)\n                    return;\n                if (shouldNotify()) {\n                    doQuery();\n                }\n                else {\n                    accumMuts = {};\n                    currentObs = subscr;\n                    observer.next && observer.next(result);\n                }\n            }, (err) => {\n                querying = false;\n                observer.error && observer.error(err);\n                subscription.unsubscribe();\n            });\n        };\n        doQuery();\n        return subscription;\n    });\n}\n\nlet domDeps;\ntry {\n    domDeps = {\n        indexedDB: _global.indexedDB || _global.mozIndexedDB || _global.webkitIndexedDB || _global.msIndexedDB,\n        IDBKeyRange: _global.IDBKeyRange || _global.webkitIDBKeyRange\n    };\n}\ncatch (e) {\n    domDeps = { indexedDB: null, IDBKeyRange: null };\n}\n\nconst Dexie = Dexie$1;\nprops(Dexie, {\n    ...fullNameExceptions,\n    delete(databaseName) {\n        const db = new Dexie(databaseName, { addons: [] });\n        return db.delete();\n    },\n    exists(name) {\n        return new Dexie(name, { addons: [] }).open().then(db => {\n            db.close();\n            return true;\n        }).catch('NoSuchDatabaseError', () => false);\n    },\n    getDatabaseNames(cb) {\n        try {\n            return getDatabaseNames(Dexie.dependencies).then(cb);\n        }\n        catch (_a) {\n            return rejection(new exceptions.MissingAPI());\n        }\n    },\n    defineClass() {\n        function Class(content) {\n            extend(this, content);\n        }\n        return Class;\n    },\n    ignoreTransaction(scopeFunc) {\n        return PSD.trans ?\n            usePSD(PSD.transless, scopeFunc) :\n            scopeFunc();\n    },\n    vip,\n    async: function (generatorFn) {\n        return function () {\n            try {\n                var rv = awaitIterator(generatorFn.apply(this, arguments));\n                if (!rv || typeof rv.then !== 'function')\n                    return DexiePromise.resolve(rv);\n                return rv;\n            }\n            catch (e) {\n                return rejection(e);\n            }\n        };\n    },\n    spawn: function (generatorFn, args, thiz) {\n        try {\n            var rv = awaitIterator(generatorFn.apply(thiz, args || []));\n            if (!rv || typeof rv.then !== 'function')\n                return DexiePromise.resolve(rv);\n            return rv;\n        }\n        catch (e) {\n            return rejection(e);\n        }\n    },\n    currentTransaction: {\n        get: () => PSD.trans || null\n    },\n    waitFor: function (promiseOrFunction, optionalTimeout) {\n        const promise = DexiePromise.resolve(typeof promiseOrFunction === 'function' ?\n            Dexie.ignoreTransaction(promiseOrFunction) :\n            promiseOrFunction)\n            .timeout(optionalTimeout || 60000);\n        return PSD.trans ?\n            PSD.trans.waitFor(promise) :\n            promise;\n    },\n    Promise: DexiePromise,\n    debug: {\n        get: () => debug,\n        set: value => {\n            setDebug(value, value === 'dexie' ? () => true : dexieStackFrameFilter);\n        }\n    },\n    derive: derive,\n    extend: extend,\n    props: props,\n    override: override,\n    Events: Events,\n    on: globalEvents,\n    liveQuery,\n    extendObservabilitySet,\n    getByKeyPath: getByKeyPath,\n    setByKeyPath: setByKeyPath,\n    delByKeyPath: delByKeyPath,\n    shallowClone: shallowClone,\n    deepClone: deepClone,\n    getObjectDiff: getObjectDiff,\n    cmp,\n    asap: asap$1,\n    minKey: minKey,\n    addons: [],\n    connections: connections,\n    errnames: errnames,\n    dependencies: domDeps,\n    semVer: DEXIE_VERSION,\n    version: DEXIE_VERSION.split('.')\n        .map(n => parseInt(n))\n        .reduce((p, c, i) => p + (c / Math.pow(10, i * 2))),\n});\nDexie.maxKey = getMaxKey(Dexie.dependencies.IDBKeyRange);\n\nif (typeof dispatchEvent !== 'undefined' && typeof addEventListener !== 'undefined') {\n    globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, updatedParts => {\n        if (!propagatingLocally) {\n            let event;\n            if (isIEOrEdge) {\n                event = document.createEvent('CustomEvent');\n                event.initCustomEvent(STORAGE_MUTATED_DOM_EVENT_NAME, true, true, updatedParts);\n            }\n            else {\n                event = new CustomEvent(STORAGE_MUTATED_DOM_EVENT_NAME, {\n                    detail: updatedParts\n                });\n            }\n            propagatingLocally = true;\n            dispatchEvent(event);\n            propagatingLocally = false;\n        }\n    });\n    addEventListener(STORAGE_MUTATED_DOM_EVENT_NAME, ({ detail }) => {\n        if (!propagatingLocally) {\n            propagateLocally(detail);\n        }\n    });\n}\nfunction propagateLocally(updateParts) {\n    let wasMe = propagatingLocally;\n    try {\n        propagatingLocally = true;\n        globalEvents.storagemutated.fire(updateParts);\n    }\n    finally {\n        propagatingLocally = wasMe;\n    }\n}\nlet propagatingLocally = false;\n\nif (typeof BroadcastChannel !== 'undefined') {\n    const bc = new BroadcastChannel(STORAGE_MUTATED_DOM_EVENT_NAME);\n    globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, (changedParts) => {\n        if (!propagatingLocally) {\n            bc.postMessage(changedParts);\n        }\n    });\n    bc.onmessage = (ev) => {\n        if (ev.data)\n            propagateLocally(ev.data);\n    };\n}\nelse if (typeof self !== 'undefined' && typeof navigator !== 'undefined') {\n    globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, (changedParts) => {\n        try {\n            if (!propagatingLocally) {\n                if (typeof localStorage !== 'undefined') {\n                    localStorage.setItem(STORAGE_MUTATED_DOM_EVENT_NAME, JSON.stringify({\n                        trig: Math.random(),\n                        changedParts,\n                    }));\n                }\n                if (typeof self['clients'] === 'object') {\n                    [...self['clients'].matchAll({ includeUncontrolled: true })].forEach((client) => client.postMessage({\n                        type: STORAGE_MUTATED_DOM_EVENT_NAME,\n                        changedParts,\n                    }));\n                }\n            }\n        }\n        catch (_a) { }\n    });\n    addEventListener('storage', (ev) => {\n        if (ev.key === STORAGE_MUTATED_DOM_EVENT_NAME) {\n            const data = JSON.parse(ev.newValue);\n            if (data)\n                propagateLocally(data.changedParts);\n        }\n    });\n    const swContainer = self.document && navigator.serviceWorker;\n    if (swContainer) {\n        swContainer.addEventListener('message', propagateMessageLocally);\n    }\n}\nfunction propagateMessageLocally({ data }) {\n    if (data && data.type === STORAGE_MUTATED_DOM_EVENT_NAME) {\n        propagateLocally(data.changedParts);\n    }\n}\n\nDexiePromise.rejectionMapper = mapError;\nsetDebug(debug, dexieStackFrameFilter);\n\nexport { Dexie$1 as Dexie, RangeSet, Dexie$1 as default, liveQuery, mergeRanges, rangesOverlap };\n//# sourceMappingURL=dexie.mjs.map\n"],"names":["exports","dexie","React","_interopDefaultLegacy","e","React__default","useObservable","observableFactory","arg2","arg3","deps","defaultResult","monitor","useRef","hasResult","result","error","_a","useReducer","x","triggerUpdate","observable","useMemo","subscribe","TypeError","current","getValue","subscription","val","unsubscribe","useDebugValue","useEffect","err","bind","useLiveQuery","querier","liveQuery","usePermissions","firstArg","table","obj","db","arguments","length","Dexie","Error","cloud","permissions","realmId","owner","Object","defineProperty","value","factory","canUseDOM","window","document","createElement","ExecutionEnvironment","canUseWorkers","Worker","canUseEventListeners","addEventListener","attachEvent","canUseViewport","screen","componentWillMount","state","this","constructor","getDerivedStateFromProps","props","setState","componentWillReceiveProps","nextProps","prevState","componentWillUpdate","nextState","prevProps","__reactInternalSnapshotFlag","__reactInternalSnapshot","getSnapshotBeforeUpdate","polyfill","Component","prototype","isReactComponent","foundWillMountName","foundWillReceivePropsName","foundWillUpdateName","UNSAFE_componentWillMount","UNSAFE_componentWillReceiveProps","UNSAFE_componentWillUpdate","componentName","displayName","name","newApiName","componentDidUpdate","maybeSnapshot","snapshot","call","__suppressDeprecationWarning","bodyOpenClassName","portalClassName","undefined","_extends","assign","target","i","source","key","hasOwnProperty","_createClass","defineProperties","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react","_react2","_interopRequireDefault","_reactDom2","_propTypes2","_ModalPortal2","ariaAppHider","__esModule","newObj","default","_interopRequireWildcard","_safeHTMLElement","_safeHTMLElement2","_reactLifecyclesCompat","_classCallCheck","instance","_possibleConstructorReturn","self","ReferenceError","isReact16","createPortal","createHTMLElement","getCreatePortal","unstable_renderSubtreeIntoContainer","getParentElement","parentSelector","Modal","_Component","_ref","_temp","_this","_len","args","Array","_key","__proto__","getPrototypeOf","apply","concat","removePortal","unmountComponentAtNode","node","parent","contains","removeChild","console","warn","portalRef","ref","portal","renderPortal","defaultStyles","subClass","superClass","create","setPrototypeOf","_inherits","className","appendChild","prevParent","nextParent","_","_props","isOpen","now","Date","closesAt","closeTimeoutMS","beforeClose","closeWithTimeout","setTimeout","element","setElement","propTypes","bool","isRequired","style","shape","content","object","overlay","string","htmlOpenClassName","oneOfType","base","afterOpen","overlayClassName","appElement","instanceOf","SafeHTMLCollection","SafeNodeList","arrayOf","onAfterOpen","func","onRequestClose","number","ariaHideApp","shouldFocusAfterRender","shouldCloseOnOverlayClick","shouldReturnFocusAfterClose","preventScroll","aria","data","role","contentLabel","shouldCloseOnEsc","overlayRef","contentRef","id","overlayElement","contentElement","defaultProps","body","contentEl","children","position","top","left","right","bottom","backgroundColor","border","background","overflow","WebkitOverflowScrolling","borderRadius","outline","padding","_typeof","Symbol","iterator","focusManager","_scopeTab2","classList","_portalOpenInstances2","CLASS_NAMES","ariaHiddenInstances","ModalPortal","setOverlayRef","setContentRef","afterClose","_this$props","remove","getElementsByTagName","show","returnFocus","teardownScopedFocus","popWithoutFocus","onAfterClose","deregister","open","beforeOpen","clearTimeout","closeTimer","setupScopedFocus","markForFocusLater","openAnimationFrame","requestAnimationFrame","overlayEl","close","closeWithoutTimeout","focusContent","contentHasFocus","focus","handleKeyDown","event","keyCode","stopPropagation","requestClose","handleOverlayOnClick","shouldClose","ownerHandlesClose","handleContentOnMouseUp","handleOverlayOnMouseDown","preventDefault","handleContentOnClick","handleContentOnMouseDown","shouldBeClosed","activeElement","buildClassName","which","additional","classNames","attributesFromObject","prefix","items","keys","reduce","acc","moveFromContentToOverlay","cancelAnimationFrame","add","hide","register","_props2","contentStyles","overlayStyles","overlayProps","onClick","onMouseDown","contentProps","tabIndex","onKeyDown","onMouseUp","modal","testId","module","resetState","globalElement","removeAttribute","forEach","querySelectorAll","log","assertNodeList","useElement","el","validateElement","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","next","done","setAttribute","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","documentNotReadyOrSSRTesting","_warning2","nodeList","selector","isArray","HTMLCollection","NodeList","join","_arr","before","after","_i","item","parentNode","instances","_arr2","_i2","check","nodeName","eventType","openInstances","opacity","cloneNode","firstChild","insertBefore","lastChild","parentElement","htmlElement","cls","htmlClassList","removeClass","_cls","docBodyClassList","at","classString","classListRef","poll","toLowerCase","split","incrementReference","decrementReference","focusLaterElements","handleBlur","handleFocus","push","toFocus","pop","modalElement","removeEventListener","detachEvent","_tabbable2","needToFocus","portalOpenInstances","p","PortalOpenInstances","openInstance","indexOf","emit","index","splice","callback","subscribers","subscriber","slice","EE","SafeHTMLElement","HTMLElement","tabbable","shiftKey","head","tail","getActiveElement","checkSafari","exec","navigator","userAgent","shadowRoot","findTabbableDescendants","finished","filter","tabbableNode","hidesContents","zeroSize","offsetWidth","offsetHeight","innerHTML","getComputedStyle","getPropertyValue","scrollWidth","scrollHeight","exception","getAttribute","isTabIndexNaN","isNaN","isTabIndexNotNaN","test","disabled","href","rootNode","getRootNode","host","visible","focusable","_Modal2","_global","globalThis","global","extend","extension","Promise","getProto","_hasOwn","hasOwn","prop","proto","Reflect","ownKeys","setProp","functionOrGetSet","options","get","set","derive","Child","from","Parent","getOwnPropertyDescriptor","getPropertyDescriptor","_slice","start","end","override","origFunc","overridedFactory","assert","b","asap$1","fn","setImmediate","arrayToObject","array","extractor","nameAndValue","getByKeyPath","keyPath","rv","l","period","innerObj","substr","setByKeyPath","isFrozen","currentKeyPath","remainingKeyPath","parseInt","shallowClone","m","flatten","a","intrinsicTypeNames","map","num","t","intrinsicTypes","circularRefs","deepClone","any","WeakMap","innerDeepClone","toString","toStringTag","o","iteratorSymbol","getIteratorOf","NO_CHAR_ARRAY","getArrayOf","arrayLike","it","isAsyncFunction","debug","location","setDebug","libraryFilter","NEEDS_THROW_FOR_STACK","stack","getErrorWithStack","prettyStack","numIgnoredFrames","message","frame","idbDomErrorNames","errorList","defaultTexts","VersionChanged","DatabaseClosed","Abort","TransactionInactive","MissingAPI","DexieError","msg","_e","getMultiErrorMessage","failures","v","s","ModifyError","successCount","failedKeys","BulkError","pos","failuresByPos","_stack","errnames","BaseException","exceptions","fullName","msgOrInner","inner","Syntax","SyntaxError","Type","Range","RangeError","exceptionMap","fullNameExceptions","nop","mirror","pureFunctionChain","f1","f2","callBoth","on1","on2","hookCreatingChain","res","onsuccess","onerror","res2","hookDeletingChain","hookUpdatingChain","modifications","reverseStoppableEventChain","promisableChain","then","thiz","INTERNAL","resolvedNativePromise","nativePromiseProto","resolvedGlobalPromise","globalP","resolve","crypto","subtle","nativeP","digest","Uint8Array","nativePromiseThen","NativePromise","patchGlobalPromise","stack_being_generated","schedulePhysicalTick","physicalTick","MutationObserver","hiddenDiv","observe","attributes","asap","microtickQueue","needsNewPhysicalTick","isOutsideMicroTick","unhandledErrors","rejectingErrors","currentFulfiller","rejectionMapper","globalPSD","unhandleds","onunhandled","globalError","pgp","env","finalize","uh","PSD","numScheduledCalls","tickFinalizers","DexiePromise","_listeners","onuncatched","_lib","psd","_PSD","_stackHolder","_prev","_numPrev","_state","_value","handleRejection","executePromiseTask","thenProp","microTaskId","totalEchoes","onFulfilled","onRejected","possibleAwait","cleanup","decrementExpectedAwaits","reject","propagateToListener","Listener","nativeAwaitCompatibleWrap","linkToPreviousPromise","zone","promise","shouldExecuteTick","beginMicroTickScope","_then","propagateAllListeners","endMicroTickScope","ex","reason","_promise","origProp","tryCatch","some","addPossiblyUnhandledError","listeners","len","finalizePhysicalTick","listener","cb","callListener","ret","markErrorAsHandled","getStack","stacks","limit","errorName","failure","prev","numPrev","wasRootExec","callbacks","unhandledErrs","finalizers","PromiseReject","wrap","errorCatcher","outerScope","switchToZone","catch","type","handler","finally","onFinally","timeout","ms","Infinity","handle","Timeout","snapShot","all","values","onPossibleParallellAsync","remaining","race","newPSD","newScope","usePSD","scheduler","follow","zoneProps","finalizer","run_at_end_of_this_or_next_physical_tick","allSettled","possiblePromises","results","status","AggregateError","task","awaits","echoes","taskCounter","zoneStack","zoneEchoes","zone_id_counter","a1","a2","globalEnv","PromiseProp","nthen","getPatchedPromiseThen","gthen","incrementExpectedAwaits","possiblePromise","rejection","zoneEnterEcho","targetZone","zoneLeaveEcho","bEnteringZone","currentZone","enqueueNativeMicroTask","GlobalPromise","targetEnv","a3","job","outerZone","origThen","onResolved","UNHANDLEDREJECTION","eventData","createEvent","initEvent","CustomEvent","detail","dispatchEvent","PromiseRejectionEvent","onunhandledrejection","defaultPrevented","tempTransaction","mode","storeNames","idbdb","openComplete","letThrough","_vip","trans","_createTransaction","_dbSchema","_completion","dbOpenError","isBeingOpened","_options","autoOpen","dbReadyPromise","DEXIE_VERSION","maxString","String","fromCharCode","minKey","INVALID_KEY_ARGUMENT","STRING_EXPECTED","connections","isIEOrEdge","hasIEDeleteObjectStoreBug","hangsOnDeleteLargeKeyRange","dexieStackFrameFilter","DBNAMES_DB","READONLY","READWRITE","combine","filter1","filter2","AnyRange","lower","lowerOpen","upper","upperOpen","workaroundForUndefinedPrimKey","Table","_trans","writeLocked","_tx","tableName","checkTableInTransaction","schema","NotFound","idbtrans","transless","keyOrCrit","where","first","core","hook","reading","fire","indexOrCrit","WhereClause","keyPaths","equals","compoundIndex","indexes","primKey","ix","compound","every","_maxKey","kp","JSON","stringify","idxByName","idb","_deps","indexedDB","cmp","idx","filterFunction","prevIndex","prevFilterFn","multi","toCollection","and","count","thenShortcut","offset","numRows","each","toArray","Collection","orderBy","reverse","mapToClass","mappedClass","readHook","defineClass","auto","objToAdd","mutate","numFailures","lastResult","update","keyOrObject","modify","InvalidArgument","put","delete","clear","range","bulkGet","getMany","bulkAdd","objects","keysOrOptions","wantResults","allKeys","numObjects","objectsToAdd","bulkPut","objectsToPut","bulkDelete","numKeys","Events","ctx","evs","eventName","addEventType","chainFunction","defaultFunction","addConfiguredEvents","context","cfg","makeClassConstructor","isPlainKeyRange","ignoreLimitFilter","algorithm","or","justLimit","replayFilter","addFilter","addReplayFilter","isLimitFilter","curr","getIndexOrStore","coreSchema","isPrimKey","primaryKey","getIndexByKeyPath","Schema","openCursor","coreTable","keysOnly","dir","unique","query","iter","coreTrans","union","cursor","advance","stop","fail","_iterate","iterate","valueMapper","cursorPromise","wrappedFn","c","continue","advancer","ta","tb","NaN","al","bl","compareUint8Arrays","getUint8Array","compareArrays","ArrayBuffer","isView","tsTag","buffer","byteOffset","byteLength","_read","_ctx","_write","_addAlgorithm","clone","raw","Math","min","sortBy","parts","lastPart","lastIndex","getval","order","sorter","aVal","bVal","sort","offsetLeft","rowsLeft","until","bIncludeStopEntry","last","isMatch","indexName","_ondirectionchange","desc","eachKey","eachUniqueKey","eachPrimaryKey","primaryKeys","uniqueKeys","firstKey","lastKey","distinct","strKey","found","changes","modifyer","anythingModified","outbound","extractKey","modifyChunkSize","totalFailures","applyMutateResult","expectedCount","nextChunk","cache","addValues","putValues","putKeys","deleteKeys","origValue","criteria","deleteCallback","changeSpec","coreRange","simpleCompare","simpleCompareReverse","collectionOrWhereClause","T","collection","emptyCollection","whereClause","rangeEqual","nextCasing","lowerKey","upperNeedle","lowerNeedle","llp","lwrKeyChar","addIgnoreCaseAlgorithm","match","needles","suffix","compare","upperNeedles","lowerNeedles","direction","nextKeySuffix","needlesLen","initDirection","toUpperCase","upperFactory","lowerFactory","needleBounds","needle","nb","createRange","firstPossibleNeedle","lowestPossibleCasing","casing","between","includeLower","includeUpper","_cmp","above","aboveOrEqual","below","belowOrEqual","startsWith","str","startsWithIgnoreCase","equalsIgnoreCase","anyOfIgnoreCase","startsWithAnyOfIgnoreCase","n","anyOf","_ascending","_descending","notEqual","inAnyRange","includeLowers","includeUppers","noneOf","ranges","ascending","descending","_min","max","_max","sortDirection","rangeSorter","newRange","rangePos","keyIsBeyondCurrentEntry","keyIsBeforeCurrentEntry","checkKey","keyWithinCurrentRange","startsWithAnyOf","eventRejectHandler","DEXIE_STORAGE_MUTATED_EVENT_NAME","STORAGE_MUTATED_DOM_EVENT_NAME","globalEvents","Transaction","_lock","_reculock","lockOwnerFor","_unlock","_blockedFuncs","_locked","fnAndPSD","shift","OpenFailed","active","transaction","durability","chromeTransactionDurability","ev","_reject","onabort","on","oncomplete","_resolve","storagemutated","bWriteLock","ReadOnly","_root","waitFor","promiseLike","root","_waitingFor","_waitingQueue","store","objectStore","spin","_spinCount","currentWaitPromise","abort","memoizedTables","_memoizedTables","tableSchema","transactionBoundTable","createIndexSpec","src","nameFromKeyPath","createTableSchema","getMaxKey","IdbKeyRange","only","getKeyExtractor","getSinglePathKeyExtractor","arrayify","_id_counter","getKeyPathAlias","generateMiddlewareStacks","_novip","tmpTrans","middlewares","IDBKeyRange","dbcore","stackImpl","down","createMiddlewareStack","makeIDBKeyRange","upperBound","lowerBound","bound","hasGetAll","tables","objectStoreNames","autoIncrement","indexByKeyPath","isPrimaryKey","indexNames","multiEntry","extractSchema","isAddOrPut","req","reqs","errorHandler","args1","args2","keyCount","callbackCount","successHandler","_pos","request","nonInfinitLimit","idbKeyRange","getAll","getAllKeys","openKeyCursor","___id","_cursorContinue","_cursorContinuePrimaryKey","continuePrimaryKey","_cursorAdvance","doThrowCursorIsStopped","gotOne","iterationPromise","resolveIteration","rejectIteration","guardedCallback","createDbCoreTable","tableMap","MIN_KEY","MAX_KEY","createDBCore","createMiddlewareStacks","_middlewares","tbl","setApiOnPlace","objs","tableNames","dbschema","propDesc","removeTablesApi","lowerVersionFirst","_cfg","version","getSchemaDiff","oldSchema","newSchema","diff","del","change","oldDef","newDef","def","recreate","oldIndexes","newIndexes","idxName","oldIdx","newIdx","createTable","createObjectStore","addIndex","createIndex","buildGlobalSchema","globalSchema","storeName","j","idbindex","adjustToExistingIndexNames","_hasGetAll","dexieName","indexSpec","WorkerGlobalScope","Version","_parseStoresSpec","stores","outSchema","indexNum","trim","replace","storesSource","versions","_versions","storesSpec","_allTables","_storeNames","upgrade","upgradeFunction","contentUpgrade","getDbNamesTable","dbNamesDB","Dexie$1","addons","dbnames","hasDatabasesNative","databases","vip","idbReady","intervalId","userAgentData","tryIdb","setInterval","clearInterval","dexieOpen","openCanceller","throwIfCancelled","resolveDbReady","dbReadyResolve","upgradeTransaction","wasCreated","dbName","autoSchema","round","verno","onblocked","_fireOnBlocked","onupgradeneeded","allowEmptyDB","delreq","deleteDatabase","NoSuchDatabase","oldVer","oldVersion","pow","idbUpgradeTrans","rejectTransaction","populate","queue","anyContentUpgraderHasRun","tuple","Upgrade","deleteIndex","upgradeSchema","contentUpgradeIsAsync","returnValue","promiseFollowed","decrementor","deleteObjectStore","deleteRemovedTables","runQueue","updateTablesAndIndexes","runUpgraders","readGlobalSchema","ch","verifyInstalledSchema","onversionchange","vcFired","onclose","_onDatabaseCreated","onReadyBeingFired","ready","fireRemainders","remainders","_close","awaitIterator","callNext","onSuccess","step","onError","throw","getNext","extractTransactionArgs","_tableArgs_","scopeFunc","enterTransactionScope","parentTransaction","scopeFuncIsAsync","PrematureCommit","pad","virtualIndexMiddleware","level","indexLookup","allVirtualIndexes","addVirtualIndexes","keyTail","lowLevelIndex","keyPathAlias","indexList","keyLength","isVirtual","virtualIndex","translateRequest","virtualCursor","createVirtualCursor","getObjectDiff","prfx","ap","bp","apTypeName","hooksMiddleware","downCore","downTable","tableMiddleware","dxTrans","deleting","creating","updating","addPutOrDelete","deleteNextChunk","deleteRange","getEffectiveKeys","effectiveKeys","getExistingValues","existingValues","contexts","existingValue","generatedPrimaryKey","objectDiff","additionalChanges","requestedValue","getFromTransactionCache","cacheExistingValuesMiddleware","cachedResult","isEmptyRange","RangeSet","fromOrTree","to","d","addRange","r","rebalance","rightWasCutOff","mergeRanges","newSet","_addRangeSet","rangesOverlap","rangeSet1","rangeSet2","i1","getRangeSetIterator","nextResult1","i2","nextResult2","keyProvided","up","_b","rootClone","oldRootRight","computeDepth","rangeSet","addKey","addKeys","observabilityMiddleware","FULL_RANGE","tableClone","mutatedParts","getRangeSet","part","pkRangeSet","delsRangeSet","newObjs","oldCache","oldObjs","addKeyOrKeys","oldKey","newKey","trackAffectedIndexes","getRange","readSubscribers","method","subscr","queriedIndex","queriedRanges","keysPromise","resultingKeys","pKeys","wantValues","pkey","dependencies","cancelOpen","bSticky","keyRangeGenerator","keyRange","whereCtx","readingHook","createTableConstructor","complete","wasActive","createTransactionConstructor","versionNumber","createVersionConstructor","orCollection","_IDBKeyRange","createWhereClauseConstructor","newVersion","use","addon","versionInstance","_whenReady","unuse","mw","hasArguments","doDelete","_onDatabaseDeleted","backendDB","hasBeenClosed","hasFailed","dynamicallyOpened","_transaction","onlyIfCompatible","idbMode","SubTransaction","enterTransaction","InvalidTable","symbolObservable","Observable","_subscribe","extendObservabilitySet","observer","closed","accumMuts","currentObs","mutationListener","querying","startedListening","shouldNotify","doQuery","execute","domDeps","mozIndexedDB","webkitIndexedDB","msIndexedDB","webkitIDBKeyRange","propagateLocally","updateParts","wasMe","propagatingLocally","databaseName","exists","getDatabaseNames","infos","info","ignoreTransaction","async","generatorFn","spawn","currentTransaction","promiseOrFunction","optionalTimeout","delByKeyPath","semVer","maxKey","updatedParts","initCustomEvent","BroadcastChannel","bc","changedParts","postMessage","onmessage","localStorage","setItem","trig","random","matchAll","includeUncontrolled","client","parse","newValue","swContainer","serviceWorker","domError"],"sourceRoot":""}