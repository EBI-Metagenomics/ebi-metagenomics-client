"use strict";(self.webpackChunkmgportalv2=self.webpackChunkmgportalv2||[]).push([[601],{1699:(e,t,a)=>{a.d(t,{Z:()=>o});var r=a(7294),n=a(7838);const l=()=>{window.location.reload()},o=({error:e})=>e&&e.type!==n.ZB.NullURL?r.createElement("div",{className:"vf-box vf-box-theme--primary vf-box--easy",style:{backgroundColor:"lemonchiffon"}},r.createElement("h3",{className:"vf-box__heading"},r.createElement("span",{className:"icon icon-common icon-exclamation-triangle"})," Error Fetching Data"),r.createElement("p",{className:"vf-box__text"},(null==e?void 0:e.type)===n.ZB.FetchError&&`There were problems with the request. [${e.error}]`,(null==e?void 0:e.type)===n.ZB.NotOK&&`The response from the server was not OK [Status: ${e.status}].`,(null==e?void 0:e.type)===n.ZB.JSONError&&`The recovered resource didn't follow the expected format [${e.error}].`),r.createElement("div",{className:"mg-right"},r.createElement("button",{type:"button",className:"vf-button vf-button--tertiary vf-button--sm ",onClick:l},"Refresh"))):null},1457:(e,t,a)=>{a.d(t,{Z:()=>n});var r=a(7294);const n=({children:e,className:t="",image:a=null,imageAltText:n=""})=>r.createElement("article",{className:`vf-card vf-card--brand vf-card--bordered ${t}`},a&&r.createElement("img",{src:a,alt:n,className:"vf-card__image",loading:"lazy"}),r.createElement("div",{className:"vf-card__content | vf-stack vf-stack--400"},e))},5601:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var r=a(7294),n=a(402),l=a(1699),o=a(1457),s=a(6050),c=a(7838);const m=()=>{const{data:e,loading:t,error:a}=(()=>{const{config:e}=(0,r.useContext)(s.ZP);return(0,c.ZP)(`${e.api.replace("v1/","")}http-auth/login_form`,c.B5.HTML,{credentials:"include"})})(),[n,l]=(0,r.useState)(""),{setUser:o}=(0,r.useContext)(s.ZP),[m,u]=(0,r.useState)({username:null,password:null,csrfmiddlewaretoken:null}),{data:i,loading:d,rawResponse:f}=((e,t,a)=>{const{config:n}=(0,r.useContext)(s.ZP),l=new FormData;return l.append("username",e),l.append("password",t),l.append("csrfmiddlewaretoken",a),(0,c.ZP)(e?`${n.api.replace("v1/","")}http-auth/login/`:null,c.B5.HTML,{method:"POST",headers:{"X-CSRFToken":a},credentials:"include",body:l,redirect:"manual"})})(m.username,m.password,m.csrfmiddlewaretoken);(0,r.useEffect)((()=>{var e;d||("opaqueredirect"===(null==f?void 0:f.type)?(o({username:m.username,isAuthenticated:!0}),l("")):i&&l((null===(e=i.querySelector(".text-error"))||void 0===e?void 0:e.innerText)||""))}),[i,d,m.username,null==f?void 0:f.type,o]);const[p,v]=(0,r.useState)(!1),{loading:E,rawResponse:g}=(e=>{const{config:t}=(0,r.useContext)(s.ZP);return(0,c.ZP)(e?`${t.api.replace("v1/","")}http-auth/logout`:null,c.B5.HTML,{credentials:"include"})})(p);return(0,r.useEffect)((()=>{v(!1)}),[g]),{login:(t,a)=>{const r=e.querySelector('input[name="csrfmiddlewaretoken"]').value;l(""),u({username:t,password:a,csrfmiddlewaretoken:r})},logout:()=>{v(!0),o({username:null,isAuthenticated:!1})},loginError:n,loading:t||d||E,error:a}};var u=a(1421);const i=()=>{const e=(0,r.useRef)(null),t=(0,r.useRef)(null),{username:a,isAuthenticated:c}=(0,r.useContext)(s.ZP),{login:i,logout:d,loginError:f,loading:p,error:v}=m();return c?r.createElement("div",{className:"vf-stack vf-stack--400"},r.createElement("div",null,"You are logged in as ",r.createElement("b",null,a)),r.createElement("button",{type:"button",className:"vf-button",onClick:d},"Logout")):p?r.createElement(n.Z,null):v?r.createElement(l.Z,{error:v}):r.createElement("div",{className:"vf-grid vf-grid__col-2"},r.createElement("div",{className:"vf-form vf-stack vf-stack--400"},r.createElement("form",{onSubmit:a=>{a.preventDefault(),i(e.current.value,t.current.value)}},r.createElement("div",{className:"vf-form__item"},r.createElement("label",{htmlFor:"id_username",className:"vf-form__label"},"Webin-ID:"),r.createElement("input",{type:"text",name:"username",maxLength:100,autoCapitalize:"off",autoCorrect:"off",id:"id_username",className:"vf-form__input",ref:e,required:!0})),r.createElement("div",{className:"vf-form__item"},r.createElement("label",{htmlFor:"id_password",className:"vf-form__label"},"Password:"),r.createElement("input",{type:"password",name:"password",maxLength:100,autoCapitalize:"off",autoCorrect:"off",className:"vf-form__input",id:"id_password",ref:t,required:!0})),r.createElement("br",null),r.createElement("div",{className:"form-actions-no-box"},r.createElement("button",{type:"submit",name:"submit",className:"vf-button",id:"submit-id-submit"},"Log in"))),f&&r.createElement("div",{className:"vf-box"},f),r.createElement("div",{className:"form-forgotten"},r.createElement("a",{href:"https://www.ebi.ac.uk/ena/submit/sra/#reset-password"},"Forgot your password?"))),r.createElement(o.Z,null,r.createElement("h3",null,"Not registered yet?"),r.createElement("h4",null,r.createElement("a",{href:"https://www.ebi.ac.uk/ena/submit/sra/#metagenome_registration"},"Sign up")," ","to register"),r.createElement("p",null,"or"),r.createElement("p",null,r.createElement("a",{href:"https://www.ebi.ac.uk/ena/submit/sra/#home"},r.createElement("img",{src:u,alt:"ENA member"}))),r.createElement("p",null,"If you already are a registered user of the European Nucleotide Archive (ENA), you should simply use your ENA account to login.")))}},1421:(e,t,a)=>{e.exports=a.p+"static/142627e16adf26fe094e.jpg"}}]);
//# sourceMappingURL=601.1c69cc0f.chunk.js.map