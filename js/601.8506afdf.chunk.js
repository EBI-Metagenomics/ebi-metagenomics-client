"use strict";(self.webpackChunkmgportalv2=self.webpackChunkmgportalv2||[]).push([[601],{1699:(e,t,r)=>{r.d(t,{Z:()=>l});var a=r(7294),n=r(7838);const s=()=>{window.location.reload()},l=({error:e})=>e&&e.type!==n.ZB.NullURL?a.createElement("div",{className:"vf-box vf-box-theme--primary vf-box--easy",style:{backgroundColor:"lemonchiffon"}},a.createElement("h3",{className:"vf-box__heading"},a.createElement("span",{className:"icon icon-common icon-exclamation-triangle"})," Error Fetching Data"),a.createElement("p",{className:"vf-box__text"},(null==e?void 0:e.type)===n.ZB.FetchError&&`There were problems with the request. [${e.error}]`,(null==e?void 0:e.type)===n.ZB.NotOK&&`The response from the server was not OK [Status: ${e.status}].`,(null==e?void 0:e.type)===n.ZB.JSONError&&`The recovered resource didn't follow the expected format [${e.error}].`),a.createElement("div",{className:"mg-right"},a.createElement("button",{type:"button",className:"vf-button vf-button--tertiary vf-button--sm ",onClick:s},"Refresh"))):null},1457:(e,t,r)=>{r.d(t,{Z:()=>n});var a=r(7294);const n=({children:e,className:t="",image:r=null,imageAltText:n=""})=>a.createElement("article",{className:`vf-card vf-card--brand vf-card--bordered ${t}`},r&&a.createElement("img",{src:r,alt:n,className:"vf-card__image",loading:"lazy"}),a.createElement("div",{className:"vf-card__content | vf-stack vf-stack--400"},e))},2119:(e,t,r)=>{r.d(t,{B:()=>l});var a=r(7294),n=r(6974);const s=(e,t,r)=>{const a={},n=new URLSearchParams(t);return Object.entries(e).forEach((([e,t])=>{const s=r[e]||String;a[e]=s(n.get(e)||t)})),a},l=(e,t={})=>{const r=(0,n.TH)(),l=(0,n.s0)(),o=(0,a.useMemo)((()=>s(e,r.search,t)),[e,r.search,t]),[c,i]=(0,a.useState)(o);return(0,a.useEffect)((()=>{const a=s(e,r.search,t);JSON.stringify(a)!==JSON.stringify(c)&&i(a)}),[r.search,c,e,t]),[c,t=>{if(JSON.stringify(t)===JSON.stringify(c))return;const a=new URLSearchParams(r.search);let n=!1;Object.entries(e).forEach((([e,r])=>{const s=e in t?t[e]:r;t[e]!==c[e]&&(a.set(e,String(s)),s===r&&a.delete(e),n=!0)})),n&&(r.search=a.toString(),l(r))}]}},5601:(e,t,r)=>{r.r(t),r.d(t,{default:()=>f});var a=r(7294),n=r(6974),s=r(402),l=r(1699),o=r(1457),c=r(6050),i=r(7838);const u=()=>{const{data:e,loading:t,error:r}=(()=>{const{config:e}=(0,a.useContext)(c.ZP);return(0,i.ZP)(`${e.api.replace("v1/","")}http-auth/login_form`,i.B5.HTML,{credentials:"include"})})(),[n,s]=(0,a.useState)(""),{setUser:l}=(0,a.useContext)(c.ZP),[o,u]=(0,a.useState)({username:null,password:null,csrfmiddlewaretoken:null}),{data:m,loading:d,rawResponse:f}=((e,t,r)=>{const{config:n}=(0,a.useContext)(c.ZP),s=new FormData;return s.append("username",e),s.append("password",t),s.append("csrfmiddlewaretoken",r),(0,i.ZP)(e?`${n.api.replace("v1/","")}http-auth/login/`:null,i.B5.HTML,{method:"POST",headers:{"X-CSRFToken":r},credentials:"include",body:s,redirect:"manual"})})(o.username,o.password,o.csrfmiddlewaretoken);(0,a.useEffect)((()=>{var e;d||("opaqueredirect"===(null==f?void 0:f.type)?(l({username:o.username,isAuthenticated:!0}),s("")):m&&s((null===(e=m.querySelector(".text-error"))||void 0===e?void 0:e.innerText)||""))}),[m,d,o.username,null==f?void 0:f.type,l]);const[p,v]=(0,a.useState)(!1),{loading:h,rawResponse:g}=(e=>{const{config:t}=(0,a.useContext)(c.ZP);return(0,i.ZP)(e?`${t.api.replace("v1/","")}http-auth/logout`:null,i.B5.HTML,{credentials:"include"})})(p);return(0,a.useEffect)((()=>{v(!1)}),[g]),{login:(t,r)=>{const a=e.querySelector('input[name="csrfmiddlewaretoken"]').value;s(""),u({username:t,password:r,csrfmiddlewaretoken:a})},logout:()=>{v(!0),l({username:null,isAuthenticated:!1})},loginError:n,loading:t||d||h,error:r}};var m=r(2119),d=r(1421);const f=()=>{const e=(0,a.useRef)(null),t=(0,a.useRef)(null),{username:r,isAuthenticated:i}=(0,a.useContext)(c.ZP),{login:f,logout:p,loginError:v,loading:h,error:g}=u(),[{from:E}]=(0,m.B)({from:""}),b=(0,n.s0)();return i?"private-request"===E?(b("/?show=private-request"),null):"public-request"===E?(b("/?show=public-request"),null):a.createElement("div",{className:"vf-stack vf-stack--400"},a.createElement("div",null,"You are logged in as ",a.createElement("b",null,r)),a.createElement("button",{type:"button",className:"vf-button",onClick:p},"Logout")):h?a.createElement(s.Z,null):g?a.createElement(l.Z,{error:g}):a.createElement("div",{className:"vf-grid vf-grid__col-2"},a.createElement("div",{className:"vf-form vf-stack vf-stack--400"},a.createElement("form",{onSubmit:r=>{r.preventDefault(),f(e.current.value,t.current.value)}},a.createElement("div",{className:"vf-form__item"},a.createElement("label",{htmlFor:"id_username",className:"vf-form__label"},"Webin-ID:"),a.createElement("input",{type:"text",name:"username",maxLength:100,autoCapitalize:"off",autoCorrect:"off",id:"id_username",className:"vf-form__input",ref:e,required:!0})),a.createElement("div",{className:"vf-form__item"},a.createElement("label",{htmlFor:"id_password",className:"vf-form__label"},"Password:"),a.createElement("input",{type:"password",name:"password",maxLength:100,autoCapitalize:"off",autoCorrect:"off",className:"vf-form__input",id:"id_password",ref:t,required:!0})),a.createElement("br",null),a.createElement("div",{className:"form-actions-no-box"},a.createElement("button",{type:"submit",name:"submit",className:"vf-button",id:"submit-id-submit"},"Log in"))),v&&a.createElement("div",{className:"vf-box"},v),a.createElement("div",{className:"form-forgotten"},a.createElement("a",{href:"https://www.ebi.ac.uk/ena/submit/sra/#reset-password"},"Forgot your password?"))),a.createElement(o.Z,null,a.createElement("h3",null,"Not registered yet?"),a.createElement("h4",null,a.createElement("a",{href:"https://www.ebi.ac.uk/ena/submit/sra/#metagenome_registration"},"Sign up")," ","to register"),a.createElement("p",null,"or"),a.createElement("p",null,a.createElement("a",{href:"https://www.ebi.ac.uk/ena/submit/sra/#home"},a.createElement("img",{src:d,alt:"ENA member"}))),a.createElement("p",null,"If you already are a registered user of the European Nucleotide Archive (ENA), you should simply use your ENA account to login.")))}},1421:(e,t,r)=>{e.exports=r.p+"static/142627e16adf26fe094e.jpg"}}]);
//# sourceMappingURL=601.8506afdf.chunk.js.map