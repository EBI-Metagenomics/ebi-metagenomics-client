(self.webpackChunkmgportalv2=self.webpackChunkmgportalv2||[]).push([[601],{1699:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(7294),l=a(7838);const n=()=>{window.location.reload()},s=({error:e})=>e&&e.type!==l.ZB.NullURL?r.createElement("div",{className:"vf-box vf-box-theme--primary vf-box--easy",style:{backgroundColor:"lemonchiffon"}},r.createElement("h3",{className:"vf-box__heading"},r.createElement("span",{className:"icon icon-common icon-exclamation-triangle"})," Error Fetching Data"),r.createElement("p",{className:"vf-box__text"},(null==e?void 0:e.type)===l.ZB.FetchError&&`There were problems with the request. [${e.error}]`,(null==e?void 0:e.type)===l.ZB.NotOK&&`The response from the server was not OK [Status: ${e.status}].`,(null==e?void 0:e.type)===l.ZB.JSONError&&`The recovered resource didn't follow the expected format [${e.error}].`),r.createElement("div",{className:"mg-right"},r.createElement("button",{type:"button",className:"vf-button vf-button--tertiary vf-button--sm ",onClick:n},"Refresh"))):null},1457:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var r=a(7294);const l=({children:e,className:t="",image:a=null,imageAltText:l=""})=>r.createElement("article",{className:`vf-card vf-card--brand vf-card--bordered ${t}`},a&&r.createElement("img",{src:a,alt:l,className:"vf-card__image",loading:"lazy"}),r.createElement("div",{className:"vf-card__content | vf-stack vf-stack--400"},e))},5601:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var r=a(7294),l=a(402),n=a(1699),s=a(1457),o=a(6050),c=a(7838),m=a(150);const i=()=>{const{data:e,loading:t,error:a}=(0,c.ZP)(`${m.hi.replace("v1/","")}http-auth/login_form`,c.B5.HTML,{credentials:"include"}),[l,n]=(0,r.useState)(""),{setUser:s}=(0,r.useContext)(o.Z),[i,u]=(0,r.useState)({username:null,password:null,csrfmiddlewaretoken:null}),{data:d,loading:f,rawResponse:p}=((e,t,a)=>{const r=new FormData;return r.append("username",e),r.append("password",t),r.append("csrfmiddlewaretoken",a),(0,c.ZP)(e?`${m.hi.replace("v1/","")}http-auth/login/`:null,c.B5.HTML,{method:"POST",headers:{"X-CSRFToken":a},credentials:"include",body:r,redirect:"manual"})})(i.username,i.password,i.csrfmiddlewaretoken);(0,r.useEffect)((()=>{var e;f||("opaqueredirect"===(null==p?void 0:p.type)?(s({username:i.username,isAuthenticated:!0}),n("")):d&&n((null===(e=d.querySelector(".text-error"))||void 0===e?void 0:e.innerText)||""))}),[d,f,i.username,null==p?void 0:p.type,s]);const[v,E]=(0,r.useState)(!1),{loading:h,rawResponse:g}=(e=>(0,c.ZP)(e?`${m.hi.replace("v1/","")}http-auth/logout`:null,c.B5.HTML,{credentials:"include"}))(v);return(0,r.useEffect)((()=>{E(!1)}),[g]),{login:(t,a)=>{const r=e.querySelector('input[name="csrfmiddlewaretoken"]').value;n(""),u({username:t,password:a,csrfmiddlewaretoken:r})},logout:()=>{E(!0),s({username:null,isAuthenticated:!1})},loginError:l,loading:t||f||h,error:a}};var u=a(6714);const d=()=>{const e=(0,r.useRef)(null),t=(0,r.useRef)(null),{username:a,isAuthenticated:c}=(0,r.useContext)(o.Z),{login:m,logout:d,loginError:f,loading:p,error:v}=i();return c?r.createElement("div",{className:"vf-stack vf-stack--400"},r.createElement("div",null,"You are logged in as ",r.createElement("b",null,a)),r.createElement("button",{type:"button",className:"vf-button",onClick:d},"Logout")):p?r.createElement(l.Z,null):v?r.createElement(n.Z,{error:v}):r.createElement("div",{className:"vf-grid vf-grid__col-2"},r.createElement("div",{className:"vf-form vf-stack vf-stack--400"},r.createElement("form",{onSubmit:a=>{a.preventDefault(),m(e.current.value,t.current.value)}},r.createElement("div",{className:"vf-form__item"},r.createElement("label",{htmlFor:"id_username",className:"vf-form__label"},"Webin-ID:"),r.createElement("input",{type:"text",name:"username",maxLength:100,autoCapitalize:"off",autoCorrect:"off",id:"id_username",className:"vf-form__input",ref:e,required:!0})),r.createElement("div",{className:"vf-form__item"},r.createElement("label",{htmlFor:"id_password",className:"vf-form__label"},"Password:"),r.createElement("input",{type:"password",name:"password",maxLength:100,autoCapitalize:"off",autoCorrect:"off",className:"vf-form__input",id:"id_password",ref:t,required:!0})),r.createElement("br",null),r.createElement("div",{className:"form-actions-no-box"},r.createElement("button",{type:"submit",name:"submit",className:"vf-button",id:"submit-id-submit"},"Log in"))),f&&r.createElement("div",{className:"vf-box"},f),r.createElement("div",{className:"form-forgotten"},r.createElement("a",{href:"https://www.ebi.ac.uk/ena/submit/sra/#reset-password"},"Forgot your password?"))),r.createElement(s.Z,null,r.createElement("h3",null,"Not registered yet?"),r.createElement("h4",null,r.createElement("a",{href:"https://www.ebi.ac.uk/ena/submit/sra/#metagenome_registration"},"Sign up")," ","to register"),r.createElement("p",null,"or"),r.createElement("p",null,r.createElement("a",{href:"https://www.ebi.ac.uk/ena/submit/sra/#home"},r.createElement("img",{src:u,alt:"ENA member"}))),r.createElement("p",null,"If you already are a registered user of the European Nucleotide Archive (ENA), you should simply use your ENA account to login.")))}},6714:(e,t,a)=>{"use strict";e.exports=a.p+"static/142627e16adf26fe094e.jpg"}}]);
//# sourceMappingURL=601.de086c71.chunk.js.map