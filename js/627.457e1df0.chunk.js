/*! For license information please see 627.457e1df0.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkmgportalv2=self.webpackChunkmgportalv2||[]).push([[627],{6489:(e,t)=>{t.Q=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var a={},r=t||{},s=e.split(o),l=r.decode||n,c=0;c<s.length;c++){var u=s[c],m=u.indexOf("=");if(!(m<0)){var h=u.substr(0,m).trim(),d=u.substr(++m,u.length).trim();'"'==d[0]&&(d=d.slice(1,-1)),null==a[h]&&(a[h]=i(d,l))}}return a},t.q=function(e,t,n){var o=n||{},i=o.encode||a;if("function"!=typeof i)throw new TypeError("option encode is invalid");if(!r.test(e))throw new TypeError("argument name is invalid");var s=i(t);if(s&&!r.test(s))throw new TypeError("argument val is invalid");var l=e+"="+s;if(null!=o.maxAge){var c=o.maxAge-0;if(isNaN(c))throw new Error("maxAge should be a Number");l+="; Max-Age="+Math.floor(c)}if(o.domain){if(!r.test(o.domain))throw new TypeError("option domain is invalid");l+="; Domain="+o.domain}if(o.path){if(!r.test(o.path))throw new TypeError("option path is invalid");l+="; Path="+o.path}if(o.expires){if("function"!=typeof o.expires.toUTCString)throw new TypeError("option expires is invalid");l+="; Expires="+o.expires.toUTCString()}if(o.httpOnly&&(l+="; HttpOnly"),o.secure&&(l+="; Secure"),o.sameSite)switch("string"==typeof o.sameSite?o.sameSite.toLowerCase():o.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return l};var n=decodeURIComponent,a=encodeURIComponent,o=/; */,r=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function i(e,t){try{return t(e)}catch(t){return e}}},2531:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(7294);const o=({href:e,id:t,title:n,children:o})=>a.createElement("a",{href:e,title:n,id:t,target:"_blank",rel:"noreferrer noopener",className:"mg-ext"},a.createElement("span",{className:"icon icon-common icon-external-link-alt"})," ",o)},1699:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(7294),o=n(7838);const r=()=>{window.location.reload()},i=({error:e})=>e&&e.type!==o.ZB.NullURL?a.createElement("div",{className:"vf-box vf-box-theme--primary vf-box--easy",style:{backgroundColor:"lemonchiffon"}},a.createElement("h3",{className:"vf-box__heading"},a.createElement("span",{className:"icon icon-common icon-exclamation-triangle"})," Error Fetching Data"),a.createElement("p",{className:"vf-box__text"},(null==e?void 0:e.type)===o.ZB.FetchError&&`There were problems with the request. [${e.error}]`,(null==e?void 0:e.type)===o.ZB.NotOK&&`The response from the server was not OK [Status: ${e.status}].`,(null==e?void 0:e.type)===o.ZB.JSONError&&`The recovered resource didn't follow the expected format [${e.error}].`),a.createElement("div",{className:"mg-right"},a.createElement("button",{type:"button",className:"vf-button vf-button--tertiary vf-button--sm ",onClick:r},"Refresh"))):null},5627:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var a=n(7294),o=n(9711);const r=({show:e,setShowModal:t,children:n})=>{const o=()=>t(!1);return a.createElement(a.Fragment,null,a.createElement("div",{role:"dialog",className:e?"mg-overlay":void 0,onClick:o}),e&&a.createElement("button",{type:"button",onClick:o,className:"vf-button vf-button--link mg-button-as-link mg-overlay-close"},"X"),e&&a.createElement("div",{className:"mg-overlay-content"},n))};var i=n(402),s=n(1699),l=n(2531),c=n(6050),u=n(6489);function m(e,t){void 0===t&&(t={});var n=function(e){return e&&"j"===e[0]&&":"===e[1]?e.substr(2):e}(e);if(function(e,t){return void 0===t&&(t=!e||"{"!==e[0]&&"["!==e[0]&&'"'!==e[0]),!t}(n,t.doNotParse))try{return JSON.parse(n)}catch(e){}return e}var h=function(){return h=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},h.apply(this,arguments)};const d=function(){function e(e,t){var n=this;this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.cookies=function(e,t){return"string"==typeof e?u.Q(e,t):"object"==typeof e&&null!==e?e:{}}(e,t),new Promise((function(){n.HAS_DOCUMENT_COOKIE="object"==typeof document&&"string"==typeof document.cookie})).catch((function(){}))}return e.prototype._updateBrowserValues=function(e){this.HAS_DOCUMENT_COOKIE&&(this.cookies=u.Q(document.cookie,e))},e.prototype._emitChange=function(e){for(var t=0;t<this.changeListeners.length;++t)this.changeListeners[t](e)},e.prototype.get=function(e,t,n){return void 0===t&&(t={}),this._updateBrowserValues(n),m(this.cookies[e],t)},e.prototype.getAll=function(e,t){void 0===e&&(e={}),this._updateBrowserValues(t);var n={};for(var a in this.cookies)n[a]=m(this.cookies[a],e);return n},e.prototype.set=function(e,t,n){var a;"object"==typeof t&&(t=JSON.stringify(t)),this.cookies=h(h({},this.cookies),((a={})[e]=t,a)),this.HAS_DOCUMENT_COOKIE&&(document.cookie=u.q(e,t,n)),this._emitChange({name:e,value:t,options:n})},e.prototype.remove=function(e,t){var n=t=h(h({},t),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=h({},this.cookies),delete this.cookies[e],this.HAS_DOCUMENT_COOKIE&&(document.cookie=u.q(e,"",n)),this._emitChange({name:e,value:void 0,options:t})},e.prototype.addChangeListener=function(e){this.changeListeners.push(e)},e.prototype.removeChangeListener=function(e){var t=this.changeListeners.indexOf(e);t>=0&&this.changeListeners.splice(t,1)},e}();var f=n(7838);var p=n(2821);const y=()=>{const e=(0,a.useRef)(null),{username:t,isAuthenticated:n,details:u}=(0,a.useContext)(c.Z),[m,h]=(0,a.useState)(!1),[y,b]=(0,a.useState)(!1),[v,g]=(0,a.useState)(!1),[E,w]=(0,a.useState)({fromEmail:null,subject:null,body:null,consent:null}),{data:k,loading:N,error:x}=((e,t,n,o,r="")=>{const{config:i}=(0,a.useContext)(c.Z),s=new d;return(0,f.ZP)(e?`${i.api}utils/notify`:null,f.B5.HTML,{method:"POST",headers:{"X-CSRFToken":s.get("csrftoken"),"Content-Type":"application/vnd.api+json"},credentials:"include",body:JSON.stringify({data:{type:"notifies",attributes:{from_email:e,cc:r,subject:t,message:n,is_consent:o||!1}}})})})(E.fromEmail,E.subject,E.body,E.consent);return(0,a.useEffect)((()=>{N||!k||x||h(!0)}),[k,N,x]),a.createElement("section",{className:"vf-content"},a.createElement(r,{show:v,setShowModal:g},a.createElement("img",{src:p,alt:"MGnify Submission Process",style:{height:"80vh"}})),a.createElement("h2",null,"Submit data"),a.createElement("p",null,"We provide a free service for submission of raw metagenomics sequence data and associated metadata to the European Nucleotide Archive (ENA) and analysis by MGnify."),a.createElement("p",null,"If you have data that you wish to have analysed, you need an ENA submitter account that has been registered with the MGnify. This allows us to track your submitted data and ensures that we have consent to access it for analysis."),a.createElement("p",null,"With a valid ENA submitter account, you can submit your data directly using the"," ",a.createElement(l.Z,{href:"https://www.ebi.ac.uk/ena/submit/sra/#home"},"ENA Webin tool"),", which will help you describe your metadata and upload your sequence data."),a.createElement("p",null,"Once your reads are uploaded to ENA, navigate to the home page, click 'Submit and/or Request' and complete the form to request an analysis with MGnify. You will receive an email once the analysis starts and another when the analysis of all samples is complete (",a.createElement("button",{type:"button",className:"vf-button vf-button--link mg-button-as-link",onClick:()=>g(!0)},"View figure for more details")," ","of the submission and analysis process). The analysis time is dependent on the number of samples submitted and requests by other submitters at the time. If your samples are private, you will need to log in to MGnify to be able to view the results of the analysis."),!n&&a.createElement(o.rU,{to:"/login",className:"vf-button vf-button--primary"},"Please click here to login"),n&&!m&&a.createElement("div",{id:"consent"},a.createElement("br",null),a.createElement("h4",null,"Your Webin account is currently not registered with MGnify. You have the choice to register with us now."),a.createElement("p",null,"Note, if you plan to submit pre-publication data for analysis, which is to be held as confidential, we need consent to access your data in accordance with ENAâ€™s policies. By keeping this box checked, you consent to the MGnify team analysing your private data. Note that the data, as well as the analysis results, will remain confidential until the release date you specify when submitting your sequencing study. If you are also requesting assembly of your data, you will also be providing consent to MGnify to submit these assemblies to your ENA study on your behalf. MGnify will not change any metadata or data you have already submitted but may need to perform updates to submissions performed by their team in exceptional circumstances. You also confirm that the data submitted through this account is NOT sensitive, restricted-access or human-identifiable."),a.createElement("label",{className:"vf-box vf-box-theme--quinary vf-box--normal",style:{border:y?"1px solid red":0}}," ",a.createElement("input",{id:"consent-given",type:"checkbox",ref:e}),"I give consent for the MGnify team to analyse my private data and confirm that the data submitted through this account is NOT sensitive, restricted-access or human-identifiable."),y&&a.createElement("p",null,"*Please check the box above."),a.createElement("p",{className:"vf-box vf-box--easy"},"The following email addresses will be notified of the registration of ",a.createElement("code",null,t),":"," ",u?(0,c.d)(u).map((e=>a.createElement(a.Fragment,{key:e},a.createElement("code",null,e)," "))):a.createElement(i.Z,{size:"small"})),a.createElement("p",null,a.createElement("button",{type:"button",className:"vf-button vf-button--primary",onClick:()=>{e.current.checked?(b(!1),w({fromEmail:(0,c.d)(u).join(","),subject:"Request consent",body:`I consent for the MGnify team to analyse the private data of my account ${t}`,consent:!0})):b(!0)}},"Give consent")),N&&a.createElement(i.Z,null),x&&a.createElement(s.Z,{error:x})),n&&m&&a.createElement(a.Fragment,null,a.createElement("div",{id:"action"},a.createElement("a",{id:"submit",href:"https://www.ebi.ac.uk/ena/submit/sra/#home",className:"vf-button vf-button--primary"},"Click here to submit data")),a.createElement("p",{className:"vf-box vf-box--easy"},"Successfully requested consent to analyse user data. Click"," ",a.createElement(o.rU,{to:"/"},"here")," to return to the home page.")),y&&a.createElement("p",{className:"center hidden error",id:"consent-request-error"},"Failed to send request, please try again or contact our helpdesk."))}},2821:(e,t,n)=>{e.exports=n.p+"static/eb035a685672426d727c.svg"}}]);
//# sourceMappingURL=627.457e1df0.chunk.js.map