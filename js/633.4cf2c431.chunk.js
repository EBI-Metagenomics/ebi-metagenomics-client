"use strict";(self.webpackChunkmgportalv2=self.webpackChunkmgportalv2||[]).push([[633],{2379:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(7294),r=a(2531);const l={biosynthetic:"Core biosynthetic gene","biosynthetic-additional":"Additional biosynthetic gene",regulatory:"Regulatory genes",transport:"Transport-related gene",resistance:"Resistance genes"},o=({value:e,url:t,decodeValue:a})=>{if(!e)return null;const l=e.split(",");return n.createElement("ul",{className:"vf-list"},l.map((e=>{const l=a?decodeURIComponent(e):e;return n.createElement("li",{key:e,className:"igv-popup-multiple-field-item"},t?n.createElement(r.Z,{href:`${t}${e}`},l):l)})))},i=e=>{if(e.location){const t=e.location.split(":")[1];return{start:parseInt(t.split("-")[0].replaceAll(",",""),10),end:parseInt(t.split("-")[1].replaceAll(",",""),10)}}},c=e=>{if(!e.location||!e.type)return;const{start:t,end:a}=i(e);return Number.isNaN(t)||Number.isNaN(a)||null===t||null===a?void 0:"CDS"===e.type?Math.ceil((a-t)/3):a-t},s=({data:e,hasMetaProteomics:t})=>{const{name:a,gene:s,product:u,properties:m}=((e,t)=>{const a=e.reduce(((e,t)=>(t.name&&(e[t.name.toLowerCase().replaceAll(":","")]=null===t.value?null:String(t.value)),e)),{}),s={title:"Functional annotation",data:[{name:"E.C Number",Value:a.ecnumber&&(()=>n.createElement(o,{value:a.ecnumber,url:"https://enzyme.expasy.org/EC/"}))},{name:"Pfam",Value:a.pfam&&(()=>n.createElement(o,{value:a.pfam,url:"https://www.ebi.ac.uk/interpro/entry/pfam/"}))},{name:"KEGG",Value:a.kegg&&(()=>n.createElement(o,{value:a.kegg,url:"https://www.genome.jp/dbget-bin/www_bget?"}))},{name:"eggNOG",Value:a.eggnog&&decodeURIComponent(a.eggnog)},{name:"COG",Value:a.cog&&(()=>n.createElement(o,{value:a.cog}))},{name:"GO",Value:a.go&&(()=>n.createElement(o,{value:a.go,url:"https://www.ebi.ac.uk/ols/search?q="}))},{name:"InterPro",Value:a.interpro&&(()=>n.createElement(o,{value:a.interpro,url:"https://www.ebi.ac.uk/interpro/entry/InterPro/'"}))},{name:"Gene type",Value:a.as_type&&(l[a.as_type]||a.as_type)},{name:"ViPhOG",Value:a.viphog&&(()=>n.createElement(r.Z,{href:"https://osf.io/2zd9r/"},a.viphog," (",a.viphog_taxonomy,")"))},{name:"Notes",Value:a.as_notes&&(()=>n.createElement(o,{value:decodeURIComponent(a.as_notes)}))},{name:"Cluster",Value:a.as_gene_clusters&&(()=>n.createElement(o,{value:a.as_gene_clusters}))}]},{start:u,end:m}=i(a),p="CDS"===a.type,d={title:"Feature details",data:[{name:"Type",Value:a.type},{name:"Inference",Value:a.inference},{name:"Start / End",Value:`${u} / ${m}`},{name:p?"Protein length":"Sequence length",Value:String(c(a))}]},g={title:"Metaproteomics",data:[{name:"PRIDE Dataset",Value:a.pride_id&&(()=>n.createElement(r.Z,{href:`https://www.ebi.ac.uk/pride/archive/projects/${a.pride_id}`},a.pride_id))},{name:"Unique peptide-to-protein mapping",Value:"True"===a.unique_peptide_to_protein_mapping?()=>n.createElement("div",null):"None"},{name:"True"===a.unique_peptide_to_protein_mapping?"List of peptides":"",Value:"True"===a.unique_peptide_to_protein_mapping?()=>n.createElement(o,{value:a.unambiguous_sequences}):()=>n.createElement("div",null)},{name:"Ambiguous peptide-to-protein mapping",Value:"True"===a.ambiguous_peptide_to_protein_mapping?()=>n.createElement("div",null):"None"},{name:"True"===a.ambiguous_peptide_to_protein_mapping?"List of peptides":"",Value:"True"===a.ambiguous_peptide_to_protein_mapping?()=>n.createElement(o,{value:a.ambiguous_sequences}):()=>n.createElement("div",null)},{name:"Semi-quantitative expression spectrum count",Value:a.semiquantitative_expression_spectrum_count}]},v=[s,d];return t&&v.push(g),{name:a.id,gene:a.gene,product:a.product,properties:v}})(e,t);return n.createElement(n.Fragment,null,n.createElement("table",{className:"stack hover igv-popover-table"},n.createElement("caption",{className:"igv-popover-section-header"},"Feature"),n.createElement("tbody",null,a&&n.createElement("tr",null,n.createElement("td",{className:"igv-popover-table-td-name"},"ID"),n.createElement("td",null,a)),s&&n.createElement("tr",null,n.createElement("td",{className:"igv-popover-table-td-name"},"Gene"),n.createElement("td",null,n.createElement("em",null,s))),u&&n.createElement("tr",null,n.createElement("td",{className:"igv-popover-table-td-name"},"Product"),n.createElement("td",null,u)))),m.map((e=>n.createElement("table",{className:"stack hover igv-popover-table",key:e.title},e.data.filter((e=>!!e.Value)).length>0&&n.createElement("caption",{className:"igv-popover-section-header"},e.title),n.createElement("tbody",null,e.data.map((({name:e,Value:t})=>t&&n.createElement("tr",{key:e},n.createElement("td",{className:"igv-popover-table-td-name"},e),n.createElement("td",null,"string"==typeof t?t:n.createElement(t,null))))).filter(Boolean))))))}},3633:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var n=a(7294),r=a(7762),l=a(4897),o=a.n(l),i=a(6050),c=a(964),s=a(402),u=a(6419),m=a(2379);const p=()=>{var e;const[t,a]=(0,n.useState)(!0),l=(0,c.Z)(),{config:p}=(0,n.useContext)(i.ZP),[d,g]=(0,n.useState)(null),[v,f]=(0,n.useState)({}),b=(0,n.useCallback)((e=>{const t={showChromosomeWidget:!0,showTrackLabelButton:!0,showTrackLabels:!0,showCenterGuide:!1,reference:{indexURL:`${p.api}genomes/${l}/downloads/${l}.fna.fai`,fastaURL:`${p.api}genomes/${l}/downloads/${l}.fna`},tracks:[{name:"Functional annotation",type:"annotation",format:"gff3",url:`${p.api}genomes/${l}/downloads/${l}.gff`,displayMode:"EXPANDED",label:"Functional annotation"}],showLegend:!0,legendParent:"#contig"};null!==e&&o().createBrowser(e,t).then((e=>{e.on("trackclick",((e,t)=>r.renderToString(n.createElement(m.Z,{data:t,hasMetaProteomics:!1})))),g(e),a(!1)}))}),[p.api,l]);return(0,n.useEffect)((()=>{var e;const t=[],a=[];null===(e=null==d?void 0:d.trackViews)||void 0===e||e.forEach((e=>{if("annotation"!==e.track.type)return;const n=v[e.track.id];if(n){const r=Object.assign(Object.assign({},e.track.config),(0,u.m)(n.value));r.nameField!==e.track.config.nameField&&(t.push(e.track.id),a.push(r))}})),t.forEach((e=>d.removeTrackByName(e))),a.forEach((e=>d.loadTrack(e)))}),[v,d]),n.createElement("div",{id:"genome-browser"},t&&n.createElement(s.Z,{size:"large"}),n.createElement("div",{className:"genome-browser-container",ref:b}),n.createElement("div",{className:"vf-grid vf-grid__col-3"},null===(e=null==d?void 0:d.trackViews)||void 0===e?void 0:e.map((e=>{const t=e.track.id;return"annotation"!==e.track.type?n.Fragment:n.createElement(u.k,{key:e.track.id,trackView:e,trackColorBys:v,onChange:(e,a)=>{"select-option"===a.action&&f(Object.assign(Object.assign({},v),{[t]:e}))}})}))))}},6419:(e,t,a)=>{a.d(t,{k:()=>m,m:()=>u});var n=a(7294),r=a(8824);const l={A:"#1d4097",B:"#36539a",C:"#50669d",D:"#6979a0",E:"#828ca3",F:"#9b9fa6",G:"#a59e9d",H:"#9f8987",I:"#997471",J:"#935f5b",K:"#8d4a45",L:"#87352f",M:"#eba7cc",N:"#d79f9e",O:"#c29771",P:"#ae8f44",Q:"#9a8717",T:"#937a03",U:"#9a690a",Y:"#a15711",Z:"#a84617",S:"#af341e",R:"#b62325"},o={biosynthetic:"#810e15","biosynthetic-additional":"#f16d75",transport:"#6495ED",regulatory:"#2E8B57",resis:"#ed90ed",other:"#BEBEBE"},i="#d32f2f",c="#a9abaa";function s(e,t){if(!e||!e.getAttributeValue)return null;for(const[,a]of t.entries()){const t=e.getAttributeValue(a);if(t)return t}return null}const u=e=>{switch(e){case"cog":return{nameField:"COG",color:e=>{const t=s(e,["cog","COG"]);return t?function(e){return l[e]||l.R}(t):"#ddd"}};case"kegg":return{nameField:"kegg",color:e=>s(e,["kegg","KEGG"])?i:c};case"pfam":return{nameField:"pfam",color:e=>s(e,["pfam","Pfam"])?i:c};case"interpro":return{nameField:"interpro",color:e=>s(e,["interpro","InterPro"])?i:c};case"go":return{nameField:"go",color:e=>s(e,["go","GO"])?i:c};case"antismash":return{nameField:"as_type",color:e=>{const t=s(e,["as_type"]);return t?o[t]||o.other:"#ddd"}};case"viphog":return{nameField:"viphog",color:e=>s(e,["viphog","ViPhOG"])?i:c};default:return null}},m=({trackView:e,trackColorBys:t,onChange:a})=>n.createElement("div",{className:"vf-stack vf-stack--200"},n.createElement("label",{className:"vf-form__label",htmlFor:"biome-select"},e.track.config.label," track colour"),n.createElement(r.ZP,{theme:e=>Object.assign(Object.assign({},e),{borderRadius:0,border:"2px solid grey"}),placeholder:`Colour ${e.track.id} by...`,value:t[e.track.id],onChange:a,name:`track-colour-${e.track.id}`,inputId:`track-colour-${e.track.id}`,options:[{label:"COG category",value:"cog"},{label:"KEGG ortholog",value:"kegg"},{label:"Pfam family existence",value:"pfam"},{label:"InterPro existence",value:"interpro"},{label:"GO (gene ontology) existence",value:"go"},{label:"AntiSMASH cluster type",value:"antismash"},{label:"ViPhOG existence",value:"viphog"}]}))}}]);
//# sourceMappingURL=633.4cf2c431.chunk.js.map