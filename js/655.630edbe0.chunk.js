"use strict";(self.webpackChunkmgportalv2=self.webpackChunkmgportalv2||[]).push([[655],{6824:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var n=a(7294),r=a(8110),l=a(964),s=a(402),o=a(1699),c=a(4821),m=a(2531),i=a(9711),g=a(6313),u=a(2119),p=a(5058);const d=()=>{const e=(0,l.Z)(),[t]=(0,u.B)({"genomes-page":1,"genomes-page_size":10,"genomes-order":""},{"genomes-page":Number,"genomes-page_size":Number}),{data:a,loading:c,error:m,isStale:d}=(0,r.Z)(`genome-catalogues/${e}/genomes`,{page:t["genomes-page"],ordering:t["genomes-order"],page_size:t["genomes-page_size"]});if(c&&!d)return n.createElement(s.Z,{size:"small"});if(m||!a)return n.createElement(o.Z,{error:m});const b=[{id:"biome_id",Header:"Biome",accessor:e=>{var t;return null===(t=e.relationships.biome.data)||void 0===t?void 0:t.id},Cell:({cell:e})=>n.createElement("span",{className:`biome_icon icon_xs ${(0,p.G)(e.value)}`,style:{float:"initial"}}),disableSortBy:!0},{id:"genome",Header:"Accession",accessor:"id",Cell:({cell:e})=>n.createElement(i.rU,{to:`/genomes/${e.value}`},e.value)},{Header:"Length",accessor:"attributes.length"},{Header:"Num. of genomes",accessor:"attributes.num-genomes-total"},{Header:"Completeness",accessor:"attributes.completeness"},{Header:"Contamination",accessor:"attributes.contamination"},{Header:"Type",accessor:"attributes.type",disableSortBy:!0},{Header:"Taxonomy",accessor:"attributes.taxon-lineage",Cell:({cell:e})=>function(e,t){const a=e.split(";");let n=a.pop();for(;-1===n.indexOf("s__");)n=a.pop();for(;n.length<=3;)n=a.pop();return n?function(e,t=""){return e.replace(/;/g,"").replace(/[d|p|c|o|f|g|s]__/g,t)}(n):n}(e.value),disableSortBy:!0},{id:"last_update",Header:"Last Updated",accessor:"attributes.last-update",Cell:({cell:e})=>new Date(e.value).toLocaleDateString()}];return n.createElement(g.Z,{cols:b,data:a,initialPage:t["genomes-page"]-1,initialPageSize:10,className:"mg-anlyses-table",loading:c,isStale:d,namespace:"genomes-",sortable:!0})},b=({tree:e,depth:t=0,shouldExpand:a=!0,collapsing:r=!1,getLabel:l=(e=>e.name)})=>{var s;const[o,c]=(0,n.useState)(a),[m,i]=(0,n.useState)(!1),[g,u]=(0,n.useState)(!1);return(0,n.useEffect)((()=>i(!0)),[]),(0,n.useEffect)((()=>{g&&setTimeout((()=>c(!1)),400)}),[g]),n.createElement("div",{style:{marginLeft:.5*t+"rem"}},n.createElement("div",{className:"mg-hierarchy-selector "+(m&&!r?"show":"")},(null===(s=e.children)||void 0===s?void 0:s.length)?n.createElement("button",{type:"button",className:"mg-expander",onClick:()=>{u(o),o||c(!0)}},o?"▾":"▸"):n.createElement("span",{className:"mg-hierarchy-spacer"}),n.createElement("div",null,n.createElement("span",{className:"mg-hierarchy-label"},l(e)," ",e.countgen&&n.createElement("span",{className:"mg-number"},e.countgen)))),e.children&&e.children.length&&o&&e.children.map((a=>n.createElement(b,{key:a.name,tree:a,depth:t+1,shouldExpand:1===e.countgen&&1===a.countgen,getLabel:l,collapsing:g}))))},h=b,E=()=>{const e=(0,l.Z)(),{data:t,loading:a,error:c}=(0,r.Z)(`genome-catalogues/${e}/downloads/phylo_tree.json`);return a?n.createElement(s.Z,{size:"large"}):c?n.createElement(o.Z,{error:c}):t?n.createElement(h,{tree:t,getLabel:e=>{const t=e.name.split("__").pop();return"genome"===e.type?n.createElement(i.rU,{to:`/genomes/${t}`,style:{backgroundColor:"white"}},t):t||"Unknown"}}):n.createElement(s.Z,null)};var f=a(1274);const y=[{label:"Genome list",to:"#"},{label:"Taxonomy tree",to:"#phylo-tab"},{label:"Protein catalogue",to:"#protein-catalog-tab"},{label:"Search by Gene",to:"#genome-search-tab"},{label:"Search by MAG",to:"#genome-search-mag-tab"}],v=()=>{const e=(0,l.Z)(),{data:t,loading:a,error:i}=(0,r.Z)(`genome-catalogues/${e}`);if(a)return n.createElement(s.Z,{size:"large"});if(i)return n.createElement(o.Z,{error:i});if(!t)return n.createElement(s.Z,null);const{data:g}=t,u=(g.attributes.description||"").split(/(\[[^\]]+\]\([^)]+\))/).map((e=>{if(e.startsWith("[")){const t=e.match(/\[([^\]]+)\]\(([^)]+)\)/);return{type:"link",content:t[1],href:t[2]}}return{type:"text",content:e}}));return n.createElement("section",{className:"vf-content"},n.createElement("h2",null,g.attributes.name),n.createElement("p",null,u.map((e=>"text"===e.type?n.createElement("span",{key:e.content},e.content):n.createElement(m.Z,{key:e.content,href:e.href},e.content)))),n.createElement(c.Z,{tabs:y}),n.createElement("section",{className:"vf-grid"},n.createElement("div",{className:"vf-stack vf-stack--200"},n.createElement(f.Z,{hash:"",isDefault:!0},n.createElement(d,null)),n.createElement(f.Z,{hash:"#phylo-tab"},n.createElement(E,null)))))}}}]);
//# sourceMappingURL=655.630edbe0.chunk.js.map