"use strict";(self.webpackChunkmgportalv2=self.webpackChunkmgportalv2||[]).push([[690],{1274:(e,t,a)=>{a.d(t,{Z:()=>l});var n=a(7294),r=a(6974);const l=({hash:e,isDefault:t=!1,children:a})=>{const l=(0,r.TH)(),i=(0,r.s0)();return(0,n.useEffect)((()=>{""===l.hash&&""!==e&&t&&i(e,{replace:!0})})),l.hash===e?n.createElement(n.Fragment,null,a):null}},1699:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(7294),r=a(7838);const l=()=>{window.location.reload()},i=({error:e})=>e&&e.type!==r.ZB.NullURL?n.createElement("div",{className:"vf-box vf-box-theme--primary vf-box--easy",style:{backgroundColor:"lemonchiffon"}},n.createElement("h3",{className:"vf-box__heading"},n.createElement("span",{className:"icon icon-common icon-exclamation-triangle"})," Error Fetching Data"),n.createElement("p",{className:"vf-box__text"},(null==e?void 0:e.type)===r.ZB.FetchError&&`There were problems with the request. [${e.error}]`,(null==e?void 0:e.type)===r.ZB.NotOK&&`The response from the server was not OK [Status: ${e.status}].`,(null==e?void 0:e.type)===r.ZB.JSONError&&`The recovered resource didn't follow the expected format [${e.error}].`),n.createElement("div",{className:"mg-right"},n.createElement("button",{type:"button",className:"vf-button vf-button--tertiary vf-button--sm ",onClick:l},"Refresh"))):null},3415:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(7294);const r=({list:e})=>n.createElement("div",{className:"vf-grid vf-grid__col-2",style:{gridTemplateColumns:"1fr 2fr",rowGap:"0.5rem"}},e.map((({key:e,value:t})=>n.createElement(n.Fragment,{key:e},n.createElement("div",{style:{textAlign:"right"}},e,":"),n.createElement("div",null,"string"==typeof t?t:n.createElement(t,null))))))},4821:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(7294),r=a(6974),l=a(9711);const i=({tabs:e})=>{const t=(0,r.TH)();return n.createElement("div",{className:"vf-tabs mg-search-tabs"},n.createElement("ul",{className:"vf-tabs__list"},e.map((({label:e,to:a})=>n.createElement("li",{className:"vf-tabs__item",key:a},n.createElement(l.rU,{className:"vf-tabs__link "+(a===t.pathname||a.startsWith("#")&&a===t.hash||"#"===a&&""===t.hash?"is-active":""),to:a},"string"==typeof e?e:n.createElement(e,null)))))))}},964:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(6974);const r=()=>{const e=(0,n.TH)();let{pathname:t}=e;t.trim().endsWith("/")&&(t=t.trim().slice(0,-1));const a=t.split("/");return null==a?void 0:a[a.length-1]}},1690:(e,t,a)=>{a.r(t),a.d(t,{default:()=>k});var n=a(7294),r=a(8110),l=a(964),i=a(402),s=a(1699),o=a(4821),m=a(3415),c=a(9711);const d=({data:e})=>{var t,a,r,l,i,s,o,d,u,b,h,g,p,v;return n.createElement("section",null,n.createElement("div",{className:"vf-stack"},n.createElement("details",{open:!0},n.createElement("summary",null,n.createElement("b",null,"Description")),n.createElement(m.Z,{list:[{key:"Study",value:(null===(r=null===(a=null===(t=e.relationships)||void 0===t?void 0:t.study)||void 0===a?void 0:a.data)||void 0===r?void 0:r.id)&&(()=>n.createElement(c.rU,{to:`/studies/${e.relationships.study.data.id}`},e.relationships.study.data.id))},{key:"Sample",value:(null===(s=null===(i=null===(l=e.relationships)||void 0===l?void 0:l.sample)||void 0===i?void 0:i.data)||void 0===s?void 0:s.id)&&(()=>n.createElement(c.rU,{to:`/samples/${e.relationships.sample.data.id}`},e.relationships.sample.data.id))},{key:"Assembly",value:(null===(u=null===(d=null===(o=e.relationships)||void 0===o?void 0:o.assembly)||void 0===d?void 0:d.data)||void 0===u?void 0:u.id)&&(v=e.attributes["experiment-type"],["assembly","hybrid_assembly","long_reads_assembly"].includes(v))&&(()=>n.createElement(c.rU,{to:`/assemblies/${e.relationships.assembly.data.id}`},e.relationships.assembly.data.id))},{key:"Run",value:(null===(g=null===(h=null===(b=e.relationships)||void 0===b?void 0:b.run)||void 0===h?void 0:h.data)||void 0===g?void 0:g.id)&&(()=>n.createElement(c.rU,{to:`/runs/${e.relationships.run.data.id}`},e.relationships.run.data.id))},{key:"Pipeline version",value:(null===(p=e.attributes)||void 0===p?void 0:p["pipeline-version"])&&(()=>n.createElement(c.rU,{to:`/pipelines/${e.attributes["pipeline-version"]}`},e.attributes["pipeline-version"]))}].filter((({value:e})=>!!e))})),n.createElement("details",{open:!0},n.createElement("summary",null,n.createElement("b",null,"Experiment details")),n.createElement(m.Z,{list:[{key:"Experiment type",value:e.attributes["experiment-type"]},{key:"Instrument model",value:e.attributes["instrument-model"]},{key:"Instrument platform",value:e.attributes["instrument-platform"]}].filter((({value:e})=>!!e))}))))};var u=a(7838),b=a(8840),h=a(5708),g=a.n(h);const p=({analysisData:e,summaryData:t})=>{var a;const r=(0,n.useRef)(null),l="assembly"===e.attributes["experiment-type"],i=l?"contigs":"reads",s=l?"Contigs":"Reads",o=[0,0,0,0,0],m=[0,0,0,0,0],c=[0,0,0,0,0],d={};((null===(a=e.attributes)||void 0===a?void 0:a["analysis-summary"])||[]).forEach((({key:e,value:t})=>{d[e]=t})),c[4]=Number(t.sequence_count),o[0]=Number(d["Submitted nucleotide sequences"]),o[1]=Number(d["Nucleotide sequences after format-specific filtering"]),o[2]=Number(d["Nucleotide sequences after length filtering"]),o[3]=Number(d["Nucleotide sequences after undetermined bases filtering"]),m[2]=o[1]-o[2],m[1]=o[0]-o[1],m[4]=o[3]-o[4]-c[4];const u={chart:{type:"bar",height:240},title:{text:`Number of sequence ${i} per QC step`},yAxis:{min:0,title:{text:"Count"}},xAxis:{categories:[`Initial ${i}`,"Trimming","Length filtering","Ambiguous base filtering",`${s} subsampled for QC analysis`]},plotOptions:{series:{stacking:"normal"}},credits:{enabled:!1},series:[{name:`${s} filtered out`,data:m,color:"#CCCCD3"},{name:`${s} remaining`,data:o,color:"#058DC7"},{name:`${s} after sampling`,data:c,color:"#8dc7c7"}]};return n.createElement(g(),{highcharts:b,options:u,ref:r})},v=({analysisData:e,summaryData:t})=>{const a=(0,n.useRef)(null),o=(0,l.Z)(),{data:m,loading:c,error:d}=(0,r.Z)(`analyses/${o}/seq-length`,{},{},u.B5.TSV);if(c)return n.createElement(i.Z,{size:"large"});if(d)return n.createElement(s.Z,{error:d});if(!m)return n.createElement(i.Z,null);const h=m.map((([e,t])=>[Number(e),Number(t)])),p=Math.max(...h.map((([e])=>e))),v="assembly"===e.attributes["experiment-type"],y=v?"Contigs":"Reads",f={chart:{marginLeft:78,style:{fontFamily:"Helvetica"},zoomType:"x"},title:{text:`${y} length histogram`,style:{fontSize:16,fontWeight:"bold"}},yAxis:{title:{text:"Number of "+(v?"contigs":"reads")}},xAxis:{min:0,max:100*(Math.floor(p/100)+1),plotBands:null===t?[]:[{from:Number(t.average_length)-Number(t.standard_deviation_length),to:Number(t.average_length)+Number(t.standard_deviation_length),color:"rgba(128, 128, 128, .2)",label:{text:`Standard Deviation<br/>±${Number(t.standard_deviation_length).toFixed(2)}`,style:{color:"#666666",fontSize:"0.8em"}}}]},series:[{name:y,data:h,color:"#058dc7"}],legend:{enabled:!1},credits:!1,navigation:{buttonOptions:{height:32,width:32,symbolX:16,symbolY:16,y:-10}}};return n.createElement(g(),{highcharts:b,options:f,ref:a})},y=()=>{const e=(0,n.useRef)(null),t=(0,l.Z)(),{data:a,loading:o,error:m}=(0,r.Z)(`analyses/${t}/nucleotide-distribution`,{},{},u.B5.TSV);if(o)return n.createElement(i.Z,{size:"large"});if(m)return n.createElement(s.Z,{error:m});if(!a)return n.createElement(i.Z,null);const c={pos:[],A:[],G:[],T:[],C:[],N:[]},d={A:"rgb(16, 150, 24)",G:"rgb(255, 153, 0)",C:"rgb(51, 102, 204)",T:"rgb(220, 57, 18)",N:"rgb(138, 65, 23)"},h=a[0];a.slice(1).forEach((e=>{e.forEach(((e,t)=>{c[h[t]].push(Number(e))}))}));const p={chart:{type:"area",style:{fontFamily:"Helvetica"}},title:{text:"Nucleotide position histogram",style:{fontSize:16,fontWeight:"bold"}},xAxis:{categories:c.pos,tickmarkPlacement:"on",title:{enabled:!1}},yAxis:{min:0,max:100,title:{enabled:!1}},plotOptions:{area:{stacking:"normal",lineColor:"#666666",lineWidth:1,marker:{lineWidth:1,lineColor:"#666666"}}},tooltip:{shared:!0},series:["A","T","C","G","N"].map((e=>({name:e,data:c[e],color:d[e]}))),credits:!1,navigation:{buttonOptions:{height:32,width:32,symbolX:16,symbolY:16,y:-10}}};return n.createElement(g(),{highcharts:b,options:p,ref:e})},f=({analysisData:e,summaryData:t})=>{const a=(0,n.useRef)(null),o=(0,l.Z)(),{data:m,loading:c,error:d}=(0,r.Z)(`analyses/${o}/gc-distribution`,{},{},u.B5.TSV);if(c)return n.createElement(i.Z,{size:"large"});if(d)return n.createElement(s.Z,{error:d});if(!m)return n.createElement(i.Z,null);const h=m.map((([e,t])=>[Number(e),Number(t)])),p="assembly"===e.attributes["experiment-type"],v=p?"Contigs":"Reads",y={chart:{style:{fontFamily:"Helvetica"},zoomType:"x"},title:{text:`${v} GC distribution`,style:{fontSize:16,fontWeight:"bold"}},yAxis:{title:{text:"Number of "+(p?"contigs":"reads")}},xAxis:{min:0,max:100,plotBands:null===t?[]:[{from:Number(t.average_gc_content)-Number(t.standard_deviation_gc_content),to:Number(t.average_gc_content)+Number(t.standard_deviation_gc_content),color:"rgba(128, 128, 128, .2)",borderColor:"#000000",label:{text:`Standard Deviation<br/>±${Number(t.standard_deviation_gc_content).toFixed(2)}`,style:{color:"#666666",fontSize:"0.8em"}}}]},series:[{name:v,data:h,color:"#058dc7"}],legend:{enabled:!1},credits:!1,navigation:{buttonOptions:{height:32,width:32,symbolX:16,symbolY:16,y:-10}}};return n.createElement(g(),{highcharts:b,options:y,ref:a})},E=({summaryData:e})=>{const t=(0,n.useRef)(null),a={chart:{type:"bar",marginTop:0,height:120},title:!1,xAxis:{categories:["Minimum","Average","Maximum"],title:{enabled:!1},lineColor:"#595959",tickColor:""},yAxis:{min:0,max:100*(Math.floor(Number(e.length_max)/100)+1),title:{text:"Sequence length (bp)"},plotBands:[{from:Number(e.average_length)-Number(e.standard_deviation_length),to:e.average_length+Number(e.standard_deviation_length),color:"rgba(128, 128, 128, .2)"}]},plotOptions:{series:{grouping:!1,shadow:!1,borderWidth:0}},series:[{name:"Length",data:[{y:Number(e.length_min),x:0,color:"rgb(114, 191, 63)"},{y:Number(e.average_length),x:1,color:"rgb(63, 114, 191)"},{y:Number(e.length_max),x:2,color:"rgb(114, 63, 191)"}],pointPadding:-.2,tooltip:{pointFormatter(){return`<span style="color:${this.color}">●</span> ${this.category}: <b>${this.y.toFixed(2)}</b><br/>`}}}],legend:{enabled:!1},credits:!1,navigation:{buttonOptions:{height:32,width:32,symbolX:16,symbolY:16,y:-10}},exporting:{enabled:!1}};return n.createElement(g(),{highcharts:b,options:a,ref:t})},x=({summaryData:e})=>{const t=(0,n.useRef)(null),a={chart:{type:"bar",marginTop:0,height:150},title:!1,xAxis:{categories:["Content"],title:{enabled:!1},lineColor:"#595959",tickColor:""},yAxis:{min:0,max:100,title:{enabled:!1},plotBands:[{from:Number(e.average_gc_content)-Number(e.standard_deviation_gc_content),to:Number(e.average_gc_content)+Number(e.standard_deviation_gc_content),color:"rgba(128, 128, 128, .2)"}]},plotOptions:{series:{grouping:!1,shadow:!1,borderWidth:0}},series:[{name:"GC content",pointPadding:.25,color:"rgb(63, 114, 191)",tooltip:{pointFormatter(){return`<span style="color:${this.color}">●</span> ${this.series.name}: <b>${this.y.toFixed(2)}%</b><br/>`}},data:[Number(e.average_gc_content)]},{name:"AT content",color:"rgb(114, 63, 191)",pointPadding:.25,threshold:Number(e.average_gc_content),tooltip:{pointFormatter(){const t=(100-Number(e.average_gc_content)).toFixed(2);return`\n              <span style="color:${this.color}">●</span>\n              ${this.series.name}: <b>${t}%</b>\n              <br/>`}},data:[100]}],credits:!1,navigation:{buttonOptions:{height:32,width:32,symbolX:16,symbolY:16,y:-10}},exporting:{enabled:!1}};return n.createElement(g(),{highcharts:b,options:a,ref:t})},N=({analysisData:e})=>{const t=(0,l.Z)(),{data:a,loading:o,error:m}=(0,r.Z)(`analyses/${t}/summary`,{},{},u.B5.TSV);if(o)return n.createElement(i.Z,{size:"large"});if(m)return n.createElement(s.Z,{error:m});if(!a)return n.createElement(i.Z,null);const c=Object.fromEntries(a),d="assembly"===e.attributes["experiment-type"],b=d?"contig":"read",h=d?"contigs":"reads";return n.createElement("div",{className:"vf-stack vf-stack--200"},n.createElement("p",null,"The chart below shows the number of ",h," which pass the quality control steps in the pipeline. Paired-end sequences may have been merged, in which case the initial number of ",h," may differ from the number given by ENA."),n.createElement(p,{analysisData:e,summaryData:c}),Number(e.attributes["pipeline-version"])>2&&n.createElement(n.Fragment,null,n.createElement("p",null,"The histograms below show the distributions of sequence lengths (left) and percentage GC content (right) for the sequences having passed quality control. Note that for large files, the distributions were compiled from a random subset of 2 million",h,". The standard deviations are shown on each plot. The bar chart underneath each graph indicates the minimum, mean and maximum length and mean GC and AT content, respectively."),n.createElement("div",{className:"vf-grid vf-grid__col-2"},n.createElement("div",{className:"vf-stack"},n.createElement(v,{analysisData:e,summaryData:c}),n.createElement(E,{summaryData:c})),n.createElement("div",{className:"vf-stack"},n.createElement(f,{analysisData:e,summaryData:c}),n.createElement(x,{summaryData:c}))),n.createElement("p",null,'The graph below show the relative abundance of nucletotides (A, C, G, T, or ambiguous base "N") at each position starting from the beginning of each ',b," up to the first 500 base pairs."),n.createElement(y,null)))};var _=a(1274);const Z=e=>"assembly"===e.attributes["experiment-type"],w=e=>Number(e.attributes["pipeline-version"])>=5,$=e=>"amplicon"!==e.attributes["experiment-type"],k=()=>{const e=(0,l.Z)(),{data:t,loading:a,error:m}=(0,r.Z)(`analyses/${e}`,{include:"downloads"});if(a)return n.createElement(i.Z,{size:"large"});if(m)return n.createElement(s.Z,{error:m});if(!t)return n.createElement(i.Z,null);const{data:u,included:b}=t,h=[{label:"Overview",to:"#overview"},{label:"Quality control",to:"#qc"},{label:"Taxonomic analysis",to:"#taxonomic"},$(u)?{label:"Functional analysis",to:"#functional"}:null,(g=b,g.some((e=>{var t;return"Statistics"===(null===(t=null==e?void 0:e.attributes)||void 0===t?void 0:t["group-type"])}))?{label:"Abundance and comparison",to:"#abundance"}:null),Z(u)&&w(u)?{label:"Pathways/Systems",to:"#path-systems"}:null,Z(u)&&w(u)?{label:"Contig Viewer",to:"#contigs-viewer"}:null,{label:"Download",to:"#download"}].filter(Boolean);var g;return n.createElement("section",{className:"vf-content"},n.createElement("h2",null,"Analysis ",e),n.createElement("h4",null,n.createElement(c.rU,{to:Z(u)?`/assemblies/${u.relationships.assembly.data.id}`:`/runs/${u.relationships.run.data.id}`},"Other Analyses")),n.createElement(o.Z,{tabs:h}),n.createElement("section",{className:"vf-grid"},n.createElement("div",{className:"vf-stack vf-stack--200"},n.createElement(_.Z,{hash:"#overview",isDefault:!0},n.createElement(d,{data:u})),n.createElement(_.Z,{hash:"#qc"},n.createElement(N,{analysisData:u})))))}}}]);
//# sourceMappingURL=690.14d241ec.chunk.js.map