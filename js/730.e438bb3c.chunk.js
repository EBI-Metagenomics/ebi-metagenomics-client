"use strict";(self.webpackChunkmgportalv2=self.webpackChunkmgportalv2||[]).push([[730],{1055:(e,a,t)=>{t.d(a,{Z:()=>l});var s=t(7294);const l=({text:e,maxLength:a=250})=>s.createElement(s.Fragment,null,e.substring(0,a),e.length>=a&&"...")},1514:(e,a,t)=>{t.r(a),t.d(a,{default:()=>H});var s=t(7294),l=t(8110),r=t(964),i=t(402),n=t(1699),c=t(4821),m=t(2245),o=t(6050),u=t(4933),d=t(2069);const p=({samples:e})=>{const{config:a}=(0,s.useContext)(o.Z),t=e.filter((e=>{try{return 0!==Number(e.attributes.longitude)&&0!==Number(e.attributes.latitude)}catch(e){return!1}}));return s.createElement("div",{className:"mg-map-container"},s.createElement("div",{className:"mg-map-wrapper"},s.createElement(m.Wrapper,{apiKey:a.googleMapsKey,render:d.Z},s.createElement(u.Z,{samples:t}))),s.createElement("div",{className:"mg-map-progress"},0===t.length&&s.createElement("div",null,"⚠️ None of the samples have geolocation co-ordinates.")))};var g=t(5478),b=t(5058);const E=({data:e})=>{var a;const t=e.relationships.biome.data.id;return s.createElement("section",null,s.createElement("div",{className:"vf-grid"},s.createElement("div",null,s.createElement("h4",null,"Last updated:"," ",new Date(null===(a=null==e?void 0:e.attributes)||void 0===a?void 0:a["last-update"]).toDateString()),s.createElement(g.Z,{label:"Description"},e.attributes["sample-desc"]),s.createElement(g.Z,{label:"External links"},s.createElement("ul",null,s.createElement("li",null,s.createElement("a",{className:"ext",href:`https://www.ebi.ac.uk/ena/browser/view/${e.attributes.accession}`},"ENA website (",e.attributes.accession,")")),s.createElement("li",null,s.createElement("a",{className:"ext",href:`https://www.ebi.ac.uk/biosamples/samples/${e.attributes.biosample}`},"EBI biosample (",e.attributes.biosample,")")))),s.createElement(g.Z,{label:"Classification"},s.createElement("span",{className:`biome_icon icon_sm ${(0,b.G)(t)}`,style:{float:"initial"}}),t)),s.createElement(p,{samples:[e]})))};var v=t(9711),f=t(6313),y=t(1055),Z=t(2119);const h=()=>{const e=(0,r.Z)(),[a]=(0,Z.B)({"studies-page":1,"studies-page_size":10,"studies-order":""},{"studies-page":Number,"studies-page_size":Number}),{data:t,loading:c,error:m,isStale:o}=(0,l.Z)(`samples/${e}/studies`,{page:a["studies-page"],ordering:a["studies-order"],page_size:a["studies-page_size"]});if(c&&!o)return s.createElement(i.Z,{size:"small"});if(m||!t)return s.createElement(n.Z,{error:m});const u=[{id:"biome_id",Header:"Biome",accessor:e=>{var a,t;return null===(t=null===(a=e.relationships.biomes.data)||void 0===a?void 0:a[0])||void 0===t?void 0:t.id},Cell:({cell:e})=>s.createElement("span",{className:`biome_icon icon_xs ${(0,b.G)(e.value)}`,style:{float:"initial"}})},{id:"study",Header:"Study accession",accessor:"id",Cell:({cell:e})=>s.createElement(v.rU,{to:`/studies/${e.value}`},e.value)},{Header:"Name",accessor:"attributes.study-name"},{Header:"Abstract",accessor:"attributes.study-abstract",Cell:({cell:e})=>s.createElement(y.Z,{text:e.value||""})},{Header:"Samples Count",accessor:"attributes.samples-count"},{id:"last_update",Header:"Last Updated",accessor:"attributes.last-update",Cell:({cell:e})=>new Date(e.value).toLocaleDateString()}];return s.createElement(f.Z,{cols:u,data:t,initialPage:a["studies-page"]-1,initialPageSize:10,className:"mg-studies-table",loading:c,isStale:o,namespace:"studies-"})},N=()=>{const e=(0,r.Z)(),[a]=(0,Z.B)({"runs-page":1,"runs-page_size":10,"runs-order":""},{"runs-page":Number,"runs-page_size":Number}),{data:t,loading:c,error:m,isStale:o}=(0,l.Z)(`samples/${e}/runs`,{page:a["runs-page"],ordering:a["runs-order"],page_size:a["runs-page_size"]});if(c&&!o)return s.createElement(i.Z,{size:"small"});if(m||!t)return s.createElement(n.Z,{error:m});const u=[{id:"run",Header:"Run ID",accessor:"id",Cell:({cell:e})=>s.createElement(v.rU,{to:`/runs/${e.value}`},e.value)},{Header:"Experiment type",accessor:"attributes.experiment-type"},{Header:"Instrument model",accessor:"attributes.instrument-model"},{Header:"Instrument platform",accessor:"attributes.instrument-platform"},{Header:"pipeline versions",accessor:"relationships.pipelines.data",Cell:({cell:e})=>e.value.map((({id:e})=>e)).join(", ")}];return s.createElement(f.Z,{cols:u,data:t,initialPage:a["runs-page"]-1,initialPageSize:10,className:"mg-runs-table",loading:c,isStale:o,namespace:"runs-"})},_=()=>{const e=(0,r.Z)(),[a]=(0,Z.B)({"assembly-page":1,"assembly-page_size":10,"assembly-order":""},{"assembly-page":Number,"assembly-page_size":Number}),{data:t,loading:c,error:m,isStale:o}=(0,l.Z)("assemblies",{sample_accession:e,page:a["assembly-page"],ordering:a["assembly-order"],page_size:a["assembly-page_size"]});if(c&&!o)return s.createElement(i.Z,{size:"small"});if(m||!t)return s.createElement(n.Z,{error:m});const u=[{Header:"Assembly ID",accessor:"id",Cell:({cell:e})=>s.createElement(v.rU,{to:`/assemblies/${e.value}`},e.value)},{Header:"Experiment type",accessor:"attributes.experiment-type"},{Header:"WGS ID",accessor:"attributes.wgs-accession"},{Header:"Legacy ID",accessor:"attributes.legacy-accession"},{Header:"Pipeline versions",accessor:"relationships.pipelines.data",Cell:({cell:e})=>e.value.map((({id:e})=>e)).join(", ")}];return s.createElement(f.Z,{cols:u,data:t,initialPage:a["assembly-page"]-1,initialPageSize:10,className:"mg-assembly-table",loading:c,isStale:o,namespace:"assembly-"})};var z=t(1274);const w=({list:e})=>s.createElement("div",{className:"vf-grid vf-grid__col-2",style:{gridTemplateColumns:"1fr 2fr",rowGap:"0.5rem"}},e.map((({key:e,value:a})=>s.createElement(s.Fragment,{key:e},s.createElement("div",{style:{textAlign:"right"}},e,":"),s.createElement("div",null,a))))),S=[{label:"Sample metadata",to:"#"},{label:"Associated studies",to:"#studies"},{label:"Analysed associated runs",to:"#runs"},{label:"Analysed associated assemblies",to:"#assemblies"}],H=()=>{var e;const a=(0,r.Z)(),{data:t,loading:m,error:o}=(0,l.Z)(`samples/${a}`);if(m)return s.createElement(i.Z,{size:"large"});if(o)return s.createElement(n.Z,{error:o});if(!t)return s.createElement(i.Z,null);const{data:u}=t;return s.createElement("section",{className:"vf-content"},s.createElement("h2",null,"Sample overview (",a,")"),s.createElement("h3",null,"Sample ",u.attributes["sample-name"]),s.createElement("section",{className:"vf-grid"},s.createElement("div",{className:"vf-stack vf-stack--200"},s.createElement(E,{data:u}),s.createElement(c.Z,{tabs:S}),s.createElement("section",{className:"vf-grid"},s.createElement("div",{className:"vf-stack vf-stack--200"},s.createElement(z.Z,{hash:"",isDefault:!0},s.createElement(w,{list:(null===(e=null==u?void 0:u.attributes)||void 0===e?void 0:e["sample-metadata"])||[]})),s.createElement(z.Z,{hash:"#studies"},s.createElement(h,null)),s.createElement(z.Z,{hash:"#runs"},s.createElement(N,null)),s.createElement(z.Z,{hash:"#assemblies"},s.createElement(_,null)))))))}}}]);
//# sourceMappingURL=730.e438bb3c.chunk.js.map