"use strict";(self.webpackChunkmgportalv2=self.webpackChunkmgportalv2||[]).push([[735],{7735:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var s=a(7294),r=a(8840),n=a(8393),o=a.n(n),i=a(5708),c=a.n(i),l=a(402),g=a(1699),m=a(8696),u=a(8110),p=a(964),d=a(2119),b=a(6581),k=a(5457);o()(r);const h=({includePangenomes:e=!0})=>{const t=(0,s.useRef)(null),a=(0,p.Z)(),[n]=(0,d.B)({"kegg-page":1,"kegg-page_size":10,"kegg-order":""},{"kegg-page":Number,"kegg-page_size":Number}),{columns:o,options:i}=(0,b.Z)(),{data:h,loading:f,isStale:G,error:C}=(0,u.Z)(`genomes/${a}/kegg-class`,{page:n["kegg-page"],ordering:n["kegg-order"],page_size:n["kegg-page_size"]});if(f)return s.createElement(l.Z,{size:"large"});if(C)return s.createElement(g.Z,{error:C});if(!h)return s.createElement(l.Z,null);let E=0;const y=h.data.map((e=>String(e.attributes.name))),z=h.data.reduce(((e,t)=>(e[t.attributes.name]=t.attributes.description,e)),{}),Z=h.data.map((e=>{const t=Number(e.attributes["genome-count"]);return E+=t,t})),v=h.data.map((e=>e.attributes["pangenome-count"]));return o[0]={Header:"Class ID",accessor:"attributes.class-id"},o[1].accessor="attributes.name",i.title={text:"Top 10 KEGG brite categories"},i.subtitle={text:`Total: ${E} KEGG matches - Drag to zoom in/out`},i.xAxis={categories:y},i.tooltip={formatter(){const e=z[this.key];let t=`${this.series.name}<br/>Count: ${this.y}`;return e&&(t+=`<br />KEGG Class: ${e}`),t}},i.series=[{name:"Genome",type:"column",data:Z.slice(0,10),colors:k.DC,stack:"genome"}],e&&i.series.push({name:"Pan-genome",type:"column",data:v.slice(0,10),colors:k.DC,stack:"pangenome"}),s.createElement("div",{className:"vf-stack vf-stack--200"},s.createElement(c(),{highcharts:r,options:i,ref:t}),s.createElement(m.Z,{cols:o,data:h,Title:`All ${h.meta.pagination.count} KEGG classes`,loading:f,initialPage:n["kegg-page"]-1,initialPageSize:10,namespace:"kegg-",isStale:G}))}},6581:(e,t,a)=>{a.d(t,{Z:()=>n});var s=a(7294),r=a(5457);const n=()=>({columns:(0,s.useMemo)((()=>[{Header:"COG ID",accessor:"attributes.name"},{Header:"Description",accessor:"attributes.description"},{Header:"Genome Count",accessor:"attributes.genome-count"},{Header:"Pan-genome count",accessor:"attributes.pangenome-count"}]),[]),options:{chart:{type:"column",height:400,zoomType:"xy",renderTo:"container"},yAxis:{min:0,title:{text:"Number of matches"}},plotOptions:{series:{stacking:"normal"},column:{allowPointSelect:!0,cursor:"pointer",colors:r.DC}},credits:{enabled:!1},legend:{enabled:!0}}})}}]);
//# sourceMappingURL=735.f332d58b.chunk.js.map