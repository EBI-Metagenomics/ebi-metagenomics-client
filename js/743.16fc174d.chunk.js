"use strict";(self.webpackChunkmgportalv2=self.webpackChunkmgportalv2||[]).push([[743],{5222:(e,a,l)=>{l.d(a,{Z:()=>b});var t=l(7294),s=l(9711),i=l(7338);const n=(r={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},function(e){return null==r?void 0:r[e]});var r,o=/&(?:amp|lt|gt|quot|#39);/g,d=RegExp(o.source);var c=l(402),m=l(1699),u=l(6313),v=l(8110),p=l(964),g=l(2119),y=l(5058);const b=({rootEndpoint:e})=>{var a,l,r;const b=(0,p.Z)(),[E]=(0,g.B)({"analyses-page":1,"analyses-page_size":10,"analyses-order":""},{"analyses-page":Number,"analyses-page_size":Number}),{data:f,loading:h,error:Z,isStale:w,downloadURL:_}=(0,v.Z)(`${e}/${b}/analyses`,{include:"sample",page:E["analyses-page"],ordering:E["analyses-order"],page_size:E["analyses-page_size"]});if(h&&!w)return t.createElement(c.Z,{size:"small"});if(Z||!f)return t.createElement(m.Z,{error:Z});if(!f.data.length)return null;const N={};null===(a=f.included||[])||void 0===a||a.filter((({type:e})=>"samples"===e)).forEach((e=>{N[e.id]={description:e.attributes["sample-desc"],biome:e.relationships.biome.data.id}}));const x=[{id:"biome_id",Header:"Biome",accessor:e=>{var a,l,t,s;return(null===(s=null==N?void 0:N[null===(t=null===(l=null===(a=null==e?void 0:e.relationships)||void 0===a?void 0:a.sample)||void 0===l?void 0:l.data)||void 0===t?void 0:t.id])||void 0===s?void 0:s.biome)||""},Cell:({cell:e})=>t.createElement("span",{className:`biome_icon icon_xs ${(0,y.G)(e.value)}`,style:{float:"initial"}}),className:"mg-biome"},{id:"sample",Header:"Sample accession",accessor:e=>{var a,l,t;return null===(t=null===(l=null===(a=null==e?void 0:e.relationships)||void 0===a?void 0:a.sample)||void 0===l?void 0:l.data)||void 0===t?void 0:t.id},Cell:({cell:e})=>t.createElement(s.rU,{to:`/samples/${e.value}`},e.value)},{id:"description_id",Header:"Sample description",accessor:e=>{var a,l,t,s;return(null===(s=null==N?void 0:N[null===(t=null===(l=null===(a=null==e?void 0:e.relationships)||void 0===a?void 0:a.sample)||void 0===l?void 0:l.data)||void 0===t?void 0:t.id])||void 0===s?void 0:s.description)||""},Cell:({cell:e})=>{return a=e.value,(a=(0,i.Z)(a))&&d.test(a)?a.replace(o,n):a;var a}},{id:"assembly_run_id",Header:" Run / Assembly accession",accessor:e=>{var a,l,t,s,i,n;return{assembly:(null===(t=null===(l=null===(a=null==e?void 0:e.relationships)||void 0===a?void 0:a.assembly)||void 0===l?void 0:l.data)||void 0===t?void 0:t.id)||"",run:(null===(n=null===(i=null===(s=null==e?void 0:e.relationships)||void 0===s?void 0:s.run)||void 0===i?void 0:i.data)||void 0===n?void 0:n.id)||""}},Cell:({cell:e})=>t.createElement(t.Fragment,null,e.value.assembly&&t.createElement(s.rU,{to:`/assemblies/${e.value.assembly}`},e.value.assembly),e.value.run&&t.createElement(s.rU,{to:`/runs/${e.value.run}`},e.value.run))},{id:"pipeline_id",Header:"Pipeline version",accessor:e=>e.attributes["pipeline-version"],Cell:({cell:e})=>t.createElement(s.rU,{to:`/pipelines/${e.value}`},e.value)},{id:"analysis_id",Header:"Analysis accession",accessor:e=>e.id,Cell:({cell:e})=>t.createElement(s.rU,{to:`/analyses/${e.value}`},e.value)}],$=((null===(r=null===(l=f.meta)||void 0===l?void 0:l.pagination)||void 0===r?void 0:r.count)||1)>10;return t.createElement(u.Z,{cols:x,data:f,Title:"Analyses",initialPage:E["analyses-page"]-1,initialPageSize:10,className:"mg-anlyses-table",loading:h,isStale:w,namespace:"analyses-",showPagination:$,downloadURL:_})}},5608:(e,a,l)=>{l.d(a,{Z:()=>u});var t=l(7294),s=l(9711),i=l(402),n=l(1699),r=l(6313),o=l(8110),d=l(964),c=l(2119),m=l(9980);const u=({rootEndpoint:e})=>{var a,l;const u=(0,d.Z)(),[v]=(0,c.B)({"assembly-page":1,"assembly-page_size":10,"assembly-order":""},{"assembly-page":Number,"assembly-page_size":Number}),p=((e,a)=>"runs"===e?`runs/${a}/assemblies`:"assemblies")(e,u),{data:g,loading:y,error:b,isStale:E,downloadURL:f}=(0,o.Z)(p,{sample_accession:"samples"===e?u:void 0,page:v["assembly-page"],ordering:v["assembly-order"],page_size:v["assembly-page_size"]});if(y&&!E)return t.createElement(i.Z,{size:"small"});if(b||!g)return t.createElement(n.Z,{error:b});if(!g.data.length)return t.createElement(m.Z,{type:"info",title:"No associated assemblies found."});const h=[{Header:"Assembly ID",accessor:"id",Cell:({cell:e})=>t.createElement(s.rU,{to:`/assemblies/${e.value}`},e.value)},{Header:"Experiment type",accessor:"attributes.experiment-type"},{Header:"WGS ID",accessor:"attributes.wgs-accession"},{Header:"Legacy ID",accessor:"attributes.legacy-accession"},{Header:"Pipeline versions",accessor:"relationships.pipelines.data",Cell:({cell:e})=>e.value.map((({id:e})=>e)).join(", ")}],Z=((null===(l=null===(a=g.meta)||void 0===a?void 0:a.pagination)||void 0===l?void 0:l.count)||1)>10;return t.createElement(r.Z,{cols:h,data:g,initialPage:v["assembly-page"]-1,initialPageSize:10,className:"mg-assembly-table",loading:y,isStale:E,namespace:"assembly-",showPagination:Z,downloadURL:f})}},5478:(e,a,l)=>{l.d(a,{Z:()=>s});var t=l(7294);const s=({label:e,theme:a="primary",children:l})=>t.createElement("div",{className:"vf-grid"},t.createElement("div",{className:`vf-box vf-box--easy vf-box-theme--${a}`},t.createElement("h5",{className:"vf-box__heading"},e),t.createElement("div",{className:"vf-box__text"},l)))},3415:(e,a,l)=>{l.d(a,{Z:()=>s});var t=l(7294);const s=({list:e})=>t.createElement("div",{className:"vf-grid vf-grid__col-2",style:{gridTemplateColumns:"1fr 2fr",rowGap:"0.5rem"}},e.map((({key:e,value:a})=>t.createElement(t.Fragment,{key:e},t.createElement("div",{style:{textAlign:"right"}},e,":"),t.createElement("div",null,"string"==typeof a?a:t.createElement(a,null))))))},964:(e,a,l)=>{l.d(a,{Z:()=>s});var t=l(6974);const s=()=>{const e=(0,t.TH)();let{pathname:a}=e;a.trim().endsWith("/")&&(a=a.trim().slice(0,-1));const l=a.split("/");return null==l?void 0:l[l.length-1]}},4743:(e,a,l)=>{l.r(a),l.d(a,{default:()=>g});var t=l(7294),s=l(8110),i=l(964),n=l(402),r=l(1699),o=l(5478),d=l(3415),c=l(2531),m=l(9711),u=l(5608),v=l(5222),p=l(8101);const g=()=>{const e=(0,i.Z)(),{data:a,loading:l,error:g}=(0,s.Z)(`runs/${e}`);if(l)return t.createElement(n.Z,{size:"large"});if(g)return t.createElement(r.Z,{error:g});if(!a)return t.createElement(n.Z,null);const{data:y}=a,b=[{key:"Study",value:()=>t.createElement(m.rU,{to:`/studies/${y.relationships.study.data.id}`},y.relationships.study.data.id)},{key:"Sample",value:()=>t.createElement(m.rU,{to:`/samples/${y.relationships.sample.data.id}`},y.relationships.sample.data.id)},{key:"ENA accession",value:()=>t.createElement(c.Z,{href:`${p.sn}${y.id}`},y.id)},{key:"Experiment type",value:String(y.attributes["experiment-type"])},{key:"Instrument model",value:String(y.attributes["instrument-model"])},{key:"\tInstrument platform type",value:String(y.attributes["instrument-platform"])}];return t.createElement("section",{className:"vf-content"},t.createElement("h2",null,"Run: ",(null==y?void 0:y.id)||""),t.createElement("section",{className:"vf-grid"},t.createElement("div",{className:"vf-stack vf-stack--200"},t.createElement(o.Z,{label:"Description"},t.createElement(d.Z,{list:b})),t.createElement(o.Z,{label:"Associated analyses"},t.createElement(v.Z,{rootEndpoint:"runs"})),t.createElement(o.Z,{label:"Associated assemblies"},t.createElement(u.Z,{rootEndpoint:"runs"})))))}},8101:(e,a,l)=>{l.d(a,{sn:()=>t,bV:()=>s,QD:()=>i,s8:()=>n,mL:()=>r,gM:()=>o});const t="https://www.ebi.ac.uk/ena/browser/view/",s=" https://img.jgi.doe.gov/cgi-bin/m/main.cgi?section=TaxonDetail&page=taxonDetail&taxon_oid=",i="https://www.ncbi.nlm.nih.gov/assembly/",n="https://www.ncbi.nlm.nih.gov/biosample/?term=",r="https://www.ncbi.nlm.nih.gov/bioproject/",o="https://www.patricbrc.org/view/Genome/"},4073:(e,a,l)=>{l.d(a,{Z:()=>t});const t=function(e,a){for(var l=-1,t=null==e?0:e.length,s=Array(t);++l<t;)s[l]=a(e[l],l,e);return s}},2845:(e,a,l)=>{l.d(a,{Z:()=>d});var t=l(7685),s=l(4073),i=l(7771),n=l(2714),r=t.Z?t.Z.prototype:void 0,o=r?r.toString:void 0;const d=function e(a){if("string"==typeof a)return a;if((0,i.Z)(a))return(0,s.Z)(a,e)+"";if((0,n.Z)(a))return o?o.call(a):"";var l=a+"";return"0"==l&&1/a==-1/0?"-0":l}},7771:(e,a,l)=>{l.d(a,{Z:()=>t});const t=Array.isArray},7338:(e,a,l)=>{l.d(a,{Z:()=>s});var t=l(2845);const s=function(e){return null==e?"":(0,t.Z)(e)}}}]);
//# sourceMappingURL=743.16fc174d.chunk.js.map