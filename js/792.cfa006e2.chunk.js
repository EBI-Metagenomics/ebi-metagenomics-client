"use strict";(self.webpackChunkmgportalv2=self.webpackChunkmgportalv2||[]).push([[792],{1274:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(7294),r=a(6974);const s=({hash:e,isDefault:t=!1,children:a})=>{const s=(0,r.TH)(),o=(0,r.s0)();return(0,n.useEffect)((()=>{""===s.hash&&""!==e&&t&&o(e,{replace:!0})})),s.hash===e?n.createElement(n.Fragment,null,a):null}},6313:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(7294),r=a(9521),s=a(402),o=a(2119);const l=({currentPageIndex:e,pageIndex:t,gotoPage:a})=>e===t?n.createElement("li",{className:"vf-pagination__item vf-pagination__item--is-active"},n.createElement("span",{className:"vf-pagination__label","aria-current":"page"},n.createElement("span",{className:"vf-u-sr-only"},"Page "),e+1)):n.createElement("li",{className:"vf-pagination__item"},n.createElement("button",{type:"button",onClick:()=>a(t),className:"vf-button vf-button--link vf-pagination__link"},n.createElement("span",{className:"vf-u-sr-only"}," page"),t+1)),i=({cols:e,data:t,title:a,initialPage:i=0,initialPageSize:c=25,className:m="",namespace:g="",showPagination:u=!0,sortable:p=!1,loading:d=!1,isStale:b=!1})=>{const[h,f]=(0,o.B)({[`${g}page`]:1,[`${g}order`]:"",[`${g}page_size`]:c},{[`${g}page`]:Number,[`${g}page_size`]:Number}),{getTableProps:v,getTableBodyProps:_,headerGroups:E,rows:N,prepareRow:y,canPreviousPage:w,canNextPage:S,pageCount:P,gotoPage:k,setPageSize:x,nextPage:Z,previousPage:$,state:{pageIndex:j,pageSize:C,sortBy:O}}=(0,r.useTable)({columns:e,data:t.data,initialState:{pageIndex:i,pageSize:h[`${g}page_size`]},pageCount:t.meta.pagination.pages,manualPagination:!0,manualSortBy:!0},r.useSortBy,r.usePagination),z=(0,n.useRef)(null),[B,T]=(0,n.useState)(!1);(0,n.useEffect)((()=>{u&&h[`${g}page`]!==j+1&&(f(Object.assign(Object.assign({},h),{[`${g}page`]:j+1})),z.current&&B&&(z.current.scrollIntoView(),T(!1)))}),[u,f,j]),(0,n.useEffect)((()=>{u&&h[`${g}page_size`]!==C&&(f(Object.assign(Object.assign({},h),{[`${g}page_size`]:C})),z.current&&B&&(z.current.scrollIntoView(),T(!1)))}),[u,f,C]),(0,n.useEffect)((()=>{if(p){const e=function(e){if(!e.length)return"";const t=e[0];return`${t.desc?"-":""}${t.id.replace(/attributes./g,"").replace(/-/g,"_")}`}(O);if(e===h[`${g}order`])return;f(Object.assign(Object.assign({},h),{[`${g}order`]:e,[`${g}page`]:1})),z.current&&B&&(z.current.scrollIntoView(),T(!1))}}),[u,f,O,p]);const H=(0,n.useMemo)((()=>function(e,t){const a=t>1?[0,1]:[0],n=t>2?[Math.max(2,e-2)]:[];for(let e=n[0]+1;e<t-2&&n.length<5;e+=1)n.push(e);let r=[];return t>7?r=[t-2,t-1]:t>6&&(r=[t-1]),{startingPages:a,endingPages:r,adjacentPages:n,hasJumpFromStart:!!n.length&&n[0]>a[a.length-1]+1,hasJumpToEnd:!!r.length&&!!n.length&&r[0]>n[n.length-1]+1}}(j,P)),[j,P]),I=e=>(T(!0),k(e)),q=e=>(T(!0),x(+e.target.value));return d&&!b?n.createElement(s.Z,{size:"small"}):n.createElement("section",null,n.createElement("div",{className:"mg-table-overlay-container"},n.createElement("div",{className:d&&b?"mg-table-overlay":void 0}),n.createElement("table",Object.assign({},v,{className:`vf-table--striped ${m}`,ref:z}),a&&n.createElement("caption",{className:"vf-table__caption"},"string"==typeof a?a:n.createElement(a,null)),n.createElement("thead",{className:"vf-table__header"},E.map((e=>n.createElement("tr",Object.assign({},e.getHeaderGroupProps(),{className:"vf-table__row"}),e.headers.map((e=>n.createElement("th",Object.assign({},p&&e.canSort?e.getHeaderProps(e.getSortByToggleProps()):{key:e.id},{className:"vf-table__heading"}),e.render("Header"),p&&e.canSort&&n.createElement(n.Fragment,null," ",n.createElement("span",null,e.isSorted?e.isSortedDesc?n.createElement("i",{className:"icon icon-common icon-sort-down"}):n.createElement("i",{className:"icon icon-common icon-sort-up"}):n.createElement("i",{className:"icon icon-common icon-sort"})))))))))),n.createElement("tbody",Object.assign({},_(),{className:"vf-table__body"}),N.map((e=>(y(e),n.createElement("tr",Object.assign({},e.getRowProps(),{className:"vf-table__row"}),e.cells.map((e=>n.createElement("td",Object.assign({},e.getCellProps(),{className:"vf-table__cell"}),e.render("Cell"))))))))))),u&&n.createElement("section",{className:"mg-table-footer"},n.createElement("label",{className:"vf-form__label"},"Page Size:",n.createElement("select",{className:"vf-form__select",value:h[`${g}page_size`],onBlur:q,onChange:q},[10,25,50].map((e=>n.createElement("option",{key:e,value:e},"Show ",e))))),n.createElement("nav",{className:"vf-pagination","aria-label":"Pagination"},n.createElement("ul",{className:"vf-pagination__list"},n.createElement("li",{className:"vf-pagination__item vf-pagination__item--previous-page"},n.createElement("button",{disabled:!w,type:"button",onClick:$,className:"vf-button vf-button--link vf-pagination__link"},"Previous",n.createElement("span",{className:"vf-u-sr-only"}," page"))),H.startingPages.map((e=>n.createElement(l,{key:e,currentPageIndex:j,pageIndex:e,gotoPage:I}))),H.hasJumpFromStart&&n.createElement("li",{className:"vf-pagination__item"},n.createElement("span",{className:"vf-pagination__label"},"...")),H.adjacentPages.map((e=>n.createElement(l,{key:e,currentPageIndex:j,pageIndex:e,gotoPage:I}))),H.hasJumpToEnd&&n.createElement("li",{className:"vf-pagination__item"},n.createElement("span",{className:"vf-pagination__label"},"...")),H.endingPages.map((e=>n.createElement(l,{key:e,currentPageIndex:j,pageIndex:e,gotoPage:I}))),n.createElement("li",{className:"vf-pagination__item vf-pagination__item--next-page"},n.createElement("button",{disabled:!S,type:"button",onClick:Z,className:"vf-button vf-button--link vf-pagination__link"},"Next",n.createElement("span",{className:"vf-u-sr-only"}," page")))))))}},1699:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(7294),r=a(7838);const s=()=>{window.location.reload()},o=({error:e})=>e&&e.type!==r.ZB.NullURL?n.createElement("div",{className:"vf-box vf-box-theme--primary vf-box--easy",style:{backgroundColor:"lemonchiffon"}},n.createElement("h3",{className:"vf-box__heading"},n.createElement("span",{className:"icon icon-common icon-exclamation-triangle"})," Error Fetching Data"),n.createElement("p",{className:"vf-box__text"},(null==e?void 0:e.type)===r.ZB.FetchError&&`There were problems with the request. [${e.error}]`,(null==e?void 0:e.type)===r.ZB.NotOK&&`The response from the server was not OK [Status: ${e.status}].`,(null==e?void 0:e.type)===r.ZB.JSONError&&`The recovered resource didn't follow the expected format [${e.error}].`),n.createElement("div",{className:"mg-right"},n.createElement("button",{type:"button",className:"vf-button vf-button--tertiary vf-button--sm ",onClick:s},"Refresh"))):null},4821:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(7294),r=a(6974),s=a(9711);const o=({tabs:e})=>{const t=(0,r.TH)();return n.createElement("div",{className:"vf-tabs mg-search-tabs"},n.createElement("ul",{className:"vf-tabs__list"},e.map((({label:e,to:a})=>n.createElement("li",{className:"vf-tabs__item",key:a},n.createElement(s.rU,{className:"vf-tabs__link "+(a===t.pathname||a.startsWith("#")&&a===t.hash||"#"===a&&""===t.hash?"is-active":""),to:a},"string"==typeof e?e:n.createElement(e,null)))))))}},2119:(e,t,a)=>{a.d(t,{B:()=>o});var n=a(7294),r=a(6974);const s=(e,t,a)=>{const n={},r=new URLSearchParams(t);return Object.entries(e).forEach((([e,t])=>{const s=a[e]||String;n[e]=s(r.get(e)||t)})),n},o=(e,t={})=>{const a=(0,r.TH)(),o=(0,r.s0)(),l=(0,n.useMemo)((()=>s(e,a.search,t)),[e,a.search,t]),[i,c]=(0,n.useState)(l);return(0,n.useEffect)((()=>{const n=s(e,a.search,t);JSON.stringify(n)!==JSON.stringify(i)&&c(n)}),[a.search,i,e,t]),[i,t=>{if(JSON.stringify(t)===JSON.stringify(i))return;const n=new URLSearchParams(a.search);let r=!1;Object.entries(e).forEach((([e,a])=>{const s=e in t?t[e]:a;t[e]!==i[e]&&(n.set(e,String(s)),s===a&&n.delete(e),r=!0)})),r&&(a.search=n.toString(),o(a))}]}},964:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(6974);const r=()=>{const e=(0,n.TH)().pathname.split("/");return null==e?void 0:e[e.length-1]}},792:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var n=a(7294),r=a(8110),s=a(964),o=a(402),l=a(1699),i=a(4821),c=a(9711),m=a(6313),g=a(2119),u=a(5058),p=a(5457);const d=()=>{const e=(0,s.Z)(),[t]=(0,g.B)({"genomes-page":1,"genomes-page_size":10,"genomes-order":""},{"genomes-page":Number,"genomes-page_size":Number}),{data:a,loading:i,error:d,isStale:b}=(0,r.Z)(`genome-catalogues/${e}/genomes`,{page:t["genomes-page"],ordering:t["genomes-order"],page_size:t["genomes-page_size"]});if(i&&!b)return n.createElement(o.Z,{size:"small"});if(d||!a)return n.createElement(l.Z,{error:d});const h=[{id:"biome_id",Header:"Biome",accessor:e=>{var t;return null===(t=e.relationships.biome.data)||void 0===t?void 0:t.id},Cell:({cell:e})=>n.createElement("span",{className:`biome_icon icon_xs ${(0,u.G)(e.value)}`,style:{float:"initial"}}),disableSortBy:!0},{id:"genome",Header:"Accession",accessor:"id",Cell:({cell:e})=>n.createElement(c.rU,{to:`/genomes/${e.value}`},e.value)},{Header:"Length",accessor:"attributes.length"},{Header:"Num. of genomes",accessor:"attributes.num-genomes-total"},{Header:"Completeness",accessor:"attributes.completeness"},{Header:"Contamination",accessor:"attributes.contamination"},{Header:"Type",accessor:"attributes.type",disableSortBy:!0},{Header:"Taxonomy",accessor:"attributes.taxon-lineage",Cell:({cell:e})=>(0,p.FS)(e.value,!0),disableSortBy:!0},{id:"last_update",Header:"Last Updated",accessor:"attributes.last-update",Cell:({cell:e})=>new Date(e.value).toLocaleDateString()}];return n.createElement(m.Z,{cols:h,data:a,initialPage:t["genomes-page"]-1,initialPageSize:10,className:"mg-anlyses-table",loading:i,isStale:b,namespace:"genomes-",sortable:!0})},b=({tree:e,depth:t=0,shouldExpand:a=!0,collapsing:r=!1,getLabel:s=(e=>e.name)})=>{var o;const[l,i]=(0,n.useState)(a),[c,m]=(0,n.useState)(!1),[g,u]=(0,n.useState)(!1);return(0,n.useEffect)((()=>m(!0)),[]),(0,n.useEffect)((()=>{g&&setTimeout((()=>i(!1)),400)}),[g]),n.createElement("div",{style:{marginLeft:.5*t+"rem"}},n.createElement("div",{className:"mg-hierarchy-selector "+(c&&!r?"show":"")},(null===(o=e.children)||void 0===o?void 0:o.length)?n.createElement("button",{type:"button",className:"mg-expander",onClick:()=>{u(l),l||i(!0)}},l?"▾":"▸"):n.createElement("span",{className:"mg-hierarchy-spacer"}),n.createElement("div",null,n.createElement("span",{className:"mg-hierarchy-label"},s(e)," ",e.countgen&&n.createElement("span",{className:"mg-number"},e.countgen)))),e.children&&e.children.length&&l&&e.children.map((a=>n.createElement(b,{key:a.name,tree:a,depth:t+1,shouldExpand:1===e.countgen&&1===a.countgen,getLabel:s,collapsing:g}))))},h=b,f=()=>{const e=(0,s.Z)(),{data:t,loading:a,error:i}=(0,r.Z)(`genome-catalogues/${e}/downloads/phylo_tree.json`);return a?n.createElement(o.Z,{size:"large"}):i?n.createElement(l.Z,{error:i}):t?n.createElement(h,{tree:t,getLabel:e=>{const t=e.name.split("__").pop();return"genome"===e.type?n.createElement(c.rU,{to:`/genomes/${t}`,style:{backgroundColor:"white"}},t):t||"Unknown"}}):n.createElement(o.Z,null)};var v=a(6528),_=a(1274);const E=[{label:"Genome list",to:"#"},{label:"Taxonomy tree",to:"#phylo-tab"},{label:"Protein catalogue",to:"#protein-catalog-tab"},{label:"Search by Gene",to:"#genome-search-tab"},{label:"Search by MAG",to:"#genome-search-mag-tab"}],N=()=>{const e=(0,s.Z)(),{data:t,loading:a,error:c}=(0,r.Z)(`genome-catalogues/${e}`);if(a)return n.createElement(o.Z,{size:"large"});if(c)return n.createElement(l.Z,{error:c});if(!t)return n.createElement(o.Z,null);const{data:m}=t;return n.createElement("section",{className:"vf-content"},n.createElement("h2",null,m.attributes.name),n.createElement("div",null,n.createElement(v.Z,null,m.attributes.description)),n.createElement(i.Z,{tabs:E}),n.createElement("section",{className:"vf-grid"},n.createElement("div",{className:"vf-stack vf-stack--200"},n.createElement(_.Z,{hash:"",isDefault:!0},n.createElement(d,null)),n.createElement(_.Z,{hash:"#phylo-tab"},n.createElement(f,null)),n.createElement(_.Z,{hash:"#protein-catalog-tab"},n.createElement("h3",null,m.attributes["protein-catalogue-name"]),n.createElement(v.Z,null,m.attributes["protein-catalogue-description"])))))}},5058:(e,t,a)=>{a.d(t,{G:()=>i});const n={"root:engineered":"engineered_b"},r={"root:engineered:wastewater":"wastewater_b","root:environmental:air":"air_b","root:host-associated:amphibia":"amphibian_b","root:host-associated:arthropoda":"arthropoda_b","root:host-associated:fish":"fish_b","root:host-associated:human":"human_host_b","root:host-associated:insecta":"insect_b","root:host-associated:mammals":"mammals_b","root:host-associated:mollusca":"mollusca_b","root:host-associated:plants":"plant_host_b","root:host-associated:porifera":"porifera_b"},s={"root:environmental:aquatic:freshwater":"freshwater_b","root:environmental:aquatic:marine":"marine_b","root:environmental:aquatic:thermal springs":"hotspring_b","root:environmental:terrestrial:soil":"soil_b","root:environmental:terrestrial:volcanic":"vulcano_b","root:host-associated:human:digestive system":"human_gut_b","root:host-associated:human:skin":"skin_b"},o={"root:environmental:aquatic:freshwater:drinking water":"drinking_water_b","root:environmental:aquatic:freshwater:groundwater":"groundwater_b","root:environmental:aquatic:freshwater:ice":"ice_b","root:environmental:aquatic:freshwater:lake":"lake_b","root:environmental:aquatic:freshwater:lotic":"river_b","root:environmental:aquatic:marine:hydrothermal vents":"hydrothermal_vents_b","root:environmental:terrestrial:soil:wetlands":"wetlands_b","root:host-associated:human:digestive system:oral":"mouth_b","root:host-associated:human:respiratory system:pulmonary system":"lung_b","root:host-associated:mammals:nervous system:brain":"brain_b"},l={"root:environmental:aquatic:freshwater:groundwater:cave water":"cave_b","root:environmental:aquatic:freshwater:ice:glacier":"glacier_b","root:environmental:terrestrial:soil:grasslands":"grassland_b","root:environmental:terrestrial:soil:loam:forest soil":"forest_b","root:environmental:terrestrial:soil:sand:desert":"desert_b"};function i(e){const t=(e||"").split(":").map((e=>e.toLowerCase())),a=t.slice(0,2).join(":"),i=t.slice(0,3).join(":"),c=t.slice(0,4).join(":"),m=t.slice(0,5).join(":"),g=t.slice(0,6).join(":");return l[g]||o[m]||s[c]||r[i]||n[a]||"default_b"}},5457:(e,t,a)=>{function n(e,t=""){return e.replace(/;/g,"").replace(/[d|p|c|o|f|g|s]__/g,t)}function r(e,t){const a=e.split(";");let r=a.pop();for(;-1===r.indexOf("s__");)r=a.pop();for(;r.length<=3;)r=a.pop();return t&&r?n(r):r}a.d(t,{wK:()=>n,FS:()=>r,DC:()=>s});const s=["#058dc7","#82d23d","#e26736","#fbe300","#24cbe5","#c49ecc","#ffc08a","#708090","#6af9c4","#caae74","#cccccc"]}}]);
//# sourceMappingURL=792.cfa006e2.chunk.js.map