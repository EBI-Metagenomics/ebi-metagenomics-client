{"version":3,"file":"js/798.5ae5aa94.chunk.js","mappings":"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","sources":["webpack://mgportalv2/./src/components/UI/FileUploaderButton/index.tsx","webpack://mgportalv2/./src/components/UI/Tooltip/index.tsx","webpack://mgportalv2/./src/components/Genomes/Table/index.tsx","webpack://mgportalv2/./src/components/UI/Hierarchy/index.tsx","webpack://mgportalv2/./src/components/Genomes/PhyloTree/index.tsx","webpack://mgportalv2/./src/components/UI/InfoBanner/index.tsx","webpack://mgportalv2/./src/hooks/data/useMgnifyBigsiSearch/index.tsx","webpack://mgportalv2/./src/components/Genomes/Bigsi/Results.tsx","webpack://mgportalv2/./src/components/Genomes/Bigsi/index.tsx","webpack://mgportalv2/./src/pages/GenomeCatalogue/index.tsx","webpack://mgportalv2/./src/utils/biomes.ts"],"sourcesContent":["import React, { useRef, FormEvent } from 'react';\n\ntype FileUploaderButtonProps = {\n  onChange: (event: FormEvent) => void;\n  accept?: string;\n};\nconst FileUploaderButton: React.FC<FileUploaderButtonProps> = ({\n  onChange,\n  accept,\n}) => {\n  const fileInput = useRef(null);\n  return (\n    <>\n      <input\n        type=\"file\"\n        hidden\n        ref={fileInput}\n        onChange={onChange}\n        accept={accept}\n      />\n      <button\n        className=\"vf-button vf-button--primary vf-button--sm\"\n        onClick={() => fileInput.current?.click()}\n        type=\"button\"\n      >\n        Browse for file...\n      </button>\n    </>\n  );\n};\n\nexport default FileUploaderButton;\n","import React from 'react';\nimport Tippy from '@tippyjs/react';\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport 'tippy.js/dist/tippy.css';\n\ntype TooltipProps = {\n  content: React.ReactNode;\n  children?: React.ReactNode;\n};\n\nconst Tooltip: React.FC<TooltipProps> = ({ content, children }) => (\n  <Tippy content={content}>{children as React.ReactElement}</Tippy>\n);\nexport default Tooltip;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport Loading from 'components/UI/Loading';\nimport FetchError from 'components/UI/FetchError';\nimport EMGTable from 'components/UI/EMGTable';\nimport useMGnifyData from 'hooks/data/useMGnifyData';\nimport { MGnifyResponseList } from 'hooks/data/useData';\nimport useURLAccession from 'hooks/useURLAccession';\nimport { useQueryParametersState } from 'hooks/useQueryParamState';\nimport { getBiomeIcon } from 'utils/biomes';\nimport { getSimpleTaxLineage } from 'utils/taxon';\n\nconst initialPageSize = 10;\nconst GenomesTable: React.FC = () => {\n  const accession = useURLAccession();\n  const [queryParameters] = useQueryParametersState(\n    {\n      'genomes-page': 1,\n      'genomes-page_size': initialPageSize,\n      'genomes-order': '',\n    },\n    {\n      'genomes-page': Number,\n      'genomes-page_size': Number,\n    }\n  );\n  const { data, loading, error, isStale } = useMGnifyData(\n    `genome-catalogues/${accession}/genomes`,\n    {\n      page: queryParameters['genomes-page'] as number,\n      ordering: queryParameters['genomes-order'] as string,\n      page_size: queryParameters['genomes-page_size'] as number,\n    }\n  );\n  if (loading && !isStale) return <Loading size=\"small\" />;\n  if (error || !data) return <FetchError error={error} />;\n\n  const columns = [\n    {\n      id: 'biome_id',\n      Header: 'Biome',\n      accessor: (genome) => genome.relationships.biome.data?.id,\n      Cell: ({ cell }) => (\n        <span\n          className={`biome_icon icon_xs ${getBiomeIcon(cell.value)}`}\n          style={{ float: 'initial' }}\n        />\n      ),\n      disableSortBy: true,\n    },\n    {\n      id: 'genome',\n      Header: 'Accession',\n      accessor: 'id',\n      Cell: ({ cell }) => (\n        <Link to={`/genomes/${cell.value}`}>{cell.value}</Link>\n      ),\n    },\n    {\n      Header: 'Length',\n      accessor: 'attributes.length',\n    },\n    {\n      Header: 'Num. of genomes',\n      accessor: 'attributes.num-genomes-total',\n    },\n    {\n      Header: 'Completeness',\n      accessor: 'attributes.completeness',\n    },\n    {\n      Header: 'Contamination',\n      accessor: 'attributes.contamination',\n    },\n    {\n      Header: 'Type',\n      accessor: 'attributes.type',\n      disableSortBy: true,\n    },\n    {\n      Header: 'Taxonomy',\n      accessor: 'attributes.taxon-lineage',\n      Cell: ({ cell }) => getSimpleTaxLineage(cell.value, true),\n      disableSortBy: true,\n    },\n    {\n      id: 'last_update',\n      Header: 'Last Updated',\n      accessor: 'attributes.last-update',\n      Cell: ({ cell }) => new Date(cell.value).toLocaleDateString(),\n    },\n  ];\n\n  return (\n    <EMGTable\n      cols={columns}\n      data={data as MGnifyResponseList}\n      initialPage={(queryParameters['genomes-page'] as number) - 1}\n      initialPageSize={initialPageSize}\n      className=\"mg-anlyses-table\"\n      loading={loading}\n      isStale={isStale}\n      namespace=\"genomes-\"\n      sortable\n    />\n  );\n};\n\nexport default GenomesTable;\n","import React, { useState, useEffect } from 'react';\nimport './style.css';\n\nconst ANIMATION_TIME = 400;\n\nexport type Node = {\n  name: string;\n  countgen?: number;\n  type: string;\n  children?: Node[];\n};\n\ninterface HierarchyNodeProps {\n  tree: Node;\n  depth?: number;\n  shouldExpand?: boolean;\n  collapsing?: boolean;\n  getLabel?: (node: Node) => string | React.ReactElement;\n}\nconst HierarchyNode: React.FC<HierarchyNodeProps> = ({\n  tree,\n  depth = 0,\n  shouldExpand = true,\n  collapsing = false,\n  getLabel = (node) => node.name,\n}) => {\n  const [displayChildren, setDisplayChildren] = useState(shouldExpand);\n  const [show, setShow] = useState(false);\n  const [hideChildren, setHideChildren] = useState(false);\n  useEffect(() => setShow(true), []);\n  useEffect(() => {\n    if (hideChildren) {\n      setTimeout(() => setDisplayChildren(false), ANIMATION_TIME);\n    }\n  }, [hideChildren]);\n  const handleExpanderClick = (): void => {\n    setHideChildren(displayChildren);\n    if (!displayChildren) setDisplayChildren(true);\n  };\n  return (\n    <div\n      style={{\n        marginLeft: `${depth * 0.5}rem`,\n      }}\n    >\n      <div\n        className={`mg-hierarchy-selector ${show && !collapsing ? 'show' : ''}`}\n      >\n        {tree.children?.length ? (\n          <button\n            type=\"button\"\n            className=\"mg-expander\"\n            onClick={handleExpanderClick}\n          >\n            {displayChildren ? '▾' : '▸'}\n          </button>\n        ) : (\n          <span className=\"mg-hierarchy-spacer\" />\n        )}\n        <div>\n          <span className=\"mg-hierarchy-label\">\n            {getLabel(tree)}{' '}\n            {tree.countgen && (\n              <span className=\"mg-number\">{tree.countgen}</span>\n            )}\n          </span>\n        </div>\n      </div>\n      {tree.children &&\n        tree.children.length &&\n        displayChildren &&\n        tree.children.map((child) => (\n          <HierarchyNode\n            key={child.name}\n            tree={child}\n            depth={depth + 1}\n            shouldExpand={tree.countgen === 1 && child.countgen === 1}\n            getLabel={getLabel}\n            collapsing={hideChildren}\n          />\n        ))}\n    </div>\n  );\n};\n\nexport default HierarchyNode;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport Loading from 'components/UI/Loading';\nimport FetchError from 'components/UI/FetchError';\nimport HierarchyNode, { Node } from 'components/UI/Hierarchy';\nimport useMGnifyData from 'hooks/data/useMGnifyData';\nimport useURLAccession from 'hooks/useURLAccession';\n\nconst PhyloTree: React.FC = () => {\n  const accession = useURLAccession();\n  const { data, loading, error } = useMGnifyData(\n    `genome-catalogues/${accession}/downloads/phylo_tree.json`\n  );\n  if (loading) return <Loading size=\"large\" />;\n  if (error) return <FetchError error={error} />;\n  if (!data) return <Loading />;\n  return (\n    <HierarchyNode\n      tree={data as unknown as Node}\n      getLabel={(node) => {\n        const label = node.name.split('__').pop();\n        if (node.type === 'genome') {\n          return (\n            <Link to={`/genomes/${label}`} style={{ backgroundColor: 'white' }}>\n              {label}\n            </Link>\n          );\n        }\n\n        return label || 'Unknown';\n      }}\n    />\n  );\n};\nexport default PhyloTree;\n","import React from 'react';\n\nconst InfoBanner: React.FC<{ Content: string | React.ElementType }> = ({\n  Content,\n}) => {\n  return (\n    <div className=\"vf-banner vf-banner--alert vf-banner--info\">\n      <div className=\"vf-banner__content\">\n        {Content &&\n          (typeof Content === 'string' ? (\n            <p className=\"vf-banner__text\">Content</p>\n          ) : (\n            <Content />\n          ))}\n      </div>\n    </div>\n  );\n};\n\nexport default InfoBanner;\n","import { useContext } from 'react';\n\nimport useData, {\n  MGnifyResponseGenericObj,\n  ResponseFormat,\n} from 'hooks/data/useData';\nimport UserContext from 'pages/Login/UserContext';\n\nconst useMgnifyBigsiSearch: (\n  sequence: string,\n  threshold: number,\n  cataloguesFilter: string\n) => MGnifyResponseGenericObj = (sequence, threshold, cataloguesFilter) => {\n  const { config } = useContext(UserContext);\n  const formData = new FormData();\n  formData.append('seq', sequence);\n  formData.append('threshold', String(threshold));\n  formData.append('catalogues_filter', cataloguesFilter);\n\n  const data = useData(\n    sequence.length && String(threshold).length && cataloguesFilter.length\n      ? `${config.api}genome-search`\n      : null,\n    ResponseFormat.JSON,\n    {\n      method: 'POST',\n      body: formData,\n    }\n  );\n  return data as MGnifyResponseGenericObj;\n};\n\nexport default useMgnifyBigsiSearch;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport useMgnifyBigsiSearch from 'hooks/data/useMgnifyBigsiSearch';\nimport Loading from 'components/UI/Loading';\nimport FetchError from 'components/UI/FetchError';\nimport EMGTable from 'components/UI/EMGTable';\nimport { getSimpleTaxLineage, cleanTaxLineage } from 'utils/taxon';\nimport Tooltip from 'src/components/UI/Tooltip';\n\ntype ResultsProps = {\n  sequence: string;\n  threshold: number;\n  cataloguesFilter: string;\n};\nconst Results: React.FC<ResultsProps> = ({\n  sequence,\n  threshold,\n  cataloguesFilter,\n}) => {\n  const { data, loading, error } = useMgnifyBigsiSearch(\n    sequence,\n    threshold,\n    cataloguesFilter\n  );\n  if (loading) return <Loading />;\n  if (error) return <FetchError error={error} />;\n\n  const columns = [\n    {\n      Header: 'Genome accession',\n      accessor: 'mgnify.id',\n      Cell: ({ cell }) => (\n        <Link to={`/genomes/${cell.value}`}>{cell.value}</Link>\n      ),\n    },\n    {\n      Header: 'Taxonomic assignment',\n      accessor: 'mgnify.attributes.taxon-lineage',\n      Cell: ({ cell }) => (\n        <>\n          {getSimpleTaxLineage(cell.value, true)}{' '}\n          <Tooltip content={cleanTaxLineage(cell.value, ' > ')}>\n            <sup>\n              <span className=\"icon icon-common icon-info\" />\n            </sup>\n          </Tooltip>\n        </>\n      ),\n    },\n    {\n      Header: 'Genome length',\n      accessor: 'mgnify.attributes.length',\n    },\n    {\n      Header: 'Num. contigs',\n      accessor: 'mgnify.attributes.num-contigs',\n    },\n    {\n      Header: 'Genome completeness',\n      accessor: 'mgnify.attributes.completeness',\n    },\n    {\n      Header: 'Genome contamination',\n      accessor: 'mgnify.attributes.contamination',\n    },\n    {\n      Header: 'Geographic origin',\n      accessor: 'mgnify.attributes.geographic-origin',\n    },\n    {\n      Header: 'Num. K-mers in query',\n      accessor: 'bigsi.num_kmers',\n    },\n    {\n      Header: 'Num. K-mers found in genome',\n      accessor: 'bigsi.num_kmers_found',\n    },\n    {\n      Header: '% K-mers found',\n      accessor: 'bigsi.percent_kmers_found',\n    },\n    {\n      Header: 'BLAST score (log p)',\n      accessor: (result) => ({\n        score: result.bigsi.score,\n        pvalue: result.bigsi.log_pvalue,\n      }),\n      Cell: ({ cell }) => `${cell.value.score} (${cell.value.pvalue})`,\n    },\n  ];\n  if (!data) return null;\n\n  return (\n    <section>\n      <h3>BIGSI Results</h3>\n      <EMGTable\n        cols={columns}\n        data={data.results as Record<string, unknown>[]}\n        initialPageSize={100}\n        className=\"mg-anlyses-table\"\n        loading={loading}\n        showPagination={false}\n      />\n    </section>\n  );\n};\n\nexport default Results;\n","import React, { useState, useRef, useEffect } from 'react';\nimport 'textarea-sequence/dist/textarea-sequence';\n\nimport ExtLink from 'src/components/UI/ExtLink';\nimport Tooltip from 'components/UI/Tooltip';\n\nimport InfoBanner from 'src/components/UI/InfoBanner';\nimport FileUploaderButton from 'src/components/UI/FileUploaderButton';\nimport BigsiResults from './Results';\n\nimport example1 from './examples/human-gut-v2-0.txt';\nimport example2 from './examples/marine-v1-0.txt';\nimport example3 from './examples/cow-rumen-v1-0.txt';\nimport example4 from './examples/human-oral-v1-0.txt';\nimport './style.css';\n\nconst KMERS_DEFAULT = 0.4;\nconst MIN_BASES = 50;\n\nconst examples = {\n  'human-gut-v2-0': example1,\n  'marine-v1-0': example2,\n  'rumen-v1-0': example3,\n  'human-oral-v1-0': example4,\n};\n\ntype BigsyProps = {\n  catalogueName: string;\n  catalogueID: string;\n};\nconst BigsiSearch: React.FC<BigsyProps> = ({ catalogueName, catalogueID }) => {\n  const textareaSeq = useRef(null);\n  const [shouldSearch, setShouldSearch] = useState(false);\n  const [kmers, setKmers] = useState(KMERS_DEFAULT);\n  const [errors, setErrors] = useState<{\n    tooShort?: boolean;\n    multipleSequences?: boolean;\n    hasInvalidCharacters?: boolean;\n  }>({});\n  const [valid, setValid] = useState(false);\n  useEffect(() => {\n    textareaSeq.current.addEventListener('error-change', (e) => {\n      setErrors(e.detail.errors);\n      setValid(textareaSeq.current.quill.valid);\n    });\n  }, []);\n\n  const setSequence = (seq: string): void => {\n    textareaSeq.current.quill.setText(seq);\n  };\n\n  const handleExampleClick = (): void => {\n    if (catalogueID in examples) setSequence(examples[catalogueID]);\n    else setSequence(example1);\n  };\n\n  const handleKmersChange = (event): void => {\n    setKmers(Math.min(1, Math.max(0, Number(event.target.value))));\n  };\n  const handleClear = (): void => {\n    setSequence('');\n    setKmers(KMERS_DEFAULT);\n    setShouldSearch(false);\n  };\n\n  const handleFileLoad = (event): void => {\n    const { files } = event.target;\n    const reader = new FileReader();\n\n    reader.addEventListener(\n      'load',\n      () => setSequence(reader.result as string),\n      false\n    );\n\n    if (files && files.length) {\n      reader.readAsText(files[0]);\n    }\n  };\n\n  const handleCleanup = (): void => {\n    textareaSeq.current.cleanUp();\n  };\n  return (\n    <section id=\"genome-search\">\n      <section>\n        <h3>Search DNA fragments in the {catalogueName} catalogue</h3>\n        <p>\n          This is a{' '}\n          <ExtLink href=\"https://www.nature.com/articles/s41587-018-0010-1\">\n            BIGSI-based\n          </ExtLink>{' '}\n          search engine designed to query short sequence fragments (50-5,000 bp\n          in length) against representative genomes from the catalogue.\n        </p>\n      </section>\n      <section>\n        <div>\n          <h5>Enter a sequence</h5>\n          <p>You can use any of these methods to enter your sequence:</p>\n          <ul>\n            <li>Paste in your sequence in the area below.</li>\n            <li>\n              <label\n                htmlFor=\"sequence\"\n                id=\"example-seq\"\n                style={{ cursor: 'pointer' }}\n              >\n                Use the{' '}\n                <button\n                  type=\"button\"\n                  className=\"vf-button vf-button--link mg-button-as-link\"\n                  onClick={handleExampleClick}\n                >\n                  example.\n                </button>\n              </label>\n            </li>\n            <li>\n              <label htmlFor=\"fasta-file\" style={{ cursor: 'pointer' }}>\n                Upload a fasta file{' '}\n                <FileUploaderButton\n                  onChange={handleFileLoad}\n                  accept=\".fasta, .fna, .ffn, .frn, .fa, .txt\"\n                />\n              </label>\n            </li>\n          </ul>\n        </div>\n\n        <section>\n          <div />\n          <div>\n            <textarea-sequence\n              id=\"textareaID\"\n              height=\"10em\"\n              min-sequence-length={MIN_BASES}\n              single=\"true\"\n              ref={textareaSeq}\n              className=\"mg-sequence\"\n              disable-header-check\n            />\n          </div>\n          <div className=\"row\">\n            <label htmlFor=\"threshold\">\n              <Tooltip\n                content={`The minimum proportion of K-mers from the query that must be\n              matched (default: ${KMERS_DEFAULT})`}\n              >\n                <sup>\n                  <span className=\"icon icon-common icon-info\" />\n                </sup>\n              </Tooltip>{' '}\n              Threshold:\n            </label>{' '}\n            <input\n              id=\"threshold\"\n              name=\"threshold\"\n              type=\"number\"\n              min=\"0.1\"\n              max=\"1.0\"\n              value={kmers}\n              step=\"0.1\"\n              onChange={handleKmersChange}\n              className=\"vf-form__input mg-threshold\"\n            />\n          </div>\n          {!valid && (\n            <InfoBanner\n              Content={() => (\n                <div>\n                  <p>\n                    The sequence above has the following errors and can&apos;t\n                    be submitted.\n                  </p>\n                  <ul>\n                    {errors.tooShort && (\n                      <li>\n                        The sequence has to have at least {MIN_BASES}{' '}\n                        nucleotides\n                      </li>\n                    )}\n                    {errors.hasInvalidCharacters && (\n                      <li>The sequence has invalid characters</li>\n                    )}\n                    {errors.multipleSequences && (\n                      <li>\n                        There are multiple sequences and only 1 is supported\n                      </li>\n                    )}\n                  </ul>\n                </div>\n              )}\n            />\n          )}\n          <div className=\"mg-right\">\n            {!valid && (\n              <button\n                type=\"button\"\n                className=\"vf-button vf-button--sm vf-button--tertiary mg-button\"\n                onClick={handleCleanup}\n              >\n                CleanUp Sequence\n              </button>\n            )}\n            {valid && (\n              <button\n                id=\"search-button\"\n                type=\"button\"\n                className=\"vf-button vf-button--sm vf-button--primary\"\n                onClick={() => setShouldSearch(true)}\n              >\n                Search\n              </button>\n            )}\n            <button\n              id=\"clear-button\"\n              type=\"button\"\n              className=\"vf-button vf-button--sm vf-button--tertiary\"\n              onClick={handleClear}\n            >\n              Clear\n            </button>\n          </div>\n        </section>\n\n        {shouldSearch && (\n          <BigsiResults\n            sequence={textareaSeq.current.sequence}\n            threshold={kmers}\n            cataloguesFilter={catalogueID}\n          />\n        )}\n\n        <section>\n          <div id=\"results-section\" className=\"hidden\">\n            <div className=\"row\">\n              <div id=\"results-table\" className=\"columns\" />\n            </div>\n          </div>\n        </section>\n      </section>\n    </section>\n  );\n};\n\nexport default BigsiSearch;\n","import React from 'react';\nimport ReactMarkdown from 'react-markdown';\n\nimport useMGnifyData from 'hooks/data/useMGnifyData';\nimport { MGnifyResponseObj } from 'hooks/data/useData';\nimport useURLAccession from 'hooks/useURLAccession';\nimport Loading from 'components/UI/Loading';\nimport FetchError from 'components/UI/FetchError';\nimport Tabs from 'components/UI/Tabs';\nimport GenomesTable from 'components/Genomes/Table';\nimport PhyloTree from 'components/Genomes/PhyloTree';\nimport BigsiSearch from 'components/Genomes/Bigsi';\nimport RouteForHash from 'components/Nav/RouteForHash';\n\nconst tabs = [\n  { label: 'Genome list', to: '#' },\n  { label: 'Taxonomy tree', to: '#phylo-tab' },\n  { label: 'Protein catalogue', to: '#protein-catalog-tab' },\n  { label: 'Search by Gene', to: '#genome-search-tab' },\n  { label: 'Search by MAG', to: '#genome-search-mag-tab' },\n];\n\nconst GenomePage: React.FC = () => {\n  const accession = useURLAccession();\n  const { data, loading, error } = useMGnifyData(\n    `genome-catalogues/${accession}`\n  );\n  if (loading) return <Loading size=\"large\" />;\n  if (error) return <FetchError error={error} />;\n  if (!data) return <Loading />;\n  const { data: genomeData } = data as MGnifyResponseObj;\n  return (\n    <section className=\"vf-content\">\n      <h2>{genomeData.attributes.name}</h2>\n      <div>\n        <ReactMarkdown>\n          {genomeData.attributes.description as string}\n        </ReactMarkdown>\n      </div>\n      <Tabs tabs={tabs} />\n      <section className=\"vf-grid\">\n        <div className=\"vf-stack vf-stack--200\">\n          <RouteForHash hash=\"\" isDefault>\n            <GenomesTable />\n          </RouteForHash>\n          <RouteForHash hash=\"#phylo-tab\">\n            <PhyloTree />\n          </RouteForHash>\n          <RouteForHash hash=\"#genome-search-tab\">\n            <BigsiSearch\n              catalogueName={genomeData.attributes.name as string}\n              catalogueID={genomeData.id}\n            />\n          </RouteForHash>\n          <RouteForHash hash=\"#protein-catalog-tab\">\n            <h3>{genomeData.attributes['protein-catalogue-name'] as string}</h3>\n            <ReactMarkdown>\n              {genomeData.attributes['protein-catalogue-description'] as string}\n            </ReactMarkdown>\n          </RouteForHash>\n        </div>\n      </section>\n    </section>\n  );\n};\n\nexport default GenomePage;\n","const biomeIconMapD2 = {\n  'root:engineered': 'engineered_b',\n};\nconst biomeIconMapD3 = {\n  'root:engineered:wastewater': 'wastewater_b',\n  'root:environmental:air': 'air_b',\n  'root:host-associated:amphibia': 'amphibian_b',\n  'root:host-associated:arthropoda': 'arthropoda_b',\n  'root:host-associated:fish': 'fish_b',\n  'root:host-associated:human': 'human_host_b',\n  'root:host-associated:insecta': 'insect_b',\n  'root:host-associated:mammals': 'mammals_b',\n  'root:host-associated:mollusca': 'mollusca_b',\n  'root:host-associated:plants': 'plant_host_b',\n  'root:host-associated:porifera': 'porifera_b',\n};\nconst biomeIconMapD4 = {\n  'root:environmental:aquatic:freshwater': 'freshwater_b',\n  'root:environmental:aquatic:marine': 'marine_b',\n  'root:environmental:aquatic:thermal springs': 'hotspring_b',\n  'root:environmental:terrestrial:soil': 'soil_b',\n  'root:environmental:terrestrial:volcanic': 'vulcano_b',\n  'root:host-associated:human:digestive system': 'human_gut_b',\n  'root:host-associated:human:skin': 'skin_b',\n};\n\nconst biomeIconMapD5 = {\n  'root:environmental:aquatic:freshwater:drinking water': 'drinking_water_b',\n  'root:environmental:aquatic:freshwater:groundwater': 'groundwater_b',\n  'root:environmental:aquatic:freshwater:ice': 'ice_b',\n  'root:environmental:aquatic:freshwater:lake': 'lake_b',\n  'root:environmental:aquatic:freshwater:lotic': 'river_b',\n  'root:environmental:aquatic:marine:hydrothermal vents':\n    'hydrothermal_vents_b',\n  'root:environmental:terrestrial:soil:wetlands': 'wetlands_b',\n  'root:host-associated:human:digestive system:oral': 'mouth_b',\n  'root:host-associated:human:respiratory system:pulmonary system': 'lung_b',\n  'root:host-associated:mammals:nervous system:brain': 'brain_b',\n};\n\nconst biomeIconMapD6 = {\n  'root:environmental:aquatic:freshwater:groundwater:cave water': 'cave_b',\n  'root:environmental:aquatic:freshwater:ice:glacier': 'glacier_b',\n  'root:environmental:terrestrial:soil:grasslands': 'grassland_b',\n  'root:environmental:terrestrial:soil:loam:forest soil': 'forest_b',\n  'root:environmental:terrestrial:soil:sand:desert': 'desert_b',\n};\n\n/**\n * Retrieve biome icon for a lineage\n */\nexport function getBiomeIcon(lineage: string): string {\n  const lineageList = (lineage || '').split(':').map((x) => x.toLowerCase());\n\n  const lineageD2 = lineageList.slice(0, 2).join(':');\n  const lineageD3 = lineageList.slice(0, 3).join(':');\n  const lineageD4 = lineageList.slice(0, 4).join(':');\n  const lineageD5 = lineageList.slice(0, 5).join(':');\n  const lineageD6 = lineageList.slice(0, 6).join(':');\n\n  const biome =\n    biomeIconMapD6[lineageD6] ||\n    biomeIconMapD5[lineageD5] ||\n    biomeIconMapD4[lineageD4] ||\n    biomeIconMapD3[lineageD3] ||\n    biomeIconMapD2[lineageD2] ||\n    'default_b';\n  return biome;\n}\ntype Biome = { icon?: string; name: string };\nexport function simplifyBiomeIcons(biomes: Biome[]): Biome[] {\n  const groupedBiomes = {};\n  biomes.forEach((b) => {\n    if (groupedBiomes[b.icon]) {\n      groupedBiomes[b.icon].push(b.name);\n    } else {\n      groupedBiomes[b.icon] = [b.name];\n    }\n  });\n  const icons = [];\n  Object.keys(groupedBiomes).forEach((biomeIcon) => {\n    const biomesInGroup = groupedBiomes[biomeIcon].sort().join(', ');\n    icons.push({ name: biomesInGroup, icon: biomeIcon });\n  });\n  return icons;\n}\n"],"names":["onChange","accept","fileInput","useRef","type","hidden","ref","className","onClick","current","click","content","children","accession","useURLAccession","queryParameters","Number","data","loading","error","isStale","useMGnifyData","page","ordering","page_size","Loading","size","FetchError","columns","id","Header","accessor","genome","relationships","biome","Cell","cell","value","style","float","disableSortBy","to","Date","toLocaleDateString","EMGTable","cols","initialPage","initialPageSize","namespace","sortable","HierarchyNode","tree","depth","shouldExpand","collapsing","getLabel","node","name","displayChildren","setDisplayChildren","useState","show","setShow","hideChildren","setHideChildren","useEffect","setTimeout","marginLeft","length","countgen","map","child","key","Hierarchy","label","split","pop","backgroundColor","Content","sequence","threshold","cataloguesFilter","config","useContext","UserContext","formData","FormData","append","String","useData","api","method","body","Tooltip","result","score","bigsi","pvalue","log_pvalue","results","showPagination","examples","catalogueName","catalogueID","textareaSeq","shouldSearch","setShouldSearch","kmers","setKmers","errors","setErrors","valid","setValid","addEventListener","e","detail","quill","setSequence","seq","setText","ExtLink","href","htmlFor","cursor","FileUploaderButton","event","files","target","reader","FileReader","readAsText","height","single","min","max","step","Math","tooShort","hasInvalidCharacters","multipleSequences","cleanUp","tabs","genomeData","attributes","description","Tabs","RouteForHash","hash","isDefault","Bigsi","biomeIconMapD2","biomeIconMapD3","biomeIconMapD4","biomeIconMapD5","biomeIconMapD6","getBiomeIcon","lineage","lineageList","x","toLowerCase","lineageD2","slice","join","lineageD3","lineageD4","lineageD5","lineageD6"],"sourceRoot":""}