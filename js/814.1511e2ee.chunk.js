"use strict";(self.webpackChunkmgportalv2=self.webpackChunkmgportalv2||[]).push([[814],{6313:(e,t,a)=>{a.d(t,{Z:()=>c});var n=a(7294),l=a(9521),r=a(402),s=a(2119);const i=({currentPageIndex:e,pageIndex:t,gotoPage:a})=>e===t?n.createElement("li",{className:"vf-pagination__item vf-pagination__item--is-active"},n.createElement("span",{className:"vf-pagination__label","aria-current":"page"},n.createElement("span",{className:"vf-u-sr-only"},"Page "),e+1)):n.createElement("li",{className:"vf-pagination__item"},n.createElement("button",{type:"button",onClick:()=>a(t),className:"vf-button vf-button--link vf-pagination__link"},n.createElement("span",{className:"vf-u-sr-only"}," page"),t+1)),c=({cols:e,data:t,title:a,initialPage:c=0,initialPageSize:o=25,className:m="",namespace:u="",showPagination:d=!0,sortable:v=!1,loading:p=!1,isStale:f=!1})=>{const[g,h]=(0,s.B)({[`${u}page`]:1,[`${u}order`]:"",[`${u}page_size`]:o},{[`${u}page`]:Number,[`${u}page_size`]:Number}),{getTableProps:E,getTableBodyProps:b,headerGroups:_,rows:N,prepareRow:y,canPreviousPage:x,canNextPage:S,pageCount:C,gotoPage:O,setPageSize:P,nextPage:j,previousPage:k,state:{pageIndex:$,pageSize:Z,sortBy:T}}=(0,l.useTable)({columns:e,data:t.data,initialState:{pageIndex:c,pageSize:g[`${u}page_size`]},pageCount:t.meta.pagination.pages,manualPagination:!0,manualSortBy:!0},l.useSortBy,l.usePagination),w=(0,n.useRef)(null),[M,B]=(0,n.useState)(!1);(0,n.useEffect)((()=>{d&&g[`${u}page`]!==$+1&&(h(Object.assign(Object.assign({},g),{[`${u}page`]:$+1})),w.current&&M&&(w.current.scrollIntoView(),B(!1)))}),[d,h,$]),(0,n.useEffect)((()=>{d&&g[`${u}page_size`]!==Z&&(h(Object.assign(Object.assign({},g),{[`${u}page_size`]:Z})),w.current&&M&&(w.current.scrollIntoView(),B(!1)))}),[d,h,Z]),(0,n.useEffect)((()=>{if(v){const e=function(e){if(!e.length)return"";const t=e[0];return`${t.desc?"-":""}${t.id.replace(/attributes./g,"").replace(/-/g,"_")}`}(T);if(e===g[`${u}order`])return;h(Object.assign(Object.assign({},g),{[`${u}order`]:e,[`${u}page`]:1})),w.current&&M&&(w.current.scrollIntoView(),B(!1))}}),[d,h,T,v]);const I=(0,n.useMemo)((()=>function(e,t){const a=t>1?[0,1]:[0],n=t>2?[Math.max(2,e-2)]:[];for(let e=n[0]+1;e<t-2&&n.length<5;e+=1)n.push(e);let l=[];return t>7?l=[t-2,t-1]:t>6&&(l=[t-1]),{startingPages:a,endingPages:l,adjacentPages:n,hasJumpFromStart:!!n.length&&n[0]>a[a.length-1]+1,hasJumpToEnd:!!l.length&&!!n.length&&l[0]>n[n.length-1]+1}}($,C)),[$,C]),q=e=>(B(!0),O(e)),A=e=>(B(!0),P(+e.target.value));return p&&!f?n.createElement(r.Z,{size:"small"}):n.createElement("section",null,n.createElement("div",{className:"mg-table-overlay-container"},n.createElement("div",{className:p&&f?"mg-table-overlay":void 0}),n.createElement("table",Object.assign({},E,{className:`vf-table--striped ${m}`,ref:w}),n.createElement("caption",{className:"vf-table__caption"},a),n.createElement("thead",{className:"vf-table__header"},_.map((e=>n.createElement("tr",Object.assign({},e.getHeaderGroupProps(),{className:"vf-table__row"}),e.headers.map((e=>n.createElement("th",Object.assign({},v&&e.canSort?e.getHeaderProps(e.getSortByToggleProps()):{key:e.id},{className:"vf-table__heading"}),e.render("Header"),v&&e.canSort&&n.createElement(n.Fragment,null," ",n.createElement("span",null,e.isSorted?e.isSortedDesc?n.createElement("i",{className:"icon icon-common icon-sort-down"}):n.createElement("i",{className:"icon icon-common icon-sort-up"}):n.createElement("i",{className:"icon icon-common icon-sort"})))))))))),n.createElement("tbody",Object.assign({},b(),{className:"vf-table__body"}),N.map((e=>(y(e),n.createElement("tr",Object.assign({},e.getRowProps(),{className:"vf-table__row"}),e.cells.map((e=>n.createElement("td",Object.assign({},e.getCellProps(),{className:"vf-table__cell"}),e.render("Cell"))))))))))),d&&n.createElement("section",{className:"mg-table-footer"},n.createElement("label",{className:"vf-form__label"},"Page Size:",n.createElement("select",{className:"vf-form__select",value:g[`${u}page_size`],onBlur:A,onChange:A},[10,25,50].map((e=>n.createElement("option",{key:e,value:e},"Show ",e))))),n.createElement("nav",{className:"vf-pagination","aria-label":"Pagination"},n.createElement("ul",{className:"vf-pagination__list"},n.createElement("li",{className:"vf-pagination__item vf-pagination__item--previous-page"},n.createElement("button",{disabled:!x,type:"button",onClick:k,className:"vf-button vf-button--link vf-pagination__link"},"Previous",n.createElement("span",{className:"vf-u-sr-only"}," page"))),I.startingPages.map((e=>n.createElement(i,{key:e,currentPageIndex:$,pageIndex:e,gotoPage:q}))),I.hasJumpFromStart&&n.createElement("li",{className:"vf-pagination__item"},n.createElement("span",{className:"vf-pagination__label"},"...")),I.adjacentPages.map((e=>n.createElement(i,{key:e,currentPageIndex:$,pageIndex:e,gotoPage:q}))),I.hasJumpToEnd&&n.createElement("li",{className:"vf-pagination__item"},n.createElement("span",{className:"vf-pagination__label"},"...")),I.endingPages.map((e=>n.createElement(i,{key:e,currentPageIndex:$,pageIndex:e,gotoPage:q}))),n.createElement("li",{className:"vf-pagination__item vf-pagination__item--next-page"},n.createElement("button",{disabled:!S,type:"button",onClick:j,className:"vf-button vf-button--link vf-pagination__link"},"Next",n.createElement("span",{className:"vf-u-sr-only"}," page")))))))}},1699:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(7294),l=a(7838);const r=()=>{window.location.reload()},s=({error:e})=>e&&e.type!==l.ZB.NullURL?n.createElement("div",{className:"vf-box vf-box-theme--primary vf-box--easy",style:{backgroundColor:"lemonchiffon"}},n.createElement("h3",{className:"vf-box__heading"},n.createElement("span",{className:"icon icon-common icon-exclamation-triangle"})," Error Fetching Data"),n.createElement("p",{className:"vf-box__text"},(null==e?void 0:e.type)===l.ZB.FetchError&&`There were problems with the request. [${e.error}]`,(null==e?void 0:e.type)===l.ZB.NotOK&&`The response from the server was not OK [Status: ${e.status}].`,(null==e?void 0:e.type)===l.ZB.JSONError&&`The recovered resource didn't follow the expected format [${e.error}].`),n.createElement("div",{className:"mg-right"},n.createElement("button",{type:"button",className:"vf-button vf-button--tertiary vf-button--sm ",onClick:r},"Refresh"))):null},4821:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(7294),l=a(6974),r=a(9711);const s=({tabs:e})=>{const t=(0,l.TH)();return n.createElement("div",{className:"vf-tabs mg-search-tabs"},n.createElement("ul",{className:"vf-tabs__list"},e.map((({label:e,to:a})=>n.createElement("li",{className:"vf-tabs__item",key:a},n.createElement(r.rU,{className:"vf-tabs__link "+(a===t.pathname||a.startsWith("#")&&a===t.hash||"#"===a&&""===t.hash?"is-active":""),to:a},"string"==typeof e?e:n.createElement(e,null)))))))}},7832:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(7294),l=a(7838),r=a(6050);const s=(e,t={})=>{const{config:a}=(0,n.useContext)(r.Z),s=Object.assign(Object.assign({},{format:"json",start:0}),t),i=`${a.ebisearch}${e}?${Object.entries(s).map((([e,t])=>`${e}=${t}`)).join("&")}`;return(0,l.ZP)([null,void 0].includes(e)?null:i)}},2119:(e,t,a)=>{a.d(t,{B:()=>s});var n=a(7294),l=a(6974);const r=(e,t,a)=>{const n={},l=new URLSearchParams(t);return Object.entries(e).forEach((([e,t])=>{const r=a[e]||String;n[e]=r(l.get(e)||t)})),n},s=(e,t={})=>{const a=(0,l.TH)(),s=(0,l.s0)(),i=(0,n.useMemo)((()=>r(e,a.search,t)),[e,a.search,t]),[c,o]=(0,n.useState)(i);return(0,n.useEffect)((()=>{const n=r(e,a.search,t);JSON.stringify(n)!==JSON.stringify(c)&&o(n)}),[a.search,c,e,t]),[c,t=>{if(JSON.stringify(t)===JSON.stringify(c))return;const n=new URLSearchParams(a.search);let l=!1;Object.entries(e).forEach((([e,a])=>{const r=e in t?t[e]:a;t[e]!==c[e]&&(n.set(e,String(r)),r===a&&n.delete(e),l=!0)})),l&&(a.search=n.toString(),s(a))}]}},2814:(e,t,a)=>{a.r(t),a.d(t,{default:()=>B});var n=a(7294),l=a(6974),r=a(2054);const s=n.createContext({searchData:{"/search/studies":{data:null,loading:!1,error:null},"/search/samples":{data:null,loading:!1,error:null},"/search/analyses":{data:null,loading:!1,error:null}},queryParameters:{},setQueryParameters:r.Z});var i=a(402);const c=({facetName:e,header:t,includeTextFilter:a=!1})=>{const r=(0,l.TH)(),{searchData:c,queryParameters:o,setQueryParameters:m}=(0,n.useContext)(s),[u,d]=(0,n.useState)(o[e].split(",").filter(Boolean)),[v,p]=(0,n.useState)("");(0,n.useEffect)((()=>{d(o[e].split(",").filter(Boolean))}),[o,e]);const f=(0,n.useMemo)((()=>{var t,a,n;return null===(n=((null===(a=null===(t=null==c?void 0:c[r.pathname])||void 0===t?void 0:t.data)||void 0===a?void 0:a.facets)||[]).filter((t=>t.id===e)))||void 0===n?void 0:n[0]}),[r.pathname,c,e]);if((null==c?void 0:c[r.pathname].loading)&&!(null==c?void 0:c[r.pathname].isStale))return n.createElement(i.Z,null);if(null==c?void 0:c[r.pathname].error)return null;if(!f)return null;const g=t=>{const{value:a,checked:n}=t.target;let l=[...u];n&&!u.includes(a)?l.push(a):l=u.filter((e=>e!==a)),m(Object.assign(Object.assign({},o),{[e]:l.sort().join(",")}))};return n.createElement("fieldset",{className:"vf-form__fieldset vf-stack vf-stack--400"},n.createElement("legend",{className:"vf-form__legend"},t,(null==c?void 0:c[r.pathname].loading)&&(null==c?void 0:c[r.pathname].isStale)&&n.createElement(i.Z,{size:"small"})),a&&n.createElement("input",{type:"text",placeholder:"Filter the list",className:"vf-form__input",value:v,onChange:e=>p(e.target.value)}),f.facetValues.filter((({label:e,value:t})=>""===v||e.toLowerCase().includes(v.toLowerCase())||t.toLowerCase().includes(v.toLowerCase()))).map((({label:e,value:t,count:a})=>n.createElement("div",{className:"vf-form__item vf-form__item--checkbox",key:t},n.createElement("input",{type:"checkbox",name:t,value:t,id:t,className:"vf-form__checkbox",onChange:g,checked:u.includes(t)}),n.createElement("label",{className:"vf-form__label",htmlFor:t},n.createElement("span",{className:"mg-filter-checkbox-label"},e," ",n.createElement("span",{className:"mg-number"},a)))))))},o=({value:e,label:t,count:a,optionChildren:l,depth:r=0,shouldExpand:s,handleSelection:i,isSelected:c})=>{const[m,u]=(0,n.useState)(s(e));return n.createElement("div",{style:{marginLeft:.5*r+"rem"}},n.createElement("div",{className:"mg-hierarchy-selector"},(null==l?void 0:l.length)?n.createElement("button",{type:"button",className:"mg-expander",onClick:()=>u(!m)},m?"▾":"▸"):n.createElement("span",{className:"mg-hierarchy-spacer"}),n.createElement("div",{className:"vf-form__item vf-form__item--checkbox"},n.createElement("input",{type:"checkbox",name:e,value:e,id:e,className:"vf-form__checkbox",onChange:i,checked:c(e)}),n.createElement("label",{className:"vf-form__label",htmlFor:e},n.createElement("span",{className:"mg-filter-checkbox-label"},t," ",n.createElement("span",{className:"mg-number"},a))))),l&&l.length&&m&&l.map((({label:t,value:a,count:l,children:m})=>n.createElement(o,{key:`${e}/${a}`,label:t,value:`${e}/${a}`,count:l,depth:r+1,optionChildren:m,handleSelection:i,isSelected:c,shouldExpand:s}))))},m=({facetName:e,header:t})=>{const a=(0,l.TH)(),{searchData:r,queryParameters:c,setQueryParameters:m}=(0,n.useContext)(s),[u,d]=(0,n.useState)(c[e].split(",").filter(Boolean));(0,n.useEffect)((()=>{d(c[e].split(",").filter(Boolean))}),[c,e]);const v=(0,n.useMemo)((()=>{var t,n,l;return null===(l=((null===(n=null===(t=null==r?void 0:r[a.pathname])||void 0===t?void 0:t.data)||void 0===n?void 0:n.facets)||[]).filter((t=>t.id===e)))||void 0===l?void 0:l[0]}),[a.pathname,r,e]);if((null==r?void 0:r[a.pathname].loading)&&!(null==r?void 0:r[a.pathname].isStale))return n.createElement(i.Z,null);if(null==r?void 0:r[a.pathname].error)return null;if(!v)return null;const p=t=>{const{value:a,checked:n}=t.target;let l=[...u];n&&!u.includes(a)?l.push(a):l=u.filter((e=>e!==a)),m(Object.assign(Object.assign({},c),{[e]:l.sort().join(",")}))};return n.createElement("fieldset",{className:"vf-form__fieldset vf-stack vf-stack--400"},n.createElement("legend",{className:"vf-form__legend"},t,(null==r?void 0:r[a.pathname].loading)&&(null==r?void 0:r[a.pathname].isStale)&&n.createElement(i.Z,{size:"small"})),v.facetValues.map((({label:e,value:t,count:a,children:l})=>n.createElement(o,{key:t,label:e,value:t,count:a,optionChildren:l,handleSelection:p,isSelected:e=>u.includes(e),shouldExpand:e=>u.some((t=>t.startsWith(e)))}))))};var u=a(7226),d=a(6092);const v=function(){return d.Z.Date.now()};var p=a(3782),f=Math.max,g=Math.min;const h=(e,t)=>e.max===t.max&&e.min===t.min,E=({min:e,max:t,isEnabled:a=!0,selection:l=null,onChange:r=(e=>e)})=>{const[s,i]=(0,n.useState)({min:l&&"min"in l?l.min:e,max:l&&"max"in l?l.max:t}),c=(0,n.useCallback)(function(e,t,a){var n,l,r,s,i,c,o=0,m=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function E(t){var a=n,r=l;return n=l=void 0,o=t,s=e.apply(r,a)}function b(e){return o=e,i=setTimeout(N,t),m?E(e):s}function _(e){var a=e-c;return void 0===c||a>=t||a<0||d&&e-o>=r}function N(){var e=v();if(_(e))return y(e);i=setTimeout(N,function(e){var a=t-(e-c);return d?g(a,r-(e-o)):a}(e))}function y(e){return i=void 0,h&&n?E(e):(n=l=void 0,s)}function x(){var e=v(),a=_(e);if(n=arguments,l=this,c=e,a){if(void 0===i)return b(c);if(d)return clearTimeout(i),i=setTimeout(N,t),E(c)}return void 0===i&&(i=setTimeout(N,t)),s}return t=(0,p.Z)(t)||0,(0,u.Z)(a)&&(m=!!a.leading,r=(d="maxWait"in a)?f((0,p.Z)(a.maxWait)||0,t):r,h="trailing"in a?!!a.trailing:h),x.cancel=function(){void 0!==i&&clearTimeout(i),o=0,n=c=l=i=void 0},x.flush=function(){return void 0===i?s:y(v())},x}(r,300),[]);return(0,n.useEffect)((()=>{h(s,l)||c(s)}),[s]),(0,n.useEffect)((()=>{h(s,l)||i(l)}),[l]),n.createElement("div",{className:"mg-multirange-wrapper"},n.createElement("input",{type:"range",min:e,max:t,name:"min",value:s.min,className:"original",disabled:!a,onChange:e=>{i({min:Number(e.target.value),max:s.max})}}),n.createElement("input",{type:"range",min:e,max:t,name:"max",value:s.max,className:"ghost",disabled:!a,onChange:e=>{i({max:Number(e.target.value),min:s.min})}}),n.createElement("div",{className:"labels"},n.createElement("div",{className:"label-min"},n.createElement("span",null,Math.min(s.min,s.max))),n.createElement("div",{className:"label-max"},n.createElement("span",null,Math.max(s.min,s.max)))))},b=({id:e,onChange:t=(e=>e),isOn:a=!1})=>{const[l,r]=(0,n.useState)(a);return(0,n.useEffect)((()=>{r(a),t(a)}),[a,t]),n.createElement("div",null,n.createElement("input",{className:"mg-switch",type:"checkbox",id:e,checked:l,onChange:()=>{t(!l),r(!l)}}))},_=(0,n.memo)((()=>{const{queryParameters:e,setQueryParameters:t}=(0,n.useContext)(s),[a,l]=(0,n.useState)(!!e.temperature),[r,i]=(0,n.useState)(e.temperature.split(",").filter(Boolean).map(Number));return(0,n.useEffect)((()=>{const t=e.temperature.split(",").filter(Boolean).map(Number);i(t)}),[e.temperature]),n.createElement("fieldset",{className:"vf-form__fieldset vf-stack vf-stack--400 mg-temperature-filter"},n.createElement("legend",{className:"vf-form__legend"},"Temperature (°C)"),n.createElement("div",{className:"mg-switch-and-slider"},n.createElement(b,{id:"temp_filter",onChange:a=>{l(a),a||t(Object.assign(Object.assign({},e),{temperature:""}))},isOn:a}),n.createElement(E,{min:-20,max:100,isEnabled:a,selection:{min:(null==r?void 0:r[0])||-20,max:(null==r?void 0:r[1])||100},onChange:({min:a,max:n})=>{t(Object.assign(Object.assign({},e),{temperature:`${a},${n}`}))}})))})),N=(0,n.memo)((()=>{const{queryParameters:e,setQueryParameters:t}=(0,n.useContext)(s),[a,l]=(0,n.useState)(!!e.depth),[r,i]=(0,n.useState)(e.depth.split(",").filter(Boolean).map(Number));return(0,n.useEffect)((()=>{const t=e.depth.split(",").filter(Boolean).map(Number);i(t)}),[e.depth]),n.createElement("fieldset",{className:"vf-form__fieldset vf-stack vf-stack--400 mg-depth-filter"},n.createElement("legend",{className:"vf-form__legend"},"Depth (meters)"),n.createElement("div",{className:"mg-switch-and-slider"},n.createElement(b,{id:"temp_filter",onChange:a=>{l(a),a||t(Object.assign(Object.assign({},e),{depth:""}))},isOn:a}),n.createElement(E,{min:0,max:2e3,isEnabled:a,selection:{min:(null==r?void 0:r[0])||0,max:(null==r?void 0:r[1])||2e3},onChange:({min:a,max:n})=>{t(Object.assign(Object.assign({},e),{depth:`${a},${n}`}))}})))}));var y=a(4821);const x=()=>{const{queryParameters:e,setQueryParameters:t}=(0,n.useContext)(s),[a,l]=(0,n.useState)(e.query);return(0,n.useEffect)((()=>{l(e.query)}),[e.query]),n.createElement("div",{className:"vf-form vf-form--search vf-sidebar vf-sidebar--end mg-text-search"},n.createElement("div",{className:"vf-sidebar__inner"},n.createElement("div",{className:"vf-form__item | vf-search__item"},n.createElement("input",{type:"text",placeholder:"Enter your search terms",id:"mg-text-search",className:"vf-form__input | st-default-search-input mg-text-search-textfield",value:a,onChange:e=>{l(e.target.value)}})),n.createElement("div",{className:"vf-form__item | vf-search__item"},n.createElement("button",{type:"button",className:"vf-search__button | vf-button vf-button--primary mg-text-search-button",onClick:()=>{t(Object.assign(Object.assign({},e),{query:a}))}},n.createElement("span",{className:"vf-button__text"},"Search "),n.createElement("span",{className:"icon icon-common icon-search"})),n.createElement("button",{type:"button",className:"vf-search__button | vf-button vf-button--tertiary mg-text-search-clear",onClick:()=>{t({})}},n.createElement("span",{className:"vf-button__text"},"Clear All "),n.createElement("span",{className:"icon icon-common icon-times-circle"})))))};var S=a(9711),C=a(1699),O=a(6313);const P={"/search/studies":{label:"Studies",columns:[{id:"study_id",Header:"MGnify ID",accessor:e=>e.id,Cell:({cell:e})=>n.createElement(S.rU,{to:`/studies/${e.value}`},e.value)},{id:"ena_id",Header:"ENA accession",accessor:e=>{var t,a;return(null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.ENA_PROJECT)||void 0===a?void 0:a[0])||""},Cell:({cell:e})=>n.createElement("span",null,n.createElement("a",{href:`https://www.ebi.ac.uk/ena/browser/view/${e.value}`,className:"ext"},e.value))},{id:"biome",Header:"Biome",accessor:e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.biome_name)||void 0===a?void 0:a.join(":")},Cell:({cell:e})=>n.createElement("span",null,e.value)},{id:"centre",Header:"Centre name",accessor:e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.centre_name)||void 0===a?void 0:a[0]},Cell:({cell:e})=>n.createElement("span",null,e.value)}]},"/search/samples":{label:"Samples",columns:[{id:"sample_id",Header:"Sample",accessor:e=>e.id,Cell:({cell:e})=>n.createElement(S.rU,{to:`/samples/${e.value}`},e.value)},{id:"mgnify_id",Header:"MGnify ID",accessor:e=>{var t,a;return(null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.METAGENOMICS_PROJECTS)||void 0===a?void 0:a[0])||""},Cell:({cell:e})=>n.createElement(S.rU,{to:`/studies/${e.value}`},e.value)},{id:"sample_name",Header:"Name",pathnames:["/search/studies"],accessor:e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.name)||void 0===a?void 0:a[0]},Cell:({cell:e})=>n.createElement("span",null,e.value)},{id:"sample_description",Header:"Description",pathnames:["/search/studies"],accessor:e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.description)||void 0===a?void 0:a[0]},Cell:({cell:e})=>n.createElement("span",null,e.value)}]},"/search/analyses":{label:"Analyses",columns:[{id:"analyses_id",Header:"Analysis",accessor:e=>(e.id||"").split("_"),Cell:({cell:e})=>n.createElement(S.rU,{to:`/analyses/${e.value[0]}?version=${e.value[1]}`},e.value[0])},{id:"pipeline",Header:"Pipeline version",accessor:e=>{var t,a;return(null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.pipeline_version)||void 0===a?void 0:a[0])||""},Cell:({cell:e})=>n.createElement("span",null,n.createElement(S.rU,{to:`/pipelines/${e.value}`},e.value))},{id:"sample_id",Header:"Sample",accessor:e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.METAGENOMICS_SAMPLES)||void 0===a?void 0:a[0]},Cell:({cell:e})=>n.createElement(S.rU,{to:`/samples/${e.value}`},e.value)},{id:"mgnify_id",Header:"MGnify ID",accessor:e=>{var t,a;return(null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.METAGENOMICS_PROJECTS)||void 0===a?void 0:a[0])||""},Cell:({cell:e})=>n.createElement(S.rU,{to:`/studies/${e.value}`},e.value)},{id:"experiment",Header:"Experiment type",accessor:e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.experiment_type)||void 0===a?void 0:a[0]},Cell:({cell:e})=>n.createElement("span",null,e.value)}]}},j=()=>{const{pathname:e}=(0,l.TH)(),{searchData:t}=(0,n.useContext)(s),{data:a,loading:r,error:c,isStale:o}=(null==t?void 0:t[e])||{},m=(0,n.useMemo)((()=>{var t;return null===(t=null==P?void 0:P[e])||void 0===t?void 0:t.columns}),[e]);if(r&&(!o||!a))return n.createElement(i.Z,{size:"large"});if(c||!a)return n.createElement(C.Z,{error:c});const u={data:a.entries,links:{},meta:{pagination:{pages:Math.ceil(a.hitCount/25),count:25,page:1}}};return n.createElement(O.Z,{cols:m,data:u,title:()=>{var t;return n.createElement(n.Fragment,null,(null===(t=null==P?void 0:P[e])||void 0===t?void 0:t.label)||""," ",n.createElement("span",{className:"mg-number"},a.hitCount))},initialPage:0,className:"mg-search-result",loading:r,isStale:o})};var k=a(7832),$=a(2119);const Z=(e,t)=>e.map((e=>{return a=e,t[e].split(",").filter(Boolean).map((e=>`${a}:${e}`)).join(",");var a})).filter(Boolean).join(","),T=(e,t,a)=>{const n=e.map((e=>{switch(e){case"query":return t[e];case"temperature":case"depth":{const a=t[e].split(",").filter(Boolean).map(Number);return 2===a.length?`${e}:[${Math.min(...a)} TO ${Math.max(...a)}]`:""}default:return""}})).filter(Boolean);return n.length?n.join(" AND "):a},w=({to:e,label:t})=>{var a,l;const{searchData:r}=(0,n.useContext)(s);return n.createElement(n.Fragment,null,t,n.createElement("span",{className:"mg-number"},(null===(l=null===(a=null==r?void 0:r[e])||void 0===a?void 0:a.data)||void 0===l?void 0:l.hitCount)||""))},M=[{to:"/search/studies",label:()=>n.createElement(w,{to:"/search/studies",label:"Studies"})},{to:"/search/samples",label:()=>n.createElement(w,{to:"/search/samples",label:"Samples"})},{to:"/search/analyses",label:()=>n.createElement(w,{to:"/search/analyses",label:"Analyses"})}],B=()=>{const[e,t]=(0,$.B)({query:"",centre_name:"",biome:"",temperature:"",depth:"",experiment_type:"",sequencing_method:"",location_name:"",disease_status:"",phenotype:"",organism:"",pipeline_version:"",GO:"",INTERPRO:""}),a=(0,k.Z)("metagenomics_projects",{query:T(["query"],e,"domain_source:metagenomics_projects"),size:25,fields:"ENA_PROJECT,biome_name,centre_name",facetcount:10,facetsdepth:4,facets:Z(["centre_name","biome"],e)}),r=(0,k.Z)("metagenomics_samples",{query:T(["query","temperature","depth"],e,"domain_source:metagenomics_samples"),size:25,fields:"METAGENOMICS_PROJECTS,name,description",facetcount:10,facetsdepth:4,facets:Z(["biome","experiment_type","location_name","disease_status","sequencing_method","phenotype"],e)}),i=(0,k.Z)("metagenomics_analyses",{query:T(["query","temperature","depth"],e,"domain_source:metagenomics_analyses"),size:25,fields:"METAGENOMICS_PROJECTS,METAGENOMICS_SAMPLES,pipeline_version,experiment_type",facetcount:10,facetsdepth:4,facets:Z(["biome","organism","pipeline_version","experiment_type","GO","INTERPRO"],e)}),o=(0,n.useMemo)((()=>({searchData:{"/search/studies":a,"/search/samples":r,"/search/analyses":i},queryParameters:e,setQueryParameters:t})),[a,r,i,e,t]);return n.createElement("section",{className:"vf-content mg-page-search"},n.createElement("h2",null,"Text Search."),n.createElement(s.Provider,{value:o},n.createElement(x,null),n.createElement(y.Z,{tabs:M}),n.createElement("section",{className:"vf-grid"},n.createElement("div",{className:"vf-stack vf-stack--200"},n.createElement(l.Z5,null,n.createElement(l.AW,{path:"studies",element:n.createElement(n.Fragment,null,n.createElement(m,{facetName:"biome",header:"Biome"}),n.createElement(c,{facetName:"centre_name",header:"Centre Name",includeTextFilter:!0}))}),n.createElement(l.AW,{path:"samples",element:n.createElement(n.Fragment,null,n.createElement(_,null),n.createElement(N,null),n.createElement(m,{facetName:"biome",header:"Biome"}),n.createElement(c,{facetName:"experiment_type",header:"Experiment type"}),n.createElement(c,{facetName:"sequencing_method",header:"Sequencing method"}),n.createElement(c,{facetName:"location_name",header:"Location name",includeTextFilter:!0}),n.createElement(c,{facetName:"disease_status",header:"Disease status"}),n.createElement(c,{facetName:"phenotype",header:"Phenotype"}))}),n.createElement(l.AW,{path:"analyses",element:n.createElement(n.Fragment,null,n.createElement(_,null),n.createElement(N,null),n.createElement(m,{facetName:"organism",header:"Organism"}),n.createElement(m,{facetName:"biome",header:"Biome"}),n.createElement(c,{facetName:"pipeline_version",header:"Pipeline version"}),n.createElement(c,{facetName:"experiment_type",header:"Experiment type"}),n.createElement(c,{facetName:"GO",header:"GO",includeTextFilter:!0}),n.createElement(c,{facetName:"INTERPRO",header:"InterPro",includeTextFilter:!0}))}),n.createElement(l.AW,{index:!0,element:n.createElement(l.Fg,{to:"studies",replace:!0})}))),n.createElement(j,null))))}},7685:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a(6092).Z.Symbol},3243:(e,t,a)=>{a.d(t,{Z:()=>m});var n=a(7685),l=Object.prototype,r=l.hasOwnProperty,s=l.toString,i=n.Z?n.Z.toStringTag:void 0;var c=Object.prototype.toString;var o=n.Z?n.Z.toStringTag:void 0;const m=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?function(e){var t=r.call(e,i),a=e[i];try{e[i]=void 0;var n=!0}catch(e){}var l=s.call(e);return n&&(t?e[i]=a:delete e[i]),l}(e):function(e){return c.call(e)}(e)}},3413:(e,t,a)=>{a.d(t,{Z:()=>n});const n="object"==typeof global&&global&&global.Object===Object&&global},6092:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(3413),l="object"==typeof self&&self&&self.Object===Object&&self;const r=n.Z||l||Function("return this")()},7226:(e,t,a)=>{a.d(t,{Z:()=>n});const n=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},8533:(e,t,a)=>{a.d(t,{Z:()=>n});const n=function(e){return null!=e&&"object"==typeof e}},2714:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(3243),l=a(8533);const r=function(e){return"symbol"==typeof e||(0,l.Z)(e)&&"[object Symbol]"==(0,n.Z)(e)}},3782:(e,t,a)=>{a.d(t,{Z:()=>d});var n=/\s/;var l=/^\s+/;const r=function(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}(e)+1).replace(l,""):e};var s=a(7226),i=a(2714),c=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,m=/^0o[0-7]+$/i,u=parseInt;const d=function(e){if("number"==typeof e)return e;if((0,i.Z)(e))return NaN;if((0,s.Z)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=(0,s.Z)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var a=o.test(e);return a||m.test(e)?u(e.slice(2),a?2:8):c.test(e)?NaN:+e}}}]);
//# sourceMappingURL=814.1511e2ee.chunk.js.map