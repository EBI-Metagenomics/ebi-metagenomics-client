{"version":3,"file":"js/827.536bbaf0.chunk.js","mappings":"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","sources":["webpack://mgportalv2/./src/components/Study/Studies/index.tsx","webpack://mgportalv2/./src/components/UI/Box/index.tsx","webpack://mgportalv2/./src/components/UI/ExtLink/index.tsx","webpack://mgportalv2/./src/components/UI/KeyValueList/index.tsx","webpack://mgportalv2/./src/components/UI/SamplesMap/index.tsx","webpack://mgportalv2/./src/components/UI/SamplesMap/render.tsx","webpack://mgportalv2/./src/components/UI/TextTruncated/index.tsx","webpack://mgportalv2/./src/components/UI/SamplesMap/BySamplesArray/index.tsx","webpack://mgportalv2/./src/components/Sample/Overview/index.tsx","webpack://mgportalv2/./src/components/Sample/Runs/index.tsx","webpack://mgportalv2/./src/components/Sample/Assemblies/index.tsx","webpack://mgportalv2/./src/pages/Sample/index.tsx"],"sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport Loading from 'components/UI/Loading';\nimport FetchError from 'components/UI/FetchError';\nimport EMGTable from 'components/UI/EMGTable';\nimport TruncatedText from 'components/UI/TextTruncated';\nimport useMGnifyData from 'hooks/data/useMGnifyData';\nimport { MGnifyResponseList } from 'hooks/data/useData';\nimport useURLAccession from 'hooks/useURLAccession';\nimport { useQueryParametersState } from 'hooks/useQueryParamState';\nimport { getBiomeIcon } from 'utils/biomes';\n\nconst initialPageSize = 10;\n\ntype AssociatedStudiesProps = {\n  rootEndpoint: string;\n};\nconst AssociatedStudies: React.FC<AssociatedStudiesProps> = ({\n  rootEndpoint,\n}) => {\n  const accession = useURLAccession();\n  const [queryParameters] = useQueryParametersState(\n    {\n      'studies-page': 1,\n      'studies-page_size': initialPageSize,\n      'studies-order': '',\n    },\n    {\n      'studies-page': Number,\n      'studies-page_size': Number,\n    }\n  );\n  const { data, loading, error, isStale } = useMGnifyData(\n    `${rootEndpoint}/${accession}/studies`,\n    {\n      page: queryParameters['studies-page'] as number,\n      ordering: queryParameters['studies-order'] as string,\n      page_size: queryParameters['studies-page_size'] as number,\n    }\n  );\n  if (loading && !isStale) return <Loading size=\"small\" />;\n  if (error || !data) return <FetchError error={error} />;\n\n  const columns = [\n    {\n      id: 'biome_id',\n      Header: 'Biome',\n      accessor: (study) => study.relationships.biomes.data?.[0]?.id,\n      Cell: ({ cell }) => (\n        <span\n          className={`biome_icon icon_xs ${getBiomeIcon(cell.value)}`}\n          style={{ float: 'initial' }}\n        />\n      ),\n    },\n    {\n      id: 'study',\n      Header: 'Study accession',\n      accessor: 'id',\n      Cell: ({ cell }) => (\n        <Link to={`/studies/${cell.value}`}>{cell.value}</Link>\n      ),\n    },\n    {\n      Header: 'Name',\n      accessor: 'attributes.study-name',\n    },\n    {\n      Header: 'Abstract',\n      accessor: 'attributes.study-abstract',\n      Cell: ({ cell }) => <TruncatedText text={(cell.value as string) || ''} />,\n    },\n    {\n      Header: 'Samples Count',\n      accessor: 'attributes.samples-count',\n    },\n    {\n      id: 'last_update',\n      Header: 'Last Updated',\n      accessor: 'attributes.last-update',\n      Cell: ({ cell }) => new Date(cell.value).toLocaleDateString(),\n    },\n  ];\n\n  return (\n    <EMGTable\n      cols={columns}\n      data={data as MGnifyResponseList}\n      initialPage={(queryParameters['studies-page'] as number) - 1}\n      initialPageSize={initialPageSize}\n      className=\"mg-studies-table\"\n      loading={loading}\n      isStale={isStale}\n      namespace=\"studies-\"\n    />\n  );\n};\n\nexport default AssociatedStudies;\n","import React from 'react';\n\nconst Box: React.FC<{ label: string; theme?: string }> = ({\n  label,\n  theme = 'primary',\n  children,\n}) => (\n  <div className=\"vf-grid\">\n    <div className={`vf-box vf-box--easy vf-box-theme--${theme}`}>\n      <h5 className=\"vf-box__heading\">{label}</h5>\n      <div className=\"vf-box__text\">{children}</div>\n    </div>\n  </div>\n);\n\nexport default Box;\n","import React from 'react';\n\nimport './style.css';\n\ntype ExtLinkProps = {\n  href: string;\n  title?: string;\n  id?: string;\n};\nconst ExtLink: React.FC<ExtLinkProps> = ({ href, id, title, children }) => (\n  <a\n    href={href}\n    title={title}\n    id={id}\n    target=\"_blank\"\n    rel=\"noreferrer noopener\"\n    className=\"mg-ext\"\n  >\n    <span className=\"icon icon-common icon-external-link-alt\" /> {children}\n  </a>\n);\n\nexport default ExtLink;\n","import React from 'react';\n\ntype KeyValueProps = {\n  list: { key: string; value: string | React.ElementType }[];\n};\n\nconst KeyValueList: React.FC<KeyValueProps> = ({ list }) => (\n  <div\n    className=\"vf-grid vf-grid__col-2\"\n    style={{\n      gridTemplateColumns: '1fr 2fr',\n      rowGap: '0.5rem',\n    }}\n  >\n    {list.map(({ key, value: Value }) => (\n      <React.Fragment key={key}>\n        <div style={{ textAlign: 'right' }}>{key}:</div>\n        <div>{typeof Value === 'string' ? Value : <Value />}</div>\n      </React.Fragment>\n    ))}\n  </div>\n);\n\nexport default KeyValueList;\n","import React, { useEffect, useRef, useState } from 'react';\nimport ReactDOMServer from 'react-dom/server';\n\nimport MarkerClusterer from '@googlemaps/markerclustererplus';\n\nimport { MGnifyDatum } from 'hooks/data/useData';\n\nimport './style.css';\n\n// TODO: make the link play nicer with react-router\nconst MarkerPopup: React.FC<{ sample: MGnifyDatum }> = ({ sample }) => (\n  <div className=\"vf-box vf-box--easy\">\n    <h3 className=\"vf-box__heading\">\n      <a href={`../samples/${sample.id}`}>{sample.id}</a>\n      {/* <Link to=\"/search/studies\">{sample.id}</Link> */}\n    </h3>\n    <p className=\"vf-box__text\">{sample.attributes['sample-desc']}</p>\n  </div>\n);\nconst ClusterMarkerPopup: React.FC<{ accessions: string[] }> = ({\n  accessions,\n}) => (\n  <div className=\"vf-box vf-box--easy\">\n    <h3 className=\"vf-box__heading\">Samples on this geographical location</h3>\n    <ul className=\"vf-list\">\n      {accessions.map((accession) => (\n        <li ref={accession}>\n          <a href={`../samples/${accession}`}>{accession}</a>\n        </li>\n      ))}\n    </ul>\n  </div>\n);\n\ntype MapProps = {\n  samples: Array<MGnifyDatum>;\n};\n\nconst SamplesMap: React.FC<MapProps> = ({ samples }) => {\n  const ref = useRef();\n  const [theMap, setTheMap] = useState(null);\n  const markerCluster = useRef<MarkerClusterer>(null);\n  const sampleInfoWindow = useRef(new google.maps.InfoWindow());\n  const clusterInfoWindow = useRef(new google.maps.InfoWindow());\n  const newBoundary = useRef(new google.maps.LatLngBounds());\n\n  const markers = useRef({});\n\n  useEffect(() => {\n    if (theMap === null) {\n      const tmpMap = new google.maps.Map(ref.current, {\n        maxZoom: 10,\n        minZoom: 2,\n      });\n      setTheMap(tmpMap);\n    }\n  }, [theMap]);\n  useEffect(() => {\n    if (theMap && samples) {\n      if (markerCluster.current) {\n        markerCluster.current.clearMarkers();\n      }\n\n      samples\n        .filter(({ id }) => !(id in markers.current))\n        .forEach((sample) => {\n          const position = {\n            lat: sample.attributes.latitude as number,\n            lng: sample.attributes.longitude as number,\n          };\n          const marker = new google.maps.Marker({\n            position,\n            title: sample.id,\n          });\n          newBoundary.current.extend(position);\n          marker.addListener('click', () => {\n            sampleInfoWindow.current.setContent(\n              ReactDOMServer.renderToString(<MarkerPopup sample={sample} />)\n            );\n            sampleInfoWindow.current.open(theMap, marker);\n          });\n          markers.current[sample.id] = marker;\n        });\n      markerCluster.current = new MarkerClusterer(\n        theMap,\n        Object.values(markers.current),\n        {\n          imagePath:\n            'https://raw.githubusercontent.com/googlemaps/js-markerclustererplus/master/images/m',\n          maxZoom: 10,\n        }\n      );\n\n      // for clusters in MAX Zoom and with less than 10 elements show a list\n      google.maps.event.addListener(\n        markerCluster.current,\n        'click',\n        // eslint-disable-next-line func-names\n        function (cluster) {\n          if (\n            // eslint-disable-next-line no-underscore-dangle, react/no-this-in-sfc\n            this.prevZoom_ + 1 <= this.getMaxZoom() ||\n            cluster.getSize() >= 10\n          ) {\n            return;\n          }\n          clusterInfoWindow.current.setPosition(cluster.getCenter());\n\n          clusterInfoWindow.current.setContent(\n            ReactDOMServer.renderToString(\n              <ClusterMarkerPopup\n                accessions={cluster.getMarkers().map((m) => m.getTitle())}\n              />\n            )\n          );\n\n          clusterInfoWindow.current.open(theMap);\n        }\n      );\n\n      theMap.fitBounds(newBoundary.current);\n    }\n  }, [theMap, samples]);\n\n  return <div ref={ref} id=\"map\" style={{ height: '100%' }} />;\n};\n\nexport default SamplesMap;\n","import React, { ReactElement } from 'react';\nimport { Status } from '@googlemaps/react-wrapper';\nimport { ErrorTypes } from 'hooks/data/useData';\n\nimport Loading from 'components/UI/Loading';\nimport FetchError from 'components/UI/FetchError';\n\nconst render = (status: Status): ReactElement => {\n  if (status === Status.LOADING) return <Loading />;\n  if (status === Status.FAILURE)\n    return (\n      <FetchError\n        error={{\n          status: 200,\n          type: ErrorTypes.OtherError,\n          error: status,\n        }}\n      />\n    );\n  return null;\n};\n\nexport default render;\n","import React from 'react';\n\nconst TruncatedText: React.FC<{ maxLength?: number; text: string }> = ({\n  text,\n  maxLength = 250,\n}) => (\n  <>\n    {text.substring(0, maxLength)}\n    {text.length >= maxLength && '...'}\n  </>\n);\n\nexport default TruncatedText;\n","import React, { useContext } from 'react';\n\nimport { Wrapper } from '@googlemaps/react-wrapper';\n\nimport UserContext from 'pages/Login/UserContext';\nimport SamplesMap from 'components/UI/SamplesMap';\nimport { MGnifyDatum } from 'hooks/data/useData';\nimport render from '../render';\n\nimport '../style.css';\n\ntype SamplesMapProps = {\n  samples: Array<MGnifyDatum>;\n};\nconst SamplesMapBySamplesArray: React.FC<SamplesMapProps> = ({ samples }) => {\n  const { config } = useContext(UserContext);\n\n  const samplesFiltered = samples.filter((sample) => {\n    try {\n      return (\n        Number(sample.attributes.longitude) !== 0.0 &&\n        Number(sample.attributes.latitude) !== 0.0\n      );\n    } catch {\n      return false;\n    }\n  });\n\n  return (\n    <div className=\"mg-map-container\">\n      <div className=\"mg-map-wrapper\">\n        <Wrapper apiKey={config.googleMapsKey} render={render}>\n          <SamplesMap samples={samplesFiltered} />\n        </Wrapper>\n      </div>\n      <div className=\"mg-map-progress\">\n        {samplesFiltered.length === 0 && (\n          <div>⚠️ None of the samples have geolocation co-ordinates.</div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default SamplesMapBySamplesArray;\n","import React from 'react';\n\nimport { MGnifyDatum } from 'hooks/data/useData';\nimport SamplesMap from 'components/UI/SamplesMap/BySamplesArray';\nimport Box from 'components/UI/Box';\nimport ExtLink from 'components/UI/ExtLink';\nimport { getBiomeIcon } from 'utils/biomes';\n\ntype SampleOverviewProps = {\n  data: MGnifyDatum;\n};\n\nconst SampleOverview: React.FC<SampleOverviewProps> = ({ data }) => {\n  const lineage = data.relationships.biome.data.id;\n  return (\n    <section>\n      <div className=\"vf-grid\">\n        <div>\n          <h4>\n            Last updated:{' '}\n            {new Date(\n              data?.attributes?.['last-update'] as string\n            ).toDateString()}\n          </h4>\n          <Box label=\"Description\">{data.attributes['sample-desc']}</Box>\n          <Box label=\"External links\">\n            <ul>\n              <li>\n                <ExtLink\n                  href={`https://www.ebi.ac.uk/ena/browser/view/${data.attributes.accession}`}\n                >\n                  ENA website ({data.attributes.accession})\n                </ExtLink>\n              </li>\n              <li>\n                <ExtLink\n                  href={`https://www.ebi.ac.uk/biosamples/samples/${data.attributes.biosample}`}\n                >\n                  EBI biosample ({data.attributes.biosample})\n                </ExtLink>\n              </li>\n            </ul>\n          </Box>\n          <Box label=\"Classification\">\n            <span\n              className={`biome_icon icon_sm ${getBiomeIcon(lineage)}`}\n              style={{ float: 'initial' }}\n            />\n            {lineage}\n          </Box>\n        </div>\n        <SamplesMap samples={[data]} />\n      </div>\n    </section>\n  );\n};\n\nexport default SampleOverview;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport Loading from 'components/UI/Loading';\nimport FetchError from 'components/UI/FetchError';\nimport EMGTable from 'components/UI/EMGTable';\nimport useMGnifyData from 'hooks/data/useMGnifyData';\nimport { MGnifyResponseList } from 'hooks/data/useData';\nimport useURLAccession from 'hooks/useURLAccession';\nimport { useQueryParametersState } from 'hooks/useQueryParamState';\n\nconst initialPageSize = 10;\n\nconst AssociatedRuns: React.FC = () => {\n  const accession = useURLAccession();\n  const [queryParameters] = useQueryParametersState(\n    {\n      'runs-page': 1,\n      'runs-page_size': initialPageSize,\n      'runs-order': '',\n    },\n    {\n      'runs-page': Number,\n      'runs-page_size': Number,\n    }\n  );\n  const { data, loading, error, isStale } = useMGnifyData(\n    `samples/${accession}/runs`,\n    {\n      page: queryParameters['runs-page'] as number,\n      ordering: queryParameters['runs-order'] as string,\n      page_size: queryParameters['runs-page_size'] as number,\n    }\n  );\n  if (loading && !isStale) return <Loading size=\"small\" />;\n  if (error || !data) return <FetchError error={error} />;\n\n  const columns = [\n    {\n      id: 'run',\n      Header: 'Run ID',\n      accessor: 'id',\n      Cell: ({ cell }) => <Link to={`/runs/${cell.value}`}>{cell.value}</Link>,\n    },\n    {\n      Header: 'Experiment type',\n      accessor: 'attributes.experiment-type',\n    },\n    {\n      Header: 'Instrument model',\n      accessor: 'attributes.instrument-model',\n    },\n    {\n      Header: 'Instrument platform',\n      accessor: 'attributes.instrument-platform',\n    },\n    {\n      Header: 'pipeline versions',\n      accessor: 'relationships.pipelines.data',\n      Cell: ({ cell }) =>\n        (cell.value as { id: string }[]).map(({ id }) => id).join(', '),\n    },\n  ];\n\n  return (\n    <EMGTable\n      cols={columns}\n      data={data as MGnifyResponseList}\n      initialPage={(queryParameters['runs-page'] as number) - 1}\n      initialPageSize={initialPageSize}\n      className=\"mg-runs-table\"\n      loading={loading}\n      isStale={isStale}\n      namespace=\"runs-\"\n    />\n  );\n};\n\nexport default AssociatedRuns;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport Loading from 'components/UI/Loading';\nimport FetchError from 'components/UI/FetchError';\nimport EMGTable from 'components/UI/EMGTable';\nimport useMGnifyData from 'hooks/data/useMGnifyData';\nimport { MGnifyResponseList } from 'hooks/data/useData';\nimport useURLAccession from 'hooks/useURLAccession';\nimport { useQueryParametersState } from 'hooks/useQueryParamState';\n\nconst initialPageSize = 10;\n\nconst AssociatedAssemblies: React.FC = () => {\n  const accession = useURLAccession();\n  const [queryParameters] = useQueryParametersState(\n    {\n      'assembly-page': 1,\n      'assembly-page_size': initialPageSize,\n      'assembly-order': '',\n    },\n    {\n      'assembly-page': Number,\n      'assembly-page_size': Number,\n    }\n  );\n  const { data, loading, error, isStale } = useMGnifyData(`assemblies`, {\n    sample_accession: accession,\n    page: queryParameters['assembly-page'] as number,\n    ordering: queryParameters['assembly-order'] as string,\n    page_size: queryParameters['assembly-page_size'] as number,\n  });\n  if (loading && !isStale) return <Loading size=\"small\" />;\n  if (error || !data) return <FetchError error={error} />;\n\n  const columns = [\n    {\n      Header: 'Assembly ID',\n      accessor: 'id',\n      Cell: ({ cell }) => (\n        <Link to={`/assemblies/${cell.value}`}>{cell.value}</Link>\n      ),\n    },\n    {\n      Header: 'Experiment type',\n      accessor: 'attributes.experiment-type',\n    },\n    {\n      Header: 'WGS ID',\n      accessor: 'attributes.wgs-accession',\n    },\n    {\n      Header: 'Legacy ID',\n      accessor: 'attributes.legacy-accession',\n    },\n    {\n      Header: 'Pipeline versions',\n      accessor: 'relationships.pipelines.data',\n      Cell: ({ cell }) =>\n        (cell.value as { id: string }[]).map(({ id }) => id).join(', '),\n    },\n  ];\n\n  return (\n    <EMGTable\n      cols={columns}\n      data={data as MGnifyResponseList}\n      initialPage={(queryParameters['assembly-page'] as number) - 1}\n      initialPageSize={initialPageSize}\n      className=\"mg-assembly-table\"\n      loading={loading}\n      isStale={isStale}\n      namespace=\"assembly-\"\n    />\n  );\n};\n\nexport default AssociatedAssemblies;\n","import React from 'react';\n\nimport useMGnifyData from 'hooks/data/useMGnifyData';\nimport { MGnifyResponseObj } from 'hooks/data/useData';\nimport useURLAccession from 'hooks/useURLAccession';\nimport Loading from 'components/UI/Loading';\nimport FetchError from 'components/UI/FetchError';\nimport Tabs from 'components/UI/Tabs';\nimport Overview from 'components/Sample/Overview';\nimport AssociatedStudies from 'src/components/Study/Studies';\nimport AssociatedRuns from 'components/Sample/Runs';\nimport AssociatedAssemblies from 'components/Sample/Assemblies';\nimport RouteForHash from 'components/Nav/RouteForHash';\nimport KeyValueList from 'components/UI/KeyValueList';\n\nconst tabs = [\n  { label: 'Sample metadata', to: '#' },\n  { label: 'Associated studies', to: '#studies' },\n  { label: 'Analysed associated runs', to: '#runs' },\n  { label: 'Analysed associated assemblies', to: '#assemblies' },\n];\n\nconst SamplePage: React.FC = () => {\n  const accession = useURLAccession();\n  const { data, loading, error } = useMGnifyData(`samples/${accession}`);\n  if (loading) return <Loading size=\"large\" />;\n  if (error) return <FetchError error={error} />;\n  if (!data) return <Loading />;\n  const { data: sampleData } = data as MGnifyResponseObj;\n  return (\n    <section className=\"vf-content\">\n      <h2>Sample overview ({accession})</h2>\n      <h3>Sample {sampleData.attributes['sample-name']}</h3>\n      <section className=\"vf-grid\">\n        <div className=\"vf-stack vf-stack--200\">\n          <Overview data={sampleData} />\n          <Tabs tabs={tabs} />\n          <section className=\"vf-grid\">\n            <div className=\"vf-stack vf-stack--200\">\n              <RouteForHash hash=\"\" isDefault>\n                <KeyValueList\n                  list={\n                    (sampleData?.attributes?.['sample-metadata'] as {\n                      key: string;\n                      value: string;\n                    }[]) || []\n                  }\n                />\n              </RouteForHash>\n              <RouteForHash hash=\"#studies\">\n                <AssociatedStudies rootEndpoint=\"samples\" />\n              </RouteForHash>\n              <RouteForHash hash=\"#runs\">\n                <AssociatedRuns />\n              </RouteForHash>\n              <RouteForHash hash=\"#assemblies\">\n                <AssociatedAssemblies />\n              </RouteForHash>\n            </div>\n          </section>\n        </div>\n      </section>\n    </section>\n  );\n};\n\nexport default SamplePage;\n"],"names":["rootEndpoint","accession","queryParameters","Number","data","loading","error","isStale","page","ordering","page_size","size","columns","id","Header","accessor","study","relationships","biomes","Cell","cell","className","value","style","float","to","text","Date","toLocaleDateString","cols","initialPage","initialPageSize","namespace","label","theme","children","href","title","target","rel","list","gridTemplateColumns","rowGap","map","key","Value","textAlign","MarkerPopup","sample","attributes","ClusterMarkerPopup","accessions","ref","samples","useRef","theMap","setTheMap","useState","markerCluster","sampleInfoWindow","google","maps","InfoWindow","clusterInfoWindow","newBoundary","LatLngBounds","markers","useEffect","tmpMap","Map","current","maxZoom","minZoom","clearMarkers","filter","forEach","position","lat","latitude","lng","longitude","marker","Marker","extend","addListener","setContent","open","Object","values","imagePath","event","cluster","this","prevZoom_","getMaxZoom","getSize","setPosition","getCenter","getMarkers","m","getTitle","fitBounds","height","status","Status","type","maxLength","substring","length","config","useContext","UserContext","samplesFiltered","Wrapper","apiKey","googleMapsKey","render","SamplesMap","lineage","biome","toDateString","Box","ExtLink","biosample","useURLAccession","useMGnifyData","Loading","FetchError","join","EMGTable","sample_accession","tabs","sampleData","Overview","Tabs","RouteForHash","hash","isDefault","KeyValueList"],"sourceRoot":""}