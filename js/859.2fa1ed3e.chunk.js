"use strict";(self.webpackChunkmgportalv2=self.webpackChunkmgportalv2||[]).push([[859],{1274:(e,t,a)=>{a.d(t,{Z:()=>l});var n=a(7294),r=a(6974);const l=({hash:e,isDefault:t=!1,children:a})=>{const l=(0,r.TH)(),s=(0,r.s0)();return(0,n.useEffect)((()=>{""===l.hash&&""!==e&&t&&s(e,{replace:!0})})),l.hash===e?n.createElement(n.Fragment,null,a):null}},2069:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(7294);const r=()=>n.createElement("svg",{"aria-hidden":"true",className:"vf-card__heading__icon | vf-icon vf-icon-arrow--inline-end",width:"1em",height:"1em",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",preserveAspectRatio:"none"},n.createElement("path",{d:"M0 12c0 6.627 5.373 12 12 12s12-5.373 12-12S18.627 0 12 0C5.376.008.008 5.376 0 12zm13.707-5.209l4.5 4.5a1 1 0 010 1.414l-4.5 4.5a1 1 0 01-1.414-1.414l2.366-2.367a.25.25 0 00-.177-.424H6a1 1 0 010-2h8.482a.25.25 0 00.177-.427l-2.366-2.368a1 1 0 011.414-1.414z",fill:"currentColor",fillRule:"nonzero"}))},8696:(e,t,a)=>{a.d(t,{Z:()=>m});var n=a(7294),r=a(9521),l=a(402),s=a(2119);const i=({currentPageIndex:e,pageIndex:t,gotoPage:a})=>e===t?n.createElement("li",{className:"vf-pagination__item vf-pagination__item--is-active"},n.createElement("span",{className:"vf-pagination__label","aria-current":"page"},n.createElement("span",{className:"vf-u-sr-only"},"Page "),e+1)):n.createElement("li",{className:"vf-pagination__item"},n.createElement("button",{type:"button",onClick:()=>a(t),className:"vf-button vf-button--link vf-pagination__link"},n.createElement("span",{className:"vf-u-sr-only"}," page"),t+1));var o=a(9111);const c=({namespace:e})=>{const[t,a]=(0,s.B)({[`${e}search`]:""}),[r,l]=(0,n.useState)(t[`${e}search`]||""),i=(0,n.useCallback)((0,o.Z)((n=>{a(Object.assign(Object.assign({},t),{[`${e}search`]:n}))}),300),[]);return n.createElement("div",{className:"vf-form__item mg-textsearch"},n.createElement("label",{className:"vf-form__label vf-search__label",htmlFor:"searchitem"},"Filter"),n.createElement("input",{type:"search",placeholder:"Enter your search terms",id:"searchitem",className:"vf-form__input",onChange:e=>{const t=e.target.value;l(t),i(t)},value:r}))},m=({cols:e,data:t,title:a,initialPage:o=0,initialPageSize:m=25,className:u="",namespace:d="",showPagination:g=!0,showTextFilter:p=!1,sortable:b=!1,loading:v=!1,isStale:h=!1,downloadURL:f=null})=>{var y,E,_,N;const[x,C]=(0,s.B)({[`${d}page`]:1,[`${d}order`]:"",[`${d}page_size`]:m,[`${d}search`]:m},{[`${d}page`]:Number,[`${d}page_size`]:Number}),{getTableProps:k,getTableBodyProps:w,headerGroups:P,rows:$,prepareRow:Z,canPreviousPage:O,canNextPage:S,pageCount:T,gotoPage:D,setPageSize:B,nextPage:A,previousPage:j,state:{pageIndex:z,pageSize:F,sortBy:R}}=(0,r.useTable)({columns:e,data:(null===(y=t)||void 0===y?void 0:y.data)||t,initialState:{pageIndex:o,pageSize:x[`${d}page_size`]},pageCount:(null===(N=null===(_=null===(E=t)||void 0===E?void 0:E.meta)||void 0===_?void 0:_.pagination)||void 0===N?void 0:N.pages)||1,manualPagination:!0,manualSortBy:!0},r.useSortBy,r.usePagination),G=(0,n.useRef)(null),[q,I]=(0,n.useState)(!1);(0,n.useEffect)((()=>{g&&x[`${d}page`]!==z+1&&(C(Object.assign(Object.assign({},x),{[`${d}page`]:z+1})),G.current&&q&&(G.current.scrollIntoView(),I(!1)))}),[g,C,z]),(0,n.useEffect)((()=>{g&&x[`${d}page_size`]!==F&&(C(Object.assign(Object.assign({},x),{[`${d}page_size`]:F})),G.current&&q&&(G.current.scrollIntoView(),I(!1)))}),[g,C,F]),(0,n.useEffect)((()=>{if(b){const e=function(e){if(!e.length)return"";const t=e[0];return`${t.desc?"-":""}${t.id.replace(/attributes./g,"").replace(/-/g,"_")}`}(R);if(e===x[`${d}order`])return;C(Object.assign(Object.assign({},x),{[`${d}order`]:e,[`${d}page`]:1})),G.current&&q&&(G.current.scrollIntoView(),I(!1))}}),[g,C,R,b]);const H=(0,n.useMemo)((()=>function(e,t){const a=t>1?[0,1]:[0],n=t>2?[Math.max(2,e-2)]:[];for(let e=n[0]+1;e<t-2&&n.length<5;e+=1)n.push(e);let r=[];return t>7?r=[t-2,t-1]:t>6&&(r=[t-1]),{startingPages:a,endingPages:r,adjacentPages:n,hasJumpFromStart:!!n.length&&n[0]>a[a.length-1]+1,hasJumpToEnd:!!r.length&&!!n.length&&r[0]>n[n.length-1]+1}}(z,T)),[z,T]),M=e=>(I(!0),D(e)),L=e=>(I(!0),B(+e.target.value));return v&&!h?n.createElement(l.Z,{size:"small"}):n.createElement("section",null,n.createElement("div",{className:"mg-table-overlay-container"},n.createElement("div",{className:v&&h?"mg-table-overlay":void 0}),n.createElement("table",Object.assign({},k,{className:`vf-table--striped mg-table ${u}`,ref:G}),(a||p||f)&&n.createElement("caption",{className:"vf-table__caption mg-table-caption"},n.createElement("div",null,n.createElement("div",null,p&&n.createElement(c,{namespace:d}),f&&n.createElement(n.Fragment,null," ",n.createElement("a",{href:f,className:"vf-button vf-button--secondary vf-button--sm",style:{whiteSpace:"nowrap"},download:!0},n.createElement("span",{className:"icon icon-common icon-download"})," ","Download"))),a&&("string"==typeof a?a:n.createElement(a,null)))),n.createElement("thead",{className:"vf-table__header"},P.map((e=>n.createElement("tr",Object.assign({},e.getHeaderGroupProps(),{className:"vf-table__row"}),e.headers.map((e=>n.createElement("th",Object.assign({},b&&e.canSort?e.getHeaderProps(e.getSortByToggleProps()):{key:e.id},{className:"vf-table__heading"}),e.render("Header"),b&&e.canSort&&n.createElement(n.Fragment,null," ",n.createElement("span",null,e.isSorted?e.isSortedDesc?n.createElement("i",{className:"icon icon-common icon-sort-down"}):n.createElement("i",{className:"icon icon-common icon-sort-up"}):n.createElement("i",{className:"icon icon-common icon-sort"})))))))))),n.createElement("tbody",Object.assign({},w(),{className:"vf-table__body"}),$.map((e=>(Z(e),n.createElement("tr",Object.assign({},e.getRowProps(),{className:"vf-table__row"}),e.cells.map((e=>n.createElement("td",Object.assign({},e.getCellProps(),{className:"vf-table__cell"}),e.render("Cell"))))))))))),g&&n.createElement("section",{className:"mg-table-footer"},n.createElement("label",{className:"vf-form__label"},"Page Size:",n.createElement("select",{className:"vf-form__select",value:x[`${d}page_size`],onBlur:L,onChange:L},[10,25,50].map((e=>n.createElement("option",{key:e,value:e},"Show ",e))))),n.createElement("nav",{className:"vf-pagination","aria-label":"Pagination"},n.createElement("ul",{className:"vf-pagination__list"},n.createElement("li",{className:"vf-pagination__item vf-pagination__item--previous-page"},n.createElement("button",{disabled:!O,type:"button",onClick:j,className:"vf-button vf-button--link vf-pagination__link"},"Previous",n.createElement("span",{className:"vf-u-sr-only"}," page"))),H.startingPages.map((e=>n.createElement(i,{key:e,currentPageIndex:z,pageIndex:e,gotoPage:M}))),H.hasJumpFromStart&&n.createElement("li",{className:"vf-pagination__item"},n.createElement("span",{className:"vf-pagination__label"},"...")),H.adjacentPages.map((e=>n.createElement(i,{key:e,currentPageIndex:z,pageIndex:e,gotoPage:M}))),H.hasJumpToEnd&&n.createElement("li",{className:"vf-pagination__item"},n.createElement("span",{className:"vf-pagination__label"},"...")),H.endingPages.map((e=>n.createElement(i,{key:e,currentPageIndex:z,pageIndex:e,gotoPage:M}))),n.createElement("li",{className:"vf-pagination__item vf-pagination__item--next-page"},n.createElement("button",{disabled:!S,type:"button",onClick:A,className:"vf-button vf-button--link vf-pagination__link"},"Next",n.createElement("span",{className:"vf-u-sr-only"}," page")))))))}},1699:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(7294),r=a(7838);const l=()=>{window.location.reload()},s=({error:e})=>e&&e.type!==r.ZB.NullURL?n.createElement("div",{className:"vf-box vf-box-theme--primary vf-box--easy",style:{backgroundColor:"lemonchiffon"}},n.createElement("h3",{className:"vf-box__heading"},n.createElement("span",{className:"icon icon-common icon-exclamation-triangle"})," Error Fetching Data"),n.createElement("p",{className:"vf-box__text"},(null==e?void 0:e.type)===r.ZB.FetchError&&`There were problems with the request. [${e.error}]`,(null==e?void 0:e.type)===r.ZB.NotOK&&`The response from the server was not OK [Status: ${e.status}].`,(null==e?void 0:e.type)===r.ZB.JSONError&&`The recovered resource didn't follow the expected format [${e.error}].`),n.createElement("div",{className:"mg-right"},n.createElement("button",{type:"button",className:"vf-button vf-button--tertiary vf-button--sm ",onClick:l},"Refresh"))):null},3415:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(7294);const r=({list:e})=>n.createElement("div",{className:"vf-grid vf-grid__col-2",style:{gridTemplateColumns:"1fr 2fr",rowGap:"0.5rem"}},e.map((({key:e,value:t})=>n.createElement(n.Fragment,{key:e},n.createElement("div",{style:{textAlign:"right"}},e,":"),n.createElement("div",null,"string"==typeof t?t:n.createElement(t,null))))))},4821:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(7294),r=a(6974),l=a(9711);const s=({tabs:e})=>{const t=(0,r.TH)();return n.createElement("div",{className:"vf-tabs mg-search-tabs"},n.createElement("ul",{className:"vf-tabs__list"},e.map((({label:e,to:a})=>n.createElement("li",{className:"vf-tabs__item",key:a},n.createElement(l.rU,{className:"vf-tabs__link "+(a===t.pathname||a.startsWith("#")&&a===t.hash||"#"===a&&""===t.hash?"is-active":""),to:a},"string"==typeof e?e:n.createElement(e,null)))))))}},2119:(e,t,a)=>{a.d(t,{B:()=>s});var n=a(7294),r=a(6974);const l=(e,t,a)=>{const n={},r=new URLSearchParams(t);return Object.entries(e).forEach((([e,t])=>{const l=a[e]||String;n[e]=l(r.get(e)||t)})),n},s=(e,t={})=>{const a=(0,r.TH)(),s=(0,r.s0)(),i=(0,n.useMemo)((()=>l(e,a.search,t)),[e,a.search,t]),[o,c]=(0,n.useState)(i);return(0,n.useEffect)((()=>{const n=l(e,a.search,t);JSON.stringify(n)!==JSON.stringify(o)&&c(n)}),[a.search,o,e,t]),[o,t=>{if(JSON.stringify(t)===JSON.stringify(o))return;const n=new URLSearchParams(a.search);let r=!1;Object.entries(e).forEach((([e,a])=>{const l=e in t?t[e]:a;t[e]!==o[e]&&(n.set(e,String(l)),l===a&&n.delete(e),r=!0)})),r&&(a.search=n.toString(),s(a))}]}},964:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(6974);const r=()=>{const e=(0,n.TH)();let{pathname:t}=e;t.trim().endsWith("/")&&(t=t.trim().slice(0,-1));const a=t.split("/");return null==a?void 0:a[a.length-1]}},2921:(e,t,a)=>{a.r(t),a.d(t,{default:()=>H});var n=a(7294),r=a(8110),l=a(964),s=a(402),i=a(1699),o=a(4821),c=a(3415),m=a(9711);const u=({data:e})=>{var t,a,r,l,s,i,o,u,d,g,p,b,v,h;return n.createElement("section",null,n.createElement("div",{className:"vf-stack"},n.createElement("details",{open:!0},n.createElement("summary",null,n.createElement("b",null,"Description")),n.createElement(c.Z,{list:[{key:"Study",value:(null===(r=null===(a=null===(t=e.relationships)||void 0===t?void 0:t.study)||void 0===a?void 0:a.data)||void 0===r?void 0:r.id)&&(()=>n.createElement(m.rU,{to:`/studies/${e.relationships.study.data.id}`},e.relationships.study.data.id))},{key:"Sample",value:(null===(i=null===(s=null===(l=e.relationships)||void 0===l?void 0:l.sample)||void 0===s?void 0:s.data)||void 0===i?void 0:i.id)&&(()=>n.createElement(m.rU,{to:`/samples/${e.relationships.sample.data.id}`},e.relationships.sample.data.id))},{key:"Assembly",value:(null===(d=null===(u=null===(o=e.relationships)||void 0===o?void 0:o.assembly)||void 0===u?void 0:u.data)||void 0===d?void 0:d.id)&&(h=e.attributes["experiment-type"],["assembly","hybrid_assembly","long_reads_assembly"].includes(h))&&(()=>n.createElement(m.rU,{to:`/assemblies/${e.relationships.assembly.data.id}`},e.relationships.assembly.data.id))},{key:"Run",value:(null===(b=null===(p=null===(g=e.relationships)||void 0===g?void 0:g.run)||void 0===p?void 0:p.data)||void 0===b?void 0:b.id)&&(()=>n.createElement(m.rU,{to:`/runs/${e.relationships.run.data.id}`},e.relationships.run.data.id))},{key:"Pipeline version",value:(null===(v=e.attributes)||void 0===v?void 0:v["pipeline-version"])&&(()=>n.createElement(m.rU,{to:`/pipelines/${e.attributes["pipeline-version"]}`},e.attributes["pipeline-version"]))}].filter((({value:e})=>!!e))})),n.createElement("details",{open:!0},n.createElement("summary",null,n.createElement("b",null,"Experiment details")),n.createElement(c.Z,{list:[{key:"Experiment type",value:e.attributes["experiment-type"]},{key:"Instrument model",value:e.attributes["instrument-model"]},{key:"Instrument platform",value:e.attributes["instrument-platform"]}].filter((({value:e})=>!!e))}))))};var d=a(7838),g=a(8840),p=a(5708),b=a.n(p);const v=({analysisData:e,summaryData:t})=>{var a;const r=(0,n.useRef)(null),l="assembly"===e.attributes["experiment-type"],s=l?"contigs":"reads",i=l?"Contigs":"Reads",o=[0,0,0,0,0],c=[0,0,0,0,0],m=[0,0,0,0,0],u={};((null===(a=e.attributes)||void 0===a?void 0:a["analysis-summary"])||[]).forEach((({key:e,value:t})=>{u[e]=t})),m[4]=Number(t.sequence_count),o[0]=Number(u["Submitted nucleotide sequences"]),o[1]=Number(u["Nucleotide sequences after format-specific filtering"]),o[2]=Number(u["Nucleotide sequences after length filtering"]),o[3]=Number(u["Nucleotide sequences after undetermined bases filtering"]),c[2]=o[1]-o[2],c[1]=o[0]-o[1],c[4]=o[3]-o[4]-m[4];const d={chart:{type:"bar",height:240},title:{text:`Number of sequence ${s} per QC step`},yAxis:{min:0,title:{text:"Count"}},xAxis:{categories:[`Initial ${s}`,"Trimming","Length filtering","Ambiguous base filtering",`${i} subsampled for QC analysis`]},plotOptions:{series:{stacking:"normal"}},credits:{enabled:!1},series:[{name:`${i} filtered out`,data:c,color:"#CCCCD3"},{name:`${i} remaining`,data:o,color:"#058DC7"},{name:`${i} after sampling`,data:m,color:"#8dc7c7"}]};return n.createElement(b(),{highcharts:g,options:d,ref:r})},h=({analysisData:e,summaryData:t})=>{const a=(0,n.useRef)(null),o=(0,l.Z)(),{data:c,loading:m,error:u}=(0,r.Z)(`analyses/${o}/seq-length`,{},{},d.B5.TSV);if(m)return n.createElement(s.Z,{size:"large"});if(u)return n.createElement(i.Z,{error:u});if(!c)return n.createElement(s.Z,null);const p=c.map((([e,t])=>[Number(e),Number(t)])),v=Math.max(...p.map((([e])=>e))),h="assembly"===e.attributes["experiment-type"],f=h?"Contigs":"Reads",y={chart:{marginLeft:78,style:{fontFamily:"Helvetica"},zoomType:"x"},title:{text:`${f} length histogram`,style:{fontSize:16,fontWeight:"bold"}},yAxis:{title:{text:"Number of "+(h?"contigs":"reads")}},xAxis:{min:0,max:100*(Math.floor(v/100)+1),plotBands:null===t?[]:[{from:Number(t.average_length)-Number(t.standard_deviation_length),to:Number(t.average_length)+Number(t.standard_deviation_length),color:"rgba(128, 128, 128, .2)",label:{text:`Standard Deviation<br/>±${Number(t.standard_deviation_length).toFixed(2)}`,style:{color:"#666666",fontSize:"0.8em"}}}]},series:[{name:f,data:p,color:"#058dc7"}],legend:{enabled:!1},credits:!1,navigation:{buttonOptions:{height:32,width:32,symbolX:16,symbolY:16,y:-10}}};return n.createElement(b(),{highcharts:g,options:y,ref:a})},f=()=>{const e=(0,n.useRef)(null),t=(0,l.Z)(),{data:a,loading:o,error:c}=(0,r.Z)(`analyses/${t}/nucleotide-distribution`,{},{},d.B5.TSV);if(o)return n.createElement(s.Z,{size:"large"});if(c)return n.createElement(i.Z,{error:c});if(!a)return n.createElement(s.Z,null);const m={pos:[],A:[],G:[],T:[],C:[],N:[]},u={A:"rgb(16, 150, 24)",G:"rgb(255, 153, 0)",C:"rgb(51, 102, 204)",T:"rgb(220, 57, 18)",N:"rgb(138, 65, 23)"},p=a[0];a.slice(1).forEach((e=>{e.forEach(((e,t)=>{m[p[t]].push(Number(e))}))}));const v={chart:{type:"area",style:{fontFamily:"Helvetica"}},title:{text:"Nucleotide position histogram",style:{fontSize:16,fontWeight:"bold"}},xAxis:{categories:m.pos,tickmarkPlacement:"on",title:{enabled:!1}},yAxis:{min:0,max:100,title:{enabled:!1}},plotOptions:{area:{stacking:"normal",lineColor:"#666666",lineWidth:1,marker:{lineWidth:1,lineColor:"#666666"}}},tooltip:{shared:!0},series:["A","T","C","G","N"].map((e=>({name:e,data:m[e],color:u[e]}))),credits:!1,navigation:{buttonOptions:{height:32,width:32,symbolX:16,symbolY:16,y:-10}}};return n.createElement(b(),{highcharts:g,options:v,ref:e})},y=({analysisData:e,summaryData:t})=>{const a=(0,n.useRef)(null),o=(0,l.Z)(),{data:c,loading:m,error:u}=(0,r.Z)(`analyses/${o}/gc-distribution`,{},{},d.B5.TSV);if(m)return n.createElement(s.Z,{size:"large"});if(u)return n.createElement(i.Z,{error:u});if(!c)return n.createElement(s.Z,null);const p=c.map((([e,t])=>[Number(e),Number(t)])),v="assembly"===e.attributes["experiment-type"],h=v?"Contigs":"Reads",f={chart:{style:{fontFamily:"Helvetica"},zoomType:"x"},title:{text:`${h} GC distribution`,style:{fontSize:16,fontWeight:"bold"}},yAxis:{title:{text:"Number of "+(v?"contigs":"reads")}},xAxis:{min:0,max:100,plotBands:null===t?[]:[{from:Number(t.average_gc_content)-Number(t.standard_deviation_gc_content),to:Number(t.average_gc_content)+Number(t.standard_deviation_gc_content),color:"rgba(128, 128, 128, .2)",borderColor:"#000000",label:{text:`Standard Deviation<br/>±${Number(t.standard_deviation_gc_content).toFixed(2)}`,style:{color:"#666666",fontSize:"0.8em"}}}]},series:[{name:h,data:p,color:"#058dc7"}],legend:{enabled:!1},credits:!1,navigation:{buttonOptions:{height:32,width:32,symbolX:16,symbolY:16,y:-10}}};return n.createElement(b(),{highcharts:g,options:f,ref:a})},E=({summaryData:e})=>{const t=(0,n.useRef)(null),a={chart:{type:"bar",marginTop:0,height:120},title:!1,xAxis:{categories:["Minimum","Average","Maximum"],title:{enabled:!1},lineColor:"#595959",tickColor:""},yAxis:{min:0,max:100*(Math.floor(Number(e.length_max)/100)+1),title:{text:"Sequence length (bp)"},plotBands:[{from:Number(e.average_length)-Number(e.standard_deviation_length),to:e.average_length+Number(e.standard_deviation_length),color:"rgba(128, 128, 128, .2)"}]},plotOptions:{series:{grouping:!1,shadow:!1,borderWidth:0}},series:[{name:"Length",data:[{y:Number(e.length_min),x:0,color:"rgb(114, 191, 63)"},{y:Number(e.average_length),x:1,color:"rgb(63, 114, 191)"},{y:Number(e.length_max),x:2,color:"rgb(114, 63, 191)"}],pointPadding:-.2,tooltip:{pointFormatter(){return`<span style="color:${this.color}">●</span> ${this.category}: <b>${this.y.toFixed(2)}</b><br/>`}}}],legend:{enabled:!1},credits:!1,navigation:{buttonOptions:{height:32,width:32,symbolX:16,symbolY:16,y:-10}},exporting:{enabled:!1}};return n.createElement(b(),{highcharts:g,options:a,ref:t})},_=({summaryData:e})=>{const t=(0,n.useRef)(null),a={chart:{type:"bar",marginTop:0,height:150},title:!1,xAxis:{categories:["Content"],title:{enabled:!1},lineColor:"#595959",tickColor:""},yAxis:{min:0,max:100,title:{enabled:!1},plotBands:[{from:Number(e.average_gc_content)-Number(e.standard_deviation_gc_content),to:Number(e.average_gc_content)+Number(e.standard_deviation_gc_content),color:"rgba(128, 128, 128, .2)"}]},plotOptions:{series:{grouping:!1,shadow:!1,borderWidth:0}},series:[{name:"GC content",pointPadding:.25,color:"rgb(63, 114, 191)",tooltip:{pointFormatter(){return`<span style="color:${this.color}">●</span> ${this.series.name}: <b>${this.y.toFixed(2)}%</b><br/>`}},data:[Number(e.average_gc_content)]},{name:"AT content",color:"rgb(114, 63, 191)",pointPadding:.25,threshold:Number(e.average_gc_content),tooltip:{pointFormatter(){const t=(100-Number(e.average_gc_content)).toFixed(2);return`\n              <span style="color:${this.color}">●</span>\n              ${this.series.name}: <b>${t}%</b>\n              <br/>`}},data:[100]}],credits:!1,navigation:{buttonOptions:{height:32,width:32,symbolX:16,symbolY:16,y:-10}},exporting:{enabled:!1}};return n.createElement(b(),{highcharts:g,options:a,ref:t})},N=({analysisData:e})=>{const t=(0,l.Z)(),{data:a,loading:o,error:c}=(0,r.Z)(`analyses/${t}/summary`,{},{},d.B5.TSV);if(o)return n.createElement(s.Z,{size:"large"});if(c)return n.createElement(i.Z,{error:c});if(!a)return n.createElement(s.Z,null);const m=Object.fromEntries(a),u="assembly"===e.attributes["experiment-type"],g=u?"contig":"read",p=u?"contigs":"reads";return n.createElement("div",{className:"vf-stack vf-stack--200"},n.createElement("p",null,"The chart below shows the number of ",p," which pass the quality control steps in the pipeline. Paired-end sequences may have been merged, in which case the initial number of ",p," may differ from the number given by ENA."),n.createElement(v,{analysisData:e,summaryData:m}),Number(e.attributes["pipeline-version"])>2&&n.createElement(n.Fragment,null,n.createElement("p",null,"The histograms below show the distributions of sequence lengths (left) and percentage GC content (right) for the sequences having passed quality control. Note that for large files, the distributions were compiled from a random subset of 2 million",p,". The standard deviations are shown on each plot. The bar chart underneath each graph indicates the minimum, mean and maximum length and mean GC and AT content, respectively."),n.createElement("div",{className:"vf-grid vf-grid__col-2"},n.createElement("div",{className:"vf-stack"},n.createElement(h,{analysisData:e,summaryData:m}),n.createElement(E,{summaryData:m})),n.createElement("div",{className:"vf-stack"},n.createElement(y,{analysisData:e,summaryData:m}),n.createElement(_,{summaryData:m}))),n.createElement("p",null,'The graph below show the relative abundance of nucletotides (A, C, G, T, or ambiguous base "N") at each position starting from the beginning of each ',g," up to the first 500 base pairs."),n.createElement(f,null)))};var x=a(6050),C=a(4897),k=a.n(C),w=a(7275),P=(a(3751),a(8696)),$=a(2054);const Z=n.createContext({contigsQueryData:{data:null,loading:!1,error:null},queryParameters:{},setQueryParameters:$.Z});var O=a(2069);const S=e=>e.split("cursor=")[1].split("&")[0],T=({paginationLinks:e,handleCursor:t})=>{const a=!!e.prev,r=!!e.next;return n.createElement("section",{className:"mg-table-footer"},n.createElement("nav",{className:"vf-pagination","aria-label":"Pagination"},n.createElement("ul",{className:"vf-pagination__list"},n.createElement("li",{className:"vf-pagination__item vf-pagination__item--previous-page"},n.createElement("button",{disabled:!a,type:"button",onClick:()=>t(S(e.prev)),className:"vf-button vf-button--link vf-pagination__link"},"Previous",n.createElement("span",{className:"vf-u-sr-only"}," page"))),n.createElement("li",{className:"vf-pagination__item vf-pagination__item--next-page"},n.createElement("button",{disabled:!r,type:"button",onClick:()=>t(S(e.next)),className:"vf-button vf-button--link vf-pagination__link"},"Next",n.createElement("span",{className:"vf-u-sr-only"}," page"))))))},D=({annotationType:e,present:t})=>{let a;const r=e[0].toUpperCase();switch(e){case"cog":a="#3b6fb6";break;case"kegg":a="#18974c";break;case"pfam":a="#193f90";break;case"interpro":a="#734595";break;case"go":a="#f49e17";break;case"antismash":a="#b65417";break;default:a="#8d8f8e"}t||(a+="55");const l=`${t?"Has":"Does’t have"} ${e} annotations`;return n.createElement(w.ZP,{content:l},n.createElement("div",{className:"emg-contig-feature-flag vf-text vf-text-body--4",style:{borderColor:a,color:a}},r))},B=()=>{const{contigsQueryData:e,setQueryParameters:t,queryParameters:a}=(0,n.useContext)(Z),{data:r,loading:l,error:o}=e||{},c=(0,n.useMemo)((()=>[{id:"contig_id",Header:"Name",accessor:e=>e.attributes["contig-id"],Cell:({cell:e})=>n.createElement("button",{className:"vf-button vf-button--link vf-button--sm contig-id-button",type:"button",onClick:()=>t(Object.assign(Object.assign({},a),{selectedContig:e.value}))},e.value,n.createElement(O.Z,null))},{id:"length",Header:"Length (bp)",accessor:e=>e.attributes.length,Cell:({cell:e})=>n.createElement("span",null,e.value)},{id:"coverage",Header:"Coverage",accessor:e=>e.attributes.coverage,Cell:({cell:e})=>n.createElement("span",null,e.value)},{id:"features",Header:"Features",accessor:e=>e.attributes,Cell:({cell:e})=>{const t=Object.entries(e.value).filter((([e])=>e.startsWith("has-"))).map((([e,t])=>n.createElement(D,{key:e,annotationType:e.substring(4),present:!!t})));return n.createElement("div",{className:"emg-contig-feature-flags"},t)}}]),[a,t]);return l&&!r?n.createElement(s.Z,{size:"large"}):o||!r?n.createElement(i.Z,{error:o}):n.createElement("div",null,n.createElement(P.Z,{cols:c,data:r,showPagination:!1,title:()=>n.createElement(n.Fragment,null,"Assembly Contigs",n.createElement("span",{className:"mg-number"},r.meta.pagination.count)),initialPage:0,className:"mg-contigs-table",namespace:"contigs_",loading:l}),n.createElement(T,{paginationLinks:r.links,handleCursor:e=>t(Object.assign(Object.assign({},a),{contigsPageCursor:e}))}))};var A=a(2119),j=a(7927);const z=({contig:e})=>{const t=(0,l.Z)(),{config:a}=(0,n.useContext)(x.Z),r=e.attributes["contig-id"],o=`${a.api}analyses/${e.attributes.accession}/contigs/${r}`,{data:c,loading:m,error:u}=(0,d.ZP)(o,d.B5.TXT),g=e.attributes["has-antismash"],p=e.attributes["contig-name"],b=(0,n.useCallback)((e=>{const n={showChromosomeWidget:!1,showTrackLabelButton:!0,showTrackLabels:!0,showCenterGuide:!1,reference:{indexed:!1,fastaURL:o},tracks:[{name:p,type:"mgnify-annotation",format:"gff3",url:`${a.api}analyses/${t}/contigs/${r}/annotations`,displayMode:"EXPANDED",label:"Functional annotation",colorAttributes:[["Default",""],["COG","COG"],["GO","GO"],["KEGG","KEGG"],["Pfam","Pfam"],["InterPro","InterPro"]],colorBy:void 0,defaultColour:void 0,labelBy:void 0}],showLegend:!0,legendParent:"#contig"};g&&n.tracks.push({colorAttributes:[],name:void 0,type:"mgnify-annotation",format:"gff3",displayMode:"EXPANDED",url:`${a.api}analyses/${t}/contigs/${r}/annotations?antismash=True`,label:"antiSMASH",colorBy:"as_type",defaultColour:"#BEBEBE",labelBy:"as_gene_clusters"}),null!==e&&k().createBrowser(e,n).then((e=>{e.on("trackclick",((e,t)=>{}))}))}),[t,g,a.api,r,p,o]);return m?n.createElement(s.Z,{size:"small"}):u?n.createElement(i.Z,{error:u}):c?n.createElement("div",{id:"contig"},n.createElement("div",{ref:b})):n.createElement(s.Z,null)},F=()=>{const e=(0,l.Z)(),[t,a]=(0,A.B)({contigsPageCursor:"",selectedContig:""}),{data:o,loading:c,error:m}=(0,r.Z)(`analyses/${e}/contigs`,{cursor:t.contigsPageCursor},{}),u=(0,n.useMemo)((()=>({contigsQueryData:{data:o,loading:c,error:m},queryParameters:t,setQueryParameters:a})),[o,m,c,t,a]),d=(0,n.useMemo)((()=>{var e,a,n;let r;if(!o)return null;const l=t.selectedContig||(null===(n=null===(a=null===(e=o.data)||void 0===e?void 0:e[0])||void 0===a?void 0:a.attributes)||void 0===n?void 0:n["contig-id"]);return l&&(r=(0,j.Z)(o.data,(e=>e.attributes["contig-id"]===l)),r)?r:null}),[o,t]);return(0,n.useEffect)((()=>{d&&d.attributes["contig-id"]!==t.selectedContig&&a(Object.assign(Object.assign({},t),{selectedContig:d.attributes["contig-id"]}))})),(0,n.useEffect)((()=>{if(t.selectedContig&&o&&!d){const{selectedContig:e}=t,n=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a}(t,["selectedContig"]);a(n)}}),[o,d,t,a]),c?n.createElement(s.Z,{size:"large"}):m?n.createElement(i.Z,{error:m}):o&&d?n.createElement("div",{className:"vf-stack vf-stack--800"},n.createElement(Z.Provider,{value:u},n.createElement("section",null,n.createElement("div",{className:"vf-stack"},n.createElement("details",{open:!0},n.createElement("summary",null,n.createElement("b",null,"Contig browser")),n.createElement(z,{contig:d})))),n.createElement("section",null,n.createElement(B,null)))):n.createElement(s.Z,null)};var R=a(1274);const G=e=>"assembly"===e.attributes["experiment-type"],q=e=>Number(e.attributes["pipeline-version"])>=5,I=e=>"amplicon"!==e.attributes["experiment-type"],H=()=>{const e=(0,l.Z)(),{data:t,loading:a,error:c}=(0,r.Z)(`analyses/${e}`,{include:"downloads"});if(a)return n.createElement(s.Z,{size:"large"});if(c)return n.createElement(i.Z,{error:c});if(!t)return n.createElement(s.Z,null);const{data:d,included:g}=t,p=[{label:"Overview",to:"#overview"},{label:"Quality control",to:"#qc"},{label:"Taxonomic analysis",to:"#taxonomic"},I(d)?{label:"Functional analysis",to:"#functional"}:null,(b=g,b.some((e=>{var t;return"Statistics"===(null===(t=null==e?void 0:e.attributes)||void 0===t?void 0:t["group-type"])}))?{label:"Abundance and comparison",to:"#abundance"}:null),G(d)&&q(d)?{label:"Pathways/Systems",to:"#path-systems"}:null,G(d)&&q(d)?{label:"Contig Viewer",to:"#contigs-viewer"}:null,{label:"Download",to:"#download"}].filter(Boolean);var b;return n.createElement("section",{className:"vf-content"},n.createElement("h2",null,"Analysis ",e),n.createElement("h4",null,n.createElement(m.rU,{to:G(d)?`/assemblies/${d.relationships.assembly.data.id}`:`/runs/${d.relationships.run.data.id}`},"Other Analyses")),n.createElement(o.Z,{tabs:p}),n.createElement("section",{className:"vf-grid"},n.createElement("div",{className:"vf-stack vf-stack--200"},n.createElement(R.Z,{hash:"#overview",isDefault:!0},n.createElement(u,{data:d})),n.createElement(R.Z,{hash:"#qc"},n.createElement(N,{analysisData:d})),n.createElement(R.Z,{hash:"#contigs-viewer"},n.createElement(F,null)))))}}}]);
//# sourceMappingURL=859.2fa1ed3e.chunk.js.map