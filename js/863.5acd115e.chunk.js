(self.webpackChunkmgportalv2=self.webpackChunkmgportalv2||[]).push([[863],{3647:(e,a,t)=>{"use strict";t.d(a,{ZB:()=>r,Yg:()=>l,XE:()=>i,nh:()=>c});var r,n=t(7294),o=t(150);!function(e){e[e.FetchError=0]="FetchError",e[e.NotOK=1]="NotOK",e[e.JSONError=2]="JSONError"}(r||(r={}));const s=e=>{const[a,t]=(0,n.useState)({data:null,loading:!0,error:null}),o=e=>{t((a=>Object.assign(Object.assign({},a),e)))};return(0,n.useEffect)((()=>{!function(e,a){var t,n,o,s;t=this,n=void 0,s=function*(){let t=null,n=null;try{t=yield fetch(e)}catch(e){return void a({error:{error:e,type:r.FetchError},loading:!1})}if(t.ok){try{n=yield t.json()}catch(e){return void a({error:{error:e,type:r.JSONError},loading:!1})}a({data:n,loading:!1})}else a({error:{status:t.status,response:t,type:r.NotOK},loading:!1})},new((o=void 0)||(o=Promise))((function(e,a){function r(e){try{i(s.next(e))}catch(e){a(e)}}function l(e){try{i(s.throw(e))}catch(e){a(e)}}function i(a){var t;a.done?e(a.value):(t=a.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,l)}i((s=s.apply(t,n||[])).next())}))}(e,o)}),[e]),a},l=(e,a={})=>{const t=Object.assign(Object.assign({},{format:"json",start:0}),a),r=`${o.l0}${e}?${Object.entries(t).map((([e,a])=>`${e}=${a}`)).join("&")}`;return s(r)},i=(e,a={})=>{const t=Object.assign(Object.assign({},{}),a);let r=`${o.hi}${e}`;return Object.keys(t).length>0&&(r+=`?${Object.entries(t).map((([e,a])=>`${e}=${a}`)).join("&")}`),s(r)},c=e=>s(`${o.tQ}${e}`)},863:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>h});var r=t(7294),n=t(3647),o=t(9521);const s=({currentPageIndex:e,pageIndex:a,gotoPage:t})=>e===a?r.createElement("li",{className:"vf-pagination__item vf-pagination__item--is-active"},r.createElement("span",{className:"vf-pagination__label","aria-current":"page"},r.createElement("span",{className:"vf-u-sr-only"},"Page "),e+1)):r.createElement("li",{className:"vf-pagination__item"},r.createElement("button",{type:"button",onClick:()=>t(a),className:"vf-button vf-button--link vf-pagination__link"},r.createElement("span",{className:"vf-u-sr-only"}," page"),a+1)),l=({cols:e,data:a,title:t,fetchPage:n,onChangeSort:l})=>{const{getTableProps:i,getTableBodyProps:c,headerGroups:m,rows:u,prepareRow:g,canPreviousPage:d,canNextPage:v,pageCount:p,gotoPage:b,nextPage:f,previousPage:h,state:{pageIndex:_,pageSize:E,sortBy:y}}=(0,o.useTable)({columns:e,data:a.data,initialState:{pageIndex:0},pageCount:a.meta.pagination.pages,manualPagination:!0,manualSortBy:!0},o.useSortBy,o.usePagination);r.useEffect((()=>{n&&n(_,E)}),[n,_,E]),r.useEffect((()=>{l&&(console.log(y),l(y))}),[l,y]);const N=r.useMemo((()=>function(e,a){const t=a>1?[0,1]:[0],r=[Math.max(2,e-2)];for(let e=r[0]+1;e<a-2&&r.length<5;e+=1)r.push(e);let n=[];return a>3?n=[a-2,a-1]:a>2&&(n=[a-1]),{startingPages:t,endingPages:n,adjacentPages:r,hasJumpFromStart:!!r.length&&r[0]>t[t.length-1]+1,hasJumpToEnd:!!n.length&&!!r.length&&n[0]>r[r.length-1]+1}}(_,p)),[_,p]);return r.createElement("section",null,r.createElement("table",Object.assign({},i,{className:"vf-table--striped"}),r.createElement("caption",{className:"vf-table__caption"},t),r.createElement("thead",{className:"vf-table__header"},m.map((e=>r.createElement("tr",Object.assign({},e.getHeaderGroupProps(),{className:"vf-table__row"}),e.headers.map((e=>r.createElement("th",Object.assign({},e.getHeaderProps(e.getSortByToggleProps()),{className:"vf-table__heading"}),e.render("Header"),l&&r.createElement(r.Fragment,null,"Â ",r.createElement("span",null,e.isSorted?e.isSortedDesc?r.createElement("i",{className:"icon icon-common icon-sort-down"}):r.createElement("i",{className:"icon icon-common icon-sort-up"}):r.createElement("i",{className:"icon icon-common icon-sort"})))))))))),r.createElement("tbody",Object.assign({},c(),{className:"vf-table__body"}),u.map((e=>(g(e),r.createElement("tr",Object.assign({},e.getRowProps(),{className:"vf-table__row"}),e.cells.map((e=>r.createElement("td",Object.assign({},e.getCellProps(),{className:"vf-table__cell"}),e.render("Cell")))))))))),n&&r.createElement("nav",{className:"vf-pagination","aria-label":"Pagination"},r.createElement("ul",{className:"vf-pagination__list"},r.createElement("li",{className:"vf-pagination__item vf-pagination__item--previous-page"},r.createElement("button",{disabled:!d,type:"button",onClick:h,className:"vf-button vf-button--link vf-pagination__link"},"Previous",r.createElement("span",{className:"vf-u-sr-only"}," page"))),N.startingPages.map((e=>r.createElement(s,{key:e,currentPageIndex:_,pageIndex:e,gotoPage:b}))),N.hasJumpFromStart&&r.createElement("li",{className:"vf-pagination__item"},r.createElement("span",{className:"vf-pagination__label"},"...")),N.adjacentPages.map((e=>r.createElement(s,{key:e,currentPageIndex:_,pageIndex:e,gotoPage:b}))),N.hasJumpToEnd&&r.createElement("li",{className:"vf-pagination__item"},r.createElement("span",{className:"vf-pagination__label"},"...")),N.endingPages.map((e=>r.createElement(s,{key:e,currentPageIndex:_,pageIndex:e,gotoPage:b}))),r.createElement("li",{className:"vf-pagination__item vf-pagination__item--next-page"},r.createElement("button",{disabled:!v,type:"button",onClick:f,className:"vf-button vf-button--link vf-pagination__link"},"Next",r.createElement("span",{className:"vf-u-sr-only"}," page"))))))};var i=t(5058),c=t(7739),m=t.n(c),u=t(1640),g=t.n(u),d=t(5161),v=t.n(d),p=t(3740);const b=({value:e,label:a})=>r.createElement("div",{style:{display:"flex",alignItems:"center"}},r.createElement("div",{style:{display:"flex"}},r.createElement("span",{className:`biome_icon icon_xxs ${(0,i.G)(e.id)}`,style:{float:"initial"}})),r.createElement("div",null,a)),f=({onSelect:e})=>{const{data:a,loading:t}=(0,n.XE)("biomes/root/children?depth_gte=1&depth_lte=3&page_size=100"),o=r.useMemo((()=>{if(t)return[{label:"Loading...",value:"root"}];const e=m()(a.data,(e=>g()(e.id.replace("root:",""),":",1).join(":")));return v()(e,((e,a)=>({label:a,options:e.map((e=>({value:e,label:a===e.attributes["biome-name"]?`All ${a}`:e.attributes["biome-name"]})))})))}),[a,t]);return r.createElement(p.ZP,{theme:e=>Object.assign(Object.assign({},e),{borderRadius:0,border:"2px solid grey",colors:Object.assign(Object.assign({},e.colors),{primary:"var(--vf-color--blue--dark)",primary25:"var(--vf-color--blue--light)",primary50:"var(--vf-color--blue--light)",primary75:"var(--vf-color--blue)",neutral0:"var(--vf-color--neutral--0)",neutral5:"var(--vf-color--neutral--100)",neutral10:"var(--vf-color--neutral--100)",neutral20:"var(--vf-color--neutral--200)",neutral30:"var(--vf-color--neutral--300)",neutral40:"var(--vf-color--neutral--400)",neutral50:"var(--vf-color--neutral--500)",neutral60:"var(--vf-color--neutral--600)",neutral70:"var(--vf-color--neutral--700)",neutral80:"var(--vf-color--neutral--800)",neutral90:"var(--vf-color--neutral--900)",danger:"var(--vf-color--red)",dangerLight:"var(--vf-color--red--light)"})}),styles:{control:(e,a)=>Object.assign(Object.assign({},e),{border:a.isFocused?"2px solid var(--vf-color--grey--dark)":"2px solid var(--vf-color--grey)",boxShadow:a.isFocused?"0 0 0 .0625rem var(--vf-color--grey--dark)":"unset","&:hover":{border:"2px solid var(--vf-color--grey--dark)",boxShadow:"0 0 0 .0625rem var(--vf-color--grey--dark)"},color:a.isFocused?"var(--vf-color--grey--dark)":"var(--vf-color--grey)"})},placeholder:"Filter by biome",onChange:(a,t)=>{"select-option"===t.action&&e(a.value.id)},formatOptionLabel:b,isLoading:t,isSearchable:!0,name:"biome",options:o})},h=()=>{const[e,a]=(0,r.useState)(1),[t,o]=(0,r.useState)(null),[s,c]=(0,r.useState)("root"),{data:m,loading:u}=(0,n.XE)("studies",{page:e,ordering:t,lineage:s,page_size:10}),g=r.useMemo((()=>[{id:"biome",Header:"Biome",accessor:e=>{var a,t;return null===(t=null===(a=e.relationships.biomes.data)||void 0===a?void 0:a[0])||void 0===t?void 0:t.id},Cell:({cell:e})=>r.createElement("span",{className:`biome_icon icon_xs ${(0,i.G)(e.value)}`,style:{float:"initial"}})},{id:"accession",Header:"Accession",accessor:"attributes.accession",Cell:({cell:e,row:a})=>r.createElement("a",{href:a.original.links.self,className:"vf-link"},e.value)},{Header:"Study name",accessor:"attributes.study-name"},{Header:"Samples",accessor:"attributes.samples-count"}]),[]);return u?r.createElement("h1",null,"loading"):r.createElement("section",{className:"vf-content"},r.createElement("h2",null,"Browse Page."),r.createElement(f,{onSelect:e=>{c(e)}}),r.createElement("div",{style:{height:"2rem"}}),r.createElement(l,{cols:g,data:m,title:"Studies",fetchPage:e=>{a(e+1)},onChangeSort:e=>o(function(e){if(!e.length)return"";const a=e[0];return`${a.desc?"-":""}${a.id.replace(/attributes./g,"").replace(/-/g,"_")}`}(e))}))}},5058:(e,a,t)=>{"use strict";t.d(a,{G:()=>i});const r={"root:engineered":"engineered_b"},n={"root:engineered:wastewater":"wastewater_b","root:environmental:air":"air_b","root:host-associated:amphibia":"amphibian_b","root:host-associated:arthropoda":"arthropoda_b","root:host-associated:fish":"fish_b","root:host-associated:human":"human_host_b","root:host-associated:insecta":"insect_b","root:host-associated:mammals":"mammals_b","root:host-associated:mollusca":"mollusca_b","root:host-associated:plants":"plant_host_b","root:host-associated:porifera":"porifera_b"},o={"root:environmental:aquatic:freshwater":"freshwater_b","root:environmental:aquatic:marine":"marine_b","root:environmental:aquatic:thermal springs":"hotspring_b","root:environmental:terrestrial:soil":"soil_b","root:environmental:terrestrial:volcanic":"vulcano_b","root:host-associated:human:digestive system":"human_gut_b","root:host-associated:human:skin":"skin_b"},s={"root:environmental:aquatic:freshwater:drinking water":"drinking_water_b","root:environmental:aquatic:freshwater:groundwater":"groundwater_b","root:environmental:aquatic:freshwater:ice":"ice_b","root:environmental:aquatic:freshwater:lake":"lake_b","root:environmental:aquatic:freshwater:lotic":"river_b","root:environmental:aquatic:marine:hydrothermal vents":"hydrothermal_vents_b","root:environmental:terrestrial:soil:wetlands":"wetlands_b","root:host-associated:human:digestive system:oral":"mouth_b","root:host-associated:human:respiratory system:pulmonary system":"lung_b","root:host-associated:mammals:nervous system:brain":"brain_b"},l={"root:environmental:aquatic:freshwater:groundwater:cave water":"cave_b","root:environmental:aquatic:freshwater:ice:glacier":"glacier_b","root:environmental:terrestrial:soil:grasslands":"grassland_b","root:environmental:terrestrial:soil:loam:forest soil":"forest_b","root:environmental:terrestrial:soil:sand:desert":"desert_b"};function i(e){const a=(e||"").split(":").map((e=>e.toLowerCase())),t=a.slice(0,2).join(":"),i=a.slice(0,3).join(":"),c=a.slice(0,4).join(":"),m=a.slice(0,5).join(":"),u=a.slice(0,6).join(":");return l[u]||s[m]||o[c]||n[i]||r[t]||"default_b"}}}]);
//# sourceMappingURL=863.5acd115e.chunk.js.map