(self.webpackChunkmgportalv2=self.webpackChunkmgportalv2||[]).push([[866],{647:(e,t,a)=>{"use strict";a.d(t,{ZB:()=>n,Yg:()=>i,XE:()=>l,nh:()=>c});var n,o=a(294),r=a(150);!function(e){e[e.FetchError=0]="FetchError",e[e.NotOK=1]="NotOK",e[e.JSONError=2]="JSONError"}(n||(n={}));const s=e=>{const[t,a]=(0,o.useState)({data:null,loading:!0,error:null}),r=e=>{a((t=>Object.assign(Object.assign({},t),e)))};return(0,o.useEffect)((()=>{!function(e,t){var a,o,r,s;a=this,o=void 0,s=function*(){let a=null,o=null;try{a=yield fetch(e)}catch(e){return void t({error:{error:e,type:n.FetchError},loading:!1})}if(a.ok){try{o=yield a.json()}catch(e){return void t({error:{error:e,type:n.JSONError},loading:!1})}t({data:o,loading:!1})}else t({error:{status:a.status,response:a,type:n.NotOK},loading:!1})},new((r=void 0)||(r=Promise))((function(e,t){function n(e){try{l(s.next(e))}catch(e){t(e)}}function i(e){try{l(s.throw(e))}catch(e){t(e)}}function l(t){var a;t.done?e(t.value):(a=t.value,a instanceof r?a:new r((function(e){e(a)}))).then(n,i)}l((s=s.apply(a,o||[])).next())}))}(e,r)}),[e]),t},i=(e,t={})=>{const a=Object.assign(Object.assign({},{format:"json",start:0}),t),n=`${r.l0}${e}?${Object.entries(a).map((([e,t])=>`${e}=${t}`)).join("&")}`;return s(n)},l=(e,t={})=>{const a=Object.assign(Object.assign({},{}),t);let n=`${r.hi}${e}`;return Object.keys(a).length>0&&(n+=`?${Object.entries(a).map((([e,t])=>`${e}=${t}`)).join("&")}`),s(n)},c=e=>s(`${r.tQ}${e}`)},866:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var n=a(294),o=a(647),r=a(521);const s=({currentPageIndex:e,pageIndex:t,gotoPage:a})=>e===t?n.createElement("li",{className:"vf-pagination__item vf-pagination__item--is-active"},n.createElement("span",{className:"vf-pagination__label","aria-current":"page"},n.createElement("span",{className:"vf-u-sr-only"},"Page "),e+1)):n.createElement("li",{className:"vf-pagination__item"},n.createElement("button",{type:"button",onClick:()=>a(t),className:"vf-button vf-button--link vf-pagination__link"},n.createElement("span",{className:"vf-u-sr-only"}," page"),t+1)),i=({cols:e,data:t,title:a,fetchPage:o,onChangeSort:i})=>{const{getTableProps:l,getTableBodyProps:c,headerGroups:m,rows:g,prepareRow:u,canPreviousPage:d,canNextPage:p,pageCount:b,gotoPage:v,nextPage:_,previousPage:h,state:{pageIndex:f,pageSize:E,sortBy:y}}=(0,r.useTable)({columns:e,data:t.data,initialState:{pageIndex:0},pageCount:t.meta.pagination.pages,manualPagination:!0,manualSortBy:!0},r.useSortBy,r.usePagination);n.useEffect((()=>{o&&o(f,E)}),[o,f,E]),n.useEffect((()=>{i&&(console.log(y),i(y))}),[i,y]);const N=n.useMemo((()=>function(e,t){const a=t>1?[0,1]:[0],n=[Math.max(2,e-2)];for(let e=n[0]+1;e<t-2&&n.length<5;e+=1)n.push(e);let o=[];return t>3?o=[t-2,t-1]:t>2&&(o=[t-1]),{startingPages:a,endingPages:o,adjacentPages:n,hasJumpFromStart:!!n.length&&n[0]>a[a.length-1]+1,hasJumpToEnd:!!o.length&&!!n.length&&o[0]>n[n.length-1]+1}}(f,b)),[f,b]);return n.createElement("section",null,n.createElement("table",Object.assign({},l,{className:"vf-table--striped"}),n.createElement("caption",{className:"vf-table__caption"},a),n.createElement("thead",{className:"vf-table__header"},m.map((e=>n.createElement("tr",Object.assign({},e.getHeaderGroupProps(),{className:"vf-table__row"}),e.headers.map((e=>n.createElement("th",Object.assign({},e.getHeaderProps(e.getSortByToggleProps()),{className:"vf-table__heading"}),e.render("Header"),i&&n.createElement(n.Fragment,null,"Â ",n.createElement("span",null,e.isSorted?e.isSortedDesc?n.createElement("i",{className:"icon icon-common icon-sort-down"}):n.createElement("i",{className:"icon icon-common icon-sort-up"}):n.createElement("i",{className:"icon icon-common icon-sort"})))))))))),n.createElement("tbody",Object.assign({},c(),{className:"vf-table__body"}),g.map((e=>(u(e),n.createElement("tr",Object.assign({},e.getRowProps(),{className:"vf-table__row"}),e.cells.map((e=>n.createElement("td",Object.assign({},e.getCellProps(),{className:"vf-table__cell"}),e.render("Cell")))))))))),o&&n.createElement("nav",{className:"vf-pagination","aria-label":"Pagination"},n.createElement("ul",{className:"vf-pagination__list"},n.createElement("li",{className:"vf-pagination__item vf-pagination__item--previous-page"},n.createElement("button",{disabled:!d,type:"button",onClick:h,className:"vf-button vf-button--link vf-pagination__link"},"Previous",n.createElement("span",{className:"vf-u-sr-only"}," page"))),N.startingPages.map((e=>n.createElement(s,{key:e,currentPageIndex:f,pageIndex:e,gotoPage:v}))),N.hasJumpFromStart&&n.createElement("li",{className:"vf-pagination__item"},n.createElement("span",{className:"vf-pagination__label"},"...")),N.adjacentPages.map((e=>n.createElement(s,{key:e,currentPageIndex:f,pageIndex:e,gotoPage:v}))),N.hasJumpToEnd&&n.createElement("li",{className:"vf-pagination__item"},n.createElement("span",{className:"vf-pagination__label"},"...")),N.endingPages.map((e=>n.createElement(s,{key:e,currentPageIndex:f,pageIndex:e,gotoPage:v}))),n.createElement("li",{className:"vf-pagination__item vf-pagination__item--next-page"},n.createElement("button",{disabled:!p,type:"button",onClick:_,className:"vf-button vf-button--link vf-pagination__link"},"Next",n.createElement("span",{className:"vf-u-sr-only"}," page"))))))};var l=a(58);const c=()=>{const[e,t]=(0,n.useState)(1),[a,r]=(0,n.useState)(null),{data:s,loading:c}=(0,o.XE)("studies",{page:e,ordering:a,page_size:10}),m=n.useMemo((()=>[{id:"biome",Header:"Biome",accessor:e=>{var t,a;return null===(a=null===(t=e.relationships.biomes.data)||void 0===t?void 0:t[0])||void 0===a?void 0:a.id},Cell:({cell:e})=>n.createElement("span",{className:`biome_icon icon_xs ${(0,l.G)(e.value)}`,style:{float:"initial"}})},{id:"accession",Header:"Accession",accessor:"attributes.accession",Cell:({cell:e,row:t})=>n.createElement("a",{href:t.original.links.self,className:"vf-link"},e.value)},{Header:"Study name",accessor:"attributes.study-name"},{Header:"Samples",accessor:"attributes.samples-count"}]),[]);return c?n.createElement("h1",null,"loading"):n.createElement("section",{className:"vf-content"},n.createElement("h2",null,"Browse Page."),n.createElement(i,{cols:m,data:s,title:"Studies",fetchPage:e=>{t(e+1)},onChangeSort:e=>r(function(e){if(!e.length)return"";const t=e[0];return`${t.desc?"-":""}${t.id.replace(/attributes./g,"").replace(/-/g,"_")}`}(e))}))}},58:(e,t,a)=>{"use strict";a.d(t,{G:()=>l});const n={"root:engineered":"engineered_b"},o={"root:engineered:wastewater":"wastewater_b","root:environmental:air":"air_b","root:host-associated:amphibia":"amphibian_b","root:host-associated:arthropoda":"arthropoda_b","root:host-associated:fish":"fish_b","root:host-associated:human":"human_host_b","root:host-associated:insecta":"insect_b","root:host-associated:mammals":"mammals_b","root:host-associated:mollusca":"mollusca_b","root:host-associated:plants":"plant_host_b","root:host-associated:porifera":"porifera_b"},r={"root:environmental:aquatic:freshwater":"freshwater_b","root:environmental:aquatic:marine":"marine_b","root:environmental:aquatic:thermal springs":"hotspring_b","root:environmental:terrestrial:soil":"soil_b","root:environmental:terrestrial:volcanic":"vulcano_b","root:host-associated:human:digestive system":"human_gut_b","root:host-associated:human:skin":"skin_b"},s={"root:environmental:aquatic:freshwater:drinking water":"drinking_water_b","root:environmental:aquatic:freshwater:groundwater":"groundwater_b","root:environmental:aquatic:freshwater:ice":"ice_b","root:environmental:aquatic:freshwater:lake":"lake_b","root:environmental:aquatic:freshwater:lotic":"river_b","root:environmental:aquatic:marine:hydrothermal vents":"hydrothermal_vents_b","root:environmental:terrestrial:soil:wetlands":"wetlands_b","root:host-associated:human:digestive system:oral":"mouth_b","root:host-associated:human:respiratory system:pulmonary system":"lung_b","root:host-associated:mammals:nervous system:brain":"brain_b"},i={"root:environmental:aquatic:freshwater:groundwater:cave water":"cave_b","root:environmental:aquatic:freshwater:ice:glacier":"glacier_b","root:environmental:terrestrial:soil:grasslands":"grassland_b","root:environmental:terrestrial:soil:loam:forest soil":"forest_b","root:environmental:terrestrial:soil:sand:desert":"desert_b"};function l(e){const t=(e||"").split(":").map((e=>e.toLowerCase())),a=t.slice(0,2).join(":"),l=t.slice(0,3).join(":"),c=t.slice(0,4).join(":"),m=t.slice(0,5).join(":"),g=t.slice(0,6).join(":");return i[g]||s[m]||r[c]||o[l]||n[a]||"default_b"}}}]);
//# sourceMappingURL=866.95f574aa.chunk.js.map