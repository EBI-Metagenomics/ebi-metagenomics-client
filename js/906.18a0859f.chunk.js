(self.webpackChunkmgportalv2=self.webpackChunkmgportalv2||[]).push([[906],{9170:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var n=a(7294),l=a(9521);const r=({currentPageIndex:e,pageIndex:t,gotoPage:a})=>e===t?n.createElement("li",{className:"vf-pagination__item vf-pagination__item--is-active"},n.createElement("span",{className:"vf-pagination__label","aria-current":"page"},n.createElement("span",{className:"vf-u-sr-only"},"Page "),e+1)):n.createElement("li",{className:"vf-pagination__item"},n.createElement("button",{type:"button",onClick:()=>a(t),className:"vf-button vf-button--link vf-pagination__link"},n.createElement("span",{className:"vf-u-sr-only"}," page"),t+1)),s=({cols:e,data:t,title:a,fetchPage:s,onChangeSort:i,initialPage:c=0})=>{const{getTableProps:o,getTableBodyProps:m,headerGroups:u,rows:d,prepareRow:v,canPreviousPage:f,canNextPage:p,pageCount:g,gotoPage:h,nextPage:E,previousPage:b,state:{pageIndex:_,pageSize:N,sortBy:y}}=(0,l.useTable)({columns:e,data:t.data,initialState:{pageIndex:c},pageCount:t.meta.pagination.pages,manualPagination:!0,manualSortBy:!0},l.useSortBy,l.usePagination);n.useEffect((()=>{s&&s(_,N)}),[s,_,N]),n.useEffect((()=>{i&&i(y)}),[i,y]);const x=n.useMemo((()=>function(e,t){const a=t>1?[0,1]:[0],n=t>2?[Math.max(2,e-2)]:[];for(let e=n[0]+1;e<t-2&&n.length<5;e+=1)n.push(e);let l=[];return t>7?l=[t-2,t-1]:t>6&&(l=[t-1]),{startingPages:a,endingPages:l,adjacentPages:n,hasJumpFromStart:!!n.length&&n[0]>a[a.length-1]+1,hasJumpToEnd:!!l.length&&!!n.length&&l[0]>n[n.length-1]+1}}(_,g)),[_,g]);return n.createElement("section",null,n.createElement("table",Object.assign({},o,{className:"vf-table--striped"}),n.createElement("caption",{className:"vf-table__caption"},a),n.createElement("thead",{className:"vf-table__header"},u.map((e=>n.createElement("tr",Object.assign({},e.getHeaderGroupProps(),{className:"vf-table__row"}),e.headers.map((e=>n.createElement("th",Object.assign({},e.getHeaderProps(e.getSortByToggleProps()),{className:"vf-table__heading"}),e.render("Header"),i&&n.createElement(n.Fragment,null," ",n.createElement("span",null,e.isSorted?e.isSortedDesc?n.createElement("i",{className:"icon icon-common icon-sort-down"}):n.createElement("i",{className:"icon icon-common icon-sort-up"}):n.createElement("i",{className:"icon icon-common icon-sort"})))))))))),n.createElement("tbody",Object.assign({},m(),{className:"vf-table__body"}),d.map((e=>(v(e),n.createElement("tr",Object.assign({},e.getRowProps(),{className:"vf-table__row"}),e.cells.map((e=>n.createElement("td",Object.assign({},e.getCellProps(),{className:"vf-table__cell"}),e.render("Cell")))))))))),s&&n.createElement("nav",{className:"vf-pagination","aria-label":"Pagination"},n.createElement("ul",{className:"vf-pagination__list"},n.createElement("li",{className:"vf-pagination__item vf-pagination__item--previous-page"},n.createElement("button",{disabled:!f,type:"button",onClick:b,className:"vf-button vf-button--link vf-pagination__link"},"Previous",n.createElement("span",{className:"vf-u-sr-only"}," page"))),x.startingPages.map((e=>n.createElement(r,{key:e,currentPageIndex:_,pageIndex:e,gotoPage:h}))),x.hasJumpFromStart&&n.createElement("li",{className:"vf-pagination__item"},n.createElement("span",{className:"vf-pagination__label"},"...")),x.adjacentPages.map((e=>n.createElement(r,{key:e,currentPageIndex:_,pageIndex:e,gotoPage:h}))),x.hasJumpToEnd&&n.createElement("li",{className:"vf-pagination__item"},n.createElement("span",{className:"vf-pagination__label"},"...")),x.endingPages.map((e=>n.createElement(r,{key:e,currentPageIndex:_,pageIndex:e,gotoPage:h}))),n.createElement("li",{className:"vf-pagination__item vf-pagination__item--next-page"},n.createElement("button",{disabled:!p,type:"button",onClick:E,className:"vf-button vf-button--link vf-pagination__link"},"Next",n.createElement("span",{className:"vf-u-sr-only"}," page"))))))}},1699:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var n=a(7294),l=a(3647);const r=()=>{window.location.reload()},s=({error:e})=>e&&e.type!==l.ZB.NullURL?n.createElement("div",{className:"vf-box vf-box-theme--primary vf-box--easy",style:{backgroundColor:"lemonchiffon"}},n.createElement("h3",{className:"vf-box__heading"},n.createElement("span",{className:"icon icon-common icon-exclamation-triangle"})," Error Fetching Data"),n.createElement("p",{className:"vf-box__text"},(null==e?void 0:e.type)===l.ZB.FetchError&&`There were problems with the request. [${e.error}]`,(null==e?void 0:e.type)===l.ZB.NotOK&&`The response from the server was not OK [Status: ${e.status}].`,(null==e?void 0:e.type)===l.ZB.JSONError&&`The recovered resource didn't follow the expected format [${e.error}].`),n.createElement("div",{className:"mg-right"},n.createElement("button",{type:"button",className:"vf-button vf-button--tertiary vf-button--sm ",onClick:r},"Refresh"))):null},3647:(e,t,a)=>{"use strict";a.d(t,{ZB:()=>n,Yg:()=>c,XE:()=>o,nh:()=>m});var n,l=a(7294),r=a(150);!function(e){e[e.FetchError=0]="FetchError",e[e.NotOK=1]="NotOK",e[e.JSONError=2]="JSONError",e[e.NullURL=3]="NullURL"}(n||(n={}));const s={data:null,loading:!1,error:{type:n.NullURL,error:"The queried URL is null"}},i=e=>{const[t,a]=(0,l.useState)({data:null,loading:!0,error:null}),r=e=>{a((t=>Object.assign(Object.assign({},t),e)))};return(0,l.useEffect)((()=>{e?function(e,t){var a,l,r,s;a=this,l=void 0,s=function*(){let a=null,l=null;try{a=yield fetch(e)}catch(e){return void t({error:{error:e,type:n.FetchError},loading:!1})}if(a.ok){try{l=yield a.json()}catch(e){return void t({error:{error:e,type:n.JSONError},loading:!1})}t({data:l,loading:!1,error:null})}else t({error:{status:a.status,response:a,type:n.NotOK},loading:!1})},new((r=void 0)||(r=Promise))((function(e,t){function n(e){try{c(s.next(e))}catch(e){t(e)}}function i(e){try{c(s.throw(e))}catch(e){t(e)}}function c(t){var a;t.done?e(t.value):(a=t.value,a instanceof r?a:new r((function(e){e(a)}))).then(n,i)}c((s=s.apply(a,l||[])).next())}))}(e,r):a(s)}),[e]),t},c=(e,t={})=>{const a=Object.assign(Object.assign({},{format:"json",start:0}),t),n=`${r.l0}${e}?${Object.entries(a).map((([e,t])=>`${e}=${t}`)).join("&")}`;return i([null,void 0].includes(e)?null:n)},o=(e,t={})=>{const a=Object.assign(Object.assign({},{}),t);let n=`${r.hi}${e}`;return Object.keys(a).length>0&&(n+=`?${Object.entries(a).map((([e,t])=>`${e}=${t}`)).join("&")}`),i([null,void 0].includes(e)?null:n)},m=e=>i([null,void 0].includes(e)?null:`${r.tQ}${e}`)},2119:(e,t,a)=>{"use strict";a.d(t,{B:()=>s});var n=a(7294),l=a(1153);const r=(e,t,a)=>{const n={},l=new URLSearchParams(t);return Object.entries(e).forEach((([e,t])=>{const r=a[e]||String;n[e]=r(l.get(e)||t)})),n},s=(e,t={})=>{const a=(0,l.TH)(),s=(0,l.k6)(),i=(0,n.useMemo)((()=>r(e,a.search,t)),[e,a.search,t]),[c,o]=(0,n.useState)(i);return(0,n.useEffect)((()=>{const n=r(e,a.search,t);JSON.stringify(n)!==JSON.stringify(c)&&o(n)}),[a.search,c,e,t]),[c,t=>{if(JSON.stringify(t)===JSON.stringify(c))return;const n=new URLSearchParams(a.search);let l=!1;Object.entries(e).forEach((([e,a])=>{const r=e in t?t[e]:a;t[e]!==c[e]&&(n.set(e,String(r)),r===a&&n.delete(e),l=!0)})),l&&(a.search=n.toString(),s.push(a))}]}},4906:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>B});var n=a(7294),l=a(1153);const r=n.createContext({searchData:{"/search/studies":{data:null,loading:!1,error:null},"/search/samples":{data:null,loading:!1,error:null},"/search/analyses":{data:null,loading:!1,error:null}},queryParameters:{},setQueryParameters:e=>{}});var s=a(402);const i=()=>{const e=(0,l.TH)(),{searchData:t,queryParameters:a,setQueryParameters:i}=(0,n.useContext)(r),[c,o]=(0,n.useState)(a.centre_name.split(",").filter(Boolean));(0,n.useEffect)((()=>{o(a.centre_name.split(",").filter(Boolean))}),[a.centre_name]);const m=(0,n.useMemo)((()=>{var a,n,l;return null===(l=((null===(n=null===(a=null==t?void 0:t[e.pathname])||void 0===a?void 0:a.data)||void 0===n?void 0:n.facets)||[]).filter((e=>"centre_name"===e.id)))||void 0===l?void 0:l[0]}),[e.pathname,t]);if(null==t?void 0:t[e.pathname].loading)return n.createElement(s.Z,null);if(null==t?void 0:t[e.pathname].error)return null;if(!m)return null;const u=e=>{const{value:t,checked:n}=e.target;let l=[...c];n&&!c.includes(t)?l.push(t):l=c.filter((e=>e!==t)),i(Object.assign(Object.assign({},a),{centre_name:l.sort().join(",")}))};return n.createElement("fieldset",{className:"vf-form__fieldset vf-stack vf-stack--400"},n.createElement("legend",{className:"vf-form__legend"},"Centre name"),m.facetValues.map((({label:e,value:t,count:a})=>n.createElement("div",{className:"vf-form__item vf-form__item--checkbox",key:t},n.createElement("input",{type:"checkbox",name:t,value:t,id:t,className:"vf-form__checkbox",onChange:u,checked:c.includes(t)}),n.createElement("label",{className:"vf-form__label",htmlFor:t},n.createElement("span",{className:"mg-filter-checkbox-label"},e," ",n.createElement("span",{className:"mg-number"},a)))))))},c=({value:e,label:t,count:a,biomeChildren:l,depth:r=0,handleSelection:s,isSelected:i})=>{const[o,m]=(0,n.useState)(!1);return n.createElement("div",{style:{marginLeft:`${r}rem`}},n.createElement("div",{className:"mg-biome-selector"},(null==l?void 0:l.length)?n.createElement("button",{type:"button",className:"mg-expander",onClick:()=>m(!o)},o?"▾":"▸"):n.createElement("span",{className:"mg-biome-spacer"}),n.createElement("div",{className:"vf-form__item vf-form__item--checkbox"},n.createElement("input",{type:"checkbox",name:e,value:e,id:e,className:"vf-form__checkbox",onChange:s,checked:i(e)}),n.createElement("label",{className:"vf-form__label",htmlFor:e},n.createElement("span",{className:"mg-filter-checkbox-label"},t," ",n.createElement("span",{className:"mg-number"},a))))),l&&l.length&&o&&l.map((({label:t,value:a,count:l,biomeChildren:o})=>n.createElement(c,{key:`${e}/${a}`,label:t,value:`${e}/${a}`,count:l,depth:r+1,biomeChildren:o,handleSelection:s,isSelected:i}))))},o=()=>{const e=(0,l.TH)(),{searchData:t,queryParameters:a,setQueryParameters:i}=(0,n.useContext)(r),[o,m]=(0,n.useState)(a.biome.split(",").filter(Boolean));(0,n.useEffect)((()=>{m(a.biome.split(",").filter(Boolean))}),[a.biome]);const u=(0,n.useMemo)((()=>{var a,n,l;return null===(l=((null===(n=null===(a=null==t?void 0:t[e.pathname])||void 0===a?void 0:a.data)||void 0===n?void 0:n.facets)||[]).filter((e=>"biome"===e.id)))||void 0===l?void 0:l[0]}),[e.pathname,t]);if(null==t?void 0:t[e.pathname].loading)return n.createElement(s.Z,null);if(null==t?void 0:t[e.pathname].error)return null;if(!u)return null;const d=e=>{const{value:t,checked:n}=e.target;let l=[...o];n&&!o.includes(t)?l.push(t):l=o.filter((e=>e!==t)),i(Object.assign(Object.assign({},a),{biome:l.sort().join(",")}))};return n.createElement("fieldset",{className:"vf-form__fieldset vf-stack vf-stack--400"},n.createElement("legend",{className:"vf-form__legend"},"Biome"),u.facetValues.map((({label:e,value:t,count:a,children:l})=>n.createElement(c,{key:t,label:e,value:t,count:a,biomeChildren:l,handleSelection:d,isSelected:e=>o.includes(e)}))))};var m=a(9122),u=a(6169);const d=function(){return u.Z.Date.now()};var v=a(6279),f=Math.max,p=Math.min;const g=(e,t)=>e.max===t.max&&e.min===t.min,h=({min:e,max:t,isEnabled:a=!0,selection:l=null,onChange:r=(e=>e)})=>{const[s,i]=(0,n.useState)({min:l&&"min"in l?l.min:e,max:l&&"max"in l?l.max:t}),c=(0,n.useCallback)(function(e,t,a){var n,l,r,s,i,c,o=0,u=!1,g=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function E(t){var a=n,r=l;return n=l=void 0,o=t,s=e.apply(r,a)}function b(e){return o=e,i=setTimeout(N,t),u?E(e):s}function _(e){var a=e-c;return void 0===c||a>=t||a<0||g&&e-o>=r}function N(){var e=d();if(_(e))return y(e);i=setTimeout(N,function(e){var a=t-(e-c);return g?p(a,r-(e-o)):a}(e))}function y(e){return i=void 0,h&&n?E(e):(n=l=void 0,s)}function x(){var e=d(),a=_(e);if(n=arguments,l=this,c=e,a){if(void 0===i)return b(c);if(g)return clearTimeout(i),i=setTimeout(N,t),E(c)}return void 0===i&&(i=setTimeout(N,t)),s}return t=(0,v.Z)(t)||0,(0,m.Z)(a)&&(u=!!a.leading,r=(g="maxWait"in a)?f((0,v.Z)(a.maxWait)||0,t):r,h="trailing"in a?!!a.trailing:h),x.cancel=function(){void 0!==i&&clearTimeout(i),o=0,n=c=l=i=void 0},x.flush=function(){return void 0===i?s:y(d())},x}(r,300),[]);return(0,n.useEffect)((()=>{g(s,l)||c(s)}),[s]),(0,n.useEffect)((()=>{g(s,l)||i(l)}),[l]),n.createElement("div",{className:"mg-multirange-wrapper"},n.createElement("input",{type:"range",min:e,max:t,name:"min",value:s.min,className:"original",disabled:!a,onChange:e=>{i({min:Number(e.target.value),max:s.max})}}),n.createElement("input",{type:"range",min:e,max:t,name:"max",value:s.max,className:"ghost",disabled:!a,onChange:e=>{i({max:Number(e.target.value),min:s.min})}}),n.createElement("div",{className:"labels"},n.createElement("div",{className:"label-min"},n.createElement("span",null,Math.min(s.min,s.max))),n.createElement("div",{className:"label-max"},n.createElement("span",null,Math.max(s.min,s.max)))))},E=({id:e,onChange:t=(e=>e),isOn:a=!1})=>{const[l,r]=(0,n.useState)(a);return(0,n.useEffect)((()=>{r(a),t(a)}),[a,t]),n.createElement("div",null,n.createElement("input",{className:"mg-switch",type:"checkbox",id:e,checked:l,onChange:()=>{t(!l),r(!l)}}))},b=(0,n.memo)((()=>{const{queryParameters:e,setQueryParameters:t}=(0,n.useContext)(r),[a,l]=(0,n.useState)(!!e.temperature),[s,i]=(0,n.useState)(e.temperature.split(",").filter(Boolean).map(Number));return(0,n.useEffect)((()=>{const t=e.temperature.split(",").filter(Boolean).map(Number);i(t)}),[e.temperature]),n.createElement("fieldset",{className:"vf-form__fieldset vf-stack vf-stack--400"},n.createElement("legend",{className:"vf-form__legend"},"Temperature (°C)"),n.createElement("div",{className:"mg-switch-and-slider"},n.createElement(E,{id:"temp_filter",onChange:a=>{l(a),a||t(Object.assign(Object.assign({},e),{temperature:""}))},isOn:a}),n.createElement(h,{min:-20,max:100,isEnabled:a,selection:{min:(null==s?void 0:s[0])||-20,max:(null==s?void 0:s[1])||100},onChange:({min:a,max:n})=>{t(Object.assign(Object.assign({},e),{temperature:`${a},${n}`}))}})))})),_=(0,n.memo)((()=>{const{queryParameters:e,setQueryParameters:t}=(0,n.useContext)(r),[a,l]=(0,n.useState)(!!e.depth),[s,i]=(0,n.useState)(e.depth.split(",").filter(Boolean).map(Number));return(0,n.useEffect)((()=>{const t=e.depth.split(",").filter(Boolean).map(Number);i(t)}),[e.depth]),n.createElement("fieldset",{className:"vf-form__fieldset vf-stack vf-stack--400"},n.createElement("legend",{className:"vf-form__legend"},"Depth (meters)"),n.createElement("div",{className:"mg-switch-and-slider"},n.createElement(E,{id:"temp_filter",onChange:a=>{l(a),a||t(Object.assign(Object.assign({},e),{depth:""}))},isOn:a}),n.createElement(h,{min:0,max:2e3,isEnabled:a,selection:{min:(null==s?void 0:s[0])||0,max:(null==s?void 0:s[1])||2e3},onChange:({min:a,max:n})=>{t(Object.assign(Object.assign({},e),{depth:`${a},${n}`}))}})))})),N=()=>{const e=(0,l.TH)(),{searchData:t,queryParameters:a,setQueryParameters:i}=(0,n.useContext)(r),[c,o]=(0,n.useState)(a.experiment_type.split(",").filter(Boolean));(0,n.useEffect)((()=>{o(a.experiment_type.split(",").filter(Boolean))}),[a.experiment_type]);const m=(0,n.useMemo)((()=>{var a,n,l;return null===(l=((null===(n=null===(a=null==t?void 0:t[e.pathname])||void 0===a?void 0:a.data)||void 0===n?void 0:n.facets)||[]).filter((e=>"experiment_type"===e.id)))||void 0===l?void 0:l[0]}),[e.pathname,t]);if(null==t?void 0:t[e.pathname].loading)return n.createElement(s.Z,null);if(null==t?void 0:t[e.pathname].error)return null;if(!m)return null;const u=e=>{const{value:t,checked:n}=e.target;let l=[...c];n&&!c.includes(t)?l.push(t):l=c.filter((e=>e!==t)),i(Object.assign(Object.assign({},a),{experiment_type:l.sort().join(",")}))};return n.createElement("fieldset",{className:"vf-form__fieldset vf-stack vf-stack--400"},n.createElement("legend",{className:"vf-form__legend"},"Experiment type"),m.facetValues.map((({label:e,value:t,count:a})=>n.createElement("div",{className:"vf-form__item vf-form__item--checkbox",key:t},n.createElement("input",{type:"checkbox",name:t,value:t,id:t,className:"vf-form__checkbox",onChange:u,checked:c.includes(t)}),n.createElement("label",{className:"vf-form__label",htmlFor:t},n.createElement("span",{className:"mg-filter-checkbox-label"},e," ",n.createElement("span",{className:"mg-number"},a)))))))};var y=a(3727);const x=[{label:"Studies",to:"/search/studies"},{label:"Samples",to:"/search/samples"},{label:"Analyses",to:"/search/analyses"}],C=()=>{const e=(0,l.TH)(),t=(0,l.k6)(),{searchData:a}=(0,n.useContext)(r);return(0,n.useEffect)((()=>{x.some((({to:t})=>t===e.pathname))||t.replace(Object.assign(Object.assign({},e),{pathname:x[0].to}))}),[e,t]),n.createElement("div",{className:"vf-tabs"},n.createElement("ul",{className:"vf-tabs__list"},x.map((({label:t,to:l})=>{var r,s;return n.createElement("li",{className:"vf-tabs__item",key:t},n.createElement(y.rU,{className:"vf-tabs__link "+(l===e.pathname?"is-active":""),to:l},t,n.createElement("span",{className:"mg-number"},(null===(s=null===(r=null==a?void 0:a[l])||void 0===r?void 0:r.data)||void 0===s?void 0:s.hitCount)||"")))}))))},k=()=>{const{queryParameters:e,setQueryParameters:t}=(0,n.useContext)(r),[a,l]=(0,n.useState)(e.query);return(0,n.useEffect)((()=>{l(e.query)}),[e.query]),n.createElement("div",{className:"vf-form vf-form--search vf-form--search--responsive vf-sidebar vf-sidebar--end"},n.createElement("div",{className:"vf-sidebar__inner"},n.createElement("div",{className:"vf-form__item | vf-search__item"},n.createElement("input",{type:"text",placeholder:"Enter your search terms",id:"text",className:"vf-form__input | st-default-search-input",value:a,onChange:e=>{l(e.target.value)}})),n.createElement("button",{type:"button",className:"vf-search__button | vf-button vf-button--primary",onClick:()=>{t(Object.assign(Object.assign({},e),{query:a}))}},n.createElement("span",{className:"vf-button__text"},"Search "),n.createElement("span",{className:"icon icon-common icon-search"})),n.createElement("button",{type:"button",className:"vf-search__button | vf-button vf-button--tertiary",onClick:()=>{t({})}},n.createElement("span",{className:"vf-button__text"},"Clear All "),n.createElement("span",{className:"icon icon-common icon-times-circle"}))))};var S=a(1699),O=a(9170);const P={"/search/studies":{label:"Studies",columns:[{id:"study_id",Header:"MGnify ID",accessor:e=>e.id,Cell:({cell:e})=>n.createElement(y.rU,{to:`/studies/${e.value}`},e.value)},{id:"ena_id",Header:"ENA accession",accessor:e=>{var t,a;return(null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.ENA_PROJECT)||void 0===a?void 0:a[0])||""},Cell:({cell:e})=>n.createElement("span",null,n.createElement("a",{href:`https://www.ebi.ac.uk/ena/browser/view/${e.value}`,className:"ext"},e.value))},{id:"biome",Header:"Biome",accessor:e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.biome_name)||void 0===a?void 0:a.join(":")},Cell:({cell:e})=>n.createElement("span",null,e.value)},{id:"centre",Header:"Centre name",accessor:e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.centre_name)||void 0===a?void 0:a[0]},Cell:({cell:e})=>n.createElement("span",null,e.value)}]},"/search/samples":{label:"Samples",columns:[{id:"sample_id",Header:"Sample",accessor:e=>e.id,Cell:({cell:e})=>n.createElement(y.rU,{to:`/samples/${e.value}`},e.value)},{id:"mgnify_id",Header:"MGnify ID",accessor:e=>{var t,a;return(null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.METAGENOMICS_PROJECTS)||void 0===a?void 0:a[0])||""},Cell:({cell:e})=>n.createElement(y.rU,{to:`/studies/${e.value}`},e.value)},{id:"sample_name",Header:"Name",pathnames:["/search/studies"],accessor:e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.name)||void 0===a?void 0:a[0]},Cell:({cell:e})=>n.createElement("span",null,e.value)},{id:"sample_description",Header:"Description",pathnames:["/search/studies"],accessor:e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.description)||void 0===a?void 0:a[0]},Cell:({cell:e})=>n.createElement("span",null,e.value)}]},"/search/analyses":{label:"Analyses",columns:[{id:"analyses_id",Header:"Analysis",accessor:e=>(e.id||"").split("_"),Cell:({cell:e})=>n.createElement(y.rU,{to:`/analyses/${e.value[0]}?version=${e.value[1]}`},e.value[0])},{id:"pipeline",Header:"Pipeline version",accessor:e=>{var t,a;return(null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.pipeline_version)||void 0===a?void 0:a[0])||""},Cell:({cell:e})=>n.createElement("span",null,n.createElement(y.rU,{to:`/pipelines/${e.value}`},e.value))},{id:"sample_id",Header:"Sample",accessor:e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.METAGENOMICS_SAMPLES)||void 0===a?void 0:a[0]},Cell:({cell:e})=>n.createElement(y.rU,{to:`/samples/${e.value}`},e.value)},{id:"mgnify_id",Header:"MGnify ID",accessor:e=>{var t,a;return(null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.METAGENOMICS_PROJECTS)||void 0===a?void 0:a[0])||""},Cell:({cell:e})=>n.createElement(y.rU,{to:`/studies/${e.value}`},e.value)},{id:"experiment",Header:"Experiment type",accessor:e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.experiment_type)||void 0===a?void 0:a[0]},Cell:({cell:e})=>n.createElement("span",null,e.value)}]}},j=()=>{var e;const{pathname:t}=(0,l.TH)(),{searchData:a}=(0,n.useContext)(r),{data:i,loading:c,error:o}=(null==a?void 0:a[t])||{},m=(0,n.useMemo)((()=>{var e;return null===(e=null==P?void 0:P[t])||void 0===e?void 0:e.columns}),[t]);if(c)return n.createElement(s.Z,{size:"small"});if(o||!i)return n.createElement(S.Z,{error:o});const u={data:i.entries,meta:{pagination:{pages:Math.ceil(i.hitCount/25)}}};return n.createElement(O.Z,{cols:m,data:u,title:`${(null===(e=null==P?void 0:P[t])||void 0===e?void 0:e.label)||""} (${i.hitCount})`,initialPage:1})};var $=a(3647),T=a(2119);const w=(e,t)=>e.map((e=>{return a=e,t[e].split(",").filter(Boolean).map((e=>`${a}:${e}`)).join(",");var a})).filter(Boolean).join(","),M=(e,t)=>{const a=e.map((e=>{switch(e){case"query":return t[e];case"temperature":case"depth":{const a=t[e].split(",").filter(Boolean).map(Number);return 2===a.length?`${e}:[${Math.min(...a)} TO ${Math.max(...a)}]`:""}default:return""}})).filter(Boolean);return a.length?a.join(" AND "):"domain_source:metagenomics_samples"},B=()=>{const[e,t]=(0,T.B)({query:"",centre_name:"",biome:"",temperature:"",depth:"",experiment_type:""}),a={searchData:{"/search/studies":(0,$.Yg)("metagenomics_projects",{query:(null==e?void 0:e.query)||"domain_source:metagenomics_projects",size:25,fields:"ENA_PROJECT,biome_name,centre_name",facetcount:10,facetsdepth:3,facets:w(["centre_name","biome"],e)}),"/search/samples":(0,$.Yg)("metagenomics_samples",{query:M(["query","temperature","depth"],e),size:25,fields:"METAGENOMICS_PROJECTS,name,description",facetcount:10,facetsdepth:3,facets:w(["biome","experiment_type"],e)}),"/search/analyses":(0,$.Yg)("metagenomics_analyses",{query:(null==e?void 0:e.query)||"domain_source:metagenomics_analyses",size:25,fields:"METAGENOMICS_PROJECTS,METAGENOMICS_SAMPLES,pipeline_version,experiment_type",facetcount:10,facetsdepth:3,facets:w(["biome"],e)})},queryParameters:e,setQueryParameters:t};return n.createElement("section",{className:"vf-content"},n.createElement("h2",null,"Text Search."),n.createElement(r.Provider,{value:a},n.createElement(k,null),n.createElement(C,null),n.createElement("section",{className:"embl-grid"},n.createElement("div",{className:"vf-stack vf-stack--400"},n.createElement(l.rs,null,n.createElement(l.AW,{path:"/search/studies"},n.createElement(o,null),n.createElement(i,null)),n.createElement(l.AW,{path:"/search/samples"},n.createElement(b,null),n.createElement(_,null),n.createElement(o,null),n.createElement(N,null)),n.createElement(l.AW,{path:"/search/analyses"},n.createElement(b,null),n.createElement(_,null),n.createElement(o,null)))),n.createElement(j,null))))}}}]);
//# sourceMappingURL=906.18a0859f.chunk.js.map