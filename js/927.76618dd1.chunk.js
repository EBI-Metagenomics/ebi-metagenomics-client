"use strict";(self.webpackChunkmgportalv2=self.webpackChunkmgportalv2||[]).push([[927],{5927:(e,t,a)=>{a.r(t),a.d(t,{default:()=>k});var o=a(7294),n=a(8840),r=a(5708),s=a.n(r),i=a(402),m=a(1699),c=a(8696),l=a(8110),g=a(964),u=a(2119),d=a(6581),p=a(5457);const k=({includePangenomes:e=!0})=>{const t=(0,o.useRef)(null),a=(0,g.Z)(),[r]=(0,u.B)({"keggmod-page":1,"keggmod-page_size":10,"keggmod-order":""},{"keggmod-page":Number,"keggmod-page_size":Number}),{columns:k,options:b}=(0,d.Z)(),{data:h,loading:f,isStale:G,error:E}=(0,l.Z)(`genomes/${a}/kegg-module`,{page:r["keggmod-page"],ordering:r["keggmod-order"],page_size:r["keggmod-page_size"]});if(f)return o.createElement(i.Z,{size:"large"});if(E)return o.createElement(m.Z,{error:E});if(!h)return o.createElement(i.Z,null);let y=0;const z=h.data.map((e=>String(e.attributes.name))),C=h.data.reduce(((e,t)=>(e[t.attributes.name]=t.attributes.description,e)),{}),Z=h.data.map((e=>{const t=Number(e.attributes["genome-count"]);return y+=t,t})),v=h.data.map((e=>e.attributes["pangenome-count"]));return k[0].Header="Module ID",b.title={text:"Top 10 KEGG module categories"},b.subtitle={text:`Total: ${y} KEGG module matches - Drag to zoom in/out`},b.xAxis={categories:z},b.tooltip={formatter(){const e=C[this.key];let t=`${this.series.name}<br/>Count: ${this.y}`;return e&&(t+=`<br />KEGG Module: ${e}`),t}},b.series=[{name:"Genome",type:"column",data:Z.slice(0,10),colors:p.DC,stack:"genome"}],e&&b.series.push({name:"Pan-genome",type:"column",data:v.slice(0,10),colors:p.DC,stack:"pangenome"}),o.createElement("div",{className:"vf-stack vf-stack--200"},o.createElement(s(),{highcharts:n,options:b,ref:t}),o.createElement(c.Z,{cols:k,data:h,title:`All ${h.meta.pagination.count} KEGG modules`,loading:f,initialPage:r["keggmod-page"]-1,initialPageSize:10,namespace:"keggmod-",isStale:G}))}},6581:(e,t,a)=>{a.d(t,{Z:()=>r});var o=a(7294),n=a(5457);const r=()=>({columns:(0,o.useMemo)((()=>[{Header:"COG ID",accessor:"attributes.name"},{Header:"Description",accessor:"attributes.description"},{Header:"Genome Count",accessor:"attributes.genome-count"},{Header:"Pan-genome count",accessor:"attributes.pangenome-count"}]),[]),options:{chart:{type:"column",height:400,zoomType:"xy",renderTo:"container"},yAxis:{min:0,title:{text:"Number of matches"}},plotOptions:{series:{stacking:"normal"},column:{allowPointSelect:!0,cursor:"pointer",colors:n.DC}},credits:{enabled:!1},legend:{enabled:!0}}})}}]);
//# sourceMappingURL=927.76618dd1.chunk.js.map