"use strict";(self.webpackChunkmgportalv2=self.webpackChunkmgportalv2||[]).push([[988],{3461:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var n=a(7294),l=a(8110),r=a(964),s=a(402),o=a(1699),c=a(4821),i=a(9711),m=a(6313),g=a(2119),u=a(5058);const d=()=>{const e=(0,r.Z)(),[t]=(0,g.B)({"genomes-page":1,"genomes-page_size":10,"genomes-order":""},{"genomes-page":Number,"genomes-page_size":Number}),{data:a,loading:c,error:d,isStale:p}=(0,l.Z)(`genome-catalogues/${e}/genomes`,{page:t["genomes-page"],ordering:t["genomes-order"],page_size:t["genomes-page_size"]});if(c&&!p)return n.createElement(s.Z,{size:"small"});if(d||!a)return n.createElement(o.Z,{error:d});const b=[{id:"biome_id",Header:"Biome",accessor:e=>{var t;return null===(t=e.relationships.biome.data)||void 0===t?void 0:t.id},Cell:({cell:e})=>n.createElement("span",{className:`biome_icon icon_xs ${(0,u.G)(e.value)}`,style:{float:"initial"}}),disableSortBy:!0},{id:"genome",Header:"Accession",accessor:"id",Cell:({cell:e})=>n.createElement(i.rU,{to:`/genomes/${e.value}`},e.value)},{Header:"Length",accessor:"attributes.length"},{Header:"Num. of genomes",accessor:"attributes.num-genomes-total"},{Header:"Completeness",accessor:"attributes.completeness"},{Header:"Contamination",accessor:"attributes.contamination"},{Header:"Type",accessor:"attributes.type",disableSortBy:!0},{Header:"Taxonomy",accessor:"attributes.taxon-lineage",Cell:({cell:e})=>function(e,t){const a=e.split(";");let n=a.pop();for(;-1===n.indexOf("s__");)n=a.pop();for(;n.length<=3;)n=a.pop();return n?function(e,t=""){return e.replace(/;/g,"").replace(/[d|p|c|o|f|g|s]__/g,t)}(n):n}(e.value),disableSortBy:!0},{id:"last_update",Header:"Last Updated",accessor:"attributes.last-update",Cell:({cell:e})=>new Date(e.value).toLocaleDateString()}];return n.createElement(m.Z,{cols:b,data:a,initialPage:t["genomes-page"]-1,initialPageSize:10,className:"mg-anlyses-table",loading:c,isStale:p,namespace:"genomes-",sortable:!0})},p=({tree:e,depth:t=0,shouldExpand:a=!0,collapsing:l=!1,getLabel:r=(e=>e.name)})=>{var s;const[o,c]=(0,n.useState)(a),[i,m]=(0,n.useState)(!1),[g,u]=(0,n.useState)(!1);return(0,n.useEffect)((()=>m(!0)),[]),(0,n.useEffect)((()=>{g&&setTimeout((()=>c(!1)),400)}),[g]),n.createElement("div",{style:{marginLeft:.5*t+"rem"}},n.createElement("div",{className:"mg-hierarchy-selector "+(i&&!l?"show":"")},(null===(s=e.children)||void 0===s?void 0:s.length)?n.createElement("button",{type:"button",className:"mg-expander",onClick:()=>{u(o),o||c(!0)}},o?"▾":"▸"):n.createElement("span",{className:"mg-hierarchy-spacer"}),n.createElement("div",null,n.createElement("span",{className:"mg-hierarchy-label"},r(e)," ",e.countgen&&n.createElement("span",{className:"mg-number"},e.countgen)))),e.children&&e.children.length&&o&&e.children.map((a=>n.createElement(p,{key:a.name,tree:a,depth:t+1,shouldExpand:1===e.countgen&&1===a.countgen,getLabel:r,collapsing:g}))))},b=p,h=()=>{const e=(0,r.Z)(),{data:t,loading:a,error:c}=(0,l.Z)(`genome-catalogues/${e}/downloads/phylo_tree.json`);return a?n.createElement(s.Z,{size:"large"}):c?n.createElement(o.Z,{error:c}):t?n.createElement(b,{tree:t,getLabel:e=>{const t=e.name.split("__").pop();return"genome"===e.type?n.createElement(i.rU,{to:`/genomes/${t}`,style:{backgroundColor:"white"}},t):t||"Unknown"}}):n.createElement(s.Z,null)};var E=a(6528),f=a(1274);const v=[{label:"Genome list",to:"#"},{label:"Taxonomy tree",to:"#phylo-tab"},{label:"Protein catalogue",to:"#protein-catalog-tab"},{label:"Search by Gene",to:"#genome-search-tab"},{label:"Search by MAG",to:"#genome-search-mag-tab"}],y=()=>{const e=(0,r.Z)(),{data:t,loading:a,error:i}=(0,l.Z)(`genome-catalogues/${e}`);if(a)return n.createElement(s.Z,{size:"large"});if(i)return n.createElement(o.Z,{error:i});if(!t)return n.createElement(s.Z,null);const{data:m}=t;return n.createElement("section",{className:"vf-content"},n.createElement("h2",null,m.attributes.name),n.createElement("div",null,n.createElement(E.Z,null,m.attributes.description)),n.createElement(c.Z,{tabs:v}),n.createElement("section",{className:"vf-grid"},n.createElement("div",{className:"vf-stack vf-stack--200"},n.createElement(f.Z,{hash:"",isDefault:!0},n.createElement(d,null)),n.createElement(f.Z,{hash:"#phylo-tab"},n.createElement(h,null)),n.createElement(f.Z,{hash:"#protein-catalog-tab"},n.createElement("h3",null,m.attributes["protein-catalogue-name"]),n.createElement(E.Z,null,m.attributes["protein-catalogue-description"])))))}}}]);
//# sourceMappingURL=988.46b03dac.chunk.js.map