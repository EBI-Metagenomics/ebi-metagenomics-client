<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <!--TODO add metadata-->
    <title>Search</title>
    <meta name="description" content="EMBL-EBI"/><!-- Describe what this page is about -->
    <meta name="keywords" content="bioinformatics, europe, institute"/>
    <!-- A few keywords that relate to the content of THIS PAGE (not the whol project) -->
    <meta name="author" content="EMBL-EBI"/><!-- Your [project-name] here -->
    <meta name="HandheldFriendly" content="true"/>
    <meta name="MobileOptimized" content="width"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="theme-color" content="#70BDBD"/> <!-- Android Chrome mobile browser tab color -->

    <!-- Add information on the life cycle of this page -->
    <meta name="ebi:owner" content="John Doe"/> <!-- Who should be contacted about changes -->
    <meta name="ebi:review-cycle" content="30"/> <!-- In days, how often should the content be reviewed -->
    <meta name="ebi:last-review" content="2015-12-20"/> <!-- The last time the content was reviewed -->
    <meta name="ebi:expiry" content="2016-01-20"/> <!-- When this content is no longer relevant -->

    <!-- If you link to any other sites frequently, consider optimising performance with a DNS prefetch -->
    <link rel="dns-prefetch" href="//embl.de"/>

    <!-- If you have custom icon, replace these as appropriate.
         You can generate them at realfavicongenerator.net -->
    <link rel="icon" type="image/x-icon"
          href="https://wwwdev.ebi.ac.uk/web_guidelines/EBI-Framework/v1.2/images/logos/EMBL-EBI/favicons/favicon.ico"/>
    <link rel="icon" type="image/png"
          href="https://wwwdev.ebi.ac.uk/web_guidelines/EBI-Framework/v1.2/images/logos/EMBL-EBI/favicons/favicon-32x32.png"/>
    <link rel="icon" type="image/png" sizes="192Ã—192"
          href="https://wwwdev.ebi.ac.uk/web_guidelines/EBI-Framework/v1.2/images/logos/EMBL-EBI/favicons/android-chrome-192x192.png"/>
    <!-- Android (192px) -->
    <link rel="apple-touch-icon-precomposed" sizes="114x114"
          href="https://wwwdev.ebi.ac.uk/web_guidelines/EBI-Framework/v1.2/images/logos/EMBL-EBI/favicons/apple-touch-icon-114x114.png"/>
    <!-- For iPhone 4 Retina display (114px) -->
    <link rel="apple-touch-icon-precomposed" sizes="72x72"
          href="https://wwwdev.ebi.ac.uk/web_guidelines/EBI-Framework/v1.2/images/logos/EMBL-EBI/favicons/apple-touch-icon-72x72.png"/>
    <!-- For iPad (72px) -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144"
          href="https://wwwdev.ebi.ac.uk/web_guidelines/EBI-Framework/v1.2/images/logos/EMBL-EBI/favicons/apple-touch-icon-144x144.png"/>
    <!-- For iPad retinat (144px) -->
    <link rel="apple-touch-icon-precomposed"
          href="https://wwwdev.ebi.ac.uk/web_guidelines/EBI-Framework/v1.2/images/logos/EMBL-EBI/favicons/apple-touch-icon-57x57.png"/>
    <!-- For iPhone (57px) -->
    <link rel="mask-icon"
          href="https://wwwdev.ebi.ac.uk/web_guidelines/EBI-Framework/v1.2/images/logos/EMBL-EBI/favicons/safari-pinned-tab.svg"
          color="#ffffff"/> <!-- Safari icon for pinned tab -->
    <meta name="msapplication-TileColor" content="#2b5797"/> <!-- MS Icons -->
    <meta name="msapplication-TileImage"
          content="https://wwwdev.ebi.ac.uk/web_guidelines/EBI-Framework/v1.2/images/logos/EMBL-EBI/favicons/mstile-144x144.png"/>

    <!-- CSS: implied media=all -->
    <!-- CSS concatenated and minified via ant build script-->
    <!--<link rel="stylesheet" href="/static/css/theme-embl-petrol.css" type="text/css" media="all"/>-->
    <!--<link rel="stylesheet" href="/static/css/ebi-global.css" type="text/css" media="all"/>-->
    <!--<link rel="stylesheet" href="/static/css/site.css" type="text/css" media="all"/>-->
    <!--<link rel="stylesheet" href="/static/fonts/fonts.css" type="text/css" media="all"/>-->

    <!-- Use this CSS file for any custom styling -->
    <!--
      <link rel="stylesheet" href="css/custom.css" type="text/css" media="all">
    -->

    <!-- If you have a custom header image or colour -->
    <meta name="ebi:masthead-color" content="#091314"/>
    <meta name="ebi:masthead-image"
          content="https://wwwdev.ebi.ac.uk/web_guidelines/EBI-Framework/v1.2/images/backgrounds/embl-ebi-background-4.jpg"/>
</head>

<body class="level2"><!-- add any of your classes or IDs -->
<div id="header"></div>

<!-- Suggested layout containers / #content -->
<div id="content">
    <div id="main-content-area" class="row" role="main">
        <div class="columns small-12 medium-12 large-12">
            <h2>Search EBI Metagenomics</h2>
        </div>
    </div>

    <div class="row">
        <div class="columns small-12 medium-12 large-12">
            <ul class="tabs" data-tabs id="results-tabs">
                <li class="tabs-title is-active"><a href="#projectsTab" aria-selected="true">Projects</a></li>
                <li class="tabs-title"><a href="#samplesTab">Samples</a></li>
                <li class="tabs-title"><a href="#runsTab">Runs</a></li>
            </ul>
            <div class="tabs-content" data-tab-content="results-tabs">
                <div class="tabs-panel active" id="projectsTab">
                    <div class="row">
                        <div class="columns small-2 medium-2 large-2" id="projectsFilters">
                        </div>
                        <div class="columns small-10 medium-10 large-10" id="projects">
                        </div>
                    </div>
                </div>
                <div class="tabs-panel" id="samplesTab">
                    <div class="row">
                        <div class="columns small-2 medium-2 large-2" id="samplesFilters">
                        </div>
                        <div class="columns small-10 medium-10 large-10" id="samples">
                        </div>
                    </div>
                </div>
                <div class="tabs-panel" id="runsTab">
                    <div class="row">
                        <div class="columns small-2 medium-2 large-2" id="runsFilters">
                        </div>
                        <div class="columns small-10 medium-10 large-10" id="runs">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script id="filtersTmpl" type="text/template">
    <form id="<%= formId %>">
        <h3>Filter results</h3>
        <a id="clearFilters" class="button">Clear filters</a>
        <!--Function to build successive hierarchy of checkboxes-->
        <% function drawAndExpand(child, name, parentValue){ %>
        <% let forLabel = child.value+'checkbox'; %>
        <% if (child.children){ %>
        <button class="disp-children">&#9654;</button>
        <% } %>
        <input name="<%= name %>" type="checkbox" value="<%= parentValue+child.value %>" class="facet-checkbox"
               id="<%= forLabel %>"/> <label for="<%= forLabel %>"><%= child.label %> (<%= child.count %>)</label>
        <% _.each(child.children, function(child2){ %>
        <div class="facet-child-group">
            <% drawAndExpand(child2, name, parentValue+child.value+'/'); %>
        </div>
        <% });%>

        <% } %>
        <% _.each(facets, function(facet){ if (facet.label!=='Source'){ %>
        <div class="facet-group">
            <% if (facet.type==='slider') {%>
                <h5><%= facet.label %> (<%= facet.units %>)</h5>
                <div class="row columns">
                    <div id="<%= formId+facet.label+'slider' %>" class="slider" data-slider>
                        <span class="slider-handle" data-slider-handle role="slider" tabindex="1"
                              aria-controls="<%= formId+facet.label+'min' %>"></span>
                        <span class="slider-fill" data-slider-fill></span>
                        <span class="slider-handle" data-slider-handle role="slider" tabindex="1"
                              aria-controls="<%= formId+facet.label+'max' %>"></span>
                    </div>
                </div>
                <div class="row columns">
                    <input class='facet-slider-input left' name="<%= facet.label+'min' %>" id="<%= formId+facet.label+'min' %>" type="number">
                    <input class='facet-slider-input right' name="<%= facet.label+'max' %>" id="<%= formId+facet.label+'max' %>" type="number">
                </div>
            <% } else { %>
                <h5><%= facet.label %></h5>
            <% _.each(facet.facetValues, function(child){ %>
                <div class="facet-child-group show">
                    <% drawAndExpand(child, facet.id, '') %>
                </div>
            <% }); %>
            <% } %>
        </div>
        <% }});%>
    </form>
</script>

<script id="projectResultsTmpl" type="text/template">
    <h5>Showing <%= entries.length %> out of <%= hitCount %></h5>
    <table>
        <thead>
        <tr>
            <td>Biome</td>
            <td>Project</td>
            <td>Name</td>
            <td>Description</td>
        </tr>
        </thead>
        <tbody>
        <% _.each(entries, function(entry){ %>
        <% const fields = entry.fields %>
        <tr class="search-row">
            <td>
                <div>
                    <% _.each(entry.biomes, function(biome){ %>
                    <span class="biome_icon icon_xs <%= biome.icon %>" title="<%= biome.name %>"></span>
                    <% }); %>
                </div>
            </td>
            <td>
                <div><a href="<%= entry.study_link %>"><%= entry.id %></a></div>
            </td>
            <td>
                <div><%= fields.name %></div>
            </td>
            <td>
                <div><%= fields.description %></div>
            </td>
        </tr>
        <% }); %>
        </tbody>
    </table>
</script>

<script id="samplesResultsTmpl" type="text/template">
    <h5>Showing <%= entries.length %> out of <%= hitCount %></h5>
    <table>
        <thead>
        <tr>
            <td>Sample</td>
            <td>Project</td>
            <td>Name</td>
            <td>Description</td>
        </tr>
        </thead>
        <tbody>
        <% _.each(entries, function(entry){ %>
        <% const fields = entry.fields %>
        <tr class="search-row">
            <td>
                <div><a href="<%= entry.sample_link %>"><%= entry.id %></a></div>
            </td>
            <td>
                <div><a href="<%= entry.study_link %>"><%= fields.METAGENOMICS_PROJECTS %></a></div>
            </td>
            <td>
                <div><%= fields.name %></div>
            </td>
            <td>
                <div><%= fields.description %></div>
            </td>
        </tr>
        <% }); %>
        </tbody>
    </table>
</script>

<script id="runsResultsTmpl" type="text/template">
    <h5>Showing <%= entries.length %> out of <%= hitCount %></h5>
    <table>
        <thead>
        <tr>
            <td>Run</td>
            <td>Sample</td>
            <td>Project</td>
            <td>Experiment Type</td>
            <td>Pipeline Version</td>
        </tr>
        </thead>
        <tbody>
        <% _.each(entries, function(entry){ %>
        <% const fields = entry.fields %>
        <tr class="search-row">
            <td>
                <div><a href="<%= entry.run_link %>"><%= entry.id %></a></div>
            </td>
            <td>
                <div><a href="<%= entry.sample_link %>"><%= fields.METAGENOMICS_SAMPLES %></a></div>
            </td>
            <td>
                <div><a href="<%= entry.study_link %>"><%= fields.METAGENOMICS_PROJECTS %></a></div>
            </td>
            <td>
                <div><%= fields.experiment_type %></div>
            </td>
            <td>
                <div><a href="<%= entry.pipeline_link %>"><%= fields.pipeline_version %></a></div>
            </td>
        </tr>
        <% }); %>
        </tbody>
    </table>
</script>

<!-- Optional local footer (insert citation / project-specific copyright / etc here -->
<!-- <footer id="local-footer" class="local-footer" role="local-footer"> -->
<!-- <div class="row"> -->
<!-- <span class="reference">How to reference this page: ...</span> -->
<!-- </div> -->
<!-- </footer> -->
<!-- End optional local footer -->
<!-- </div> -->
<!-- End suggested layout containers / #content -->

<div id="footer"></div>

<!-- JavaScript -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script defer="defer" src="/static/js/script.js"></script>


<!-- The Foundation theme JavaScript -->

<script src="/static/js/foundation.js"></script>
<script src="/static/libraries/foundation.util.touch.js"></script>
<script src="/static/js/foundationExtendEBI.js"></script>
<script type="text/JavaScript">
    $(document).ready(function () {
        $(document).foundation();
        $(document).foundationExtendEBI();
    });
</script>
<script src="js/search.js"></script>

<!-- Google Analytics details... -->
<!-- Change UA-XXXXX-X to be your util's ID -->
<!--
<script>
  window._gaq = [['_setAccount','UAXXXXXXXX1'],['_trackPageview'],['_trackPageLoadTime']];
  Modernizr.load({
    load: ('https:' == location.protocol ? '//ssl' : '//www') + '.google-analytics.com/ga.js'
  });
</script>
-->
</body>

</html>
